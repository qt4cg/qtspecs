<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" lang="EN"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: Saxonica--><title>EXPath File Module 4.0 </title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="stylesheet" type="text/css" href="css/w3c-base.css"><link rel="stylesheet" href="css/qtspecs.css"><link rel="stylesheet" href="css/xpath-functions-40.css"><script src="js/fo-datalist.js"></script><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css"></head><body><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p></div><div class="head"><p><a href="https://www.w3.org/"><img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" height="48" width="72"></a></p><h1><a id="title"></a>EXPath File Module 4.0 </h1><h2><a id="w3c-doctype"></a>W3C Editor's Draft <span class="deltaxml-old" style="background:#FF5555">2</span><span class="deltaxml-new" style="background:#90EE90">8</span>&nbsp;July&nbsp;2025</h2><dl><dt>This version:</dt><dd><a href="https://qt4cg.org/specifications/EXPath/file-40/">https://qt4cg.org/specifications/EXPath/file-40/</a></dd><dt>Latest version of EXPath File Module 4.0:</dt><dd><a href="https://qt4cg.org/specifications/EXPath/file-40/">https://qt4cg.org/specifications/EXPath/file-40/</a></dd><dt>Most recent Recommendation of EXPath File Module:</dt><dd><a href="http://expath.org/spec/file">http://expath.org/spec/file</a></dd><dt><span class="deltaxml-old" style="background:#FF5555">Editors:</span></dt><dt><span class="deltaxml-new" style="background:#90EE90">Editor:</span></dt><dd>Christian Grün, BaseX GmbH</dd><dd><span class="deltaxml-old" style="background:#FF5555">Matthias Brantner, 28msec GmbH</span></dd><dd><span class="deltaxml-old" style="background:#FF5555">Gabriel Petrovay, 28msec GmbH</span></dd></dl><p>Please check the <a href="https://www.w3.org/XML/2017/qt-errata/xpath-functions-31-errata.html"><strong>errata</strong></a> for any errors or issues reported since publication.</p><p>See also <a href="https://www.w3.org/2003/03/Translations/byTechnology?technology=xpath-functions-40"><strong>translations</strong></a>.</p><p>This document is also available in these non-normative formats: <a href="file-40.xml">Specification in XML format</a> and&nbsp;<a href="function-catalog.xml">XML function catalog</a>.</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2000&nbsp;<a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr></div><div><h2><a id="abstract"></a>Abstract</h2><p>This document defines a file system API for XPath 4.0. It defines extension functions to perform file system related operations such as listing, reading, or writing files or directories.</p><p>The document is an update of the original <a href="#expath-file">[EXPath File 1.0]</a> specification, developed by the <a href="http://www.w3.org/community/expath/">EXPath Community Group</a>, defined for <a href="#xpath20">[XML Path Language (XPath) 2.0]</a> and published in 2013.</p><p>The principal semantic alteration is use of functional argument defaults available in XPath 4.0.</p><p>These functions are defined for use in <a href="#xpath-40">[XML Path Language (XPath) 4.0]</a> and <a href="#xquery-40">[XQuery 4.1: An XML Query Language]</a> and <a href="#xslt-40">[XSL Transformations (XSLT) Version 4.0]</a> and other related XML standards. The signatures and summaries of functions defined in this document are available at: <a href="https://qt4cg.org/specifications/EXPath/file-40/">https://qt4cg.org/specifications/EXPath/file-40/</a>.</p><p>A summary of changes since published version 1.0 (the XPath 2.0 version) is provided at <a href="#changelog"><b>F Changes since version 1.0</b></a>.</p></div><div><h2><a id="status"></a>Status of this Document</h2><p>This version of the specification is work in progress. It is produced by the QT4 Working Group, officially the W3C XSLT 4.0 Extensions Community Group. Individual functions specified in the document may be at different stages of review, reflected in their <b>History</b> notes. Comments are invited, in the form of GitHub issues at <a href="https://github.com/qt4cg/qtspecs">https://github.com/qt4cg/qtspecs</a>.</p><div class="dedication" id="dedication"><h3>Dedication</h3><p>The publications of this community group <a href="../xquery-40/xpath-40.html#dedication">are dedicated</a> to our co-chair, Michael Sperberg-McQueen&nbsp;(1954–2024).</p></div></div><nav id="toc"><div id="function-finder"><div class="ffheader">FUNCTION FINDER</div><div><span style="display: none;" class="delete_version"><span>Function search: <input id="select-fn" list="fn-list" type="text"><button id="help-select-fn-button">?</button></span><p id="help-select-fn" style="display:none;">Type a function name, or press down arrow for a list.</p><datalist id="fn-list"><option value="file:append⁣"></option><option value="file:append-binary⁣"></option><option value="file:append-text⁣"></option><option value="file:append-text-lines⁣"></option><option value="file:base-dir⁣"></option><option value="file:children⁣"></option><option value="file:copy⁣"></option><option value="file:create-dir⁣"></option><option value="file:create-temp-dir⁣"></option><option value="file:create-temp-file⁣"></option><option value="file:current-dir⁣"></option><option value="file:delete⁣"></option><option value="file:dir-separator⁣"></option><option value="file:exists⁣"></option><option value="file:is-dir⁣"></option><option value="file:is-file⁣"></option><option value="file:last-modified⁣"></option><option value="file:line-separator⁣"></option><option value="file:list⁣"></option><option value="file:move⁣"></option><option value="file:name⁣"></option><option value="file:parent⁣"></option><option value="file:path-separator⁣"></option><option value="file:path-to-native⁣"></option><option value="file:path-to-uri⁣"></option><option value="file:read-binary⁣"></option><option value="file:read-text⁣"></option><option value="file:read-text-lines⁣"></option><option value="file:resolve-path⁣"></option><option value="file:size⁣"></option><option value="file:temp-dir⁣"></option><option value="file:write⁣"></option><option value="file:write-binary⁣"></option><option value="file:write-text⁣"></option><option value="file:write-text-lines⁣"></option></datalist></span><span style="display: none;" class="add_version"><span>Function search: <input id="select-fn" list="fn-list" type="text"><button id="help-select-fn-button">?</button></span><p id="help-select-fn" style="display:none;">Type a function name, or press down arrow for a list.</p><datalist id="fn-list"><option value="file:append⁣"></option><option value="file:append-binary⁣"></option><option value="file:append-text⁣"></option><option value="file:append-text-lines⁣"></option><option value="file:base-dir⁣"></option><option value="file:children⁣"></option><option value="file:copy⁣"></option><option value="file:create-dir⁣"></option><option value="file:create-temp-dir⁣"></option><option value="file:create-temp-file⁣"></option><option value="file:current-dir⁣"></option><option value="file:delete⁣"></option><option value="file:descendants⁣"></option><option value="file:dir-separator⁣"></option><option value="file:exists⁣"></option><option value="file:is-absolute⁣"></option><option value="file:is-dir⁣"></option><option value="file:is-file⁣"></option><option value="file:last-modified⁣"></option><option value="file:line-separator⁣"></option><option value="file:list⁣"></option><option value="file:list-roots⁣"></option><option value="file:move⁣"></option><option value="file:name⁣"></option><option value="file:parent⁣"></option><option value="file:path-separator⁣"></option><option value="file:path-to-native⁣"></option><option value="file:path-to-uri⁣"></option><option value="file:read-binary⁣"></option><option value="file:read-text⁣"></option><option value="file:read-text-lines⁣"></option><option value="file:resolve-path⁣"></option><option value="file:size⁣"></option><option value="file:temp-dir⁣"></option><option value="file:write⁣"></option><option value="file:write-binary⁣"></option><option value="file:write-text⁣"></option><option value="file:write-text-lines⁣"></option></datalist></span><span class="modify_version"><span>Function search: <input id="select-fn" list="fn-list" type="text"><button id="help-select-fn-button">?</button></span><p id="help-select-fn" style="display:none;">Type a function name, or press down arrow for a list.</p><datalist id="fn-list"><option value="file:append⁣"></option><option value="file:append-binary⁣"></option><option value="file:append-text⁣"></option><option value="file:append-text-lines⁣"></option><option value="file:base-dir⁣"></option><option value="file:children⁣"></option><option value="file:copy⁣"></option><option value="file:create-dir⁣"></option><option value="file:create-temp-dir⁣"></option><option value="file:create-temp-file⁣"></option><option value="file:current-dir⁣"></option><option value="file:delete⁣"></option><option value="file:descendants⁣">+[[]]+</option><option value="file:dir-separator⁣"></option><option value="file:exists⁣"></option><option value="file:is-absolute⁣">+[[]]+</option><option value="file:is-dir⁣"></option><option value="file:is-file⁣"></option><option value="file:last-modified⁣"></option><option value="file:line-separator⁣"></option><option value="file:list⁣"></option><option value="file:list-roots⁣">+[[]]+</option><option value="file:move⁣"></option><option value="file:name⁣"></option><option value="file:parent⁣"></option><option value="file:path-separator⁣"></option><option value="file:path-to-native⁣"></option><option value="file:path-to-uri⁣"></option><option value="file:read-binary⁣"></option><option value="file:read-text⁣"></option><option value="file:read-text-lines⁣"></option><option value="file:resolve-path⁣"></option><option value="file:size⁣"></option><option value="file:temp-dir⁣"></option><option value="file:write⁣"></option><option value="file:write-binary⁣"></option><option value="file:write-text⁣"></option><option value="file:write-text-lines⁣"></option></datalist></span></div></div><h2><a id="contents"></a>Table of Contents<span class="expalltoc collapsed"> ▶</span></h2><ol class="toc"><li><details><summary><a href="#intro"><span class="secno">1 </span><span class="content toc-chg">Introduction</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#error.management"><span class="secno">1.1 </span><span class="content">Error management</span></a></summary></details></li><li><details><summary><a href="#file-paths"><span class="secno">1.2 </span><span class="content">File Paths</span></a></summary></details></li><li><details><summary><a href="#exec"><span class="secno">1.3 </span><span class="content">Function Execution</span></a></summary></details></li><li><details><summary><a href="#testing"><span class="secno">1.4 </span><span class="content">Test suite</span></a></summary></details></li><li><details><summary><a href="#conformance"><span class="secno">1.5 </span><span class="content">Conformance</span></a></summary></details></li><li><details><summary><a href="#namespace-prefixes"><span class="secno">1.6 </span><span class="content">Namespaces and prefixes</span></a></summary></details></li><li><details><summary><a href="#func-signatures"><span class="secno">1.7 </span><span class="content">Function signatures and descriptions</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#props"><span class="secno">2 </span><span class="content">File Properties</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#func-file-exists"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">2.1 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:exists</span></span></a><a href="#func-file-name"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">2.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">file:name</span></span></a></summary></details></li><li class="add_version" style="display: none;"><details><summary><a href="#func-file-last-modified"><span class="secno">2.2 </span><span class="content">file:last-modified</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-last-modified"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">2.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">file:last-modified</span></span></a></summary></details></li><li class="add_version" style="display: none;"><details><summary><a href="#func-file-size"><span class="secno">2.3 </span><span class="content toc-chg">file:size</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-size"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">2.3 </span></span><span class="content toc-chg"><span class="deltaxml-new" style="background:#90EE90">file:size</span></span></a></summary></details></li><li class="add_version" style="display: none;"><details><summary><a href="#func-file-exists"><span class="secno">2.4 </span><span class="content">file:exists</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-exists"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">2.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">file:exists</span></span></a></summary></details></li><li><details><summary><a href="#func-file-is-dir"><span style="display: none;" class="delete_version"><span class="secno">2.2 </span><span class="content">file:is-dir</span></span><span style="display: none;" class="add_version"><span class="secno">2.5 </span><span class="content">file:is-dir</span></span><span class="modify_version"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">2.2</span><span class="deltaxml-new" style="background:#90EE90">2.5</span> </span><span class="content">file:is-dir</span></span></a></summary></details></li><li><details><summary><a href="#func-file-is-file"><span style="display: none;" class="delete_version"><span class="secno">2.3 </span><span class="content">file:is-file</span></span><span style="display: none;" class="add_version"><span class="secno">2.6 </span><span class="content">file:is-file</span></span><span class="modify_version"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">2.3</span><span class="deltaxml-new" style="background:#90EE90">2.6</span> </span><span class="content">file:is-file</span></span></a></summary></details></li><li><details><summary><a href="#func-file-last-modified"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">2.4 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:last-modified</span></span></a><a href="#func-file-is-absolute"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">2.7 </span></span><span class="content toc-chg"><span class="deltaxml-new" style="background:#90EE90">file:is-absolute</span></span></a></summary></details></li><li class="delete_version" style="display: none;"><details><summary><a href="#func-file-size"><span class="secno">2.5 </span><span class="content">file:size</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-size"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">2.5 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:size</span></span></a></summary></details></li></ol></details></li><li><details><summary><a href="#entities"><span class="secno">3 </span><span class="content">Manipulation of Files as Entities</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#func-file-copy"><span class="secno">3.1 </span><span class="content">file:copy</span></a></summary></details></li><li><details><summary><a href="#func-file-create-dir"><span class="secno">3.2 </span><span class="content">file:create-dir</span></a></summary></details></li><li><details><summary><a href="#func-file-create-temp-dir"><span style="display: none;" class="delete_version"><span class="secno">3.3 </span><span class="content">file:create-temp-dir</span></span><span style="display: none;" class="add_version"><span class="secno">3.3 </span><span class="content toc-chg">file:create-temp-dir</span></span><span class="modify_version"><span class="secno">3.3 </span><span class="content toc-chg">file:create-temp-dir</span></span></a></summary></details></li><li><details><summary><a href="#func-file-create-temp-file"><span style="display: none;" class="delete_version"><span class="secno">3.4 </span><span class="content">file:create-temp-file</span></span><span style="display: none;" class="add_version"><span class="secno">3.4 </span><span class="content toc-chg">file:create-temp-file</span></span><span class="modify_version"><span class="secno">3.4 </span><span class="content toc-chg">file:create-temp-file</span></span></a></summary></details></li><li><details><summary><a href="#func-file-delete"><span class="secno">3.5 </span><span class="content">file:delete</span></a></summary></details></li><li><details><summary><a href="#func-file-list"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">3.6 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:list</span></span></a><a href="#func-file-move"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">3.6 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">file:move</span></span></a></summary></details></li><li class="delete_version" style="display: none;"><details><summary><a href="#func-file-move"><span class="secno">3.7 </span><span class="content">file:move</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-move"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">3.7 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:move</span></span></a></summary></details></li></ol></details></li><li><details><summary><a href="#in-out"><span class="secno">4 </span><span class="content">Input/Output</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#func-file-append"><span style="display: none;" class="delete_version"><span class="secno">4.1 </span><span class="content">file:append</span></span><span style="display: none;" class="add_version"><span class="secno">4.1 </span><span class="content toc-chg">file:append</span></span><span class="modify_version"><span class="secno">4.1 </span><span class="content toc-chg">file:append</span></span></a></summary></details></li><li><details><summary><a href="#func-file-append-binary"><span class="secno">4.2 </span><span class="content">file:append-binary</span></a></summary></details></li><li><details><summary><a href="#func-file-append-text"><span class="secno">4.3 </span><span class="content">file:append-text</span></a></summary></details></li><li><details><summary><a href="#func-file-append-text-lines"><span class="secno">4.4 </span><span class="content">file:append-text-lines</span></a></summary></details></li><li><details><summary><a href="#func-file-read-binary"><span style="display: none;" class="delete_version"><span class="secno">4.5 </span><span class="content">file:read-binary</span></span><span style="display: none;" class="add_version"><span class="secno">4.5 </span><span class="content toc-chg">file:read-binary</span></span><span class="modify_version"><span class="secno">4.5 </span><span class="content toc-chg">file:read-binary</span></span></a></summary></details></li><li><details><summary><a href="#func-file-read-text"><span style="display: none;" class="delete_version"><span class="secno">4.6 </span><span class="content">file:read-text</span></span><span style="display: none;" class="add_version"><span class="secno">4.6 </span><span class="content toc-chg">file:read-text</span></span><span class="modify_version"><span class="secno">4.6 </span><span class="content toc-chg">file:read-text</span></span></a></summary></details></li><li><details><summary><a href="#func-file-read-text-lines"><span style="display: none;" class="delete_version"><span class="secno">4.7 </span><span class="content">file:read-text-lines</span></span><span style="display: none;" class="add_version"><span class="secno">4.7 </span><span class="content toc-chg">file:read-text-lines</span></span><span class="modify_version"><span class="secno">4.7 </span><span class="content toc-chg">file:read-text-lines</span></span></a></summary></details></li><li><details><summary><a href="#func-file-write"><span style="display: none;" class="delete_version"><span class="secno">4.8 </span><span class="content">file:write</span></span><span style="display: none;" class="add_version"><span class="secno">4.8 </span><span class="content toc-chg">file:write</span></span><span class="modify_version"><span class="secno">4.8 </span><span class="content toc-chg">file:write</span></span></a></summary></details></li><li><details><summary><a href="#func-file-write-binary"><span class="secno">4.9 </span><span class="content">file:write-binary</span></a></summary></details></li><li><details><summary><a href="#func-file-write-text"><span class="secno">4.10 </span><span class="content">file:write-text</span></a></summary></details></li><li><details><summary><a href="#func-file-write-text-lines"><span class="secno">4.11 </span><span class="content">file:write-text-lines</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#paths"><span class="secno">5 </span><span class="content">Paths</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#func-file-name"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">5.1 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:name</span></span></a><a href="#func-file-parent"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">file:parent</span></span></a></summary></details></li><li><details><summary><a href="#func-file-parent"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">5.2 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:parent</span></span></a><a href="#func-file-children"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">file:children</span></span></a></summary></details></li><li><details><summary><a href="#func-file-children"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">5.3 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:children</span></span></a><a href="#func-file-descendants"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.3 </span></span><span class="content toc-chg"><span class="deltaxml-new" style="background:#90EE90">file:descendants</span></span></a></summary></details></li><li class="add_version" style="display: none;"><details><summary><a href="#func-file-list"><span class="secno">5.4 </span><span class="content toc-chg">file:list</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-list"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.4 </span></span><span class="content toc-chg"><span class="deltaxml-new" style="background:#90EE90">file:list</span></span></a></summary></details></li><li class="add_version" style="display: none;"><details><summary><a href="#func-file-list-roots"><span class="secno">5.5 </span><span class="content toc-chg">file:list-roots</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-list-roots"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.5 </span></span><span class="content toc-chg"><span class="deltaxml-new" style="background:#90EE90">file:list-roots</span></span></a></summary></details></li><li class="add_version" style="display: none;"><details><summary><a href="#func-file-resolve-path"><span class="secno">5.6 </span><span class="content toc-chg">file:resolve-path</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-resolve-path"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.6 </span></span><span class="content toc-chg"><span class="deltaxml-new" style="background:#90EE90">file:resolve-path</span></span></a></summary></details></li><li><details><summary><a href="#func-file-path-to-native"><span style="display: none;" class="delete_version"><span class="secno">5.4 </span><span class="content">file:path-to-native</span></span><span style="display: none;" class="add_version"><span class="secno">5.7 </span><span class="content">file:path-to-native</span></span><span class="modify_version"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">5.4</span><span class="deltaxml-new" style="background:#90EE90">5.7</span> </span><span class="content">file:path-to-native</span></span></a></summary></details></li><li><details><summary><a href="#func-file-path-to-uri"><span style="display: none;" class="delete_version"><span class="secno">5.5 </span><span class="content">file:path-to-uri</span></span><span style="display: none;" class="add_version"><span class="secno">5.8 </span><span class="content">file:path-to-uri</span></span><span class="modify_version"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">5.5</span><span class="deltaxml-new" style="background:#90EE90">5.8</span> </span><span class="content">file:path-to-uri</span></span></a></summary></details></li><li class="delete_version" style="display: none;"><details><summary><a href="#func-file-resolve-path"><span class="secno">5.6 </span><span class="content">file:resolve-path</span></a></summary></details></li><li class="modify_version"><details><summary><a href="#func-file-resolve-path"><span class="secno"><span class="deltaxml-old" style="background:#FF5555">5.6 </span></span><span class="content"><span class="deltaxml-old" style="background:#FF5555">file:resolve-path</span></span></a></summary></details></li></ol></details></li><li><details><summary><a href="#sys-props"><span class="secno">6 </span><span class="content">System Properties</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#func-file-dir-separator"><span class="secno">6.1 </span><span class="content">file:dir-separator</span></a></summary></details></li><li><details><summary><a href="#func-file-line-separator"><span class="secno">6.2 </span><span class="content">file:line-separator</span></a></summary></details></li><li><details><summary><a href="#func-file-path-separator"><span class="secno">6.3 </span><span class="content">file:path-separator</span></a></summary></details></li><li><details><summary><a href="#func-file-temp-dir"><span class="secno">6.4 </span><span class="content">file:temp-dir</span></a></summary></details></li><li><details><summary><a href="#func-file-base-dir"><span class="secno">6.5 </span><span class="content">file:base-dir</span></a></summary></details></li><li><details><summary><a href="#func-file-current-dir"><span class="secno">6.6 </span><span class="content">file:current-dir</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#biblio"><span class="secno">A </span><span class="content">References</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#normative-biblio"><span class="secno">A.1 </span><span class="content">Normative references</span></a></summary></details></li><li><details><summary><a href="#non-normative-biblio"><span class="secno">A.2 </span><span class="content">Non-normative references</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#error-summary"><span class="secno">B </span><span class="content">Error summary</span></a></summary></details></li><li><details><summary><a href="#glossary"><span class="secno">C </span><span class="content">Glossary</span></a></summary></details></li><li><details><summary><a href="#other-functions"><span class="secno">D </span><span class="content">Other Functions</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#functions-in-other-w3c-specs"><span class="secno">D.1 </span><span class="content">XPath Functions and Operators Defined in Other W3C Recommendations</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#functions-defined-in-XPathFO"><span class="secno">D.1.1 </span><span class="content">Functions and Operators Defined in XPath and XQuery Functions and Operators</span></a></summary></details></li></ol></details></li></ol></details></li><li><details><summary><a href="#impl-def"><span class="secno">E </span><span class="content">Checklist of implementation-defined features</span></a></summary></details></li><li><details><summary><a href="#changelog"><span class="secno">F </span><span class="content">Changes since version 1.0</span></a><span class="exptoc collapsed"> ▶</span></summary><ol class="toc"><li><details><summary><a href="#changes-summary"><span class="secno">F.1 </span><span class="content">Summary of Changes</span></a></summary></details></li><li><details><summary><a href="#changes-to-function-signatures"><span class="secno">F.2 </span><span class="content">Changes to Function Signatures</span></a></summary></details></li><li><details><summary><a href="#editorial-changes"><span class="secno">F.3 </span><span class="content">Editorial Changes</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#back-compatibility"><span class="secno">G </span><span class="content">Compatibility with Previous Versions</span></a></summary></details></li></ol></nav><hr><div class="body"><div class="div1"><h2><a id="intro"></a>1 <a href="#intro" style="text-decoration: none">Introduction</a></h2><div class="changes"><p class="changesHeading">Changes in 4.0<span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-size"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a></p><ol><li><p>Use the arrows to browse significant changes since the 1.0 version of this specification.</p></li><li><p>Sections with significant changes are marked Δ in the table of contents. New functions introduced in this version are marked ➕ in the table of contents.</p></li></ol></div><p>The purpose of this document is to define functions to manipulate files within a local filesystem and their representations<span class="deltaxml-new" style="background:#90EE90">, for</span> inclusion in XPath 4.0, XQuery 4.0, and XSLT 4.0.</p><p>The exact syntax used to call these functions and operators is specified in <a href="#xpath-40">[XML Path Language (XPath) 4.0]</a>, <a href="#xquery-40">[XQuery 4.1: An XML Query Language]</a> and <a href="#xslt-40">[XSL Transformations (XSLT) Version 4.0]</a>. </p><p>This document defines several classes of functions:</p><ul><li><p>Functions to examine the properties of files, such as size and modification dates.</p></li><li><p>Functions to perform basic operations on files as entities, such as copying, deletion, creating directories and establishment of temporary files.</p></li><li><p>Functions to read and write to and from files in various formats.</p></li><li><p>Functions to <span class="deltaxml-new" style="background:#90EE90">access and </span>manipulate file paths.</p></li><li><p>Functions to examine properties of the underlying file system and current context, such as establishing the current working directory or the characters used for various separators within paths or files.</p></li></ul><p>References to specific sections of <span class="deltaxml-old" style="background:#FF5555">some </span>other specifications are indicated by cross-document links in this document. Each such link consists of a pointer to a specific section followed a superscript specifying the linked document. The superscripts have the following meanings: <span class="deltaxml-old" style="background:#FF5555">FO40</span><span class="deltaxml-new" style="background:#90EE90">FO</span> <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a>, SER30 <a href="#ser30">[XSLT and XQuery Serialization 3.0]</a> and XS2 <a href="#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> .</p><div class="div2"><h3><a id="error.management"></a>1.1 <a href="#error.management" style="text-decoration: none">Error management</a></h3><p>Error conditions are identified by a code (a <code>QName</code>.) When such an error condition is reached in the evaluation of an expression, a dynamic error is thrown, with the corresponding error code (as if the standard XPath function <code>error()</code> had been called.)</p><p><span style="display: none;" class="delete_version">In this specification these codes use the <code>http://expath.org/ns/file</code> namespace and a 'descriptive string' local part, e.g. [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>], rather than the <code>http://www.w3.org/2005/xqt-errors</code> namespace and alpha-numeric local part, e.g. <code>err:FOCH0004</code>, used in <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a>. These error codes were chosen originally in the 1.0 version of 2013.</span><span style="display: none;" class="add_version">In this specification these codes use the <code>http://expath.org/ns/file</code> namespace and a “descriptive string” local part, e.g. [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>], rather than the <code>http://www.w3.org/2005/xqt-errors</code> namespace and alpha-numeric local part, e.g. <code>err:FOCH0004</code>, used in <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a>. These error codes were chosen originally in the 1.0 version of 2013.</span><span class="modify_version">In this specification these codes use the <code>http://expath.org/ns/file</code> namespace and a <span class="deltaxml-old" style="background:#FF5555">'</span><span class="deltaxml-new" style="background:#90EE90">“</span>descriptive string<span class="deltaxml-old" style="background:#FF5555">'</span><span class="deltaxml-new" style="background:#90EE90">”</span> local part, e.g. [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>], rather than the <code>http://www.w3.org/2005/xqt-errors</code> namespace and alpha-numeric local part, e.g. <code>err:FOCH0004</code>, used in <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a>. These error codes were chosen originally in the 1.0 version of 2013.</span></p></div><div class="div2"><h3><a id="file-paths"></a>1.2 <a href="#file-paths" style="text-decoration: none">File Paths</a></h3><p><span class="deltaxml-old" style="background:#FF5555">All file paths are specified as strings, and are resolved against the current working directory. The current working directory is implementation-defined: It can e. g. be the file system directory from which a query processor was started.</span></p><p><span class="deltaxml-new" style="background:#90EE90">File paths are specified as strings.</span></p><p><span class="termdef"><a id="current-working-dir"></a><span class="deltaxml-new" style="background:#90EE90">[Definition] The </span><b><span class="deltaxml-new" style="background:#90EE90">current working directory</span></b><span class="deltaxml-new" style="background:#90EE90"> is an absolute </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> directory against which all relative file paths are resolved.</span></span><span class="deltaxml-new" style="background:#90EE90"> For example, it can be the directory from which a query processor was started.</span></p><p><span class="termdef"><a id="base-dir"></a><span class="deltaxml-new" style="background:#90EE90">[Definition] If a </span><a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-static-base-uri"><span class="deltaxml-new" style="background:#90EE90">Static Base URI</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> exists, and if it points to a local file, the </span><b><span class="deltaxml-new" style="background:#90EE90">base directory</span></b><span class="deltaxml-new" style="background:#90EE90"> points to the directory of this file. Otherwise, it is undefined.</span></span><code><span class="deltaxml-new" style="background:#90EE90">file:base-dir</span></code><span class="deltaxml-new" style="background:#90EE90"> can be used to retrieve the directory. A file path can be resolved against this directory by simply appending it (if it is relative), or by calling </span><code><span class="deltaxml-new" style="background:#90EE90">file:resolve-path</span></code><span class="deltaxml-new" style="background:#90EE90">:</span></p><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">file:base-dir() || $path,
file:resolve-path($path, file:base-dir())</span></pre></div><p>An implementation <span class="verb">must</span> accept absolute and relative UNIX/Linux and Windows paths as well as absolute file URIs. Some examples: </p><ul><li><p><span style="display: none;" class="delete_version"><code>C:\Test Dir\my file.xml</code>: An absolute path on Windows platforms.</span><span style="display: none;" class="add_version"><code>C:\Test Dir\my file.xml</code>: an absolute path on Windows platforms.</span><span class="modify_version"><code>C:\Test Dir\my file.xml</code>: <span class="deltaxml-old" style="background:#FF5555">An</span><span class="deltaxml-new" style="background:#90EE90">an</span> absolute path on Windows platforms.</span></p></li><li><p><span style="display: none;" class="delete_version"><code>/Test Dir/my file.xml</code>: An absolute path on UNIX-based platforms.</span><span style="display: none;" class="add_version"><code>/Test Dir/my file.xml</code>: an absolute path on UNIX-based platforms.</span><span class="modify_version"><code>/Test Dir/my file.xml</code>: <span class="deltaxml-old" style="background:#FF5555">An</span><span class="deltaxml-new" style="background:#90EE90">an</span> absolute path on UNIX-based platforms.</span></p></li><li><p><span style="display: none;" class="delete_version"><code>C:\\\Test Dir//\\my file.xml</code>: An absolute path on Windows platforms that tolerates an arbitrary number of slashes and backslashes.</span><span style="display: none;" class="add_version"><code>C:\\\Test Dir//\\my file.xml</code>: an absolute path on Windows platforms that tolerates an arbitrary number of slashes and backslashes.</span><span class="modify_version"><code>C:\\\Test Dir//\\my file.xml</code>: <span class="deltaxml-old" style="background:#FF5555">An</span><span class="deltaxml-new" style="background:#90EE90">an</span> absolute path on Windows platforms that tolerates an arbitrary number of slashes and backslashes.</span></p></li><li><p><span style="display: none;" class="delete_version"><code>my file.xml</code>: A relative path, pointing to a file in the current working directory.</span><span style="display: none;" class="add_version"><code>my file.xml</code>: a relative path, pointing to a file in the current working directory.</span><span class="modify_version"><code>my file.xml</code>: <span class="deltaxml-old" style="background:#FF5555">A</span><span class="deltaxml-new" style="background:#90EE90">a</span> relative path, pointing to a file in the current working directory.</span></p></li><li><p><span style="display: none;" class="delete_version"><code>file:///C:/Test%20Dir/my%20file.xml</code>: An absolute file URI on Windows platforms.</span><span style="display: none;" class="add_version"><code>file:///C:/Test%20Dir/my%20file.xml</code>: an absolute file URI on Windows platforms.</span><span class="modify_version"><code>file:///C:/Test%20Dir/my%20file.xml</code>: <span class="deltaxml-old" style="background:#FF5555">An</span><span class="deltaxml-new" style="background:#90EE90">an</span> absolute file URI on Windows platforms.</span></p></li><li><p><span style="display: none;" class="delete_version"><code>file:///Test%20Dir/my%20file.xml</code>: An absolute path on UNIX-based platforms.</span><span style="display: none;" class="add_version"><code>file:///Test%20Dir/my%20file.xml</code>: an absolute path on UNIX-based platforms.</span><span class="modify_version"><code>file:///Test%20Dir/my%20file.xml</code>: <span class="deltaxml-old" style="background:#FF5555">An</span><span class="deltaxml-new" style="background:#90EE90">an</span> absolute path on UNIX-based platforms.</span></p></li></ul><p><span style="display: none;" class="delete_version">Before further processing, all paths are normalized to an <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-defined">implementation-defined</a><sup><small>FO</small></sup> representation (which usually is the representation of the underlying operating system).</span><span style="display: none;" class="add_version">Before further processing, all paths are normalized to an <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-dependent">implementation-dependent</a><sup><small>FO</small></sup> representation (which usually is the representation of the underlying operating system), which operating-system-specific directory separators.</span><span class="modify_version">Before further processing, all paths are normalized to an <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-dependent">implementation-<span class="deltaxml-old" style="background:#FF5555">defined</span><span class="deltaxml-new" style="background:#90EE90">dependent</span></a><sup><small>FO</small></sup> representation (which usually is the representation of the underlying operating system)<span class="deltaxml-new" style="background:#90EE90">, which operating-system-specific directory separators</span>.</span></p><p><span style="display: none;" class="delete_version">It is <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-defined">implementation-defined</a><sup><small>FO</small></sup> as to whether the error [<a href="#ERRFILE40invalid-path" title="file:invalid-path">file:invalid-path</a>] is raised if a path is invalid.</span><span style="display: none;" class="add_version">It is <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-dependent">implementation-dependent</a><sup><small>FO</small></sup> whether the error [<a href="#ERRFILE40invalid-path" title="file:invalid-path">file:invalid-path</a>] is raised if a path is invalid, i.e., if it contains characters that are not allowed in a specific file system.</span><span class="modify_version">It is <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-dependent">implementation-<span class="deltaxml-old" style="background:#FF5555">defined</span><span class="deltaxml-new" style="background:#90EE90">dependent</span></a><sup><small>FO</small></sup> <span class="deltaxml-old" style="background:#FF5555">as to </span>whether the error [<a href="#ERRFILE40invalid-path" title="file:invalid-path">file:invalid-path</a>] is raised if a path is invalid<span class="deltaxml-old" style="background:#FF5555">.</span><span class="deltaxml-new" style="background:#90EE90">, i.e., if it contains characters that are not allowed in a specific file system.</span></span></p><table class="ednote" caption="Editorial note"><tbody><tr><td style="text-align: left; vertical-align:top; width: 50%;"><b><span class="deltaxml-old" style="background:#FF5555">Editorial note</span></b></td><td style="text-align: right; vertical-align:top; width: 50%;"><span class="deltaxml-old" style="background:#FF5555">&nbsp;</span></td></tr><tr style="text-align: left; vertical-align: top;"><td colspan="2"><span class="deltaxml-old" style="background:#FF5555">Should raising this error perhaps be </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-dependent"><span class="deltaxml-old" style="background:#FF5555">implementation-dependent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">?</span></td></tr></tbody></table><p><span style="display: none;" class="delete_version">If a function returns a string that refers to a directory, it will always be suffixed with the system-specific directory separator.</span><span style="display: none;" class="add_version">Whenever a <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup> function generates a path that is known to refer to a directory, it will be suffixed with the operating-system-specific directory separator.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">If</span><span class="deltaxml-new" style="background:#90EE90">Whenever</span> a <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-new" style="background:#90EE90">nondeterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> </span>function <span class="deltaxml-old" style="background:#FF5555">returns a string that refers to</span><span class="deltaxml-new" style="background:#90EE90">generates a path that is known to refer to</span> a directory, it will <span class="deltaxml-old" style="background:#FF5555">always </span>be suffixed with the <span class="deltaxml-new" style="background:#90EE90">operating-</span>system-specific directory separator.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The function </span><a href="#func-file-base-dir"><code><span class="deltaxml-old" style="background:#FF5555">file:base-dir</span></code></a><span class="deltaxml-old" style="background:#FF5555"> can be used to resolve file operations against the directory of the base URI:</span></p><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-old" style="background:#FF5555">let $filename := "input.txt"
let $dir := file:base-dir() 
let $path := concat($dir, $filename)
return file:read-text($path)</span></pre></div></div><div class="div2"><h3><a id="exec"></a>1.3 <a href="#exec" style="text-decoration: none">Function Execution</a></h3><p><span style="display: none;" class="delete_version">Almost all of these functions are marked as <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, which means they are not guaranteed to perform the same operations and produce identical results from repeated calls. A processor <span class="verb">must</span> ensure that these functions are not relocated or pre-evaluated and that its results are not cached when compiling and evaluating the query and serializing its results.</span><span style="display: none;" class="add_version">Many functions are marked as <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, which means they are not guaranteed to perform the same operations and produce identical results when being called repeatedly. A processor <span class="verb">must</span> ensure that these functions are not relocated or pre-evaluated and that its results are not cached when compiling and evaluating the query and serializing its results.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">Almost all of these</span><span class="deltaxml-new" style="background:#90EE90">Many</span> functions are marked as <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, which means they are not guaranteed to perform the same operations and produce identical results <span class="deltaxml-old" style="background:#FF5555">from repeated calls</span><span class="deltaxml-new" style="background:#90EE90">when being called repeatedly</span>. A processor <span class="verb">must</span> ensure that these functions are not relocated or pre-evaluated and that its results are not cached when compiling and evaluating the query and serializing its results.</span></p></div><div class="div2"><h3><a id="testing"></a>1.4 <a href="#testing" style="text-decoration: none">Test suite</a></h3><p>A suite of test-cases for all the functions defined in this module, in <a href="#qt3">[QT3]</a> format, is defined at <a href="#tests.file">[Test-suite]</a>.</p></div><div class="div2"><h3><a id="conformance"></a>1.5 <a href="#conformance" style="text-decoration: none">Conformance</a></h3><p>This specification follows the general remarks on and terminology for conformance given in <a href="https://qt4cg.org/specifications/xpath-functions-40/#conformance">Section 1.2 Conformance</a><sup><small>FO</small></sup></p><p>In this document, text labeled as an example or as a note is provided for explanatory purposes and is not normative.</p></div><div class="div2"><h3><a id="namespace-prefixes"></a>1.6 <a href="#namespace-prefixes" style="text-decoration: none">Namespaces and prefixes</a></h3><p>The functions defined in this document are contained exclusively in the namespace <code>http://expath.org/ns/file</code> and referenced using a <code>xs:QName</code> binding to that namespace.</p><p>This document uses the prefix <code>file</code> to refer to this namespace. User-written applications can choose a different prefix to refer to the namespace, so long as it is bound to the correct URI. In accordance with current practice, it is recommended that the prefix <code>file</code> be reserved for use with this namespace.</p></div><div class="div2"><h3><a id="func-signatures"></a>1.7 <a href="#func-signatures" style="text-decoration: none">Function signatures and descriptions</a></h3><p>Each function (or group of functions having the same name) is defined in this specification using a standard proforma, full details of which can be found in <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-signatures">Section 1.5 Function signatures and descriptions</a><sup><small>FO</small></sup>. In particular in this update (trailing) optional arguments for functions (introduced in XPath 4.0) are used where appropriate in the signatures, rather than multiple-arity signatures as previously. </p></div></div><div class="div1"><h2><a id="props"></a>2 <a href="#props" style="text-decoration: none">File Properties</a></h2><div class="div2"><h3><a id="func-file-name"></a><span class="deltaxml-new" style="background:#90EE90">2.1 </span><a href="#func-file-name" style="text-decoration: none"><span class="deltaxml-new" style="background:#90EE90">file:name</span></a></h3><dl><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Summary</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns the name of a file or directory.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-new" style="background:#90EE90">file:name</span></code><span class="deltaxml-new" style="background:#90EE90">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code></code></td><td></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-new" style="background:#90EE90">)</span><code class="as"><span class="deltaxml-new" style="background:#90EE90">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Properties</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic"><span class="deltaxml-new" style="background:#90EE90">deterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent"><span class="deltaxml-new" style="background:#90EE90">context-independent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-new" style="background:#90EE90">focus-independent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Rules</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns the name of a file or directory. An empty string is returned if the path points to the root directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic"><span class="deltaxml-new" style="background:#90EE90">deterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">: the path is neither checked for correctness nor looked up in the file system.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:name('')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">''</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:name('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">''</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:name('hello.txt')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">'hello.txt'</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:name('dir/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">'dir'</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:name('dir/file.txt')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">'file.txt'</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:name('dir/..')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">'..'</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:name('file:///tmp/001.bin')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">'001.bin'</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-last-modified"></a><span class="deltaxml-new" style="background:#90EE90">2.2 </span><a href="#func-file-last-modified" style="text-decoration: none"><span class="deltaxml-new" style="background:#90EE90">file:last-modified</span></a></h3><dl><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Summary</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns the last modification time of a file or directory.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-new" style="background:#90EE90">file:last-modified</span></code><span class="deltaxml-new" style="background:#90EE90">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code></code></td><td></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-new" style="background:#90EE90">)</span><code class="as"><span class="deltaxml-new" style="background:#90EE90">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-new" style="background:#90EE90">xs:dateTime</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Properties</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-new" style="background:#90EE90">nondeterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-new" style="background:#90EE90">context-dependent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-new" style="background:#90EE90">focus-independent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Rules</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns an </span><code><span class="deltaxml-new" style="background:#90EE90">xs:dateTime</span></code><span class="deltaxml-new" style="background:#90EE90"> item representing the last modification of a file or directory.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Error Conditions</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40not-found" title="file:not-found"><span class="deltaxml-new" style="background:#90EE90">file:not-found</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if the specified path does not exist.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40io-error" title="file:io-error"><span class="deltaxml-new" style="background:#90EE90">file:io-error</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if any other error occurs.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:last-modified('.')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns the last modification time of the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:last-modified(file:base-dir())</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns the last modification time of the </span><a title="base directory" class="termref" href="#base-dir"><span class="deltaxml-new" style="background:#90EE90">base directory</span></a><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-size"></a><span class="deltaxml-new" style="background:#90EE90">2.3 </span><a href="#func-file-size" style="text-decoration: none"><span class="deltaxml-new" style="background:#90EE90">file:size</span></a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-is-absolute"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#intro"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><code><span class="deltaxml-new" style="background:#90EE90">$recursive</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter added.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;7 July 2025]</span></i></p></li></ol></div><dl><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Summary</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns the size of a file or directory.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-new" style="background:#90EE90">file:size</span></code><span class="deltaxml-new" style="background:#90EE90">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code></code><span class="deltaxml-new" style="background:#90EE90">,</span></td><td></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$recursive</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:boolean?</span></code></code></td><td><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">false()</span></code></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-new" style="background:#90EE90">)</span><code class="as"><span class="deltaxml-new" style="background:#90EE90">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Properties</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-new" style="background:#90EE90">nondeterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-new" style="background:#90EE90">context-dependent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-new" style="background:#90EE90">focus-independent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Rules</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> If </span><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code><span class="deltaxml-new" style="background:#90EE90"> points to a file, returns the byte size of this file. Otherwise, if it points to a directory, returns either </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code><span class="deltaxml-new" style="background:#90EE90"> or, if </span><code><span class="deltaxml-new" style="background:#90EE90">$recursive</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, the aggregated size of all files and subdirectories.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Error Conditions</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40not-found" title="file:not-found"><span class="deltaxml-new" style="background:#90EE90">file:not-found</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if the specified path does not exist.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40io-error" title="file:io-error"><span class="deltaxml-new" style="background:#90EE90">file:io-error</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if any other error occurs.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:size('.')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">0</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:size('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">0</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-exists"></a><span class="deltaxml-old" style="background:#FF5555">2.1</span><span class="deltaxml-new" style="background:#90EE90">2.4</span> <a href="#func-file-exists" style="text-decoration: none">file:exists</a></h3><dl><dt class="label">Summary</dt><dd><p>Tests if a file or directory exists.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:exists</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:boolean</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Returns <code>true</code> if <code>$path</code> points to a file or directory, <code>false</code> otherwise.</span><span style="display: none;" class="add_version">Returns <code>true</code> if <code>$path</code> points to a file or a directory, <code>false</code> otherwise.</span><span class="modify_version">Returns <code>true</code> if <code>$path</code> points to a file or <span class="deltaxml-new" style="background:#90EE90">a </span>directory, <code>false</code> otherwise.</span></p><p>On <span class="deltaxml-new" style="background:#90EE90">a </span>UNIX-based <span class="deltaxml-old" style="background:#FF5555">systems</span><span class="deltaxml-new" style="background:#90EE90">system,</span> the root and the volume roots are considered directories.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:exists('.')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:exists('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-is-dir"></a><span class="deltaxml-old" style="background:#FF5555">2.2</span><span class="deltaxml-new" style="background:#90EE90">2.5</span> <a href="#func-file-is-dir" style="text-decoration: none">file:is-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Tests if <code>$path</code> points to a directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:is-dir</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:boolean</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns </span><code><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555"> if </span><code><span class="deltaxml-old" style="background:#FF5555">$path</span></code><span class="deltaxml-old" style="background:#FF5555"> points to a directory, </span><code><span class="deltaxml-old" style="background:#FF5555">false</span></code><span class="deltaxml-old" style="background:#FF5555"> otherwise.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Returns </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> if </span><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code><span class="deltaxml-new" style="background:#90EE90"> points to an existing directory. Otherwise, if it points to a file that is no directory, or if the file does not exist, it returns </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p>On <span class="deltaxml-new" style="background:#90EE90">a </span>UNIX-based <span class="deltaxml-old" style="background:#FF5555">systems</span><span class="deltaxml-new" style="background:#90EE90">system,</span> the root and the volume roots are considered directories.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:is-dir('.')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:is-dir('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-is-file"></a><span class="deltaxml-old" style="background:#FF5555">2.3</span><span class="deltaxml-new" style="background:#90EE90">2.6</span> <a href="#func-file-is-file" style="text-decoration: none">file:is-file</a></h3><dl><dt class="label">Summary</dt><dd><p><span style="display: none;" class="delete_version">Tests if <code>$path</code> points to a file.</span><span style="display: none;" class="add_version">Tests if <code>$path</code> points to a regular file.</span><span class="modify_version">Tests if <code>$path</code> points to a <span class="deltaxml-new" style="background:#90EE90">regular </span>file.</span></p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:is-file</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:boolean</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns </span><code><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555"> if </span><code><span class="deltaxml-old" style="background:#FF5555">$path</span></code><span class="deltaxml-old" style="background:#FF5555"> points to a existing file.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Returns </span><code><span class="deltaxml-old" style="background:#FF5555">false</span></code><span class="deltaxml-old" style="background:#FF5555"> if </span><code><span class="deltaxml-old" style="background:#FF5555">$path</span></code><span class="deltaxml-old" style="background:#FF5555"> points to a existing directory.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Otherwise returns </span><code><span class="deltaxml-old" style="background:#FF5555">false</span></code></p><p><span class="deltaxml-new" style="background:#90EE90">Returns </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> if </span><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code><span class="deltaxml-new" style="background:#90EE90"> points to a regular file (no directory, no symbolic link, no other operating-system specific file type). Otherwise, if it points to a directory or if the file does not exist, it returns </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:is-file('.')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">false()</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:is-file('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">false()</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-last-modified"></a><span class="deltaxml-old" style="background:#FF5555">2.4 </span><a href="#func-file-last-modified" style="text-decoration: none"><span class="deltaxml-old" style="background:#FF5555">file:last-modified</span></a></h3><dl><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Summary</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the last modification time of a file or directory.</span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-old" style="background:#FF5555">file:last-modified</span></code><span class="deltaxml-old" style="background:#FF5555">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-old" style="background:#FF5555">$path</span></code></td><td><code class="as"><span class="deltaxml-old" style="background:#FF5555">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code></code></td><td></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-old" style="background:#FF5555">)</span><code class="as"><span class="deltaxml-old" style="background:#FF5555">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-old" style="background:#FF5555">xs:dateTime</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Properties</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-old" style="background:#FF5555">nondeterministic</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-old" style="background:#FF5555">context-dependent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-old" style="background:#FF5555">focus-independent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Rules</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the last modification time of a file or directory.</span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Error Conditions</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">[</span><a href="#ERRFILE40not-found" title="file:not-found"><span class="deltaxml-old" style="background:#FF5555">file:not-found</span></a><span class="deltaxml-old" style="background:#FF5555">] is raised if </span><code><span class="deltaxml-old" style="background:#FF5555">$path</span></code><span class="deltaxml-old" style="background:#FF5555"> does not exist.</span></p><p><span class="deltaxml-old" style="background:#FF5555">[</span><a href="#ERRFILE40io-error" title="file:io-error"><span class="deltaxml-old" style="background:#FF5555">file:io-error</span></a><span class="deltaxml-old" style="background:#FF5555">] is raised if any other error occurs.</span></p></dd></dl></div><div class="div2"><h3><a id="func-file-size"></a><span class="deltaxml-old" style="background:#FF5555">2.5 </span><a style="text-decoration: none" href="#func-file-size"><span class="deltaxml-old" style="background:#FF5555">file:size</span></a></h3><h3><a id="func-file-is-absolute"></a><span class="deltaxml-new" style="background:#90EE90">2.7 </span><a style="text-decoration: none" href="#func-file-is-absolute"><span class="deltaxml-new" style="background:#90EE90">file:is-absolute</span></a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-create-temp-dir"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-size"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><span class="deltaxml-new" style="background:#90EE90">New in 4.0.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;2 July 2024]</span></i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the byte size of a file, or the value </span><code><span class="deltaxml-old" style="background:#FF5555">0</span></code><span class="deltaxml-old" style="background:#FF5555"> for directories.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Tests if </span><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code><span class="deltaxml-new" style="background:#90EE90"> is absolute.</span></p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><span style="display: none;" class="delete_version"><code class="function">file:size</code>(</span><span style="display: none;" class="add_version"><code class="function">file:is-absolute</code>(</span><span class="modify_version"><code class="function"><span class="deltaxml-old" style="background:#FF5555">file:size</span><span class="deltaxml-new" style="background:#90EE90">file:is-absolute</span></code>(</span></td></tr><tr class="arg"><td><span style="display: none;" class="delete_version"><code>$file</code></span><span style="display: none;" class="add_version"><code>$path</code></span><span class="modify_version"><code>$<span class="deltaxml-old" style="background:#FF5555">file</span><span class="deltaxml-new" style="background:#90EE90">path</span></code></span></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3"><span style="display: none;" class="delete_version">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:integer</code></code></span><span style="display: none;" class="add_version">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:boolean</code></code></span><span class="modify_version">)<code class="as">&nbsp;as&nbsp;</code><code><code><span class="deltaxml-old" style="background:#FF5555">xs:integer</span><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code></code></span></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns </span><code><span class="deltaxml-old" style="background:#FF5555">0</span></code><span class="deltaxml-old" style="background:#FF5555"> if </span><code><span class="deltaxml-old" style="background:#FF5555">$file</span></code><span class="deltaxml-old" style="background:#FF5555"> points to a directory.</span></p><p><span class="deltaxml-old" style="background:#FF5555">Returns the byte size of the file </span><code><span class="deltaxml-old" style="background:#FF5555">$file</span></code><span class="deltaxml-old" style="background:#FF5555">, if it exists.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Returns </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> if </span><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code><span class="deltaxml-new" style="background:#90EE90"> is absolute, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> otherwise.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A path is absolute if it does not need to be combined with other path information, such as the current directory, to locate a file.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">All UNC file names are absolute.</span></p></div></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Error Conditions</span></dt><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">[</span><a href="#ERRFILE40not-found" title="file:not-found"><span class="deltaxml-old" style="background:#FF5555">file:not-found</span></a><span class="deltaxml-old" style="background:#FF5555">] is raised if </span><code><span class="deltaxml-old" style="background:#FF5555">$path</span></code><span class="deltaxml-old" style="background:#FF5555"> does not exist.</span></p><p><span class="deltaxml-old" style="background:#FF5555">[</span><a href="#ERRFILE40io-error" title="file:io-error"><span class="deltaxml-old" style="background:#FF5555">file:io-error</span></a><span class="deltaxml-old" style="background:#FF5555">] is raised if any other error occurs.</span></p><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:is-absolute('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr></tbody></table></div></dd></dl></div></div><div class="div1"><h2><a id="entities"></a>3 <a href="#entities" style="text-decoration: none">Manipulation of Files as Entities</a></h2><div class="div2"><h3><a id="func-file-copy"></a>3.1 <a href="#func-file-copy" style="text-decoration: none">file:copy</a></h3><dl><dt class="label">Summary</dt><dd><p>Copies a file or a directory<span class="deltaxml-old" style="background:#FF5555"> given a source and a target path/URI</span>.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:copy</code>(</td></tr><tr class="arg"><td><code>$source</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$target</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Copies a file or a directory given a source and a target path/URI. The following cases may occur if <code>$source</code> points to a file:</span><span style="display: none;" class="add_version">Copies a file or a directory given a source and a target path/URI. The following rules apply if <code>$source</code> points to a file:</span><span class="modify_version">Copies a file or a directory given a source and a target path/URI. The following <span class="deltaxml-old" style="background:#FF5555">cases may occur</span><span class="deltaxml-new" style="background:#90EE90">rules apply</span> if <code>$source</code> points to a file:</span></p><ol class="enumar"><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> does not exist, it will be created.</span><span style="display: none;" class="add_version">if <code>$target</code> does not exist, it will be created.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> does not exist, it will be created.</span></p></li><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> is a file, it will be overwritten.</span><span style="display: none;" class="add_version">if <code>$target</code> is a file, it will be overwritten.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> is a file, it will be overwritten.</span></p></li><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> is a directory, the file will be created in that directory with the name of the source file. If a file already exists, it will be overwritten.</span><span style="display: none;" class="add_version">if <code>$target</code> is a directory, the file will be created in that directory with the name of the source file. If a file already exists, it will be overwritten.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> is a directory, the file will be created in that directory with the name of the source file. If a file already exists, it will be overwritten.</span></p></li></ol><p><span style="display: none;" class="delete_version">The following cases may occur if <code>$source</code> points to a directory:</span><span style="display: none;" class="add_version">Otherwise, if <code>$source</code> points to a directory:</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">The following cases may occur</span><span class="deltaxml-new" style="background:#90EE90">Otherwise,</span> if <code>$source</code> points to a directory:</span></p><ol class="enumar"><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> does not exist, it will be created as directory, and all files of the source directory are copied to this directory with their existing local names.</span><span style="display: none;" class="add_version">if <code>$target</code> does not exist, it will be created as directory, and all files of the source directory are copied to this directory with their existing local names.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> does not exist, it will be created as directory, and all files of the source directory are copied to this directory with their existing local names.</span></p></li><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> is a directory, the source directory with all its files will be copied into the target directory. At each level, if a file already exists in the target with the same name as in the source, it is overwritten. If a directory already exists in the target with the same name as in the source, it is not removed, it is recursed in place (if it does not exist, it is created before recursing).</span><span style="display: none;" class="add_version">if <code>$target</code> is a directory, the source directory with all its files will be copied into the target directory. At each level, if a file already exists in the target with the same name as in the source, it is overwritten. If a directory already exists in the target with the same name as in the source, it is not removed, it is recursed in place. If it does not exist, it is created before recursing.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> is a directory, the source directory with all its files will be copied into the target directory. At each level, if a file already exists in the target with the same name as in the source, it is overwritten. If a directory already exists in the target with the same name as in the source, it is not removed, it is recursed in place<span class="deltaxml-old" style="background:#FF5555"> (if</span><span class="deltaxml-new" style="background:#90EE90">. If</span> it does not exist, it is created before recursing<span class="deltaxml-old" style="background:#FF5555">)</span>.</span></p></li></ol><p>Other cases will <span class="deltaxml-old" style="background:#FF5555">raise</span><span class="deltaxml-new" style="background:#90EE90">result in</span> one of the errors listed below.</p><p>The function returns the empty sequence if the operation is successful. <span class="deltaxml-old" style="background:#FF5555">If an error occurs during the operation, no</span><span class="deltaxml-new" style="background:#90EE90">No</span> rollback to the original state will be possible <span class="deltaxml-new" style="background:#90EE90">if an error occurs during the operation.</span></p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the <code>$source</code> path does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the <span class="deltaxml-old" style="background:#FF5555">$source</span><span class="deltaxml-new" style="background:#90EE90">specified</span> path does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if <code>$source</code> points to a directory and <code>$target</code> points to an existing file.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if the specified source path points to a directory and target path points to an existing file.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>source <span class="deltaxml-new" style="background:#90EE90">path </span>points to a directory and <span class="deltaxml-old" style="background:#FF5555">$</span>target <span class="deltaxml-new" style="background:#90EE90">path </span>points to an existing file.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$source</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified source path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>source <span class="deltaxml-new" style="background:#90EE90">path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$source</code> points to a file and <code>$target</code> points to a directory, in which a subdirectory exists with the name of the source file.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified source path points to a file and the target path points to a directory in which a subdirectory exists with the name of the source file.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>source <span class="deltaxml-new" style="background:#90EE90">path </span>points to a file and <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the </span>target <span class="deltaxml-new" style="background:#90EE90">path </span>points to a directory<span class="deltaxml-old" style="background:#FF5555">,</span> in which a subdirectory exists with the name of the source file.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:copy('a.txt', 'b.txt')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Creates a copy of the file </span><code><span class="deltaxml-new" style="background:#90EE90">a.txt</span></code><span class="deltaxml-new" style="background:#90EE90"> in the same directory, named </span><code><span class="deltaxml-new" style="background:#90EE90">b.txt</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:copy('a.txt', '../')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Creates a copy of the file </span><code><span class="deltaxml-new" style="background:#90EE90">a.txt</span></code><span class="deltaxml-new" style="background:#90EE90"> with the same name in the parent directory.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:copy('dir/', 'dir2/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Creates a recursive copy of the directory </span><code><span class="deltaxml-new" style="background:#90EE90">dir</span></code><span class="deltaxml-new" style="background:#90EE90"> in the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">, named </span><code><span class="deltaxml-new" style="background:#90EE90">dir2</span></code><span class="deltaxml-new" style="background:#90EE90">. If </span><code><span class="deltaxml-new" style="background:#90EE90">dir2</span></code><span class="deltaxml-new" style="background:#90EE90"> already exists, the contents of </span><code><span class="deltaxml-new" style="background:#90EE90">dir</span></code><span class="deltaxml-new" style="background:#90EE90"> will be copied into that directory.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-create-dir"></a>3.2 <a href="#func-file-create-dir" style="text-decoration: none">file:create-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Creates a directory<span class="deltaxml-old" style="background:#FF5555"> if it does not already exist</span>.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:create-dir</code>(</td></tr><tr class="arg"><td><code>$dir</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Creates a directory<span class="deltaxml-old" style="background:#FF5555">, or does nothing if the directory</span><span class="deltaxml-new" style="background:#90EE90"> unless it</span> already exists. The operation will <span class="deltaxml-new" style="background:#90EE90">also </span>create <span class="deltaxml-old" style="background:#FF5555">all </span>non-existing parent directories.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if the specified path, or any of its parent directories, points to an existing file.</p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:create-dir('examples')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Creates a directory named </span><code><span class="deltaxml-new" style="background:#90EE90">examples</span></code><span class="deltaxml-new" style="background:#90EE90"> in the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:create-dir('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Will do nothing, as the root directory already exists.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-create-temp-dir"></a>3.3 <a href="#func-file-create-temp-dir" style="text-decoration: none">file:create-temp-dir</a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-create-temp-file"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-is-absolute"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><span class="deltaxml-new" style="background:#90EE90">All parameters are optional now.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;7 July 2025]</span></i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Creates a temporary directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:create-temp-dir</code>(</td></tr><tr class="arg"><td><code>$prefix</code></td><td><span style="display: none;" class="delete_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</span><span style="display: none;" class="add_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></span><span class="modify_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string<span class="deltaxml-new" style="background:#90EE90">?</span></code></code><span class="deltaxml-old" style="background:#FF5555">,</span></span></td><td><span style="display: none;" class="delete_version"></span><span style="display: none;" class="add_version"><code class="assign">:=&nbsp;</code><code>()</code>,</span><span class="modify_version"><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">()</span></code><span class="deltaxml-new" style="background:#90EE90">,</span></span></td></tr><tr class="arg"><td><code>$suffix</code></td><td><span style="display: none;" class="delete_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</span><span style="display: none;" class="add_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></span><span class="modify_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string<span class="deltaxml-new" style="background:#90EE90">?</span></code></code><span class="deltaxml-old" style="background:#FF5555">,</span></span></td><td><span style="display: none;" class="delete_version"></span><span style="display: none;" class="add_version"><code class="assign">:=&nbsp;</code><code>()</code>,</span><span class="modify_version"><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">()</span></code><span class="deltaxml-new" style="background:#90EE90">,</span></span></td></tr><tr class="arg"><td><code>$dir</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:=&nbsp;</code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:string</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Creates a temporary directory and all non-existing parent directories and returns the full path to the created directory.</span><span style="display: none;" class="add_version">Creates a temporary directory with an optional <code>$prefix</code> and <code>$suffix</code> in the filename, and returns the full path to the created directory. The path will point to a directory that did not exist before the function was called.</span><span class="modify_version">Creates a temporary directory <span class="deltaxml-new" style="background:#90EE90">with an optional </span><code><span class="deltaxml-new" style="background:#90EE90">$prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> </span>and <code><span class="deltaxml-old" style="background:#FF5555">all</span><span class="deltaxml-new" style="background:#90EE90">$suffix</span></code> <span class="deltaxml-old" style="background:#FF5555">non-existing parent directories</span><span class="deltaxml-new" style="background:#90EE90">in the filename,</span> and returns the full path to the created directory.<span class="deltaxml-new" style="background:#90EE90"> The path will point to a directory that did not exist before the function was called.</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">The temporary directory will not be automatically deleted after query execution. It is guaranteed to not already exist when the function is called.</span></p><p><span style="display: none;" class="delete_version">If <code>$dir</code> is omitted or an empty sequence, the directory will be created inside the system-dependent default temporary-file directory.</span><span style="display: none;" class="add_version">If <code>$dir</code> is omitted or an empty sequence, the directory will be created inside the operating-system specific default temporary-file directory.</span><span class="modify_version">If <code>$dir</code> is omitted or an empty sequence, the directory will be created inside the <span class="deltaxml-old" style="background:#FF5555">system-dependent</span><span class="deltaxml-new" style="background:#90EE90">operating-system specific</span> default temporary-file directory.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The created directory will not be deleted automatically after query execution.</span></p></div></dd><dt class="label">Error Conditions</dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the specified directory does not exist or points to a file.</p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><p><code><span class="deltaxml-new" style="background:#90EE90">file:parent(file:create-temp-dir()) = file:temp-dir()</span></code></p></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">file:create-temp-dir(dir := file:base-dir())</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Creates a temporary directory in the </span><a title="base directory" class="termref" href="#base-dir"><span class="deltaxml-new" style="background:#90EE90">base directory</span></a><span class="deltaxml-new" style="background:#90EE90"> or, if it is undefined, in the default temporary-file directory.)</span></em></p></td></tr><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-new" style="background:#90EE90">let $dir := file:create-temp-dir()
return try {
  file:write($dir || 'tmp.data', 1 to 10)
} finally {
  file:delete($dir, true())
}</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Creates a temporary directory, writes a file into that directory, and deletes it again.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-create-temp-file"></a>3.4 <a href="#func-file-create-temp-file" style="text-decoration: none">file:create-temp-file</a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-append"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-create-temp-dir"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><span class="deltaxml-new" style="background:#90EE90">All parameters are optional now.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;7 July 2025]</span></i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Creates a temporary file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:create-temp-file</code>(</td></tr><tr class="arg"><td><code>$prefix</code></td><td><span style="display: none;" class="delete_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</span><span style="display: none;" class="add_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></span><span class="modify_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string<span class="deltaxml-new" style="background:#90EE90">?</span></code></code><span class="deltaxml-old" style="background:#FF5555">,</span></span></td><td><span style="display: none;" class="delete_version"></span><span style="display: none;" class="add_version"><code class="assign">:=&nbsp;</code><code>()</code>,</span><span class="modify_version"><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">()</span></code><span class="deltaxml-new" style="background:#90EE90">,</span></span></td></tr><tr class="arg"><td><code>$suffix</code></td><td><span style="display: none;" class="delete_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</span><span style="display: none;" class="add_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></span><span class="modify_version"><code class="as">as&nbsp;</code><code class="type"><code>xs:string<span class="deltaxml-new" style="background:#90EE90">?</span></code></code><span class="deltaxml-old" style="background:#FF5555">,</span></span></td><td><span style="display: none;" class="delete_version"></span><span style="display: none;" class="add_version"><code class="assign">:=&nbsp;</code><code>()</code>,</span><span class="modify_version"><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">()</span></code><span class="deltaxml-new" style="background:#90EE90">,</span></span></td></tr><tr class="arg"><td><code>$dir</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:=&nbsp;</code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:string</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Creates a temporary file and all non-existing parent directories and returns the full path to the created file.</span><span style="display: none;" class="add_version">Creates an empty temporary file with an optional <code>$prefix</code> and <code>$suffix</code> in the filename, and returns the full path to the created file. The path will point to a file that did not exist before the function was called.</span><span class="modify_version">Creates <span class="deltaxml-old" style="background:#FF5555">a</span><span class="deltaxml-new" style="background:#90EE90">an empty</span> temporary file <span class="deltaxml-new" style="background:#90EE90">with an optional </span><code><span class="deltaxml-new" style="background:#90EE90">$prefix</span></code><span class="deltaxml-new" style="background:#90EE90"> </span>and <code><span class="deltaxml-old" style="background:#FF5555">all</span><span class="deltaxml-new" style="background:#90EE90">$suffix</span></code> <span class="deltaxml-old" style="background:#FF5555">non-existing parent directories</span><span class="deltaxml-new" style="background:#90EE90">in the filename,</span> and returns the full path to the created file.<span class="deltaxml-new" style="background:#90EE90"> The path will point to a file that did not exist before the function was called.</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">The temporary file will not be automatically deleted after query execution. It is guaranteed to not already exist when the function is called.</span></p><p><span style="display: none;" class="delete_version">If <code>$dir</code> is omitted or an empty sequence, the file will be created inside the system-dependent default temporary-file directory.</span><span style="display: none;" class="add_version">If <code>$dir</code> is omitted or an empty sequence, the file will be created inside the operating-system specific default temporary-file directory.</span><span class="modify_version">If <code>$dir</code> is omitted or an empty sequence, the file will be created inside the <span class="deltaxml-old" style="background:#FF5555">system-dependent</span><span class="deltaxml-new" style="background:#90EE90">operating-system specific</span> default temporary-file directory.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The created file will not be deleted automatically after query execution.</span></p></div></dd><dt class="label">Error Conditions</dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the specified does not exist or points to a file.</p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:create-temp-file(suffix := '.txt')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Creates a file with the suffix </span><code><span class="deltaxml-new" style="background:#90EE90">.txt</span></code><span class="deltaxml-new" style="background:#90EE90"> in the temporary-file directory.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-delete"></a>3.5 <a href="#func-file-delete" style="text-decoration: none">file:delete</a></h3><dl><dt class="label">Summary</dt><dd><p>Deletes a file or a directory<span class="deltaxml-old" style="background:#FF5555"> from the file system</span>.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:delete</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$recursive</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:boolean?</code></code></td><td><code class="assign">:=&nbsp;</code><code>false()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Deletes a file or a directory from the file system.</span></p><p><span style="display: none;" class="delete_version">If the optional parameter <code>$recursive</code> is <code>true</code>, sub-directories will be deleted as well.</span><span style="display: none;" class="add_version">Deletes a file or a directory from the file system. If <code>$recursive</code> is <code>true</code>, subdirectories will be deleted as well.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">If the optional parameter</span><span class="deltaxml-new" style="background:#90EE90">Deletes a file or a directory from the file system. If</span> <code>$recursive</code> is <code>true</code>, <span class="deltaxml-old" style="background:#FF5555">sub-directories</span><span class="deltaxml-new" style="background:#90EE90">subdirectories</span> will be deleted as well.</span></p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <code>$path</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>path does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a non-empty directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a non-empty directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a non-empty directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:delete('list.txt')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Deletes the file </span><code><span class="deltaxml-new" style="background:#90EE90">list.txt</span></code><span class="deltaxml-new" style="background:#90EE90"> from the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:delete('examples', true())</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Deletes the file or directory </span><code><span class="deltaxml-new" style="background:#90EE90">example</span></code><span class="deltaxml-new" style="background:#90EE90"> and (if available) all subdirectories.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-list"></a><span class="deltaxml-old" style="background:#FF5555">3.6 </span><a href="#func-file-list" style="text-decoration: none"><span class="deltaxml-old" style="background:#FF5555">file:list</span></a></h3><dl><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Summary</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Lists all files and directories in a given directory.</span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-old" style="background:#FF5555">file:list</span></code><span class="deltaxml-old" style="background:#FF5555">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-old" style="background:#FF5555">$dir</span></code></td><td><code class="as"><span class="deltaxml-old" style="background:#FF5555">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code></code><span class="deltaxml-old" style="background:#FF5555">,</span></td><td></td></tr><tr class="arg"><td><code><span class="deltaxml-old" style="background:#FF5555">$recursive</span></code></td><td><code class="as"><span class="deltaxml-old" style="background:#FF5555">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-old" style="background:#FF5555">xs:boolean?</span></code></code></td><td><code class="assign"><span class="deltaxml-old" style="background:#FF5555">:=&nbsp;</span></code><code><span class="deltaxml-old" style="background:#FF5555">false()</span></code><span class="deltaxml-old" style="background:#FF5555">,</span></td></tr><tr class="arg"><td><code><span class="deltaxml-old" style="background:#FF5555">$pattern</span></code></td><td><code class="as"><span class="deltaxml-old" style="background:#FF5555">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-old" style="background:#FF5555">xs:string?</span></code></code></td><td><code class="assign"><span class="deltaxml-old" style="background:#FF5555">:=&nbsp;</span></code><code><span class="deltaxml-old" style="background:#FF5555">()</span></code></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-old" style="background:#FF5555">)</span><code class="as"><span class="deltaxml-old" style="background:#FF5555">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-old" style="background:#FF5555">xs:string*</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Properties</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-old" style="background:#FF5555">nondeterministic</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-old" style="background:#FF5555">context-dependent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-old" style="background:#FF5555">focus-independent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Rules</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Lists all files and directories in a given directory. The order of the items in the resulting sequence is not defined. The "." and ".." items are never returned. The returned paths are relative to the provided directory </span><code><span class="deltaxml-old" style="background:#FF5555">$dir</span></code><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the optional parameter </span><code><span class="deltaxml-old" style="background:#FF5555">$recursive</span></code><span class="deltaxml-old" style="background:#FF5555"> is </span><code><span class="deltaxml-old" style="background:#FF5555">true</span></code><span class="deltaxml-old" style="background:#FF5555">, all directories and files will be returned that are found while recursively traversing the given directory. If </span><code><span class="deltaxml-old" style="background:#FF5555">$recursive</span></code><span class="deltaxml-old" style="background:#FF5555"> is omitted or an empty sequence or </span><code><span class="deltaxml-old" style="background:#FF5555">false</span></code><span class="deltaxml-old" style="background:#FF5555"> only the contents of the specified directory will be returned. </span></p><p><span class="deltaxml-old" style="background:#FF5555">The optional </span><code><span class="deltaxml-old" style="background:#FF5555">$pattern</span></code><span class="deltaxml-old" style="background:#FF5555"> parameter defines a name pattern in the glob syntax. If this is provided and is not an empty sequence, only the paths of the files and directories whose names are matching the pattern will be returned.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An implementation must support at least the following glob syntax for the pattern: </span></p><ul><li><p><code><span class="deltaxml-old" style="background:#FF5555">*</span></code><span class="deltaxml-old" style="background:#FF5555"> for matching any number of unknown characters and</span></p></li><li><p><code><span class="deltaxml-old" style="background:#FF5555">?</span></code><span class="deltaxml-old" style="background:#FF5555"> for matching one unknown character.</span></p></li></ul><p></p><p><span class="deltaxml-old" style="background:#FF5555">A related function is </span><a href="#func-file-children"><code><span class="deltaxml-old" style="background:#FF5555">file:children</span></code></a><span class="deltaxml-old" style="background:#FF5555">.</span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Error Conditions</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">[</span><a href="#ERRFILE40no-dir" title="file:no-dir"><span class="deltaxml-old" style="background:#FF5555">file:no-dir</span></a><span class="deltaxml-old" style="background:#FF5555">] is raised if </span><code><span class="deltaxml-old" style="background:#FF5555">$dir</span></code><span class="deltaxml-old" style="background:#FF5555"> does not point to an existing directory.</span></p><p><span class="deltaxml-old" style="background:#FF5555">[</span><a href="#ERRFILE40io-error" title="file:io-error"><span class="deltaxml-old" style="background:#FF5555">file:io-error</span></a><span class="deltaxml-old" style="background:#FF5555">] is raised if any other error occurs.</span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-old" style="background:#FF5555">Expression</span></th><th><span class="deltaxml-old" style="background:#FF5555">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-old" style="background:#FF5555">list(.))</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-old" style="background:#FF5555">not(empty(.))</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-move"></a><span class="deltaxml-old" style="background:#FF5555">3.7</span><span class="deltaxml-new" style="background:#90EE90">3.6</span> <a href="#func-file-move" style="text-decoration: none">file:move</a></h3><dl><dt class="label">Summary</dt><dd><p>Moves a file or a directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:move</code>(</td></tr><tr class="arg"><td><code>$source</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$target</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Moves a file or a directory given a source and a target path/URI. The following cases may occur if <code>$source</code> points to a file:</span><span style="display: none;" class="add_version">Moves a file or a directory given a source and a target path/URI. The following rules apply if <code>$source</code> points to a file:</span><span class="modify_version">Moves a file or a directory given a source and a target path/URI. The following <span class="deltaxml-old" style="background:#FF5555">cases may occur</span><span class="deltaxml-new" style="background:#90EE90">rules apply</span> if <code>$source</code> points to a file:</span></p><ol class="enumar"><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> does not exist, it will be created.</span><span style="display: none;" class="add_version">if <code>$target</code> does not exist, it will be created.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> does not exist, it will be created.</span></p></li><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> is a file, it will be overwritten.</span><span style="display: none;" class="add_version">if <code>$target</code> is a file, it will be overwritten.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> is a file, it will be overwritten.</span></p></li><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> is a directory, the file will be created in that directory with the name of the source file. If a file already exists, it will be overwritten.</span><span style="display: none;" class="add_version">if <code>$target</code> is a directory, the file will be created in that directory with the name of the source file. If a file already exists, it will be overwritten.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> is a directory, the file will be created in that directory with the name of the source file. If a file already exists, it will be overwritten.</span></p></li></ol><p><span style="display: none;" class="delete_version">The following cases may occur if <code>$source</code> points to a directory:</span><span style="display: none;" class="add_version">Otherwise, if <code>$source</code> points to a directory:</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">The following cases may occur</span><span class="deltaxml-new" style="background:#90EE90">Otherwise,</span> if <code>$source</code> points to a directory:</span></p><ol class="enumar"><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> does not exist, it will be created as directory, and all files of the source directory are moved to this directory with their existing local names.</span><span style="display: none;" class="add_version">if <code>$target</code> does not exist, it will be created as directory, and all files of the source directory are moved to this directory with their existing local names.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> does not exist, it will be created as directory, and all files of the source directory are moved to this directory with their existing local names.</span></p></li><li><p><span style="display: none;" class="delete_version"> if <code>$target</code> is a directory, the source directory with all its files will be moved into the target directory. If the target directory contains a directory with the same name as the source, the error [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised.</span><span style="display: none;" class="add_version">if <code>$target</code> is a directory, the source directory with all its files will be moved into the target directory. If the target directory contains a directory with the same name as the source, the error [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> </span>if <code>$target</code> is a directory, the source directory with all its files will be moved into the target directory. If the target directory contains a directory with the same name as the source, the error [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised.</span></p></li></ol><p>Other cases will <span class="deltaxml-old" style="background:#FF5555">raise</span><span class="deltaxml-new" style="background:#90EE90">result in</span> one of the errors listed below.</p><p>The function returns the empty sequence if the operation is successful. <span class="deltaxml-old" style="background:#FF5555">If an error occurs during the operation, no</span><span class="deltaxml-new" style="background:#90EE90">No</span> rollback to the original state will be possible <span class="deltaxml-new" style="background:#90EE90">if an error occurs during the operation.</span></p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the <code>$source</code> path does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified source path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">specified </span>source path does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if <code>$source</code> points to a directory and <code>$target</code> points to an existing file.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if the specified source path points to a directory and target path points to an existing file.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>source <span class="deltaxml-new" style="background:#90EE90">path </span>points to a directory and <span class="deltaxml-old" style="background:#FF5555">$</span>target <span class="deltaxml-new" style="background:#90EE90">path </span>points to an existing file.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$source</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified source path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>source <span class="deltaxml-new" style="background:#90EE90">path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$target</code> points to a directory, in which a subdirectory exists with the name of the source.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified target path points to a directory in which a subdirectory exists with the name of the source.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>target <span class="deltaxml-new" style="background:#90EE90">path </span>points to a directory<span class="deltaxml-old" style="background:#FF5555">,</span> in which a subdirectory exists with the name of the source.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:move('a.txt', 'b.txt')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Renames </span><code><span class="deltaxml-new" style="background:#90EE90">a.txt</span></code><span class="deltaxml-new" style="background:#90EE90"> to </span><code><span class="deltaxml-new" style="background:#90EE90">b.txt</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:move('a.txt', '../')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Moves the file </span><code><span class="deltaxml-new" style="background:#90EE90">a.txt</span></code><span class="deltaxml-new" style="background:#90EE90"> to the parent directory.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:move('dir/', 'dir2/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Renames </span><code><span class="deltaxml-new" style="background:#90EE90">dir</span></code><span class="deltaxml-new" style="background:#90EE90"> to </span><code><span class="deltaxml-new" style="background:#90EE90">dir2</span></code><span class="deltaxml-new" style="background:#90EE90">. If </span><code><span class="deltaxml-new" style="background:#90EE90">dir2</span></code><span class="deltaxml-new" style="background:#90EE90"> already exists, moves the source directory into that directory.)</span></em></p></td></tr></tbody></table></div></dd></dl></div></div><div class="div1"><h2><a id="in-out"></a>4 <a href="#in-out" style="text-decoration: none">Input/Output</a></h2><div class="div2"><h3><a id="func-file-append"></a>4.1 <a href="#func-file-append" style="text-decoration: none">file:append</a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-read-binary"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-create-temp-file"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><code><span class="deltaxml-new" style="background:#90EE90">$options</span></code><span class="deltaxml-new" style="background:#90EE90"> can now be a map, in alignment with </span><code><span class="deltaxml-new" style="background:#90EE90">fn:serialize</span></code><span class="deltaxml-new" style="background:#90EE90">.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;7 July 2025]</span></i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Appends a sequence of items to a file. If the file pointed by </span><code><span class="deltaxml-old" style="background:#FF5555">$file</span></code><span class="deltaxml-old" style="background:#FF5555"> does not exist, a new file will be created.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Appends a serialized value to a file.</span></p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:append</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><span style="display: none;" class="delete_version"><code>$items</code></span><span style="display: none;" class="add_version"><code>$value</code></span><span class="modify_version"><code>$<span class="deltaxml-old" style="background:#FF5555">items</span><span class="deltaxml-new" style="background:#90EE90">value</span></code></span></td><td><code class="as">as&nbsp;</code><code class="type"><code>item()*</code></code>,</td><td></td></tr><tr class="arg"><td><span style="display: none;" class="delete_version"><code>$params</code></span><span style="display: none;" class="add_version"><code>$options</code></span><span class="modify_version"><code>$<span class="deltaxml-old" style="background:#FF5555">params</span><span class="deltaxml-new" style="background:#90EE90">options</span></code></span></td><td><span style="display: none;" class="delete_version"><code class="as">as&nbsp;</code><code class="type"><code>element(output:serialization-parameters)?</code></code></span><span style="display: none;" class="add_version"><code class="as">as&nbsp;</code><code class="type"><code>(element(output:serialization-parameters) | map(*))?</code></code></span><span class="modify_version"><code class="as">as&nbsp;</code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">(</span>element(output:serialization-parameters)<span class="deltaxml-new" style="background:#90EE90"> | map(*))</span>?</code></code></span></td><td><code class="assign">:=&nbsp;</code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Appends a sequence of items to a file.</span></p><p><span style="display: none;" class="delete_version">If the file pointed by <code>$file</code> does not exist, a new file will be created.</span><span style="display: none;" class="add_version">Serializes a value and appends the resulting string to a file. If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Serializes a value and appends the resulting string to a file. </span>If the file pointed <span class="deltaxml-new" style="background:#90EE90">to </span>by <code>$file</code> does not exist, a new file will be created.</span></p><p><span style="display: none;" class="delete_version"><code>$params</code>, if not an empty sequence, controls the way the <code>$items</code> items are serialized. The semantics of <code>$params</code> are those of the same argument of <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-serialize">Section 15.1.3 fn:serialize</a><sup><small>FO</small></sup>, consisting of an <code>output:serialization-parameters</code> element whose format is defined in <a href="https://qt4cg.org/specifications/xslt-xquery-serialization-40/#serparams-in-xdm-instance">Section 3.1 Setting Serialization Parameters by Means of a Parameter Document</a><sup><small>SE</small></sup>. In contrast to <code>fn:serialize,</code> the encoding stage will not be skipped by this function.</span><span style="display: none;" class="add_version"> The <code>$options</code> argument controls the way how <code>$value</code> is serialized. The semantics are the same as for <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-serialize">Section 15.1.3 fn:serialize</a><sup><small>FO</small></sup>. In contrast to <code>fn:serialize</code>, the encoding stage will not be skipped by this function.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">$params</span><span class="deltaxml-old" style="background:#FF5555">, if</span><span class="deltaxml-new" style="background:#90EE90"> The</span> <code><span class="deltaxml-old" style="background:#FF5555">not</span><span class="deltaxml-new" style="background:#90EE90">$options</span></code> <span class="deltaxml-old" style="background:#FF5555">an empty sequence,</span><span class="deltaxml-new" style="background:#90EE90">argument</span> controls the way <span class="deltaxml-old" style="background:#FF5555">the</span><span class="deltaxml-new" style="background:#90EE90">how</span> <code>$<span class="deltaxml-old" style="background:#FF5555">items</span><span class="deltaxml-new" style="background:#90EE90">value</span></code> <span class="deltaxml-old" style="background:#FF5555">items are</span><span class="deltaxml-new" style="background:#90EE90">is</span> serialized. The semantics <span class="deltaxml-old" style="background:#FF5555">of </span><span class="deltaxml-old" style="background:#FF5555">$params</span><span class="deltaxml-old" style="background:#FF5555"> </span>are <span class="deltaxml-old" style="background:#FF5555">those of </span>the same <span class="deltaxml-old" style="background:#FF5555">argument of</span><span class="deltaxml-new" style="background:#90EE90">as for</span> <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-serialize">Section 15.1.3 fn:serialize</a><sup><small>FO</small></sup><span class="deltaxml-old" style="background:#FF5555">, consisting of an </span><span class="deltaxml-old" style="background:#FF5555">output:serialization-parameters</span><span class="deltaxml-old" style="background:#FF5555"> element whose format is defined in </span><a href="https://qt4cg.org/specifications/xslt-xquery-serialization-40/#serparams-in-xdm-instance"><span class="deltaxml-old" style="background:#FF5555">Section 3.1 Setting Serialization Parameters by Means of a Parameter Document</span></a><span class="deltaxml-old" style="background:#FF5555">SE</span>. In contrast to <code>fn:serialize<span class="deltaxml-old" style="background:#FF5555">,</span></code><span class="deltaxml-new" style="background:#90EE90">,</span> the encoding stage will not be skipped by this function.</span></p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified file does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>file does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:append('fragments.xml', &lt;fragment/&gt;)</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Appends a serialized element node to the file </span><code><span class="deltaxml-new" style="background:#90EE90">fragments.xml</span></code><span class="deltaxml-new" style="background:#90EE90">. The file is created if it does not already exist.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:append('snippets.json', { 'one': 1 }, { 'method': 'json' })</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Serializes a map as JSON and appends the resulting string to the file </span><code><span class="deltaxml-new" style="background:#90EE90">snippets.json</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-append-binary"></a>4.2 <a href="#func-file-append-binary" style="text-decoration: none">file:append-binary</a></h3><dl><dt class="label">Summary</dt><dd><p>Appends <span class="deltaxml-old" style="background:#FF5555">a Base64 item as </span>binary data to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:append-binary</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:base64Binary</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Appends a Base64 item as binary data to a file.</span></p><p><span style="display: none;" class="delete_version">If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span><span style="display: none;" class="add_version">Appends the binary data of an <code>xs:base64Binary</code> item to a file. If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Appends the binary data of an </span><code><span class="deltaxml-new" style="background:#90EE90">xs:base64Binary</span></code><span class="deltaxml-new" style="background:#90EE90"> item to a file. </span>If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span></p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:append-binary('data.bin', xs:hexBinary('414243'))</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Appends the bytes </span><code><span class="deltaxml-new" style="background:#90EE90">0x44</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">0x43</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">0x41</span></code><span class="deltaxml-new" style="background:#90EE90"> to the file </span><code><span class="deltaxml-new" style="background:#90EE90">data.bin</span></code><span class="deltaxml-new" style="background:#90EE90">. The file is created if it does not already exist.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-append-text"></a>4.3 <a href="#func-file-append-text" style="text-decoration: none">file:append-text</a></h3><dl><dt class="label">Summary</dt><dd><p>Appends a string to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:append-text</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:=&nbsp;</code><code>'utf-8'</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Appends a string to the file </span><code><span class="deltaxml-old" style="background:#FF5555">$file</span></code><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span style="display: none;" class="delete_version">If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span><span style="display: none;" class="add_version">Appends a string to a file. If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Appends a string to a file. </span>If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The optional parameter </span><code><span class="deltaxml-old" style="background:#FF5555">$encoding</span></code><span class="deltaxml-old" style="background:#FF5555">, if omitted or an empty sequence, is considered to be </span><code><span class="deltaxml-old" style="background:#FF5555">UTF-8</span></code><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If no encoding is supplied, </span><code><span class="deltaxml-new" style="background:#90EE90">utf-8</span></code><span class="deltaxml-new" style="background:#90EE90"> is used as output encoding.</span></p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <code>$encoding</code> is invalid or not supported by the implementation.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding is invalid or not supported by the implementation.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>encoding is invalid or not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:append-text('todos.txt', 'clean up')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Appends a string to the file </span><code><span class="deltaxml-new" style="background:#90EE90">todos.txt</span></code><span class="deltaxml-new" style="background:#90EE90">. The file is created if it does not already exist.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-append-text-lines"></a>4.4 <a href="#func-file-append-text-lines" style="text-decoration: none">file:append-text-lines</a></h3><dl><dt class="label">Summary</dt><dd><p>Appends a sequence of strings to a file, each followed by the <span class="deltaxml-old" style="background:#FF5555">system-dependent</span><span class="deltaxml-new" style="background:#90EE90">operating-system specific</span> newline character.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:append-text-lines</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$lines</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string*</code></code>,</td><td></td></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:=&nbsp;</code><code>'utf-8'</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Appends a sequence of strings to a file, each followed by the system-dependent newline character.</span></p><p><span style="display: none;" class="delete_version">If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span><span style="display: none;" class="add_version">Appends a sequence of strings to a file, each followed by the operating-system specific newline character. If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Appends a sequence of strings to a file, each followed by the operating-system specific newline character. </span>If the file pointed to by <code>$file</code> does not exist, a new file will be created.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The optional parameter </span><code><span class="deltaxml-old" style="background:#FF5555">$encoding</span></code><span class="deltaxml-old" style="background:#FF5555">, if omitted or an empty sequence, is considered to be </span><code><span class="deltaxml-old" style="background:#FF5555">UTF-8</span></code><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If no encoding is supplied, </span><code><span class="deltaxml-new" style="background:#90EE90">utf-8</span></code><span class="deltaxml-new" style="background:#90EE90"> is used as output encoding.</span></p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <code>$encoding</code> is invalid or not supported by the implementation.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding is invalid or not supported by the implementation.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>encoding is invalid or not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:append-text-lines('numbers.txt', (1 to 5) ! string())</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Appends the string representation of the integers 1 to 5 to the file </span><code><span class="deltaxml-new" style="background:#90EE90">numbers.txt</span></code><span class="deltaxml-new" style="background:#90EE90">. The file is created if it does not already exist.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-read-binary"></a>4.5 <a href="#func-file-read-binary" style="text-decoration: none">file:read-binary</a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-read-text"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-append"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><code><span class="deltaxml-new" style="background:#90EE90">$length</span></code><span class="deltaxml-new" style="background:#90EE90"> can now be supplied without supplying </span><code><span class="deltaxml-new" style="background:#90EE90">$offset</span></code><span class="deltaxml-new" style="background:#90EE90">.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;7 July 2025]</span></i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Returns the <span class="deltaxml-new" style="background:#90EE90">binary </span>content of a file<span class="deltaxml-old" style="background:#FF5555"> in its Base64 representation</span>.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:read-binary</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$offset</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td><td><code class="assign">:=&nbsp;</code><code>0</code>,</td></tr><tr class="arg"><td><code>$length</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td><td><code class="assign">:=&nbsp;</code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Returns the content of a file in its Base64 representation.</span><span style="display: none;" class="add_version">Returns the content of a file as an <code>xs:base64Binary</code> item.</span><span class="modify_version">Returns the content of a file <span class="deltaxml-old" style="background:#FF5555">in its</span><span class="deltaxml-new" style="background:#90EE90">as an</span> <code><span class="deltaxml-old" style="background:#FF5555">Base64</span><span class="deltaxml-new" style="background:#90EE90">xs:base64Binary</span></code> <span class="deltaxml-old" style="background:#FF5555">representation</span><span class="deltaxml-new" style="background:#90EE90">item</span>.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The optional parameters </span><code><span class="deltaxml-old" style="background:#FF5555">$offset</span></code><span class="deltaxml-old" style="background:#FF5555"> and </span><code><span class="deltaxml-old" style="background:#FF5555">$length</span></code><span class="deltaxml-old" style="background:#FF5555"> can be used to read chunks of a file.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Chunks of a file can be read by supplying </span><code><span class="deltaxml-new" style="background:#90EE90">$offset</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">$length</span></code><span class="deltaxml-new" style="background:#90EE90">. If no value is supplied for </span><code><span class="deltaxml-new" style="background:#90EE90">$length</span></code><span class="deltaxml-new" style="background:#90EE90">, all remaining bytes will be read. If only </span><code><span class="deltaxml-new" style="background:#90EE90">$length</span></code><span class="deltaxml-new" style="background:#90EE90"> is specified, the offset is </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40out-of-range" title="file:out-of-range">file:out-of-range</a>] is raised if <code>$offset</code> or <code>$length</code> is negative, or if the chosen values would exceed the file bounds.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40out-of-range" title="file:out-of-range">file:out-of-range</a>] is raised if the specified offset or length value is negative, or if the value would exceed the file bounds.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40out-of-range" title="file:out-of-range">file:out-of-range</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>offset or <span class="deltaxml-old" style="background:#FF5555">$</span>length <span class="deltaxml-new" style="background:#90EE90">value </span>is negative, or if the <span class="deltaxml-old" style="background:#FF5555">chosen values</span><span class="deltaxml-new" style="background:#90EE90">value</span> would exceed the file bounds.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:read-binary('data.bin') eq xs:hexBinary('41')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> if the file </span><code><span class="deltaxml-new" style="background:#90EE90">data.bin</span></code><span class="deltaxml-new" style="background:#90EE90"> contains the single byte </span><code><span class="deltaxml-new" style="background:#90EE90">0x41</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:read-binary('data.bin', file:size($path) - 1, 1)</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns the last byte of the file </span><code><span class="deltaxml-new" style="background:#90EE90">data.bin</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-read-text"></a>4.6 <a href="#func-file-read-text" style="text-decoration: none">file:read-text</a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-read-text-lines"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-read-binary"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><code><span class="deltaxml-new" style="background:#90EE90">$fallback</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter added.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;2 July 2024]</span></i></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The normalization of newlines has been made explicit.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;2 July 2024]</span></i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Returns the content of a file <span class="deltaxml-old" style="background:#FF5555">in its string representation</span><span class="deltaxml-new" style="background:#90EE90">as a string</span>.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:read-text</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td><td><span style="display: none;" class="delete_version"><code class="assign">:=&nbsp;</code><code>'utf-8'</code></span><span style="display: none;" class="add_version"><code class="assign">:=&nbsp;</code><code>'utf-8'</code>,</span><span class="modify_version"><code class="assign">:=&nbsp;</code><code>'utf-8'</code><span class="deltaxml-new" style="background:#90EE90">,</span></span></td></tr><tr class="add_version" style="display: none;"><td><code>$fallback</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:boolean?</code></code></td><td><code class="assign">:=&nbsp;</code><code>false()</code></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$fallback</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:boolean?</span></code></code></td><td><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">false()</span></code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:string</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Returns the content of a file in its string representation.</span><span style="display: none;" class="add_version">Returns the content of a file in its string representation. Newlines are normalized: Any <span class="unicode-codepoint">U+000D</span> (<span class="unicode-name">CARRIAGE RETURN</span>) character, optionally followed by a <span class="unicode-codepoint">U+000A</span> (<span class="unicode-name">NEWLINE</span>) character, is converted to a single <span class="unicode-codepoint">U+000A</span> (<span class="unicode-name">NEWLINE</span>) character.</span><span class="modify_version">Returns the content of a file in its string representation.<span class="deltaxml-new" style="background:#90EE90"> Newlines are normalized: Any </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+000D</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">CARRIAGE RETURN</span></span><span class="deltaxml-new" style="background:#90EE90">) character, optionally followed by a </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+000A</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">NEWLINE</span></span><span class="deltaxml-new" style="background:#90EE90">) character, is converted to a single </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+000A</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">NEWLINE</span></span><span class="deltaxml-new" style="background:#90EE90">) character.</span></span></p><p><span class="deltaxml-old" style="background:#FF5555">The optional parameter </span><code><span class="deltaxml-old" style="background:#FF5555">$encoding</span></code><span class="deltaxml-old" style="background:#FF5555">, if omitted or an empty sequence, is considered to be </span><code><span class="deltaxml-old" style="background:#FF5555">UTF-8</span></code><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If no encoding is supplied, </span><code><span class="deltaxml-new" style="background:#90EE90">utf-8</span></code><span class="deltaxml-new" style="background:#90EE90"> is used as input encoding. By default, invalid XML characters will be rejected. If </span><code><span class="deltaxml-new" style="background:#90EE90">$fallback</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, the characters will be replaced with the Unicode replacement character </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+FFFD</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">REPLACEMENT CHARACTER</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">�</span></code><span class="deltaxml-new" style="background:#90EE90">) .</span></p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <code>$encoding</code> is invalid or not supported by the implementation.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding is invalid or not supported by the implementation.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>encoding is invalid or not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><p><code><span class="deltaxml-new" style="background:#90EE90">contains(file:read-text('todos.txt'), 'push forward')</span></code></p></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> if the file </span><code><span class="deltaxml-new" style="background:#90EE90">todos.txt</span></code><span class="deltaxml-new" style="background:#90EE90"> contains the specified string.)</span></em></p></td></tr><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-new" style="background:#90EE90">'test.bin'
=&gt; file:write-binary(xs:hexBinary('00'))
=&gt; file:read-text(fallback := true())
=&gt; string-to-codepoints()</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">65533</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns the codepoint value of the Unicode replacement character.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-read-text-lines"></a>4.7 <a href="#func-file-read-text-lines" style="text-decoration: none">file:read-text-lines</a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-write"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-read-text"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><code><span class="deltaxml-new" style="background:#90EE90">$fallback</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter added.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;2 July 2024]</span></i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Returns the contents of a file as a sequence of strings, separated at newline boundaries.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:read-text-lines</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td><td><span style="display: none;" class="delete_version"><code class="assign">:=&nbsp;</code><code>'utf-8'</code></span><span style="display: none;" class="add_version"><code class="assign">:=&nbsp;</code><code>'utf-8'</code>,</span><span class="modify_version"><code class="assign">:=&nbsp;</code><code>'utf-8'</code><span class="deltaxml-new" style="background:#90EE90">,</span></span></td></tr><tr class="add_version" style="display: none;"><td><code>$fallback</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:boolean?</code></code></td><td><code class="assign">:=&nbsp;</code><code>false()</code></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$fallback</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:boolean?</span></code></code></td><td><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">false()</span></code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:string*</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the contents of a file as a sequence of strings, separated at newline boundaries.</p><p><span class="deltaxml-old" style="background:#FF5555">The optional parameter </span><code><span class="deltaxml-old" style="background:#FF5555">$encoding</span></code><span class="deltaxml-old" style="background:#FF5555">, if omitted or an empty sequence, is considered to be </span><code><span class="deltaxml-old" style="background:#FF5555">UTF-8</span></code><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The newline handling is the same as for </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#func-unparsed-text-lines"><span class="deltaxml-old" style="background:#FF5555">Section 14.6.6 fn:unparsed-text-lines</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Any of the character sequences </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+000A</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">NEWLINE</span></span><span class="deltaxml-new" style="background:#90EE90">) , </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+000D</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">CARRIAGE RETURN</span></span><span class="deltaxml-new" style="background:#90EE90">) , or </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+000D</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">CARRIAGE RETURN</span></span><span class="deltaxml-new" style="background:#90EE90">) followed by </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+000A</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">NEWLINE</span></span><span class="deltaxml-new" style="background:#90EE90">) is interpreted as newline.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If no encoding is supplied, </span><code><span class="deltaxml-new" style="background:#90EE90">utf-8</span></code><span class="deltaxml-new" style="background:#90EE90"> is used as input encoding. By default, invalid XML characters will be rejected. If </span><code><span class="deltaxml-new" style="background:#90EE90">$fallback</span></code><span class="deltaxml-new" style="background:#90EE90"> is enabled, the characters will be replaced with the Unicode replacement character </span><span class="unicode-codepoint"><span class="deltaxml-new" style="background:#90EE90">U+FFFD</span></span><span class="deltaxml-new" style="background:#90EE90"> (</span><span class="unicode-name"><span class="deltaxml-new" style="background:#90EE90">REPLACEMENT CHARACTER</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">�</span></code><span class="deltaxml-new" style="background:#90EE90">) .</span></p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <code>$encoding</code> is invalid or not supported by the implementation.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding is invalid or not supported by the implementation.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>encoding is invalid or not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-new" style="background:#90EE90">let $file := 'numbers.txt'
let $data := (1 to 5) ! string()
return (
  file:write-text-lines($file, $data),
  file:read-text-lines($file) =&gt; deep-equal($data)
)</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Can be used to prove that the written and read strings are equal.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-write"></a>4.8 <a href="#func-file-write" style="text-decoration: none">file:write</a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-descendants"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-read-text-lines"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><code><span class="deltaxml-new" style="background:#90EE90">$options</span></code><span class="deltaxml-new" style="background:#90EE90"> can now be a map, in alignment with </span><code><span class="deltaxml-new" style="background:#90EE90">fn:serialize</span></code><span class="deltaxml-new" style="background:#90EE90">.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;7 July 2025]</span></i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Writes a <span class="deltaxml-old" style="background:#FF5555">sequence of items</span><span class="deltaxml-new" style="background:#90EE90">serialized value</span> to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:write</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><span style="display: none;" class="delete_version"><code>$items</code></span><span style="display: none;" class="add_version"><code>$value</code></span><span class="modify_version"><code>$<span class="deltaxml-old" style="background:#FF5555">items</span><span class="deltaxml-new" style="background:#90EE90">value</span></code></span></td><td><code class="as">as&nbsp;</code><code class="type"><code>item()*</code></code>,</td><td></td></tr><tr class="arg"><td><span style="display: none;" class="delete_version"><code>$params</code></span><span style="display: none;" class="add_version"><code>$options</code></span><span class="modify_version"><code>$<span class="deltaxml-old" style="background:#FF5555">params</span><span class="deltaxml-new" style="background:#90EE90">options</span></code></span></td><td><span style="display: none;" class="delete_version"><code class="as">as&nbsp;</code><code class="type"><code>element(output:serialization-parameters)?</code></code></span><span style="display: none;" class="add_version"><code class="as">as&nbsp;</code><code class="type"><code>(element(output:serialization-parameters) | map(*))?</code></code></span><span class="modify_version"><code class="as">as&nbsp;</code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">(</span>element(output:serialization-parameters)<span class="deltaxml-new" style="background:#90EE90"> | map(*))</span>?</code></code></span></td><td><code class="assign">:=&nbsp;</code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Writes a sequence of items to a file.</span></p><p><span style="display: none;" class="delete_version"> If <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span><span style="display: none;" class="add_version">Serializes a value and appends the resulting string to a file. If the file pointed to by <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> If</span><span class="deltaxml-new" style="background:#90EE90">Serializes a value and appends the resulting string to a file. If the file pointed to by</span> <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span></p><p><span style="display: none;" class="delete_version"><code>$params</code>, if not an empty sequence, controls the way the <code>$items</code> items are serialized. The semantics of <code>$params</code> are those of the same argument of <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-serialize">Section 15.1.3 fn:serialize</a><sup><small>FO</small></sup>, consisting of an <code>output:serialization-parameters</code> element whose format is defined in <a href="https://qt4cg.org/specifications/xslt-xquery-serialization-40/#serparams-in-xdm-instance">Section 3.1 Setting Serialization Parameters by Means of a Parameter Document</a><sup><small>SE</small></sup>. In contrast to <code>fn:serialize</code>, the encoding stage will not be skipped by this function.</span><span style="display: none;" class="add_version"> The <code>$options</code> argument controls the way how <code>$value</code> is serialized. The semantics are the same as for <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-serialize">Section 15.1.3 fn:serialize</a><sup><small>FO</small></sup>. In contrast to <code>fn:serialize</code>, the encoding stage will not be skipped by this function.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">$params</span><span class="deltaxml-old" style="background:#FF5555">, if</span><span class="deltaxml-new" style="background:#90EE90"> The</span> <code><span class="deltaxml-old" style="background:#FF5555">not</span><span class="deltaxml-new" style="background:#90EE90">$options</span></code> <span class="deltaxml-old" style="background:#FF5555">an empty sequence,</span><span class="deltaxml-new" style="background:#90EE90">argument</span> controls the way <span class="deltaxml-old" style="background:#FF5555">the</span><span class="deltaxml-new" style="background:#90EE90">how</span> <code>$<span class="deltaxml-old" style="background:#FF5555">items</span><span class="deltaxml-new" style="background:#90EE90">value</span></code> <span class="deltaxml-old" style="background:#FF5555">items are</span><span class="deltaxml-new" style="background:#90EE90">is</span> serialized. The semantics <span class="deltaxml-old" style="background:#FF5555">of </span><span class="deltaxml-old" style="background:#FF5555">$params</span><span class="deltaxml-old" style="background:#FF5555"> </span>are <span class="deltaxml-old" style="background:#FF5555">those of </span>the same <span class="deltaxml-old" style="background:#FF5555">argument of</span><span class="deltaxml-new" style="background:#90EE90">as for</span> <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-serialize">Section 15.1.3 fn:serialize</a><sup><small>FO</small></sup><span class="deltaxml-old" style="background:#FF5555">, consisting of an </span><span class="deltaxml-old" style="background:#FF5555">output:serialization-parameters</span><span class="deltaxml-old" style="background:#FF5555"> element whose format is defined in </span><a href="https://qt4cg.org/specifications/xslt-xquery-serialization-40/#serparams-in-xdm-instance"><span class="deltaxml-old" style="background:#FF5555">Section 3.1 Setting Serialization Parameters by Means of a Parameter Document</span></a><span class="deltaxml-old" style="background:#FF5555">SE</span>. In contrast to <code>fn:serialize</code>, the encoding stage will not be skipped by this function.</span></p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><p><code><span class="deltaxml-new" style="background:#90EE90">file:write('numbers.txt', 1 to 10)</span></code></p></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Writes 10 numbers to the file </span><code><span class="deltaxml-new" style="background:#90EE90">numbers.txt</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-new" style="background:#90EE90">file:write(
  'result.xml',
  &lt;result&gt;&lt;done/&gt;&lt;/result&gt;,
  { 'encoding': 'us-ascii', 'indent': true() }
)</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Serializes an indented element node as </span><code><span class="deltaxml-new" style="background:#90EE90">US-ASCII</span></code><span class="deltaxml-new" style="background:#90EE90"> and writes it to the file </span><code><span class="deltaxml-new" style="background:#90EE90">result.xml</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">file:write(
  'numbers.json',
  map:build(1 to 10, string#1),
  { 'method': 'json' }
)</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Writes a map, serialized as JSON, to a specified file.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-write-binary"></a>4.9 <a href="#func-file-write-binary" style="text-decoration: none">file:write-binary</a></h3><dl><dt class="label">Summary</dt><dd><p>Writes <span class="deltaxml-old" style="background:#FF5555">a Base64 item as binary</span><span class="deltaxml-new" style="background:#90EE90">binary data</span> to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:write-binary</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:base64Binary</code></code>,</td><td></td></tr><tr class="arg"><td><code>$offset</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td><td><code class="assign">:=&nbsp;</code><code>0</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Writes a Base64 item as binary to a file. </span></p><p><span style="display: none;" class="delete_version">If <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span><span style="display: none;" class="add_version">Writes the binary data of an <code>xs:base64Binary</code> item to a file. If the file pointed to by <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90">Writes the binary data of an </span><code><span class="deltaxml-new" style="background:#90EE90">xs:base64Binary</span></code><span class="deltaxml-old" style="background:#FF5555">If</span><span class="deltaxml-new" style="background:#90EE90"> item to a file. If the file pointed to by</span> <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span></p><p><span style="display: none;" class="delete_version">If the optional parameter <code>$offset</code> is specified and not set to an empty sequence, data will be written starting at this file position. An existing file may be resized by such an operation.</span><span style="display: none;" class="add_version">If <code>$offset</code> is specified and not an empty sequence, data will be written starting at this file position, and existing bytes will be overwritten. The operation may resize the existing file.</span><span class="modify_version">If <span class="deltaxml-old" style="background:#FF5555">the optional parameter </span><code>$offset</code> is specified and not <span class="deltaxml-old" style="background:#FF5555">set to </span>an empty sequence, data will be written starting at this file position<span class="deltaxml-old" style="background:#FF5555">. An existing file may be resized by such an operation</span><span class="deltaxml-new" style="background:#90EE90">, and existing bytes will be overwritten. The operation may resize the existing file</span>.</span></p><p>The function returns the empty sequence if the operation is successful.</p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">Supplying an offset makes sense only if the file already exists.</span></p></div></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40out-of-range" title="file:out-of-range">file:out-of-range</a>] is raised if <code>$offset</code> is negative, or if it exceeds the current file size.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40out-of-range" title="file:out-of-range">file:out-of-range</a>] is raised if the specified offset is negative, or if it exceeds the current file size.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40out-of-range" title="file:out-of-range">file:out-of-range</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>offset is negative, or if it exceeds the current file size.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:write-binary('data.bin', xs:hexBinary('414243'))</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Writes the bytes </span><code><span class="deltaxml-new" style="background:#90EE90">0x44</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">0x43</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">0x41</span></code><span class="deltaxml-new" style="background:#90EE90"> to the file </span><code><span class="deltaxml-new" style="background:#90EE90">data.bin</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:write-binary('data.bin', xs:hexBinary('44', 2))</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(If this expression is called after the previous one, overwrites the last byte with </span><code><span class="deltaxml-new" style="background:#90EE90">0x44</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-write-text"></a>4.10 <a href="#func-file-write-text" style="text-decoration: none">file:write-text</a></h3><dl><dt class="label">Summary</dt><dd><p>Writes a string to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:write-text</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:=&nbsp;</code><code>'utf-8'</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Writes a strings to a file.</span></p><p><span style="display: none;" class="delete_version"> If <code>$file</code> already exists, it will be overwritten.</span><span style="display: none;" class="add_version">Writes a string to a file. If the file pointed to by <code>$file</code> already exists, it will be overwritten.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> If</span><span class="deltaxml-new" style="background:#90EE90">Writes a string to a file. If the file pointed to by</span> <code>$file</code> already exists, it will be overwritten.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The optional parameter </span><code><span class="deltaxml-old" style="background:#FF5555">$encoding</span></code><span class="deltaxml-old" style="background:#FF5555">, if omitted or an empty sequence, is considered to be </span><code><span class="deltaxml-old" style="background:#FF5555">UTF-8</span></code><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If no encoding is supplied, </span><code><span class="deltaxml-new" style="background:#90EE90">utf-8</span></code><span class="deltaxml-new" style="background:#90EE90"> is used as output encoding.</span></p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <code>$encoding</code> is invalid or not supported by the implementation.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding is invalid or not supported by the implementation.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>encoding is invalid or not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:write-text('todos.txt', 'get organized')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Writes a string to the file </span><code><span class="deltaxml-new" style="background:#90EE90">todos.txt</span></code><span class="deltaxml-new" style="background:#90EE90">. The file is created if it does not already exist.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-write-text-lines"></a>4.11 <a href="#func-file-write-text-lines" style="text-decoration: none">file:write-text-lines</a></h3><dl><dt class="label">Summary</dt><dd><p>Writes <span class="deltaxml-old" style="background:#FF5555">a sequence of </span>strings to a file<span class="deltaxml-old" style="background:#FF5555">, each followed by the system-dependent newline character</span>.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:write-text-lines</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td><td></td></tr><tr class="arg"><td><code>$values</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string*</code></code>,</td><td></td></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:=&nbsp;</code><code>'utf-8'</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Writes a sequence of strings to a file, each followed by the system-dependent newline character.</span></p><p><span style="display: none;" class="delete_version"> If <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span><span style="display: none;" class="add_version">Writes strings to a file, each followed by the operating-system specific newline character. If the file pointed to by <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555"> If</span><span class="deltaxml-new" style="background:#90EE90">Writes strings to a file, each followed by the operating-system specific newline character. If the file pointed to by</span> <code>$file</code> already exists, it will be overwritten; otherwise, it will be created.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The optional parameter </span><code><span class="deltaxml-old" style="background:#FF5555">$encoding</span></code><span class="deltaxml-old" style="background:#FF5555">, if omitted or an empty sequence, is considered to be </span><code><span class="deltaxml-old" style="background:#FF5555">UTF-8</span></code><span class="deltaxml-old" style="background:#FF5555">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If no encoding is supplied, </span><code><span class="deltaxml-new" style="background:#90EE90">utf-8</span></code><span class="deltaxml-new" style="background:#90EE90"> is used as output encoding.</span></p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <code>$file</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <code>$file</code> points to a directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$file</span><span class="deltaxml-new" style="background:#90EE90">the</span> <span class="deltaxml-new" style="background:#90EE90">specified path </span>points to a directory.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <code>$encoding</code> is invalid or not supported by the implementation.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding is invalid or not supported by the implementation.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>encoding is invalid or not supported by the implementation.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:write-text-lines('numbers.txt', (1 to 5) ! string())</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Writes the string representation of the integers 1 to 5 to the file </span><code><span class="deltaxml-new" style="background:#90EE90">numbers.txt</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr></tbody></table></div></dd></dl></div></div><div class="div1"><h2><a id="paths"></a>5 <a href="#paths" style="text-decoration: none">Paths</a></h2><p><span class="deltaxml-old" style="background:#FF5555">None of the functions in this section performs any check regarding the existence of the received or returned paths.</span></p><div class="div2"><h3><a id="func-file-name"></a><span class="deltaxml-old" style="background:#FF5555">5.1 </span><a href="#func-file-name" style="text-decoration: none"><span class="deltaxml-old" style="background:#FF5555">file:name</span></a></h3><dl><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Summary</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the name of a file or directory.</span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-old" style="background:#FF5555">file:name</span></code><span class="deltaxml-old" style="background:#FF5555">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-old" style="background:#FF5555">$path</span></code></td><td><code class="as"><span class="deltaxml-old" style="background:#FF5555">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code></code></td><td></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-old" style="background:#FF5555">)</span><code class="as"><span class="deltaxml-old" style="background:#FF5555">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Properties</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic"><span class="deltaxml-old" style="background:#FF5555">deterministic</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent"><span class="deltaxml-old" style="background:#FF5555">context-independent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-old" style="background:#FF5555">focus-independent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Rules</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the name of a file or directory.</span></p><p><span class="deltaxml-old" style="background:#FF5555">An empty string is returned if the path points to the root directory, or if it contains no directory separators.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic"><span class="deltaxml-old" style="background:#FF5555">deterministic</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555"> (no path existence check is made).</span></p></dd></dl></div><div class="div2"><h3><a id="func-file-parent"></a><span class="deltaxml-old" style="background:#FF5555">5.2</span><span class="deltaxml-new" style="background:#90EE90">5.1</span> <a href="#func-file-parent" style="text-decoration: none">file:parent</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the <span class="deltaxml-new" style="background:#90EE90">path to the </span>parent directory of a given path.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:parent</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:string?</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Transforms the given path into an absolute path, as specified by <a href="#fn.resolve-path">file:resolve-path</a>, and returns the parent directory.</p><p><span class="deltaxml-old" style="background:#FF5555">The inverse function is </span><a href="#fn.children"><span class="deltaxml-old" style="background:#FF5555">file:children</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><p>An empty sequence is returned if the path points to a root directory.</p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The inverse function is </span><a href="#func-file-children"><span class="deltaxml-new" style="background:#90EE90">file:children</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:parent('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">()</span></pre></div></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:current-dir() = file:parent('abc')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-children"></a><span class="deltaxml-old" style="background:#FF5555">5.3</span><span class="deltaxml-new" style="background:#90EE90">5.2</span> <a href="#func-file-children" style="text-decoration: none">file:children</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the paths of all files and directories that are located in the given directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:children</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:string*</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Returns the paths of all files and directories that are located in the given directory. The order of the items in the resulting sequence is not defined. The "." and ".." items are never returned.</span><span style="display: none;" class="add_version">Returns the paths of all files and directories that are located in the given directory. The order of the items in the resulting sequence is not defined. The references to the specified directory and its parent directory (<code>.</code> and <code>..</code>) are not returned.</span><span class="modify_version">Returns the paths of all files and directories that are located in the given directory. The order of the items in the resulting sequence is not defined. The <span class="deltaxml-old" style="background:#FF5555">"</span><span class="deltaxml-new" style="background:#90EE90">references to the specified directory and its parent directory (</span><code>.<span class="deltaxml-old" style="background:#FF5555">"</span></code> and <span class="deltaxml-old" style="background:#FF5555">"</span><code>..</code><span class="deltaxml-old" style="background:#FF5555">" items are never</span><span class="deltaxml-new" style="background:#90EE90">) are not</span> returned.</span></p><p><span class="deltaxml-old" style="background:#FF5555">The inverse function is </span><a href="#fn.parent"><span class="deltaxml-old" style="background:#FF5555">file:parent</span></a><span class="deltaxml-old" style="background:#FF5555">; a related function is </span><a href="#fn.list"><span class="deltaxml-old" style="background:#FF5555">file:list</span></a><span class="deltaxml-old" style="background:#FF5555">.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The inverse function is </span><a href="#func-file-parent"><span class="deltaxml-new" style="background:#90EE90">file:parent</span></a><span class="deltaxml-new" style="background:#90EE90">; a related function is </span><a href="#func-file-list"><span class="deltaxml-new" style="background:#90EE90">file:list</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></dd><dt class="label">Error Conditions</dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40not-found" title="file:not-found"><span class="deltaxml-new" style="background:#90EE90">file:not-found</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if the specified path does not exist.</span></p><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if <code>$path</code> does not point to an existing directory.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the specified path does not point to an existing directory.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>path does not point to an existing directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">count(file:children('.'))</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">( Counts the files and directories in the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">. ).</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">
            file:children('path/to/media/')[matches(., '\.(avi|mpg|mp4)$', 'i')]
          </span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">( Returns the paths to large videos found in a specific directory. ).</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-descendants"></a><span class="deltaxml-new" style="background:#90EE90">5.3 </span><a href="#func-file-descendants" style="text-decoration: none"><span class="deltaxml-new" style="background:#90EE90">file:descendants</span></a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-list"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-write"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><span class="deltaxml-new" style="background:#90EE90">New in 4.0.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;2 July 2024]</span></i></p></li></ol></div><dl><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Summary</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns the paths of all files and directories that are located in the given directory and its subdirectories.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-new" style="background:#90EE90">file:descendants</span></code><span class="deltaxml-new" style="background:#90EE90">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code></code></td><td></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-new" style="background:#90EE90">)</span><code class="as"><span class="deltaxml-new" style="background:#90EE90">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-new" style="background:#90EE90">xs:string*</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Properties</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-new" style="background:#90EE90">nondeterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-new" style="background:#90EE90">context-dependent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-new" style="background:#90EE90">focus-independent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Rules</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Returns the paths of all files and directories that are located in the given directory and its subdirectories. The order of the items in the resulting sequence is not defined. The references to the specified directory and its parent directory (</span><code><span class="deltaxml-new" style="background:#90EE90">.</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">..</span></code><span class="deltaxml-new" style="background:#90EE90">) are not returned.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Error Conditions</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40not-found" title="file:not-found"><span class="deltaxml-new" style="background:#90EE90">file:not-found</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if the specified path does not exist.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40no-dir" title="file:no-dir"><span class="deltaxml-new" style="background:#90EE90">file:no-dir</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if the specified path does not point to an existing directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40io-error" title="file:io-error"><span class="deltaxml-new" style="background:#90EE90">file:io-error</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if any other error occurs.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><p><code><span class="deltaxml-new" style="background:#90EE90">count(file:descendants('.')[file:is-directory(.)])</span></code></p></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">( Counts the subdirectories in the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">. ).</span></em></p></td></tr><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-new" style="background:#90EE90">for $file in file:descendants('.')
where file:last-modified($file) &gt; current-dateTime() - xs:dayTimeDuration('PT1H')
return $file</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">( Returns the paths to all files that have been modified in the last hour. ).</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-list"></a><span class="deltaxml-new" style="background:#90EE90">5.4 </span><a href="#func-file-list" style="text-decoration: none"><span class="deltaxml-new" style="background:#90EE90">file:list</span></a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-list-roots"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-descendants"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><code><span class="deltaxml-new" style="background:#90EE90">$pattern</span></code><span class="deltaxml-new" style="background:#90EE90"> can now be supplied without supplying </span><code><span class="deltaxml-new" style="background:#90EE90">$recursive</span></code><span class="deltaxml-new" style="background:#90EE90">.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;7 July 2025]</span></i></p></li></ol></div><dl><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Summary</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Lists all files and directories in a given directory.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-new" style="background:#90EE90">file:list</span></code><span class="deltaxml-new" style="background:#90EE90">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$dir</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code></code><span class="deltaxml-new" style="background:#90EE90">,</span></td><td></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$recursive</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:boolean?</span></code></code></td><td><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">false()</span></code><span class="deltaxml-new" style="background:#90EE90">,</span></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$pattern</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code></code></td><td><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">()</span></code></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-new" style="background:#90EE90">)</span><code class="as"><span class="deltaxml-new" style="background:#90EE90">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-new" style="background:#90EE90">xs:string*</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Properties</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-new" style="background:#90EE90">nondeterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-new" style="background:#90EE90">context-dependent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-new" style="background:#90EE90">focus-independent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Rules</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Lists all files and directories in a given directory. In contrast to is </span><a href="#func-file-children"><span class="deltaxml-new" style="background:#90EE90">file:children</span></a><span class="deltaxml-new" style="background:#90EE90">, the returned paths are relative to the supplied directory </span><code><span class="deltaxml-new" style="background:#90EE90">$dir</span></code><span class="deltaxml-new" style="background:#90EE90">. The order of the items in the resulting sequence is not defined. The references to the specified directory and its parent directory (</span><code><span class="deltaxml-new" style="background:#90EE90">.</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">..</span></code><span class="deltaxml-new" style="background:#90EE90">) are not returned.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If </span><code><span class="deltaxml-new" style="background:#90EE90">$recursive</span></code><span class="deltaxml-new" style="background:#90EE90"> is </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, all directories and files will be returned that are found while recursively traversing the given directory. Otherwise, only the contents of the specified directory will be returned.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">$pattern</span></code><span class="deltaxml-new" style="background:#90EE90"> argument is used to define a name pattern in the glob syntax. If supplied, only the paths of the files and directories whose names are matching the pattern will be returned.</span></p><p><span class="deltaxml-new" style="background:#90EE90">An implementation must support at least the following glob syntax characters:</span></p><ul><li><p><code><span class="deltaxml-new" style="background:#90EE90">*</span></code><span class="deltaxml-new" style="background:#90EE90"> for matching any number of unknown characters and</span></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">?</span></code><span class="deltaxml-new" style="background:#90EE90"> for matching one unknown character.</span></p></li></ul><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">A related function is </span><a href="#func-file-children"><span class="deltaxml-new" style="background:#90EE90">file:children</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Error Conditions</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40not-found" title="file:not-found"><span class="deltaxml-new" style="background:#90EE90">file:not-found</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if the specified path does not exist.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40no-dir" title="file:no-dir"><span class="deltaxml-new" style="background:#90EE90">file:no-dir</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if the specified path does not point to an existing directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40io-error" title="file:io-error"><span class="deltaxml-new" style="background:#90EE90">file:io-error</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if any other error occurs.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><p><code><span class="deltaxml-new" style="background:#90EE90">file:list('.')</span></code></p></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns the names of all files in the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><p><code><span class="deltaxml-new" style="background:#90EE90">file:list('.', pattern := '*.zip')</span></code></p></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns the names of archive files in the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-new" style="background:#90EE90">let $root := '/path/to/files/'
for $file in file:list($root, true(), '*.txt')
let $path := file:resolve-path($file, $root)
where file:size($path) &gt; 1000000
return file:read-text($path)</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns the contents of large text files found in a specific directory and its subdirectories.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-list-roots"></a><span class="deltaxml-new" style="background:#90EE90">5.5 </span><a href="#func-file-list-roots" style="text-decoration: none"><span class="deltaxml-new" style="background:#90EE90">file:list-roots</span></a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-resolve-path"><span class="deltaxml-new" style="background:#90EE90">⬇</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;</span><a href="#func-file-list"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><span class="deltaxml-new" style="background:#90EE90">New in 4.0.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;2 July 2024]</span></i></p></li></ol></div><dl><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Summary</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Lists all root directories of the file system.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name return-type"><td colspan="3"><code class="function"><span class="deltaxml-new" style="background:#90EE90">file:list-roots</span></code><span class="deltaxml-new" style="background:#90EE90">()</span><code class="as"><span class="deltaxml-new" style="background:#90EE90">&nbsp;as&nbsp;</span></code><code class="return-type"><span class="deltaxml-new" style="background:#90EE90">xs:string*</span></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Properties</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-new" style="background:#90EE90">nondeterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-new" style="background:#90EE90">context-dependent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-new" style="background:#90EE90">focus-independent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Rules</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Lists all root directories of the file system:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">On a Windows system, root directories are usually the letters of the currently available drives, followed by a colon and a backslash (for example, </span><code><span class="deltaxml-new" style="background:#90EE90">C:\</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">D:\</span></code><span class="deltaxml-new" style="background:#90EE90">).</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">On a UNIX-based system, it is usually a single slash, denoting the root directory.</span></p></li></ul><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">Dynamically available UNC file names are not returned by this function.</span></p></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:list-roots('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(A single slash as result indicates a UNIX-based system.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-resolve-path"></a><span class="deltaxml-new" style="background:#90EE90">5.6 </span><a href="#func-file-resolve-path" style="text-decoration: none"><span class="deltaxml-new" style="background:#90EE90">file:resolve-path</span></a></h3><div class="changes"><p class="changesHeading"><span class="deltaxml-new" style="background:#90EE90">Changes in 4.0&nbsp;</span><a href="#func-file-list-roots"><span class="deltaxml-new" style="background:#90EE90">⬆</span></a></p><ol><li><p><code><span class="deltaxml-new" style="background:#90EE90">$base</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter added.</span><i><span class="deltaxml-new" style="background:#90EE90">&nbsp;&nbsp;[Issue </span><a href="https://github.com/qt4cg/qtspecs/issues/2016"><span class="deltaxml-new" style="background:#90EE90">2016</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;2 July 2024]</span></i></p></li></ol></div><dl><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Summary</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Transforms a relative path into an absolute operating system path.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-new" style="background:#90EE90">file:resolve-path</span></code><span class="deltaxml-new" style="background:#90EE90">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code></code><span class="deltaxml-new" style="background:#90EE90">,</span></td><td></td></tr><tr class="arg"><td><code><span class="deltaxml-new" style="background:#90EE90">$base</span></code></td><td><code class="as"><span class="deltaxml-new" style="background:#90EE90">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-new" style="background:#90EE90">xs:string?</span></code></code></td><td><code class="assign"><span class="deltaxml-new" style="background:#90EE90">:=&nbsp;</span></code><code><span class="deltaxml-new" style="background:#90EE90">()</span></code></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-new" style="background:#90EE90">)</span><code class="as"><span class="deltaxml-new" style="background:#90EE90">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Properties</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-new" style="background:#90EE90">nondeterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-new" style="background:#90EE90">context-dependent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-new" style="background:#90EE90">focus-independent</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. </span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Rules</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">Transforms a relative path into an absolute operating system path. The following rules apply in order:</span></p><ol class="enumar"><li><p><span class="deltaxml-new" style="background:#90EE90">If </span><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code><span class="deltaxml-new" style="background:#90EE90"> is an absolute path, it is returned unchanged.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, if </span><code><span class="deltaxml-new" style="background:#90EE90">$base</span></code><span class="deltaxml-new" style="background:#90EE90"> is the empty sequence, </span><code><span class="deltaxml-new" style="background:#90EE90">$path</span></code><span class="deltaxml-new" style="background:#90EE90"> is resolved against the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, it is resolved against the supplied base path or, if the base path does not point to a directory, to its parent directory. An error is raised if the base is a relative path.</span></p></li></ol><p><span class="deltaxml-new" style="background:#90EE90">If the resulting path points to a directory, it will be suffixed with the operating-system specific directory separator.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Error Conditions</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRFILE40is-relative" title="file:is-relative"><span class="deltaxml-new" style="background:#90EE90">file:is-relative</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised if the specified base directory is relative.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:resolve-path('INF', 'C:/Windows/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">'C:/Windows/INF/'</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(The result refers to a Windows system.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:resolve-path('data.bin', 'C:/Temp')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">'C:/data.bin'</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(The result refers to a Windows system.)</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:resolve-path('hilda/notes.txt', '/home/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">'/home/hilda/notes.txt'</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(The result refers to a UNIX-based system.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-path-to-native"></a><span class="deltaxml-old" style="background:#FF5555">5.4</span><span class="deltaxml-new" style="background:#90EE90">5.7</span> <a href="#func-file-path-to-native" style="text-decoration: none">file:path-to-native</a></h3><dl><dt class="label">Summary</dt><dd><p>Transforms a <span class="deltaxml-old" style="background:#FF5555">URI, an absolute path, or relative path</span><span class="deltaxml-new" style="background:#90EE90">path</span> to a canonical<span class="deltaxml-old" style="background:#FF5555">, system-dependent path</span> representation.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:path-to-native</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:string</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Transforms a URI, an absolute path, or relative path to a canonical, <span class="deltaxml-old" style="background:#FF5555">system-dependent</span><span class="deltaxml-new" style="background:#90EE90">operating-system specific</span> path representation. A canonical path is both absolute and unique and thus contains no redirections such as references to parent directories or symbolic links.</p><p>If the resulting path points to a directory, it will be suffixed with the <span class="deltaxml-new" style="background:#90EE90">operating-</span>system<span class="deltaxml-old" style="background:#FF5555">-</span><span class="deltaxml-new" style="background:#90EE90"> </span>specific directory separator.</p></dd><dt class="label">Error Conditions</dt><dd><p><span style="display: none;" class="delete_version">[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <code>$path</code> does not exist.</span><span style="display: none;" class="add_version"> [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</span><span class="modify_version"><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if <span class="deltaxml-old" style="background:#FF5555">$</span><span class="deltaxml-new" style="background:#90EE90">the specified </span>path does not exist.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> </span>[<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if an error occurs while trying to <span class="deltaxml-old" style="background:#FF5555">obtain</span><span class="deltaxml-new" style="background:#90EE90">generate</span> the native path.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:path-to-native('/')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns </span><code><span class="deltaxml-new" style="background:#90EE90">/</span></code><span class="deltaxml-new" style="background:#90EE90"> on a UNIX-based system.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-path-to-uri"></a><span class="deltaxml-old" style="background:#FF5555">5.5</span><span class="deltaxml-new" style="background:#90EE90">5.8</span> <a href="#func-file-path-to-uri" style="text-decoration: none">file:path-to-uri</a></h3><dl><dt class="label">Summary</dt><dd><p>Transforms a file system path into a URI.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function">file:path-to-uri</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code></td><td></td></tr><tr class="return-type"><td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:anyURI</code></code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Transforms a file system path into a URI with the <code>file://</code> scheme. If the path is relative, it is first resolved against the current working directory.</span><span style="display: none;" class="add_version">Transforms a file system path into a URI with the <code>file</code> scheme. If the path is relative, it is first resolved against the <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.</span><span class="modify_version">Transforms a file system path into a URI with the <code>file<span class="deltaxml-old" style="background:#FF5555">://</span></code> scheme. If the path is relative, it is first resolved against the <span class="deltaxml-old" style="background:#FF5555">current</span><span class="deltaxml-old" style="background:#FF5555"> working directory</span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a>.</span></p><p><span class="deltaxml-old" style="background:#FF5555">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic"><span class="deltaxml-old" style="background:#FF5555">deterministic</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555"> (no path existence check is made).</span></p><p><span class="deltaxml-new" style="background:#90EE90">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic"><span class="deltaxml-new" style="background:#90EE90">deterministic</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90">: the path is neither checked for correctness nor looked up in the file system.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:path-to-uri('/temp')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Returns </span><code><span class="deltaxml-new" style="background:#90EE90">file:///temp</span></code><span class="deltaxml-new" style="background:#90EE90"> on a UNIX-based system).</span></em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">contains(file:path-to-uri('a b'), '%20')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Space characters will be encoded to </span><code><span class="deltaxml-new" style="background:#90EE90">%20</span></code><span class="deltaxml-new" style="background:#90EE90">.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-resolve-path"></a><span class="deltaxml-old" style="background:#FF5555">5.6 </span><a href="#func-file-resolve-path" style="text-decoration: none"><span class="deltaxml-old" style="background:#FF5555">file:resolve-path</span></a></h3><dl><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Summary</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Transforms a relative path into an absolute operating system path.</span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Signature</span></dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name"><td colspan="3"><code class="function"><span class="deltaxml-old" style="background:#FF5555">file:resolve-path</span></code><span class="deltaxml-old" style="background:#FF5555">(</span></td></tr><tr class="arg"><td><code><span class="deltaxml-old" style="background:#FF5555">$path</span></code></td><td><code class="as"><span class="deltaxml-old" style="background:#FF5555">as&nbsp;</span></code><code class="type"><code><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code></code></td><td></td></tr><tr class="return-type"><td colspan="3"><span class="deltaxml-old" style="background:#FF5555">)</span><code class="as"><span class="deltaxml-old" style="background:#FF5555">&nbsp;as&nbsp;</span></code><code><code><span class="deltaxml-old" style="background:#FF5555">xs:string</span></code></code></td></tr></tbody></table></div></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Properties</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">This function is </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic"><span class="deltaxml-old" style="background:#FF5555">nondeterministic</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">, </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent"><span class="deltaxml-old" style="background:#FF5555">context-dependent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">, and </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent"><span class="deltaxml-old" style="background:#FF5555">focus-independent</span></a><sup><small><span class="deltaxml-old" style="background:#FF5555">FO</span></small></sup><span class="deltaxml-old" style="background:#FF5555">. </span></p></dd><dt class="label"><span class="deltaxml-old" style="background:#FF5555">Rules</span></dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Transforms a relative path into an absolute operating system path by resolving it against the current working directory.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the resulting path points to a directory, it will be suffixed with the system-specific directory separator.</span></p></dd></dl></div></div><div class="div1"><h2><a id="sys-props"></a>6 <a href="#sys-props" style="text-decoration: none">System Properties</a></h2><div class="div2"><h3><a id="func-file-dir-separator"></a>6.1 <a href="#func-file-dir-separator" style="text-decoration: none">file:dir-separator</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the <span class="deltaxml-old" style="background:#FF5555">value of the operating system-specific </span>directory separator.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name return-type"><td colspan="3"><code class="function">file:dir-separator</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Returns the value of the operating system-specific directory separator, which usually is <code>/</code> on UNIX-based systems and <code>\</code> on Windows systems.</span><span style="display: none;" class="add_version">Returns the value of the operating-system specific directory separator, which usually is <code>/</code> on UNIX-based systems and <code>\</code> on Windows systems.</span><span class="modify_version">Returns the value of the operating<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>system<span class="deltaxml-old" style="background:#FF5555">-</span><span class="deltaxml-new" style="background:#90EE90"> </span>specific directory separator, which usually is <code>/</code> on UNIX-based systems and <code>\</code> on Windows systems.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:dir-separator() = ('/', '\')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-line-separator"></a>6.2 <a href="#func-file-line-separator" style="text-decoration: none">file:line-separator</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the <span class="deltaxml-old" style="background:#FF5555">value of the operating system-specific </span>line separator.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name return-type"><td colspan="3"><code class="function">file:line-separator</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Returns the value of the operating system-specific line separator, which usually is <code>&amp;#10;</code> on UNIX-based systems, <code>&amp;#13;&amp;#10;</code> on Windows systems and <code>&amp;#13;</code> on Mac systems.</span><span style="display: none;" class="add_version">Returns the value of the operating-system specific line separator, which usually is <code>&amp;#10;</code> on UNIX-based systems, <code>&amp;#13;&amp;#10;</code> on Windows systems and <code>&amp;#13;</code> on old Mac systems.</span><span class="modify_version">Returns the value of the operating<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>system<span class="deltaxml-old" style="background:#FF5555">-</span><span class="deltaxml-new" style="background:#90EE90"> </span>specific line separator, which usually is <code>&amp;#10;</code> on UNIX-based systems, <code>&amp;#13;&amp;#10;</code> on Windows systems and <code>&amp;#13;</code> on <span class="deltaxml-new" style="background:#90EE90">old </span>Mac systems.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">matches(file:line-separator(), '^(\n|\r\n|\r)$')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-path-separator"></a>6.3 <a href="#func-file-path-separator" style="text-decoration: none">file:path-separator</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the <span class="deltaxml-old" style="background:#FF5555">value of the operating system-specific </span>path separator.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name return-type"><td colspan="3"><code class="function">file:path-separator</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span style="display: none;" class="delete_version">Returns the value of the operating system-specific path separator, which usually is <code>:</code> on UNIX-based systems and <code>;</code> on Windows systems.</span><span style="display: none;" class="add_version">Returns the value of the operating-system specific path separator, which usually is <code>:</code> on UNIX-based systems and <code>;</code> on Windows systems.</span><span class="modify_version">Returns the value of the operating<span class="deltaxml-old" style="background:#FF5555"> </span><span class="deltaxml-new" style="background:#90EE90">-</span>system<span class="deltaxml-old" style="background:#FF5555">-</span><span class="deltaxml-new" style="background:#90EE90"> </span>specific path separator, which usually is <code>:</code> on UNIX-based systems and <code>;</code> on Windows systems.</span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:dir-separator() = (':', ';')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-temp-dir"></a>6.4 <a href="#func-file-temp-dir" style="text-decoration: none">file:temp-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the path to the <span class="deltaxml-old" style="background:#FF5555">default </span>temporary-file directory<span class="deltaxml-old" style="background:#FF5555"> of an operating system</span>.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name return-type"><td colspan="3"><code class="function">file:temp-dir</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the path to the default temporary-file directory of an operating system.</p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Expression</span></th><th><span class="deltaxml-new" style="background:#90EE90">Result</span></th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><code><span class="deltaxml-new" style="background:#90EE90">file:write-text(file:temp-dir() || 'todos.txt', 'get on going')</span></code></pre></div></td><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Write a text string to a file in the temporary-file directory.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-base-dir"></a>6.5 <a href="#func-file-base-dir" style="text-decoration: none">file:base-dir</a></h3><dl><dt class="label">Summary</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the parent directory of the static base URI.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Returns the base directory.</span></p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name return-type"><td colspan="3"><code class="function">file:base-dir</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the parent directory of the static base URI.</span></p><p><span class="deltaxml-old" style="background:#FF5555">If the Base URI property is undefined, the empty sequence is returned.</span></p><p><span style="display: none;" class="delete_version">If a static base URI exists, and if points to a local file path, this function returns the same result as the expression <code>file:parent(static-base-uri())</code>.</span><span style="display: none;" class="add_version">Returns the <a title="base directory" class="termref" href="#base-dir">base directory</a>. If defined, the function returns the same result as the expression <code>file:parent(static-base-uri())</code>. Otherwise, it returns an empty sequence</span><span class="modify_version"><span class="deltaxml-old" style="background:#FF5555">If a static</span><span class="deltaxml-new" style="background:#90EE90">Returns the </span><a title="base directory" class="termref" href="#base-dir"><span class="deltaxml-new" style="background:#90EE90">base directory</span></a><span class="deltaxml-old" style="background:#FF5555"> base URI exists, and if points to a local file path, this</span><span class="deltaxml-new" style="background:#90EE90">. If defined, the</span> function returns the same result as the expression <code>file:parent(static-base-uri())</code>.<span class="deltaxml-new" style="background:#90EE90"> Otherwise, it returns an empty sequence</span></span></p></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-new" style="background:#90EE90">let $dir := file:base-dir() otherwise file:create-temp-dir()
return file:write-text($dir || 'todos.txt', 'get up')</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">���</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Writes </span><code><span class="deltaxml-new" style="background:#90EE90">todos.txt</span></code><span class="deltaxml-new" style="background:#90EE90"> to the </span><a title="base directory" class="termref" href="#base-dir"><span class="deltaxml-new" style="background:#90EE90">base directory</span></a><span class="deltaxml-new" style="background:#90EE90"> or, if it is not defined, to a temporary directory.)</span></em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2"><h3><a id="func-file-current-dir"></a>6.6 <a href="#func-file-current-dir" style="text-decoration: none">file:current-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the current working directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tbody><tr class="name return-type"><td colspan="3"><code class="function">file:current-dir</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td></tr></tbody></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>, and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p><span class="deltaxml-old" style="background:#FF5555">Returns the current working directory.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Returns the </span><a title="current working directory" class="termref" href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a><span class="deltaxml-new" style="background:#90EE90">. All relative file paths are resolved against this directory. </span></p></dd><dt class="label">Formal Equivalent</dt><dd><p>The effect of the function is equivalent to the result of the following XPath expression.</p><div class="exampleInner"><pre xml:space="preserve">file:resolve-path('.')</pre></div></dd><dt class="label"><span class="deltaxml-new" style="background:#90EE90">Examples</span></dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Expression:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve" class="small"><span class="deltaxml-new" style="background:#90EE90">file:path-to-native('todos.txt') =
file:path-to-native(file:current-dir() || 'todos.txt')</span></pre></div></td></tr><tr><th style="vertical-align:top"><span class="deltaxml-new" style="background:#90EE90">Result:</span></th><td style="vertical-align:top"><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">true()</span></pre></div><p><em><span class="deltaxml-new" style="background:#90EE90">(Both paths refer to the same file.)</span></em></p></td></tr></tbody></table></div></dd></dl></div></div></div><div class="back"><div class="div1"><h2><a id="biblio"></a>A <a href="#biblio" style="text-decoration: none">References</a></h2><div class="div2"><h3><a id="normative-biblio"></a>A.1 <a href="#normative-biblio" style="text-decoration: none">Normative references</a></h3><dl><dt class="label"><span><a id="expath-file"></a>EXPath File 1.0</span></dt><dd><div><a href="http://expath.org/spec/file">File Module 1.0</a>. Christian Grün, Matthias Brantner and Gabriel Petrovay, editors. EXPath Module 20 February 2015.</div></dd><dt class="label"><span><a id="ieee754"></a>IEEE 754-1985</span></dt><dd><div>IEEE Standard for Binary Floating-Point Arithmetic. See <a href="http://standards.ieee.org/reading/ieee/std_public/description/busarch/754-1985_desc.html">http://standards.ieee.org/reading/ieee/std_public/description/busarch/754-1985_desc.html</a><span class="deltaxml-new" style="background:#90EE90">. </span></div></dd><dt class="label"><span><a id="ieee754-2019"></a>IEEE 754-2019</span></dt><dd><div>IEEE. <em>IEEE Standard for Floating-Point Arithmetic.</em></div></dd><dt class="label"><span><a id="xpath20"></a>XML Path Language (XPath) 2.0</span></dt><dd><div><a href="https://www.w3.org/TR/xpath20/"><cite>XML Path Language (XPath) 2.0 (Second Edition)</cite></a>, Don Chamberlin, Anders Berglund, Scott Boag, <em>et. al.</em>, Editors. World Wide Web Consortium, 14 December 2010. This version is https://www.w3.org/TR/2010/REC-xpath20-20101214/. The <a href="https://www.w3.org/TR/xpath20/">latest version</a> is available at https://www.w3.org/TR/xpath20/.</div></dd><dt class="label"><span><a id="xpath-functions-40"></a>XQuery and XPath Functions and Operators 4.0</span></dt><dd><div><a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html"><cite>XQuery and XPath Functions and Operators 4.0</cite></a>, XSLT Extensions Community Group, World Wide Web Consortium.</div></dd><dt class="label"><span><a id="xpath-40"></a>XML Path Language (XPath) 4.0</span></dt><dd><div></div></dd><dt class="label"><span><a id="xslt-40"></a>XSL Transformations (XSLT) Version 4.0</span></dt><dd><div><em>CITATION: T.B.D.</em></div></dd><dt class="label"><span><a id="xpath-datamodel-40"></a>XQuery and XPath Data Model (XDM) 4.0</span></dt><dd><div><a href="https://qt4cg.org/specifications/xpath-datamodel-40/Overview.html"><cite>XQuery and XPath Data Model (XDM) 4.0</cite></a>, XSLT Extensions Community Group, World Wide Web Consortium.</div></dd><dt class="label"><span><a id="ser30"></a>XSLT and XQuery Serialization 3.0</span></dt><dd><div><a href="http://www.w3.org/TR/xslt-xquery-serialization-30/">XSLT and XQuery Serialization 3.0</a>. Henry Zongaro, et al. W3C Recommendation 08 April 2014.</div></dd><dt class="label"><span><a id="fo30"></a>XQuery and XPath Functions and Operators 3.0</span></dt><dd><div><a href="http://www.w3.org/TR/xpath-functions-30/">XPath and XQuery Functions and Operators 3.0</a>. Michael Kay. W3C Recommendation 08 April 2014.</div></dd><dt class="label"><span><a id="xquery-40"></a>XQuery 4.1: An XML Query Language</span></dt><dd><div><em>CITATION: T.B.D.</em></div></dd><dt class="label"><span><a id="xmlschema-2"></a>XML Schema Part 2: Datatypes Second Edition</span></dt><dd><div> XML Schema Part 2: Datatypes Second Edition, Oct. 28 2004. Available at: <a href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a></div></dd></dl></div><div class="div2"><h3><a id="non-normative-biblio"></a>A.2 <a href="#non-normative-biblio" style="text-decoration: none">Non-normative references</a></h3><dl><dt class="label"><span><a id="tests.file"></a>Test-suite</span></dt><dd><div>The test suite for this module, using QT3 format, is in the EXPath repository <a href="http://github.com/expath/expath-cg/tree/master/tests/qt3/file">http://github.com/expath/expath-cg</a> in the directory tests/qt3/file/</div></dd><dt class="label"><span><a id="qt3"></a>QT3</span></dt><dd><div><a href="http://dev.w3.org/2011/QT3-test-suite/">XML Query Test Suite</a>. W3C 21 June 2013. </div></dd><dt class="label"><span><a id="expath"></a>EXPath</span></dt><dd><div>EXPath: Collaboratively Defining Open Standards for Portable XPath Extensions. <a href="http://expath.org/">http://expath.org/</a>.</div></dd></dl></div></div><div class="div1"><h2><a id="error-summary"></a>B <a href="#error-summary" style="text-decoration: none">Error summary</a></h2><p>The error text provided with these errors is non-normative.</p><dl><dt><a name="ERRFILE40exists"></a>file:exists</dt><dd><p>The specified path already exists.</p></dd><dt><a name="ERRFILE40invalid-path"></a>file:invalid-path</dt><dd><p>The specified path is invalid.</p></dd><dt><a name="ERRFILE40io-error"></a>file:io-error</dt><dd><p>A generic file system error occurred.</p></dd><dt><a name="ERRFILE40is-dir"></a>file:is-dir</dt><dd><p>The specified path points to a directory.</p></dd><dt><a name="ERRFILE40is-relative"></a><span class="deltaxml-new" style="background:#90EE90">file:is-relative</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">The specified path is relative.</span></p></dd><dt><a name="ERRFILE40no-dir"></a>file:no-dir</dt><dd><p>The specified path does not point to a directory.</p></dd><dt><a name="ERRFILE40not-found"></a>file:not-found</dt><dd><p>The specified path does not exist.</p></dd><dt><a name="ERRFILE40out-of-range"></a>file:out-of-range</dt><dd><p>The specified offset or length is negative, or the chosen values would exceed the file bounds.</p></dd><dt><a name="ERRFILE40unknown-encoding"></a>file:unknown-encoding</dt><dd><p>The specified encoding is not supported.</p></dd></dl></div><div class="div1"><h2><a id="glossary"></a>C <a href="#glossary" style="text-decoration: none">Glossary</a> (Non-Normative)</h2><dl><dt><a href="#base-dir"><span class="deltaxml-new" style="background:#90EE90">base directory</span></a></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">If a </span><a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-static-base-uri"><span class="deltaxml-new" style="background:#90EE90">Static Base URI</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> exists, and if it points to a local file, the </span><b><span class="deltaxml-new" style="background:#90EE90">base directory</span></b><span class="deltaxml-new" style="background:#90EE90"> points to the directory of this file. Otherwise, it is undefined.</span></p></dd><dt><a href="#current-working-dir"><span class="deltaxml-new" style="background:#90EE90">current working directory</span></a></dt><dd><p><span class="deltaxml-new" style="background:#90EE90"> The </span><b><span class="deltaxml-new" style="background:#90EE90">current working directory</span></b><span class="deltaxml-new" style="background:#90EE90"> is an absolute </span><a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-defined"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> directory against which all relative file paths are resolved.</span></p></dd></dl></div><div class="div1"><h2><a id="other-functions"></a>D <a href="#other-functions" style="text-decoration: none">Other Functions</a> (Non-Normative)</h2><p>This Appendix describes some sources of functions or operators that fall outside the scope of the function library defined in this specification. It includes both function specifications and function implementations. Inclusion of a function in this appendix does not constitute any kind of recommendation or endorsement; neither is omission from this appendix to be construed negatively. This Appendix does not attempt to give any information about licensing arrangements for these function specifications or implementations.</p><div class="div2"><h3><a id="functions-in-other-w3c-specs"></a>D.1 <a href="#functions-in-other-w3c-specs" style="text-decoration: none">XPath Functions and Operators Defined in Other W3C Recommendations</a></h3><p>A number of W3C Recommendations make use of XPath, and in some cases such Recommmendations define additional functions to be made available when XPath is used in a specific host language.</p><div class="div3"><h4><a id="functions-defined-in-XPathFO"></a>D.1.1 <a href="#functions-defined-in-XPathFO" style="text-decoration: none">Functions and Operators Defined in XPath and XQuery Functions and Operators</a></h4></div></div></div><div class="div1"><h2><a id="impl-def"></a>E <a href="#impl-def" style="text-decoration: none">Checklist of implementation-defined features</a> (Non-Normative)</h2><ol></ol></div><div class="div1"><h2><a id="changelog"></a>F <a href="#changelog" style="text-decoration: none">Changes since version 1.0</a> (Non-Normative)</h2><div class="div2"><h3><a id="changes-summary"></a>F.1 <a href="#changes-summary" style="text-decoration: none">Summary of Changes</a></h3><ol><li><p>Use the arrows to browse significant changes since the 1.0 version of this specification.</p><p>See <a href="#intro"><b>1 Introduction</b></a></p></li><li><p>Sections with significant changes are marked Δ in the table of contents. New functions introduced in this version are marked ➕ in the table of contents.</p><p>See <a href="#intro"><b>1 Introduction</b></a></p></li><li class="add_version" style="display: none;"><p>PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077&nbsp;</a></p><p><code>$recursive</code> parameter added.</p><p>See <a href="#func-file-size"><b>2.3 file:size</b></a></p><p>New in 4.0.</p><p>See <a href="#func-file-is-absolute"><b>2.7 file:is-absolute</b></a></p><p>All parameters are optional now.</p><p>See <a href="#func-file-create-temp-dir"><b>3.3 file:create-temp-dir</b></a></p><p>See <a href="#func-file-create-temp-file"><b>3.4 file:create-temp-file</b></a></p><p><code>$options</code> can now be a map, in alignment with <code>fn:serialize</code>.</p><p>See <a href="#func-file-append"><b>4.1 file:append</b></a></p><p><code>$length</code> can now be supplied without supplying <code>$offset</code>.</p><p>See <a href="#func-file-read-binary"><b>4.5 file:read-binary</b></a></p><p><code>$fallback</code> parameter added.</p><p>See <a href="#func-file-read-text"><b>4.6 file:read-text</b></a></p><p>The normalization of newlines has been made explicit.</p><p>See <a href="#func-file-read-text"><b>4.6 file:read-text</b></a></p><p><code>$fallback</code> parameter added.</p><p>See <a href="#func-file-read-text-lines"><b>4.7 file:read-text-lines</b></a></p><p><code>$options</code> can now be a map, in alignment with <code>fn:serialize</code>.</p><p>See <a href="#func-file-write"><b>4.8 file:write</b></a></p><p>New in 4.0.</p><p>See <a href="#func-file-descendants"><b>5.3 file:descendants</b></a></p><p><code>$pattern</code> can now be supplied without supplying <code>$recursive</code>.</p><p>See <a href="#func-file-list"><b>5.4 file:list</b></a></p><p>New in 4.0.</p><p>See <a href="#func-file-list-roots"><b>5.5 file:list-roots</b></a></p><p><code>$base</code> parameter added.</p><p>See <a href="#func-file-resolve-path"><b>5.6 file:resolve-path</b></a></p></li><li class="modify_version"><p><span class="deltaxml-new" style="background:#90EE90">PR </span><a href="https://github.com/qt4cg/qtspecs/pull/2077"><span class="deltaxml-new" style="background:#90EE90">2077&nbsp;</span></a></p><p><code><span class="deltaxml-new" style="background:#90EE90">$recursive</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter added.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-size"><b><span class="deltaxml-new" style="background:#90EE90">2.3 file:size</span></b></a></p><p><span class="deltaxml-new" style="background:#90EE90">New in 4.0.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-is-absolute"><b><span class="deltaxml-new" style="background:#90EE90">2.7 file:is-absolute</span></b></a></p><p><span class="deltaxml-new" style="background:#90EE90">All parameters are optional now.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-create-temp-dir"><b><span class="deltaxml-new" style="background:#90EE90">3.3 file:create-temp-dir</span></b></a></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-create-temp-file"><b><span class="deltaxml-new" style="background:#90EE90">3.4 file:create-temp-file</span></b></a></p><p><code><span class="deltaxml-new" style="background:#90EE90">$options</span></code><span class="deltaxml-new" style="background:#90EE90"> can now be a map, in alignment with </span><code><span class="deltaxml-new" style="background:#90EE90">fn:serialize</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-append"><b><span class="deltaxml-new" style="background:#90EE90">4.1 file:append</span></b></a></p><p><code><span class="deltaxml-new" style="background:#90EE90">$length</span></code><span class="deltaxml-new" style="background:#90EE90"> can now be supplied without supplying </span><code><span class="deltaxml-new" style="background:#90EE90">$offset</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-read-binary"><b><span class="deltaxml-new" style="background:#90EE90">4.5 file:read-binary</span></b></a></p><p><code><span class="deltaxml-new" style="background:#90EE90">$fallback</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter added.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-read-text"><b><span class="deltaxml-new" style="background:#90EE90">4.6 file:read-text</span></b></a></p><p><span class="deltaxml-new" style="background:#90EE90">The normalization of newlines has been made explicit.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-read-text"><b><span class="deltaxml-new" style="background:#90EE90">4.6 file:read-text</span></b></a></p><p><code><span class="deltaxml-new" style="background:#90EE90">$fallback</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter added.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-read-text-lines"><b><span class="deltaxml-new" style="background:#90EE90">4.7 file:read-text-lines</span></b></a></p><p><code><span class="deltaxml-new" style="background:#90EE90">$options</span></code><span class="deltaxml-new" style="background:#90EE90"> can now be a map, in alignment with </span><code><span class="deltaxml-new" style="background:#90EE90">fn:serialize</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-write"><b><span class="deltaxml-new" style="background:#90EE90">4.8 file:write</span></b></a></p><p><span class="deltaxml-new" style="background:#90EE90">New in 4.0.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-descendants"><b><span class="deltaxml-new" style="background:#90EE90">5.3 file:descendants</span></b></a></p><p><code><span class="deltaxml-new" style="background:#90EE90">$pattern</span></code><span class="deltaxml-new" style="background:#90EE90"> can now be supplied without supplying </span><code><span class="deltaxml-new" style="background:#90EE90">$recursive</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-list"><b><span class="deltaxml-new" style="background:#90EE90">5.4 file:list</span></b></a></p><p><span class="deltaxml-new" style="background:#90EE90">New in 4.0.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-list-roots"><b><span class="deltaxml-new" style="background:#90EE90">5.5 file:list-roots</span></b></a></p><p><code><span class="deltaxml-new" style="background:#90EE90">$base</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter added.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#func-file-resolve-path"><b><span class="deltaxml-new" style="background:#90EE90">5.6 file:resolve-path</span></b></a></p></li></ol></div><div class="div2"><h3><a id="changes-to-function-signatures"></a>F.2 <a href="#changes-to-function-signatures" style="text-decoration: none">Changes to Function Signatures</a></h3><ol class="enumar"><li><p>The function signatures of all the specified signatures now use the <span class="deltaxml-old" style="background:#FF5555">'</span><span class="deltaxml-new" style="background:#90EE90">“</span>optional argument<span class="deltaxml-old" style="background:#FF5555">'</span><span class="deltaxml-new" style="background:#90EE90">”</span> syntax of XPath 4.0 where appropriate, rather than giving several signatures of differing arity. Other than that, no intended change to the semantics of the functions are assumed.</p></li></ol></div><div class="div2"><h3><a id="editorial-changes"></a>F.3 <a href="#editorial-changes" style="text-decoration: none">Editorial Changes</a></h3><p>These changes are not highlighted in the change-marked version of the specification.</p></div></div><div class="div1"><h2><a id="back-compatibility"></a>G <a href="#back-compatibility" style="text-decoration: none">Compatibility with Previous Versions</a> (Non-Normative)</h2><p>This section summarizes the extent to which this specification is compatible with previous versions.</p><p>Version 4.0 of this function library is fully backwards compatible with version 1.0, except as noted below:</p><ol class="enumar"><li><p>The use of optional arguments in the function signatures means that minor alterations to possible function calls, which would be invalid in 1.0, are now supported. For example:</p><div class="exampleInner"><pre xml:space="preserve"><span class="deltaxml-old" style="background:#FF5555">file:list($dir,false(),())</span></pre><pre xml:space="preserve"><span class="deltaxml-new" style="background:#90EE90">file:list($dir, false(), ())</span></pre></div><p><span style="display: none;" class="delete_version">would be invalid in 1.0, as the third argument <code>$pattern</code> is defined to be of type <code>xs:string</code>. It is valid for 4.0 as the empty sequence denotes default behaviour, that is all files are listed. </span><span style="display: none;" class="add_version">would be invalid in 1.0, as the third argument <code>$pattern</code> is defined to be of type <code>xs:string</code>. It is valid for 4.0, as the empty sequence denotes default behavior of listing all files. </span><span class="modify_version">would be invalid in 1.0, as the third argument <code>$pattern</code> is defined to be of type <code>xs:string</code>. It is valid for 4.0<span class="deltaxml-new" style="background:#90EE90">,</span> as the empty sequence denotes default <span class="deltaxml-old" style="background:#FF5555">behaviour, that is all files are listed</span><span class="deltaxml-new" style="background:#90EE90">behavior of listing all files</span>. </span></p><p>The functions <a href="#func-file-append"><code>file:append</code></a>, <a href="#func-file-append-text"><code>file:append-text</code></a>, <a href="#func-file-append-text-lines"><code>file:append-text-lines</code></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#func-file-create-temp-dir"><code>file:create-temp-dir</code></a>, <a href="#func-file-create-temp-file"><code>file:create-temp-file</code></a>, <a href="#func-file-delete"><code>file:delete</code></a>, <a href="#func-file-read-binary"><code>file:read-binary</code></a>, <a href="#func-file-read-text"><code>file:read-text</code></a>, <a href="#func-file-read-text-lines"><code>file:read-text-lines</code></a>, <a href="#func-file-write"><code>file:write</code></a>, <a href="#func-file-write-binary"><code>file:write-binary</code></a>, <a href="#func-file-write-text"><code>file:write-text</code></a> and <a href="#func-file-write-text-lines"><code>file:write-text-lines</code></a> all have similar incompatibilities.</p></li></ol></div></div><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script><script src="js/toc.js"></script><script src="/js/scroll.js"></script></body></html>