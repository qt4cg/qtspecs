<!DOCTYPE HTML><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>XSLT and XQuery Serialization 4.0 </title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="stylesheet" type="text/css" href="css/w3c-base.css"><link rel="stylesheet" href="css/qtspecs.css"><link rel="stylesheet" href="css/xslt-xquery-serialization-40.css"><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css"></head><body class="toc-inline"><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p><p>This draft contains only sections that have differences from the version that it modified.</p></div><div class="head"><p><a href="https://www.w3.org/"><img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" height="48" width="72"></a></p><h1><a id="title"></a>XSLT and XQuery Serialization 4.0 </h1><h2><a id="w3c-doctype"></a>W3C Editor's Draft 2&nbsp;February&nbsp;2026</h2><dl><dt>This version:</dt><dd><a href="https://www.w3.org/TR/2000/REC-xslt-xquery-serialization-40-20000101/">https://www.w3.org/TR/2000/REC-xslt-xquery-serialization-40-20000101/</a></dd><dt>Latest version of XSLT and XQuery Serialization 4.0:</dt><dd><a href="https://www.w3.org/TR/xslt-xquery-serialization-40/">https://www.w3.org/TR/xslt-xquery-serialization-40/</a></dd><dt>Most recent version of XSLT and XQuery Serialization 4:</dt><dd><a href="https://www.w3.org/TR/xslt-xquery-serialization-4/">https://www.w3.org/TR/xslt-xquery-serialization-4/</a></dd><dt>Most recent version of XSLT and XQuery Serialization:</dt><dd><a href="https://www.w3.org/TR/xslt-xquery-serialization/">https://www.w3.org/TR/xslt-xquery-serialization/</a></dd><dt>Most recent Recommendation of XSLT and XQuery Serialization:</dt><dd><a href="https://www.w3.org/TR/xslt-xquery-serialization-31/">https://www.w3.org/TR/xslt-xquery-serialization-31/</a></dd><dt>Editor:</dt><dd>Michael Kay, Saxonica <a href="http://www.saxonica.com/">&lt;http://www.saxonica.com/&gt;</a></dd></dl><p>This document is also available in these non-normative formats: <a href="https://www.w3.org/TR/2000/REC-xslt-xquery-serialization-40-20000101/xslt-xquery-serialization-40.xml">XML</a>.</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2000&nbsp;<a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr></div><div><h2><a id="abstract"></a>Abstract</h2><p>This document defines methods of serializing an instance of the data model defined in <a href="#xpath-datamodel-40">[XDM 4.0]</a> into a sequence of octets, conforming to a variety of formats including XML, HTML, and JSON. Serialization is designed to be a component that can be used either on its own, or invoked from languages such as <a href="#xslt-40">[XSLT 4.0]</a>, <a href="#xpath-40">[XPath 4.0]</a> or <a href="#xquery-40">[XQuery 4.0]</a>.</p></div><div><h2><a id="status"></a>Status of this Document</h2><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document.</em></p><p>This document is a working draft developed and maintained by a W3C Community Group, the <a href="https://www.w3.org/community/xslt-40/">XQuery and XSLT Extensions Community Group</a> unofficially known as QT4CG (where "QT" denotes Query and Transformation). This draft is work in progress and should not be considered either stable or complete. Standard W3C copyright and patent conditions apply.</p><p>The community group welcomes comments on the specification. Comments are best submitted as issues on the group's <a href="https://github.com/qt4cg/qtspecs/issues">GitHub repository</a>.</p><p>The community group maintains two extensive test suites, one oriented to XQuery and XPath, the other to XSLT. These can be found at <a href="https://github.com/qt4cg/qt4tests">qt4tests</a> and <a href="https://github.com/qt4cg/xslt40-test">xslt40-test</a> respectively. New tests, or suggestions for correcting existing tests, are welcome. The test suites include extensive metadata describing the conditions for applicability of each test case as well as the expected results. They do not include any test drivers for executing the tests: each implementation is expected to provide its own test driver.</p><div class="dedication" id="dedication"><h3>Dedication</h3><p>The publications of this community group <a href="../xquery-40/xpath-40.html#dedication">are dedicated</a> to our co-chair, Michael Sperberg-McQueen&nbsp;(1954–2024).</p></div></div><hr><div class="body"><div class="_diffs div1"><h2><a id="json-output"></a>9 <a href="#json-output" style="text-decoration: none">JSON Output Method</a></h2><div class="changes"><p class="changesHeading"> Changes in 4.0 (<a href="#adaptive-output">next</a> | <a href="#HTML_COMMENTS_AND_PIS">previous</a>)</p><ol><li><p> Added the <code>escape-solidus</code> parameter for JSON serialization. <i>&nbsp;&nbsp;[Issue <a href="https://github.com/qt4cg/qtspecs/issues/530">530</a>&nbsp;PR <a href="https://github.com/qt4cg/qtspecs/pull/534">534</a>&nbsp;6 June 2023]</i></p></li><li><p> Added the <code>json-lines</code> parameter for JSON serialization. <i>&nbsp;&nbsp;[Issue <a href="https://github.com/qt4cg/qtspecs/issues/1471">1471</a>&nbsp;&nbsp;15 October 2024]</i></p></li><li><p> The serialization of maps retains the order of entries. <i>&nbsp;&nbsp;[Issue <a href="https://github.com/qt4cg/qtspecs/issues/1651">1651</a>&nbsp;PR <a href="https://github.com/qt4cg/qtspecs/pull/1703">1703</a>&nbsp;14 January 2025]</i></p></li><li><p> A JNode is replaced by its <code>·content·</code> property. <i>&nbsp;&nbsp;[Issue <a href="https://github.com/qt4cg/qtspecs/issues/2025">2025</a>&nbsp;PR <a href="https://github.com/qt4cg/qtspecs/pull/2031">2031</a>&nbsp;29 May 2025]</i></p></li><li><p> JSON canonicalization is supported by the <code>·canonical·</code> property. <i>&nbsp;&nbsp;[Issue <a href="https://github.com/qt4cg/qtspecs/issues/938">938</a>&nbsp;PR <a href="https://github.com/qt4cg/qtspecs/pull/TODO">TODO</a>&nbsp;20 October 2025]</i></p></li><li><p> The JSON output method now produces fallback representation of NaN and infinity, rather than reporting an error for such values. <i>&nbsp;&nbsp;[Issue <a href="https://github.com/qt4cg/qtspecs/issues/641">641</a>&nbsp;PR <a href="https://github.com/qt4cg/qtspecs/pull/2387">2387</a>&nbsp;16 January 2026]</i></p></li></ol></div><p>The JSON output method serializes the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> using the JSON syntax defined in <a href="#rfc7159">[RFC 7159]</a>, or (if the <code>json-lines</code> parameter is set to true) the <b>json-lines</b> syntax defined at <a href="#JSON-LINES">[JSON Lines]</a>. Sequence normalization is not performed for this output method. The effect of the <code>json-lines</code> parameter is explained at <a href="#id-json-lines"><b>9.2 JSON Lines</b></a>.</p><p>If <code>json-lines</code> is set to <code>false</code>, then:</p><ul><li><p>If the <a title="input value" class="termref" href="#dt-input-value">input value</a> is an empty sequence, it is serialized as the string <code>null</code>.</p></li><li><p>If the input value is a single item, it is serialized as described below.</p></li><li><p>If the input value is a sequence containing two or more items, a serialization error results [<a href="#ERRSERE0023" title="err:SERE0023">err:SERE0023</a>]. </p></li></ul><div class="_diffs div2"><h3><a id="serializing-json-items"></a>9.1 <a href="#serializing-json-items" style="text-decoration: none">Serializing Items</a></h3><p>An individual item is serialized as follows:</p><ul><li><p>A JNode is serialized by serializing its <code>·content·</code> property.</p></li><li><p>An <a title="array item" class="termref" href="#dt-array-item">array item</a> in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> is serialized to a JSON array by outputting the serialized JSON value of each member within the array separated by delimiters according to the JSON array syntax, i.e. <code>[member, member, ...]</code>. Each member in the array is to be serialized by recursively applying the rules in this section. </p></li><li><p>A <a title="map item" class="termref" href="#dt-map-item">map item</a> in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> is serialized to a JSON object by outputting, for each key/value pair, the <a title="string value" class="termref" href="#dt-string-value">string value</a> of the key <a title="to a JSON string" class="termref" href="#to-a-json-string">to a JSON string</a>, followed by the serialized JSON value of the entry, separated by delimiters according to the JSON object syntax, i.e. <code>{key:value, key:value, ...}</code>. The key/value pairs in the serialized output retain the <a href="https://qt4cg.org/specifications/xpath-datamodel-40/#dt-entry-order">entry order</a><sup><small>DM</small></sup> of entries in the map, unless <code>canonical</code> is <code>true</code>, in which case map entries <span class="verb">must</span> be sorted according to the rules of <a href="#RFC8785">[RFC8785]</a>. </p><div class="note"><p class="prefix"><b>Note:</b></p><p>These rules require sorting according to the UTF-16 representation of the string, which is not the same (in the presence of surrogate pairs) as sorting using the XPath codepoint collation.</p></div><p>If any two keys of the map item have the same <a title="string value" class="termref" href="#dt-string-value">string value</a>, serialization error [<a href="#ERRSERE0022" title="err:SERE0022">err:SERE0022</a>] is raised, unless the <code>allow-duplicate-names</code> parameter is <code>true</code> and the <code>canonical</code> parameter is <code>false</code>. </p></li><li><p> A node in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> is serialized <a title="to a JSON string" class="termref" href="#to-a-json-string">to a JSON string</a> by outputting the result of serializing the node using the method specified by the <code>json-node-output-method</code> parameter. If the value of the <code>canonical</code> parameter is <code>false</code>, the node is serialized with the serialization parameter <code>omit-xml-declaration</code> set to <code>true</code> and with no other serialization parameters set, otherwise (<code>canonical</code> is <code>true</code>) all parameters are inherited by the sub-serialization process. </p></li><li><p>An <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-atomic-item">atomic value</a><sup><small>XP</small></sup> of type <code>xs:numeric</code> is serialized to a JSON number.</p><p><span style="display: none;" class="delete_version">If the <code>canonical</code> parameter is <code>true</code>, then the value is cast to type <code>xs:double</code> and the result is serialized according to the rules of <a href="#RFC8785">[RFC8785]</a> (and by extension <a href="#RFC7493">[RFC7493]</a>).</span><span style="display: none;" class="add_version">If the <code>canonical</code> parameter is <code>true</code>, then the value is cast to type <code>xs:double</code> and the result is serialized according to the rules of <a href="#RFC8785">[RFC8785]</a> (and by extension <a href="#RFC7493">[RFC7493]</a>). A serialization error occurs for the values <code>NaN</code>, <code>INF</code>, and <code>-INF</code> which cannot be represented in canonical JSON.</span><span class="modify_version">If the <code>canonical</code> parameter is <code>true</code>, then the value is cast to type <code>xs:double</code> and the result is serialized according to the rules of <a href="#RFC8785">[RFC8785]</a> (and by extension <a href="#RFC7493">[RFC7493]</a>).<span class="deltaxml-new" style="background:#90EE90"> A serialization error occurs for the values </span><code><span class="deltaxml-new" style="background:#90EE90">NaN</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">INF</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code><span class="deltaxml-new" style="background:#90EE90">-INF</span></code><span class="deltaxml-new" style="background:#90EE90"> which cannot be represented in canonical JSON.</span></span></p><p>If the <code>canonical</code> parameter is <code>false</code> then:</p><ul><li><p>A value of type <code>xs:decimal</code> (including <code>xs:integer</code>) is output in the format that results from casting the value to <code>xs:string</code>.</p></li><li><p>A value of type <code>xs:float</code> is first cast to type <code>xs:double</code>, and then output in the same way as an <code>xs:double</code>.</p></li><li><p><span style="display: none;" class="delete_version">Implementations <span class="verb">may</span> serialize an <code>xs:double</code> value using any lexical representation of a JSON number defined in <a href="#rfc7159">[RFC 7159]</a>, but it is <span class="verb">recommended</span> to use the same representation as when the <code>canonical</code> parameter is <code>true</code>.</span><span style="display: none;" class="add_version">Implementations <span class="verb">may</span> serialize an <code>xs:double</code> value using any lexical representation of a JSON number defined in <a href="#rfc7159">[RFC 7159]</a>, but it is <span class="verb">recommended</span> to use the same representation as when the <code>canonical</code> parameter is <code>true</code>; except that negative zero <span class="verb">should</span> be output with a leading minus sign.</span><span class="modify_version">Implementations <span class="verb">may</span> serialize an <code>xs:double</code> value using any lexical representation of a JSON number defined in <a href="#rfc7159">[RFC 7159]</a>, but it is <span class="verb">recommended</span> to use the same representation as when the <code>canonical</code> parameter is <code>true</code><span class="deltaxml-new" style="background:#90EE90">; except that negative zero </span><span class="verb"><span class="deltaxml-new" style="background:#90EE90">should</span></span><span class="deltaxml-new" style="background:#90EE90"> be output with a leading minus sign</span>.</span></p></li><li><p>The value <code>NaN</code> is serialized as the JSON token <code>null</code>.</p></li><li><p>The values positive and negative infinity are serialized as <code>1e9999</code> and <code>-1e9999</code> respectively.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>These values are permitted by the JSON grammar, but some JSON parsers may reject them. For interoperability, they should be avoided.</p></div></li></ul></li><li><p>An <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-atomic-item">atomic item</a><sup><small>XP</small></sup> of type <code>xs:boolean</code> is serialized to the JSON token <code>true</code> or <code>false</code>.</p></li><li><p>An <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-atomic-item">atomic item</a><sup><small>XP</small></sup> of type <code>xs:QName</code> in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> whose namespace part is <code>"http://www.w3.org/2005/xpath-functions"</code> and whose local part is <code>"null"</code> is serialized to the JSON token <code>null</code>.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>This rule is introduced in 4.0, along with an option in the <code>fn:parse-json</code> function to allow a user-defined representation of the JSON value <code>null</code>. While the default representation of <code>null</code> as an empty sequence is usable in many circumstances, an explicit representation of <code>null</code> as a recognizable item can make some operations on JSON-derived values easier.</p></div></li><li><p>Any other <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-atomic-item">atomic value</a><sup><small>XP</small></sup> in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> is serialized <a title="to a JSON string" class="termref" href="#to-a-json-string">to a JSON string</a> by outputting the result of applying the <code>fn:string</code> function to the item.</p></li><li><p>An empty sequence in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> is serialized to the JSON token <code>null</code>.</p></li><li><p>A sequence of length greater than one in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> will result in a serialization error [<a href="#ERRSERE0023" title="err:SERE0023">err:SERE0023</a>]. </p></li><li><p> Any item in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> of a type not specified in the above list will result in a serialization error [<a href="#ERRSERE0021" title="err:SERE0021">err:SERE0021</a>].</p></li></ul><p> [<a id="to-a-json-string" title="to a JSON string">Definition</a>: Whenever a value is serialized <b>to a JSON string</b>, the following procedure is applied to the supplied string:]</p><ol class="enumar"><li><p>If the <code>canonical</code> parameter is <code>true</code>, then the string is output as specified in <a href="#RFC8785">[RFC8785]</a>. The string is first normalized if requested using the <code>normalization-form</code> parameter. The serialization parameters <code>escape-solidus</code> and <code>use-character-maps</code> are ignored.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>The escaping rules are restated here for convenience:</p><ul><li><p>If the Unicode value falls within the traditional ASCII control character range (<span class="unicode-codepoint">U+0000</span> (<span class="unicode-name">NULL</span>) through <span class="unicode-codepoint">U+001F</span> (<span class="unicode-name">IS1</span>) ), it <span class="verb">must</span> be serialized using lowercase hexadecimal Unicode notation (<code>\uhhhh</code>) unless it is in the set of predefined JSON control characters <span class="unicode-codepoint">U+0008</span> (<span class="unicode-name">BACKSPACE</span>) , <span class="unicode-codepoint">U+0009</span> (<span class="unicode-name">TAB</span>) , <span class="unicode-codepoint">U+000A</span> (<span class="unicode-name">NEWLINE</span>) , <span class="unicode-codepoint">U+000C</span> (<span class="unicode-name">FORM FEED</span>) , or <span class="unicode-codepoint">U+000D</span> (<span class="unicode-name">CARRIAGE RETURN</span>) , which <span class="verb">must</span> be serialized as <code>\b</code>, <code>\t</code>, <code>\n</code>, <code>\f</code>, and <code>\r</code>, respectively.</p></li><li><p>If the Unicode value is outside of the ASCII control character range, it <span class="verb">must</span> be serialized “as is” unless it is equivalent to <span class="unicode-codepoint">U+005C</span> (<span class="unicode-name">REVERSE SOLIDUS, BACKSLASH</span>, <code>\</code>) or <span class="unicode-codepoint">U+0022</span> (<span class="unicode-name">QUOTATION MARK</span>, <code>"</code>) , which <span class="verb">must</span> be serialized as <code>\\</code> and <code>\"</code>, respectively.</p></li></ul><p>Note that the C1 control characters (codepoints 127-159) are not included in this list.</p></div><div class="note"><p class="prefix"><b>Note:</b></p><p>In canonical JSON, property values within an object are sorted based on their UTF16 representation. This corresponds to the default sort order in languages such as Javascript, Java, and C#, but in the presence of codepoints above 65535, it is not the same as the order produced by Unicode codepoint collation.</p></div></li><li><p>Otherwise (when <code>canonical</code> is <code>false</code>):</p><ol class="enumla"><li><p>Any character in the string for which character mapping is defined (see <a href="#character-maps"><b>11 Character Maps</b></a>) is substituted by the replacement string defined in the character map.</p></li><li><p> Any other character in the input string (but not a character produced by character mapping) is a candidate for <a title="Unicode Normalization" class="termref" href="#unicode-normalization">Unicode Normalization</a> if requested by the <code>normalization-form</code> parameter, and JSON escaping. JSON escaping replaces the characters <span class="unicode-codepoint">U+005C</span> (<span class="unicode-name">REVERSE SOLIDUS, BACKSLASH</span>, <code>\</code>) , <span class="unicode-codepoint">U+0008</span> (<span class="unicode-name">BACKSPACE</span>) , <span class="unicode-codepoint">U+000C</span> (<span class="unicode-name">FORM FEED</span>) , <span class="unicode-codepoint">U+000A</span> (<span class="unicode-name">NEWLINE</span>) , <span class="unicode-codepoint">U+000D</span> (<span class="unicode-name">CARRIAGE RETURN</span>) , <span class="unicode-codepoint">U+0009</span> (<span class="unicode-name">TAB</span>) , or <span class="unicode-codepoint">U+005C</span> (<span class="unicode-name">REVERSE SOLIDUS, BACKSLASH</span>, <code>\</code>) by the corresponding JSON escape sequences <code>\"</code>, <code>\b</code>, <code>\f</code>, <code>\n</code>, <code>\r</code>, <code>\t</code>, or <code>\\</code> respectively, and any other codepoint in the range 1-31 or 127-159 by an escape in the form <code>\uHHHH</code> where <code>HHHH</code> is the hexadecimal representation of the codepoint value. <span>Escaping further replaces the solidus character (<code>/</code>) by the escape sequence <code>\/</code> if the <code>escape-solidus</code> parameter is set to <code>true</code>, but not if it is set to <code>false</code>.</span> Escaping is also applied to any characters that cannot be represented in the selected encoding. </p></li></ol></li><li><p>The resulting string is enclosed in double quotation marks.</p></li></ol><p> Finally, encoding, as controlled by the <code>encoding</code> parameter, converts the character stream produced by the preceding rules into an octet stream. The <code>encoding</code> parameter is ignored if <code>canonical</code> is <code>true</code>. </p></div><div class="_diffs div2"><h3><a id="JSON_PARAMS"></a>9.3 <a href="#JSON_PARAMS" style="text-decoration: none">The Influence of Serialization Parameters upon the JSON Output Method</a></h3><p> When nodes are serialized using the JSON output method, serialization is delegated to the output method specified by the <code>json-node-output-method</code> serialization parameter. The <code>omit-xml-declaration</code> parameter is set to <code>true</code>, and no other serialization parameters are passed down to the serialization method responsible for serializing the node. </p><p>The serialization parameters that affect the JSON output method are listed in the following subsections.</p><p>Serialization parameters other than those listed are not applicable to this output method. It is the responsibility of the <a title="host language" class="termref" href="#host-language">host language</a> to specify whether an error occurs if such a parameter is specified in combination with the JSON output method, or whether the parameter is ignored, or whether it is validated and then ignored.</p><div class="_diffs div3"><h4><a id="JSON_CANONICAL"></a>9.3.1 <a href="#JSON_CANONICAL" style="text-decoration: none">JSON Output Method: the <code>canonical</code> Parameter</a></h4><p>The <code>canonical</code> parameter specifies whether the JSON output should be normalized to its canonical form, as specified by <a href="#RFC8785">[RFC8785]</a>. The default value is <code>false</code>.</p><p>If the value is <code>true</code> this imposes constraints on the representation of maps, strings, and numbers, as described in <a href="#serializing-json-items"><b>9.1 Serializing Items</b></a>. All other parameters except <code>normalization-form</code>, <code>media-type</code>, <code>json-lines</code>, and <code>json-node-output-method</code> are ignored (except that they are passed though to any sub-serialization of contained nodes).</p><p>The <a title="serializer" class="termref" href="#serializer">serializer</a><span class="verb">must</span> serialize the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> according to <a href="#RFC8785">[RFC8785]</a>. </p><div class="note"><p class="prefix"><b>Note:</b></p><p><a href="#RFC8785">[RFC8785]</a> defines the input to canonicalization as an I-JSON text <a href="#RFC7493">[RFC7493]</a>. The rules given in <a href="#serializing-json-items"><b>9.1 Serializing Items</b></a> effectively define how any XDM value in the <a title="input tree" class="termref" href="#dt-input-tree">input tree</a> is mapped to a value in the implicit data model of I-JSON. Values that cannot be mapped to I-JSON, such as function items, result in a serialization error.</p></div><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">xs:double</span></code><span class="deltaxml-new" style="background:#90EE90"> values </span><code><span class="deltaxml-new" style="background:#90EE90">NaN</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">INF</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code><span class="deltaxml-new" style="background:#90EE90">-INF</span></code><span class="deltaxml-new" style="background:#90EE90"> cannot be represented in canonical JSON. A serialization error therefore occurs if these values appear in the </span><a title="input tree" class="termref" href="#dt-input-tree"><span class="deltaxml-new" style="background:#90EE90">input tree</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><p>A serialization error [<a href="#ERRSERE0024" title="err:SERE0024">err:SERE0024</a>] results if any error is raised during the canonicalization process.</p></div></div></div></div><div class="back"></div><script src="js/toc.js"></script><script src="/js/scroll.js"></script></body></html>