<!DOCTYPE HTML><html xmlns="http://www.w3.org/1999/xhtml" lang="EN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>XPath and XQuery Functions and Operators 4.0 </title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="stylesheet" type="text/css" href="css/w3c-base.css"><link rel="stylesheet" href="css/qtspecs.css"><link rel="stylesheet" href="css/xpath-functions-40.css"><script src="js/fo-datalist.js"></script><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css"></head><body class="toc-inline"><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p><p>This draft contains only sections that have differences from the version that it modified.</p></div><div class="head"><p><a href="https://www.w3.org/"><img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" height="48" width="72"></a></p><h1><a id="title"></a>XPath and XQuery Functions and Operators 4.0 </h1><h2><a id="w3c-doctype"></a>W3C Editor's Draft 2&nbsp;February&nbsp;2026</h2><dl><dt>This version:</dt><dd><a href="https://qt4cg.org/specifications/xpath-functions-40/">https://qt4cg.org/specifications/xpath-functions-40/</a></dd><dt>Latest version of XPath and XQuery Functions and Operators 4.0:</dt><dd><a href="https://qt4cg.org/specifications/xpath-functions-40/">https://qt4cg.org/specifications/xpath-functions-40/</a></dd><dt>Most recent Recommendation of XPath and XQuery Functions and Operators:</dt><dd><a href="https://www.w3.org/TR/2017/REC-xpath-functions-31-20170321/">https://www.w3.org/TR/2017/REC-xpath-functions-31-20170321/</a></dd><dt>Editor:</dt><dd>Michael Kay, Saxonica <a href="http://www.saxonica.com/">&lt;http://www.saxonica.com/&gt;</a></dd></dl><p>This document is also available in these non-normative formats: <a href="xpath-functions-40.xml">Specification in XML format</a> and&nbsp;<a href="function-catalog.xml">XML function catalog</a>.</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2000&nbsp;<a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr></div><div><h2><a id="abstract"></a>Abstract</h2><p>This document defines constructor functions, operators, and functions on the datatypes defined in <a href="#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> and the datatypes defined in <a href="#xpath-datamodel-40">[XQuery and XPath Data Model (XDM) 4.0]</a>. It also defines functions and operators on nodes and node sequences as defined in the <a href="#xpath-datamodel-40">[XQuery and XPath Data Model (XDM) 4.0]</a>. These functions and operators are defined for use in <a href="#xpath-40">[XML Path Language (XPath) 4.0]</a> and <a href="#xquery-40">[XQuery 4.0: An XML Query Language]</a> and <a href="#xslt-40">[XSL Transformations (XSLT) Version 4.0]</a> and other related XML standards. The signatures and summaries of functions defined in this document are available at: <a href="http://www.w3.org/2005/xpath-functions/">http://www.w3.org/2005/xpath-functions/</a>.</p><p>A summary of changes since version 3.1 is provided at <a href="#changelog"><b>H Changes since 3.1</b></a>.</p></div><div><h2><a id="status"></a>Status of this Document</h2><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document.</em></p><p>This document is a working draft developed and maintained by a W3C Community Group, the <a href="https://www.w3.org/community/xslt-40/">XQuery and XSLT Extensions Community Group</a> unofficially known as QT4CG (where "QT" denotes Query and Transformation). This draft is work in progress and should not be considered either stable or complete. Standard W3C copyright and patent conditions apply.</p><p>The community group welcomes comments on the specification. Comments are best submitted as issues on the group's <a href="https://github.com/qt4cg/qtspecs/issues">GitHub repository</a>.</p><p id="at-risk">As the Community Group moves towards publishing dated, stable drafts, some features that the group thinks may likely be removed or substantially changed are marked “at risk” in their changes section. In this draft:</p><ul><li><a href="#func-array-members">array:members</a></li><li><a href="#func-array-of-members">array:of-members</a></li></ul><p>The community group maintains two extensive test suites, one oriented to XQuery and XPath, the other to XSLT. These can be found at <a href="https://github.com/qt4cg/qt4tests">qt4tests</a> and <a href="https://github.com/qt4cg/xslt40-test">xslt40-test</a> respectively. New tests, or suggestions for correcting existing tests, are welcome. The test suites include extensive metadata describing the conditions for applicability of each test case as well as the expected results. They do not include any test drivers for executing the tests: each implementation is expected to provide its own test driver.</p><div class="dedication" id="dedication"><h3>Dedication</h3><p>The publications of this community group <a href="../xquery-40/xpath-40.html#dedication">are dedicated</a> to our co-chair, Michael Sperberg-McQueen&nbsp;(1954–2024).</p></div></div><hr><div class="body"></div><div class="back"><div class="_diffs div1"><h2><a id="other-functions"></a>F <a href="#other-functions" style="text-decoration: none">Functions defined elsewhere</a> (Non-Normative)</h2><p>This Appendix describes some sources of functions that fall outside the scope of the function library defined in this specification. It includes both function specifications and function implementations. Inclusion of a function in this appendix does not constitute any kind of recommendation or endorsement; neither is omission from this appendix to be construed negatively. This Appendix does not attempt to give any information about licensing arrangements for these function specifications or implementations.</p><div class="_diffs div2"><h3><a id="functions-in-other-w3c-specs"></a>F.1 <a href="#functions-in-other-w3c-specs" style="text-decoration: none">XPath Functions Defined in Other W3C Recommendations</a></h3><p>A number of W3C Recommendations make use of XPath, and in some cases such Recommmendations define additional functions to be made available when XPath is used in a specific host language.</p><div class="_diffs div3"><h4><a id="functions-defined-in-XSLT"></a>F.1.1 <a href="#functions-defined-in-XSLT" style="text-decoration: none">Functions Defined in XSLT</a></h4><p>The various versions of XSLT have all included additional functions intended to be available only when XPath is used within XSLT, and not in other host language environments. Some of these functions were originally defined in XSLT, and subsequently migrated into the core function library defined in this specification.</p><p>Generally, the reason that functions have been defined in XSLT rather than in the core library has been that they required additional static or dynamic context information.</p><p>XSLT-defined functions share the core namespace <code>http://www.w3.org/2005/xpath-functions</code> (but in XPath 1.0 and XSLT 1.0, no namespace was defined for these functions).</p><p>The following table lists all functions that have been defined in XSLT, and summarizes their current status.</p><table class="data"><thead><tr><th>Function name</th><th>Availability</th></tr></thead><tbody><tr><td>fn:accumulator-after</td><td>XSLT 3.0 and later</td></tr><tr><td>fn:accumulator-before</td><td>XSLT 3.0 and later</td></tr><tr><td>fn:apply-templates</td><td>XSLT 4.0</td></tr><tr><td>fn:available-system-properties</td><td>XSLT 3.0 and later</td></tr><tr><td>fn:character-map</td><td>XSLT 4.0</td></tr><tr><td>fn:collation-key</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>fn:copy-of</td><td>XSLT 3.0 and later</td></tr><tr><td>fn:current</td><td>XSLT 1.0 and later</td></tr><tr><td>fn:current-group</td><td>XSLT 2.0 and later</td></tr><tr><td>fn:current-grouping-key</td><td>XSLT 2.0 and later</td></tr><tr><td>fn:current-merge-group</td><td>XSLT 3.0 and later</td></tr><tr><td>fn:current-merge-key</td><td>XSLT 3.0 and later</td></tr><tr class="add_version" style="display: none;"><td>fn:current-merge-key-array</td><td>XSLT 4.0</td></tr><tr class="modify_version"><td><span class="deltaxml-new" style="background:#90EE90">fn:current-merge-key-array</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT 4.0</span></td></tr><tr><td>fn:current-output-uri</td><td>XSLT 3.0 and later</td></tr><tr><td>fn:document</td><td>XSLT 1.0 and later</td></tr><tr><td>fn:element-available</td><td>XSLT 1.0 and later</td></tr><tr><td>fn:format-date</td><td>Originally XSLT 2.0, then XPath 3.0 and later</td></tr><tr><td>fn:format-dateTime</td><td>Originally XSLT 2.0, then XPath 3.0 and later</td></tr><tr><td>fn:format-number</td><td>Originally XSLT 1.0 and 2.0; then XPath 3.0 and later</td></tr><tr><td>fn:format-time</td><td>Originally XSLT 2.0; then XPath 3.0 and later</td></tr><tr><td>fn:function-available</td><td>XSLT 1.0 and later</td></tr><tr><td>fn:generate-id</td><td>Originally XSLT 1.0 and 2.0; then XPath 3.0 and later</td></tr><tr><td>fn:json-to-xml</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>fn:key</td><td>XSLT 1.0 and later</td></tr><tr><td>fn:map-for-key</td><td>XSLT 4.0</td></tr><tr><td>fn:regex-group</td><td>XSLT 2.0 and later</td></tr><tr class="add_version" style="display: none;"><td>fn:regex-groups</td><td>XSLT 4.0</td></tr><tr class="modify_version"><td><span class="deltaxml-new" style="background:#90EE90">fn:regex-groups</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT 4.0</span></td></tr><tr><td>fn:snapshot</td><td>XSLT 3.0 and later</td></tr><tr><td>fn:stream-available</td><td>XSLT 3.0 and later</td></tr><tr><td>fn:system-property</td><td>XSLT 1.0 and later</td></tr><tr><td>fn:type-available</td><td>XSLT 2.0 and later</td></tr><tr><td>fn:unparsed-entity-public-id</td><td>XSLT 2.0 and later</td></tr><tr><td>fn:unparsed-entity-uri</td><td>XSLT 1.0 and later</td></tr><tr><td>fn:unparsed-text</td><td>Originally XSLT 2.0; then XPath 3.0 and later</td></tr><tr class="add_version" style="display: none;"><td>fn:unparsed-text-available</td><td>Originally XSLT 2.0; then XPath 3.0 and later</td></tr><tr class="modify_version"><td><span class="deltaxml-new" style="background:#90EE90">fn:unparsed-text-available</span></td><td><span class="deltaxml-new" style="background:#90EE90">Originally XSLT 2.0; then XPath 3.0 and later</span></td></tr><tr><td>fn:xml-to-json</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:contains</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:entry</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:find</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:for-each</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:get</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:keys</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:merge</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:put</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:remove</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr><tr><td>map:size</td><td>Originally XSLT 3.0, then XPath 3.1 and later</td></tr></tbody></table><div class="note"><p class="prefix"><b>Note:</b></p><p>XSLT 3.0 was well advanced when work started on XPath 3.1, but XPath 3.1 appeared as a Recommendation before XSLT 3.0 reached that status.</p></div></div></div></div></div><script src="js/toc.js"></script><script src="/js/scroll.js"></script></body></html>