<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 122 Minutes 2025-05-20</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 122 Minutes 2025-05-20</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/7]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[11/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[0/7]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#technical-prs">2.1. Review of pull requests</a></li>
<li><a href="#pr-2001">2.2. PR #2001: 1085 Revert fn:sort to the 3.1 spec; introduce fn:sort-by</a></li>
<li><a href="#pr-1991">2.3. PR #1991: 835 Add built-in named record types to static context</a></li>
<li><a href="#pr-2008">2.4. PR #2008: 2004 Add xsl:xpath instruction</a></li>
<li><a href="#pr-2006">2.5. PR #2006: 2005 Add fn:apply-templates function</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="../2025/05-27.html">at meeting 123</a> on 27 May 2025.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/7]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with NW to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-112-01: JLO to propose a concrete example that uses “.” in a ~%method~s.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-119-02: MK to add a note about how schema composition is done for multiple options</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-01: MK to raise a new issue which may propose a subset of the QNameLiteral which doesn't permit a namespace.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-121-02: MK to fix removal of default values in the options for fn:serialize()</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-122-01: MK to add more tutorial material to <code>xsl:select</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[11/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/05-20.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Thanks again to JWL.
</p>

<p>
Proposal: Accept <a href="../../minutes/2025/05-13.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is scheduled for 27 May 2025.
</p>

<p>
No regrets heard.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[0/7]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with NW to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-112-01: JLO to propose a concrete example that uses “.” in a ~%method~s.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-119-02: MK to add a note about how schema composition is done for multiple options</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-021-01: MK to raise a new issue which may propose a subset of the QNameLiteral which doesn't permit a namespace.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-121-02: MK to fix removal of default values in the options for fn:serialize()</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1883">#1883</a>: 882 Replace fn:chain by fn:compose</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1283">#1283</a>: 77b Update expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>: 150bis revised proposal for fn:ranks</li>
</ul>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1999">#1999</a>: 1992 Correct type of constructor function in schema-type-record</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1998">#1998</a>: 1997 Correct nesting of item coercion rules</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>MK: I found a typo in 1999; I fixed it.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>

<div id="outline-container-technical-prs" class="outline-3">
<h3 id="technical-prs"><span class="section-number-3">2.1.</span> Review of pull requests</h3>
<div class="outline-text-3" id="text-technical-prs">
</div>
</div>

<div id="outline-container-pr-2001" class="outline-3">
<h3 id="pr-2001"><span class="section-number-3">2.2.</span> PR #2001: 1085 Revert fn:sort to the 3.1 spec; introduce fn:sort-by</h3>
<div class="outline-text-3" id="text-pr-2001">
<p>
See  PR <a href="https://qt4cg.org/dashboard/#pr-2001">#2001</a>
</p>

<p>
MK introduces the issue. In supporting multiple sort keys and descending sort
keys left us with four rather complex parameters. Let’s put <code>fn:sort</code> back and
start over.
</p>

<ul class="org-ul">
<li>MK: This makes <code>fn:sort</code> a subset of <code>fn:sort-by</code> and it’s defined in terms of
the new <code>fn:sort-by</code> function.</li>
</ul>

<p>
MK explains the signature and semantics of <code>fn:sort-by</code>.
</p>

<ul class="org-ul">
<li>MK: <code>fn:array-sort</code> and <code>fn:array-sort-by</code> are changed in the corresponding way.</li>
<li>JWL: We now have a trend that where we had complex sequence of arguments,
we’re now using records. Are there other places where this is likely to be of
benefit?</li>
<li>MK: Not that immediately come to mind. I have an <code>fn:apply-templates</code> function
on the table that uses it.</li>
<li>JWL: Does it decrease the ability to pick up errors?</li>
<li>MK: I’m not sure, the type signature says what can be in the record.</li>
<li>DN: I think that this is a good proposal. In the existing <code>fn:sort</code> function,
we had this unpleasant experience that we had to specify an empty collation.
<ul class="org-ul">
<li>… But I got the impression that collation is still before order. It seems to
me that collation is the least frequently encountered argument.</li>
</ul></li>
<li>MK: They’re now by name; you can specify them in any order or leave them out
if you want.</li>
</ul>

<p>
Some discussion of the use of names vs. positions.
</p>

<ul class="org-ul">
<li>RD: Would it make sense to define the record as a named record type so we
could share it between the two functions?</li>
<li>MK: It’s a different record for arrays. But, yes, we have a separate proposal
about named record types.</li>
<li>JK: I fear that people will not understand, and will be confused by,
<code>fn:sort-by</code> vs <code>fn:sort-with</code>. Do we need both?</li>
<li>MK: It’s a good question. I think there probably are sorts where defining a
comparitor function is easier.
<ul class="org-ul">
<li>… I wouldn’t be a very strong defender of <code>fn:sort-with</code>, but it can be useful.</li>
</ul></li>
<li>JK: Then <code>fn:sort-with</code> needs a more compelling example.</li>
<li>CG: I think it would be nice to keep <code>fn:sort-with</code>. There was agreement then
that it can be helpful to have a comparitor function. With regard to the
current proposal, I only have some minor issues.</li>
</ul>

<p>
Some discussion of a sequence vs. a value.
</p>

<ul class="org-ul">
<li>CG: The examples are pretty much the same as for <code>fn:sort</code>, it might be nice
to have examples that highlight the features of <code>fn:sort-by</code>.</li>
<li>MK: I kept the simple examples to encourage people to learn only one of them.</li>
<li>DN: I was also a bit confused by <code>fn:sort-by</code> vs <code>fn:sort-with</code>. I think that
the difference between the two functions should be more clearly stated.</li>
<li>JWL: JK’s point about <code>fn:sort-with</code>; I think I’ve used it to sort vectors
where it’s very useful to have a comparitor function. Cases where you have big
structures that you want to compare bit by bit are the usual case.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1991" class="outline-3">
<h3 id="pr-1991"><span class="section-number-3">2.3.</span> PR #1991: 835 Add built-in named record types to static context</h3>
<div class="outline-text-3" id="text-pr-1991">
<p>
See  PR <a href="https://qt4cg.org/dashboard/#pr-1991">#1991</a>
</p>

<ul class="org-ul">
<li>MK: The trigger for this is that we have test cases that don’t work because we
generate test cases that say a function is an instance of its signature and
the signatures in the spec use named record types. But they aren’t defined to
be part of the static context so you can’t use them.
<ul class="org-ul">
<li>… This PR adds them to the static context.</li>
</ul></li>
<li>MK: In F&amp;O, the named record types are listed in appendix C.</li>
<li>MK: I did not attempt to review the names of the types or the consistency of
they’re definition. The fact that we have them all listed in one place makes
that easier.</li>
<li>JLO: We have six built in record types, but what about all the options. Why aren’t they here?</li>
<li>MK: That’s a good question. The function signatures don’t have a strict type
for the options. But we could define a record type for every options parameter.
<ul class="org-ul">
<li>… But there’s work to be done there.</li>
</ul></li>
<li>RD: This is just adding these names; the machinery to do that already exists
through the definition of the static context which references named record types.</li>
<li>MK: Yes.</li>
<li>RD: And the syntax within the XSLT and XQuery specs defines record types.
<ul class="org-ul">
<li>… This is equivalent to saying that the static context includes a declaration.</li>
</ul></li>
<li>MK: Yes.</li>
<li>DN: JLO and I have an action to systemizing the record types in the specifications.
<ul class="org-ul">
<li>… What we plan to do is have an appendix that lists all the option types in
an appendix.</li>
<li>… I think it would be very helpful to have all the options in the static context.</li>
</ul></li>
<li>MK: Yes, that raises another point. By making these named record types, you
also get a constructor function for them.
<ul class="org-ul">
<li>… That should have been brought out more strongly.</li>
</ul></li>
<li>NW: I think it’ll require some work to come up with good names.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-2008" class="outline-3">
<h3 id="pr-2008"><span class="section-number-3">2.4.</span> PR #2008: 2004 Add xsl:xpath instruction</h3>
<div class="outline-text-3" id="text-pr-2008">
<p>
See  PR <a href="https://qt4cg.org/dashboard/#pr-2008">#2008</a>
</p>

<ul class="org-ul">
<li>MK: This is primarily motivated by the fact that I was looking at construction
of arrays and maps in XSLT. The most convenient way was to write path
expressions. Those became quite long and then you hit the problem of attribute
value normalization and you can only use one delimiter.</li>
<li>MK: What this does is allow you to write expressions in an <code>xsl:xpath</code> instruction.</li>
</ul>

<p>
MK reviews the instruction.
</p>

<ul class="org-ul">
<li>JWL: Now you get this case where you’ve got something that’s like sequence but
in one case the text inside becomes the sequence, but in this case the text
becomes an expression. I can see this causing interesting confusion at first.</li>
<li>DN: What’s the difference between <code>xsl:xpath</code> and <code>xsl:evaluate</code>?</li>
<li>MK: The difference is that <code>xsl:evaluate</code> allows you to construct an expression from a string.</li>
<li>DN: Doesn’t that mean I can use <code>xsl:evaluate</code> always?</li>
<li>MK: Not really, <code>xsl:evaluate</code> doesn’t have access to the static context or the variables.</li>
<li>DN: I’d like to see a comparison of <code>xsl:xpath</code>, <code>xsl:evaluate</code>, and <code>xsl:transform</code>.</li>
<li>WP: I’d like to see the comparison expanded. How does this interact with text value templates?</li>
<li>MK: The <code>xsl:xpath</code> instruction can’t contain text value templates.</li>
<li>WP: I think it’s intriguing that there’s a difference between this and
evaluate. So I’d like to see the examples sketched out more.</li>
<li>MK: Where this is coming from is that XPath is becoming more and more powerful therefore
it’s no longer just for writing one liners. So it’s now inconvenient in XML attributes.</li>
<li>JWL: If you wanted to do a similar thing with <code>xsl:evaluate</code>, you’d have to
put that text in a variable. If you put it directly in a select, you have to
do all the quoting.</li>
<li>MK: You’d also have to pass <code>$title</code> and <code>$author</code> as parameters.</li>
<li>MK: You want to do construction this way because it looks like JSON, which is
what users expect of maps and arrays.</li>
<li>RD: In the current spec, you’re not allowing nested XSLT constructs like
<code>xsl:choose</code> or <code>xsl:if</code>, is there a motivation for that?</li>
<li>MK: It’s very hard to do. Evan Lenz once had a proposal for allowing XPath and
XSLT to be mixed. It’s very hard to define the semantics of that.</li>
<li>RD: I can see in this example that if you wanted to add a subtitle but its
optional, then that becomes fiddlier.</li>
<li>MK: You can do that with an XPath conditional. What holds you back is apply
templates, which is why there’s a separate proposal for that.</li>
<li>WP: I think you might consider calling this <code>xsl:xpath-literal</code>. I think I’m
beginning to appreciate the use case. But I’m concerned about making the use
case clearer. The overlap with <code>xsl:evaluate</code> is an issue.</li>
<li>JK: <code>xsl:select</code> might be a good name.</li>
<li>NW: I think <code>xsl:select</code> would be a good name.</li>
<li>DN: I’m confused. Does this <code>xsl:xpath</code> just define the expression or does it
also evaluate it?</li>
<li>MK: It evaluates it.</li>
</ul>

<p>
Some discussion of the name.
</p>

<ul class="org-ul">
<li>DN: I think that <code>select</code> is a little bit overloaded in XSLT. Maybe find another name.</li>
</ul>

<p>
Some discussion of where it can and can’t be used.
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-122-01: MK to add more tutorial material to <code>xsl:select</code>.</li>
</ul>

<p>
Proposal: accept this PR, with <code>xsl:xpath</code> named <code>xsl:select</code>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-2006" class="outline-3">
<h3 id="pr-2006"><span class="section-number-3">2.5.</span> PR #2006: 2005 Add fn:apply-templates function</h3>
<div class="outline-text-3" id="text-pr-2006">
<p>
See  PR <a href="https://qt4cg.org/dashboard/#pr-2006">#2006</a>
</p>

<ul class="org-ul">
<li>MK: This has similar motivation. It’s an XSLT-only function.</li>
</ul>

<p>
MK reviews the PR.
</p>

<ul class="org-ul">
<li>MK: This gives you the mode as a variable for free. You can also construct
parameter names dynamically. I’m a little uneasy, but it’s a bit like
functions becoming dynamic. You can adapt.
<ul class="org-ul">
<li>… I have said that the mode must be explicitly declared in the package and
it must be public.</li>
<li>… Modes aren’t public by default, but if you’re going to do it dynamically
you have to.</li>
</ul></li>
<li>JK: What about a call templates function?</li>
<li>MK: No, because I hate call template.</li>
<li>WP: This is cool. If you apply templates to “.” can you traverse yourself?</li>
<li>MK: There’s no default, you have to specify it.</li>
<li>JWL: Does this cause real implementation problems?</li>
<li>MK: It does mean that parameter names have to be around at run time, but in
practice that’s probably true anyway.
<ul class="org-ul">
<li>… With <code>xsl:call-template</code> you know what template your’e calling, but you
can’t do that with apply templates.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
