<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 145 Minutes 2025-12-09</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 145 Minutes 2025-12-09</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/5]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[15/15]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[0/5]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-2247">2.1. PR #2247: Deferred Evaluation in XPath - the f:generator record</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>
<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>
<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/5]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-143-01: CG to make another attempt at binary functions.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-143-02: MK to try to recover the ability to extract formal equivalences into tests</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-143-03: JK to look for C14N test suites.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-144-01: MK to consider if any now lost value comparisons should be added as examples.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-144-02: MK to add notes about edge cases: sequence normalization and character maps for example.</li>
</ul>
</div>
</div>
<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>
<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[15/15]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Sasha Frisov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [x:06-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Dimitre Novatchev</li>
<li class="on"><code>[X]</code> Alan Painter (AP</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ruvim Pinka (RP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> Liam Quin (LQ)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>
<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/12-09.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/12-02.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is planned for 16 December 2025.
</p>

<p>
Regets: SF, RD
</p>

<p>
After next week, the CG will recess for the end-of-year holidays. The following
meeting will be on 6 January 2026.
</p>
</div>
</div>
<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[0/5]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-143-01: CG to make another attempt at binary functions.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-143-02: MK to try to recover the ability to extract formal equivalences into tests</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-143-03: JK to look for C14N test suites.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-144-01: MK to consider if any now lost value comparisons should be added as examples.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-144-02: MK to add notes about edge cases: sequence normalization and character maps for example.</li>
</ul>
</div>
</div>
<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>
<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2160">#2160</a>: 2073 data model changes for JNodes and Sequences</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2124">#2124</a>: 573 Functions to Construct Trees</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2071">#2071</a>: 77c deep update</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
</ul>
</div>
</div>
<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2332">#2332</a>: 2195 Misc XSLT editorial fixes</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2331">#2331</a>: 2330 In XSLT Patterns, allow Constants rather than Literals</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2328">#2328</a>: 2326 Expand spec of new `cdata` attribute</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>
<div id="outline-container-pr-2247" class="outline-3">
<h3 id="pr-2247"><span class="section-number-3">2.1.</span> PR #2247: Deferred Evaluation in XPath - the f:generator record</h3>
<div class="outline-text-3" id="text-pr-2247">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2247">#2247</a>.
</p>

<p>
DN begins by reviewing the Deferred Evaluation section of the PR.
</p>

<ul class="org-ul">
<li>DN: Most useful in cases where it’s impossible or impractical to materialize
an entire sequence in memory.
<ul class="org-ul">
<li>… Huge thank you to all the people who supported this work: AP, LQ, Ken
Holman, SF, Adam Retter, Andy Bunce, and <a href="https://medium.com/@kurtcagle/this-is-fantastic-602d5bfb8405">Kurt Cagle</a>, many of whom expressed
enthusiastic support for the work.</li>
</ul></li>
<li>DN: The generator is a way of implementing an iterator.</li>
</ul>

<p>
DN reviews the description of the generator record in the spec.
</p>

<ul class="org-ul">
<li>NW: Before we get too deep into the details, does LQ have any opening remarks?</li>

<li>LQ: I <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2025Dec/0004.html">sent some notes</a> to the mailing list.
<ul class="org-ul">
<li>… Lots of people want to do this and it’s a bit tricky to write.</li>
<li>… If something is a little tricky to write, you’ll get interoperability problems</li>
<li>… It’s great to have it readily available.</li>
<li>… MK asked about how this relates to XML/XPath/XSLT/XQuery, etc. “There
weren’t enough X’s in the proposal.”</li>
<li>… It’s sometimes hard to demonstrate some of these things in a small space.</li>
<li>… A good comparison is with xsl:iterate in XSLT. Before xsl:iterate, you had
to do everything with recursive functions. And that’s tricky if you don’t
understand tail-call optimization.</li>
<li>… Writing this stuff was quite difficult. It got easier as implementations
improved tail-recursion implementations.</li>
<li>… The xsl:iterate instruction forces you to write something that can be tail-optimized.</li>
<li>… When I asked the XSL mailing list, xsl:iterate was very popular, second
only to expand-text.</li>
<li>… Generators will be like expand-text; they’ll make lots of things easier to read.</li>
<li>… There’s nothing in xsl:iterate that you couldn’t write yourself. You could
write fn:replace yourself, too, if you wanted to.</li>
<li>… The right question isn’t “what does this let people do that they couldn’t do before”</li>
<li>… The right question is “what will they do with it that they wouldn’t have done without it.”</li>
</ul></li>
</ul>

<p>
LQ describes <a href="https://lists.w3.org/Archives/Public/public-xslt-40/2025Dec/0004.html">his use case</a> (see email).
</p>

<ul class="org-ul">
<li>LQ: The book lookup case is an example of lazy evaluation. And that’s what
generators give us. They let us write in a stereotyped way that would be too
expensive if you did all of it, and you know you don’t need to do all of it,
but you don’t know how much you need to do.
<ul class="org-ul">
<li>… You can’t download from the British Library, you use an API, and you can’t
do them all through that API, that would be a denial of service attack!</li>
</ul></li>
<li>LQ: The business case I have is a text similarity case. It’s expensive to do
similarity testing. If you have a 1,000 paragraphs, you might have a million
pairs. But you can find candidates with structural information. That reduces
it to a few hundred. We want to take the first few and the move on to the next
case.
<ul class="org-ul">
<li>… The point is that it’s less to write than a template or function, and it’s
in a very common style. Like Javascript’s <code>?.</code> operator.</li>
</ul></li>
<li>LQ: Things that are good for standardization are things many people have to
write themselves, that they tend to write incorrectly, that are just hard
enough to do that people will walk away if its not available, and things that
extend the reach fo the language.</li>

<li>RD: One main example of a protoype of this is the random number generator
function. Currently in the language, that’s very hard to work with. Having
some infrastructure to make working with that easier is a win. Also, this
allows you to write other things like a Fibonacci number generator.</li>

<li>SF: In other languages, generators have been introduced as their own state
machine. These coexist with other parts of the system. If you have your own
state machine (Fibonacci numbers or decomposing a problem into parts), that
makes some problems very easy to write in imperative languages, but much
harder in functional languages. Introducing generators opens the ability to
solve these sorts of problems.
<ul class="org-ul">
<li>… Iterators, signals, events, etc. It’s an opportunity for coordination across
state machines.</li>
<li>… These steps can then feed things back.</li>
</ul></li>
<li>SF: I hear MK when he asks about whether it feeds into XSLT. Yes and no, it
allows multithreading and multiprocessing to be mixed with procedural
programming. That’s not exactly what XSLT does, but it simplifies the code.</li>

<li>CG: Thanks DN and LQ, for the presentation and the PDF file. I see that you’ve
mentioned the while-do function. One reason we introduced this function was to
deal with potentially unlimited results. I was wondering if you’ve thought of
simple examples that cannot be realized with while-do or are much harder
without generators.</li>

<li>RD: It’s more about feeding this into other things and chaining. The while-do
function has the logic in the callback function. But if you wanted to take a
list of Fibonacci numbers and in one case you want to multiple them and in
another case you want to take the differences, you have to write the Fibonacci
logic and tracking in both loops.</li>
<li>DN: Many of the generator functions are inspired by the while-do function.</li>

<li>JL: This is really interesting. I’m a big proponent of putting generators in
XQuery. I think RD is right that the random number generator is a generator.
It would be easier for people to use if they had more infrastructure.
<ul class="org-ul">
<li>… I’d like to know why did you decide to go with a <code>move-next</code> method call
instead of something like the <code>yield</code> keyword?</li>
</ul></li>

<li>DN: The short answer is that introducing <code>yield</code> would necessitate changes in
the languages that I wanted to avoid. We can do this step by step.
<ul class="org-ul">
<li>… There’s also feedback from C# and other places that suggests that <code>yield</code>
makes it harder to understand what is happening.</li>
</ul></li>

<li>MK: Two kinds of comment: 
<ul class="org-ul">
<li>… About planning, I’m concerned about the size of the proposal and how much
work still needs doing (It has improved a lot! Thank you!)</li>
<li>… I look back on past projects of similar size and consider how long they
actually took.</li>
<li>… In a slightly orthogonal way, it’s great to see the number of people we
have active in this group. A project manager once told me there are good
starters and good finishers. And in this kind of activity, we have to worry
about good finishers. I’m concerned about that in terms of working group
dynamics.</li>
<li>… The other concern I have is a sort of feeling that it could be much
smaller. I’d be able to answer that more clearly, if I had three or four
worked out use cases using generators laid out in front of me. Then I could
compare. That’s an appeal to do more work on use cases.</li>
</ul></li>

<li>AP: I wanted to second what MK said about the use cases. I think that would be
very useful. DN and I were working on the slice function and there was a bit
of a missmatch there.
<ul class="org-ul">
<li>… I also have a gut feeling that things could be simplified a bit. Maybe it
could be a library module? Maybe we could have a separate definition for
generators.</li>
</ul></li>

<li>JWL: Very similar. I got three senses: the generator, the “necessary” or “most
preferable” functions, and then you’ve got a lot of other functions that sit
on top of it. What is the essense that needs to be implemented deep down to
get performance or the right kinds of outputs.</li>

<li>JK: I support the idea of generators. I feel the pain of implementors. As a
point of suggestion on how to bridge this gap, I recommend the authors take a
more real world example with an infinite amount of XML. I think that would help.</li>

<li>NW: Are you guys willing to provide three or four substantial worked up use cases?</li>
</ul>

<p>
LQ and DN seem generally willing.
</p>

<ul class="org-ul">
<li>CG: I would also be interested in exploring the exising XQuery implementation
and if there are core features that would make it run more quickly, I’d be
interested in that.</li>

<li>DN: There’s a pure XQuery implementation: <a href="https://github.com/dnovatchev/Articles/blob/main/Generators/Code/generator.xq">https://github.com/dnovatchev/Articles/blob/main/Generators/Code/generator.xq</a>
<ul class="org-ul">
<li>… I think trying that out would be very useful. It might be possible for
people to make their own use cases.</li>
</ul></li>
</ul>

<p>
We’ll return to this PR in a few weeks when use cases have been produced and
reviewed.
</p>
</div>
</div>
</div>
<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>NW: Enjoy the holidays and happy New Year to anyone we won’t see next week!</li>
</ul>
</div>
</div>
</div>
</body>
</html>
