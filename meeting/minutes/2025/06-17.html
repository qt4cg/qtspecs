<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 125 Minutes 2025-06-17</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 125 Minutes 2025-06-17</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/7]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[7/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/6]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-1942">2.1. PR 1942: 37 Support sequence, array, and map destructuring declarations</a></li>
<li><a href="#pr-2030">2.2. PR 2030: 2029 xsd validator notes and examples</a></li>
<li><a href="#pr-1888">2.3. PR 1888: 366 xsl:package-location</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/7]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with NW to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-112-01: JLO to propose a concrete example that uses “.” in a ~%method~s.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-123-01: MK to do the set example in XQuery.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[7/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW, DB, JWL
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="off"><code>[&#xa0;]</code> John Lumley (JWL)</li>
<li class="off"><code>[&#xa0;]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/06-17.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/06-10.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is scheduled for 24 June 2025.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/6]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with NW to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-112-01: JLO to propose a concrete example that uses “.” in a ~%method~s.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-123-01: MK to do the set example in XQuery.</li>
<li class="on"><code>[X]</code> QT4CG-124-01: MK to provide a copy of the slide deck for the minutes.
<ul class="org-ul">
<li>Attachd to issue or PR in Github</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1283">#1283</a>: 77b Update expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>: 150bis revised proposal for fn:ranks</li>
</ul>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2044">#2044</a>: Hide `MarkedNCName` from XPath spec</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2042">#2042</a>: 2041 Correction to xsl:namespace-alias example</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1127">#1127</a>: Binary resources</li>
</ul>

<p>
Closed because we completed it. 
</p>

<ul class="org-ul">
<li>JK: Can someone put a cross reference into #1127?</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
<p>
The following substantive PRs were open when this agenda was prepared.
</p>
</div>

<div id="outline-container-pr-1942" class="outline-3">
<h3 id="pr-1942"><span class="section-number-3">2.1.</span> PR 1942: 37 Support sequence, array, and map destructuring declarations</h3>
<div class="outline-text-3" id="text-pr-1942">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1942">#1942</a>
</p>

<p>
RD walks through the PR.
</p>

<ul class="org-ul">
<li>RD: The scope is to add destructuring support for sequences, maps, and arrays.
<ul class="org-ul">
<li>… Currently it’s done for XPath, but there’s more work for XQuery</li>
<li>… Also changed the inline examples to the example markup in a few places for consistency.</li>
<li>… <code>LetBinding</code> is renamed to <code>LetValueBinding</code></li>
<li>… There’s a new <code>LetSequenceBinding</code>, <code>$( … )</code></li>
<li>… And equivalent array and map bindings to destructure them.</li>
<li>… The let binding has been rewritten to a style similar to <code>for</code> binding.</li>
</ul></li>

<li>MK: You can have a type declaration both inside and outside the brackets?</li>
<li>RD: Yes.</li>
<li>MK: Okay. I missed that.</li>
<li>RD: The idea behind that is that you might want to check that the map is a
specific record type and then check the items inside it.</li>

<li>MK: I think the fact that clauses A and B are referring to different type
declarations needs to be made clearer.</li>
<li>MK: The substantive point is, do we coerce the sequence to the type first and
then decompose it, or do we decompose it and then coerce?
<ul class="org-ul">
<li>… If the expression evaluates to a node and the node produces five atomics
when you atomize it, which way is the binding done?</li>
</ul></li>
<li>RD: I assume that depends on whether the <code>let</code> expression itself has a type
declaration.
<ul class="org-ul">
<li>… My understanding is that if the <code>let</code> expression has a type declaration
then the value of the temporary variable would get coerced to that type.</li>
</ul></li>
<li>MK: So you coerce to the outermost type, then decompose, then coerce each of
the items.</li>
<li>RD: Yes.</li>
<li>MK: Okay. That’s technically coherent.</li>

<li>JL: We only have to coerce if there’s something to coerce to.
<ul class="org-ul">
<li>… It could become expensive to do two steps of coercion. And how do we
tackle things if the sequence is a string but it contains an <code>NCName</code>.</li>
<li>… Do we need to consider incompatible type declarations?</li>
</ul></li>
<li>RD: In that case, the coercion on the outer scope will succeed and coerce it
to the specified type but the inner type coercion will fail. So you’ll get a
type error.</li>

<li>MK: Yes, it will carry a cost to do the coercion twice, but that’s not
something users are likely to do. And if they do, the types are probably going
to be consistent and the optimizer can return them.</li>

<li>RD: There’s a similar structure for <code>LetArrayBinding</code>.
<ul class="org-ul">
<li>… It returns an empty sequence if there’s no element.</li>
</ul></li>
<li>MK: Where’s the error if you ask for a type that isn’t an array type?</li>
</ul>

<p>
Some discussion of how the type declarations are used to handle the array case.
</p>

<ul class="org-ul">
<li>RD: We should say that the type declaration must also be coerceable to array.
<ul class="org-ul">
<li>… The current wording doesn’t verify that the type is an array but it should.</li>
</ul></li>
<li>JL: More generally, if I don’t care about some values, can I just use <code>$_</code> in
several places?</li>
<li>RD: Yes. The idea is that this works exactly as it would if you expanded it out.</li>

<li>RD: There’s a similar process for <code>LetMapBinding</code>.
<ul class="org-ul">
<li>… There is a similar issue here, there should be a note that the type must
be coerceable to a map.</li>
<li>… Again, an empty sequence is returned if the key is missing.</li>
</ul></li>
<li>RD: And we have a description of the result of the <code>ForLetExpr</code>.</li>
</ul>

<p>
Turning to the XQuery spec…
</p>

<ul class="org-ul">
<li>RD: There’s the change from example text to example block again.
<ul class="org-ul">
<li>… And the nonterminal name changes.</li>
</ul></li>
<li>RD: The rest is hard to read because it’s diffing off an older branch.</li>
<li>JL: Great to see it come to life, finally. Thank you.
<ul class="org-ul">
<li>… I think it would be useful to have a note that you can reuse a variable
several times.</li>
</ul></li>
<li>CG: Thank you. It’s really great. Do we have specific reasons for allowing
repeated variable names, beyond the fact that they’re allowed in FLOWR
expressions in general?</li>
<li>RD: It’s useful because you can’t mutate a variable; if you have a complicated
expression structure, it can be useful to have things like an accumulator
variable or something like that. And also, if you’ve got a nested expression,
it can be useful to have variables named <code>$i</code> or <code>$node</code> or something generic.</li>
<li>MK: There have definitely been cases where I’ve reused <code>$temp</code> in a FLOWR
expression.</li>
<li>MK: I suggest that if we have technical consensus, I can take over a
redrafting.</li>
<li>RD: Yeah, that’s fine.</li>

<li>JL: Is it necessary to have a <code>$</code> in front of the brackets?</li>
<li>RD: In the case of parenthesis, you can’t distinguish the parens from a
function call.</li>
</ul>

<p>
Some discussion of declaring the default function namespace and the consequences
thereof.
</p>

<p>
Proposal: accept this technically, let MK take an editorial pass.
</p>

<p>
Some discussion of reserved function names.
</p>

<ul class="org-ul">
<li>RD: There may have been an issue with <code>[</code> as well.</li>
<li>MK: Yes, ~let [ … ~ requires unbounded look ahead.</li>
</ul>

<p>
Proposal: accept this technically, let MK take an editorial pass.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-2030" class="outline-3">
<h3 id="pr-2030"><span class="section-number-3">2.2.</span> PR 2030: 2029 xsd validator notes and examples</h3>
<div class="outline-text-3" id="text-pr-2030">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2030">#2030</a>
</p>

<ul class="org-ul">
<li>MK: This started as an editorial exercise, but I discovered I was replicating
text that was already replicated.
<ul class="org-ul">
<li>… I decided to move the whole discussion of validation into F&amp;O and remove
common text from XQuery and XSLT.</li>
</ul></li>
</ul>

<p>
MK reviews the PR.
</p>

<ul class="org-ul">
<li>MK: In F&amp;O, there’s a new section on XSD validation. It shows as all new, but
it’s not intended to be substantively different from the descriptions
currently in the XQuery and XSLT specifications.</li>
<li>MK: Then the validation function refers to that section.
<ul class="org-ul">
<li>… The function also goes into a lot more detail about how a schema is
constructed.</li>
</ul></li>
<li>MK: In the XQuery spec, there’s a cross reference to the F&amp;O section and some
detail is removed. The validate expression is no defined in terms of a call to
the validate function.
<ul class="org-ul">
<li>… XQuery and XSLT define different error codes, so there’s a bit of a fudge.</li>
</ul></li>
<li>MK: The XSLT spec has analagous changes.</li>

<li>WP: I think this is definite improvement. Is this necessary because the XSD
spec is “soft” on some of these options?</li>
<li>MK: Yes. XSD gives a whole range of ways to do it, but this makes it more
concrete.</li>
<li>JLO: I was wondering why there are different error codes in XQuery and XSLT?</li>
<li>MK: Just for backwards compatibility.</li>
</ul>

<p>
Some discussion of what it means for a schema to be invalid.
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-1888" class="outline-3">
<h3 id="pr-1888"><span class="section-number-3">2.3.</span> PR 1888: 366 xsl:package-location</h3>
<div class="outline-text-3" id="text-pr-1888">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-1888">#1888</a>
</p>

<p>
JK introduces the PR. 
</p>

<ul class="org-ul">
<li>JK: We first discussed this about a month ago and I got good feedback which
I’ve incorporated.
<ul class="org-ul">
<li>… Brief recap: the use-package instruction doesn’t give the developer access
to the resources directly in the code.</li>
<li>… The idea here is to make configuration easier by giving that access.</li>
</ul></li>
</ul>

<p>
JK walks through the prose of the new version.
</p>

<ul class="org-ul">
<li>JK: Priority is just a boolean now, not an integer.
<ul class="org-ul">
<li>… First match wins.</li>
</ul></li>

<li>JK: I’ve posted five “Hello world” examples for the XSLT test suite.</li>

<li>MK: I think that looks viable.</li>

<li>JLO: There is already a package format that is used in the wider ecosystem,
defined by EXPath. What about using xar packages?</li>

<li>JK: It’s allowed, but I don’t know if it should be required.</li>
</ul>

<p>
Some discussion of the changes to priority.
</p>

<ul class="org-ul">
<li>JK: A boolean combined with first one wins, seemed simpler.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
