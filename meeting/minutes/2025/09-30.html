<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 136 Minutes 2025-09-30</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 136 Minutes 2025-09-30</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/9]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[8/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[0/9]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-2123">2.1. PR #2123: 2051: XSLT group by cluster</a></li>
<li><a href="#pr-2211">2.2. PR #2211: 2210 Drop parse-html include-template-content option</a></li>
<li><a href="#pr-2209">2.3. PR #2209: 2165 Rephrase semantics of treat-as</a></li>
<li><a href="#pr-2205">2.4. PR #2205: 2190 Drop binary input for parse-csv and parse-json</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>
<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>
<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/9]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-127-01: NW to diagram the JTree representing arbitrary XDM content.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-128-03: NW to compare the file: module against the equivalent XProc 3.1 steps</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-01: MK to add a non-schema aware result.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-02: MK to expand on the <code>$E := &lt;e A="p q r"…</code> example</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-03: MK to change “invert” to “transpose” in the matrix example.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-133-01: MK to correct the use of “Expr” in examples for get()</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-135-01: MK to correct attribute rule 5/d to use the schema component name</li>
</ul>
</div>
</div>
<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>
<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[8/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> David J Birnbaum (DB) [:18-]</li>
<li class="off"><code>[&#xa0;]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [:06-]</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>
<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/09-30.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/09-23.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is planned for 7 October 2025.
</p>

<p>
No regrets heard.
</p>
</div>
</div>
<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[0/9]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-127-01: NW to diagram the JTree representing arbitrary XDM content.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-128-03: NW to compare the file: module against the equivalent XProc 3.1 steps</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-01: MK to add a non-schema aware result.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-02: MK to expand on the <code>$E := &lt;e A="p q r"…</code> example</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-03: MK to change “invert” to “transpose” in the matrix example.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-133-01: MK to correct the use of “Expr” in examples for get()</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-135-01: MK to correct attribute rule 5/d to use the schema component name</li>
</ul>
</div>
</div>
<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>
<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2124">#2124</a>: 573 Functions to Construct Trees</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2120">#2120</a>: 2007 Revised design for xsl:array</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
</ul>
</div>
</div>
<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2212">#2212</a>: 1980 Use HTML5-defined syntax for meta element</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2207">#2207</a>: 2196 Clarify XQST0070</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2206">#2206</a>: 2204 Change method call expansion so error code becomes XPTY0004</li>
</ul>

<p>
Proposal: merge without discussion
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1965">#1965</a>: The Generator record

<ul class="org-ul">
<li>JLO: I’m really interested in this.</li>
<li>MK: I’d be sympathetic to a proposal, but we don’t have one.</li>
<li>CG: It’s interesting, but lots of common data structures, like linked
queues, would be interesting. Are generator functions really important
enough to be in the core spec.</li>
<li>JLO: Can we build generators without the core spec?</li>
<li>CG: I think it can be built without in the core spec; the solution from DN
is completely written in XQuery.</li>
<li>WP: I’ve heard activity and there are alternative ideas and that it could be
put elsewhere. Can we time box it?</li>
<li>NW: The issue has been open for four months. I’m not sure how setting a
deadline is going to encourage proposals.</li>
<li>MK: The first issue is two years old.</li>
<li>JL: I think that items we <b>can’t</b> write in our current language need to be
in the spec. But experimental features that you can implement in XQuery or
XPath don’t <b>need</b> to be in the spec.</li>
<li>JLO: I think DN pointed out that he would need the generator record to be
defined by the language because you can’t define that in XPath itself.
<ul class="org-ul">
<li>… I also see that there is an XPath implementation.</li>
</ul></li>
<li>NW: I think folks who want to do this should.</li>
<li>MK: I think that good ideas that aren’t essential to completion should be
left open.</li>
</ul></li>
</ul>

<p>
Proposal: close without further action.
</p>

<p>
Accepted. (With several in favor and no objections.)
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1452">#1452</a>: Links from the agendas/minutes to the dashboard don't redirect when the PR is no longer on the dashboard</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/716">#716</a>: Generators in XPath</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/708">#708</a>: Toward a design for generators</li>
</ul>

<p>
Proposal: close with no further action
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>
<div id="outline-container-pr-2123" class="outline-3">
<h3 id="pr-2123"><span class="section-number-3">2.1.</span> PR #2123: 2051: XSLT group by cluster</h3>
<div class="outline-text-3" id="text-pr-2123">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2123">#2123</a>.
</p>

<ul class="org-ul">
<li>JK introduces the issue with an example.</li>
</ul>

<p>
The example uses annotations that overlap other structures in the markup.
Another example is quotation detection. Another example is a multidimensional
plot of items. Another is an example of grouping polygons that overlap or
touch.
</p>

<ul class="org-ul">
<li>JK: The polygon example is similar to a problem in OCR for identifying
paragraphs.</li>
</ul>

<p>
JK turns to the text of the PR.
</p>

<ul class="org-ul">
<li>JK summarizes “split-when” and “merge-when”.</li>

<li>JK: Might not be used very often, but when it’s needed it will be very
appreciated.</li>
<li>MK: Is the result independent of the order in which you compare groups?</li>
<li>JK: I tried that, but the comparitors might be asymmetric. (See the last example with animals.)</li>
<li>MK: Do you always have to do n² comparisons?</li>
<li>JK: No, if you can work out that the comparitors are symmetric then the order doesn’t matter.</li>
<li>JLO: Very interesting. You have a mixture of the different cases and the
examples aren’t presented like other examples. That would be a nice change.</li>
<li>JK: I did two larger examples, the others were more compact.</li>
<li>JLO: Should we add a comment about optimization?</li>
<li>MK: That’s always true, but we could add hints if we think they’re useful.</li>
<li>JWL: Why don’t we use functions here, rather than expressions? Then we
wouldn’t end up with variables that have special names.
<ul class="org-ul">
<li>… Is there a reason for this?</li>
</ul></li>
<li>MK: I’ve had the same question with other things we’ve added. Generally, the
answer is that making it an expression or a pattern makes simple cases
simpler.</li>
<li>JK: If we find an alternative that uses functions, we could do that.</li>
<li>JWL: In grouping we use reserved functions: `current-group()`, `current-grouping-key()`</li>
<li>JLO: This only effects XSLT, right?</li>
<li>JK: Yes.</li>
<li>MK: The more exotic features of the languages are sort of unevenly distributed
across XQuery and XSLT. Why do we do advanced windowing in XQuery and advanced
grouping in XSLT? I’m not sure we’d have a good answer.</li>
<li>JK: I’d love to see this in XQuery.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2211" class="outline-3">
<h3 id="pr-2211"><span class="section-number-3">2.2.</span> PR #2211: 2210 Drop parse-html include-template-content option</h3>
<div class="outline-text-3" id="text-pr-2211">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2211">#2211</a>.
</p>

<ul class="org-ul">
<li>NW: Did we get any feedback from RD on this one?</li>
<li>MK: I don’t think so.</li>
<li>NW: Shall we wait?</li>
<li>MK: I’m pretty confident that we want to go ahead. I think the option would
make more sense for implementors than users. I don’t think there’s any benefit
to users in having a choice. I think the intuitive way is not compatible with
the DOM but the HTML parsers do it by that way by default.</li>
<li>JLO: I agree.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2209" class="outline-3">
<h3 id="pr-2209"><span class="section-number-3">2.3.</span> PR #2209: 2165 Rephrase semantics of treat-as</h3>
<div class="outline-text-3" id="text-pr-2209">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2209">#2209</a>.
</p>

<p>
MK introduces the PR.
</p>

<ul class="org-ul">
<li>MK: Remember that <code>treat as</code> is a hangover from strong, static typing. The way
it’s described has vestiges of that.</li>
<li>MK: The main substantive change here is that if <code>treat as</code> fails it’s a type
error not a dynamic error.
<ul class="org-ul">
<li>… Most of the changes are just changing dynamic error to type error.</li>
<li>… It keeps the error code in case people are catching it.</li>
<li>… The wording changes bring the description into line with the rest of the spec prose.</li>
</ul></li>
<li>JWL: Can this be raised at runtime and at compile time?</li>
<li>MK: Yes. It’s a type error so you can statically report that <code>3 treat as
  xs:string</code> is an error</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2205" class="outline-3">
<h3 id="pr-2205"><span class="section-number-3">2.4.</span> PR #2205: 2190 Drop binary input for parse-csv and parse-json</h3>
<div class="outline-text-3" id="text-pr-2205">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2205">#2205</a>.
</p>

<ul class="org-ul">
<li>MK introduces the PR. What CG had done in the interest of consistency was to
allow all the parse functions to accept binary input in additionto text.
<ul class="org-ul">
<li>… I think for CSV and JSON that’s inappropriate and possibly misleading.</li>
<li>… It makes sense for HTML and XML because the encoding can be in the file.</li>
<li>… But for CSV and JSON there are no such rules in the specifications.
Decoding is completely orthogonal to the parsing.</li>
<li>… So I don’t think they need to be combined. Except, perhaps, to make the
interfaces similar to other functions.</li>
<li>… We might want a way to decode a string, but that’s a separate issue.</li>
<li>… And if you start with binary input, the binary module gives you a way to
decode them data.</li>
</ul></li>
<li>CG: I think it would be helpful to allow both string and binary. If you have
binary data, the encoding or byte order mark might be in the data. We don’t
have any way to infer an encoding from data. You can do it from data, with
unparsed-text(), but that might mean writing the data to disk in order to
infer the encoding.
<ul class="org-ul">
<li>… I think it would be helpful to have for CSV and JSON data as well.</li>
<li>… For users who don’t care about the specifics of the specifications, I
think it can be helpful to have a uniform API to the functions.</li>
</ul></li>
<li>MK: If we don’t have a function to decode binary based on inferring the
encoding, shouldn’t we add one?</li>
<li>CG: Yes. I’ve opened a proposal to extend <code>decode-string</code> to be able to infer
the encoding.
<ul class="org-ul">
<li>… The functions <code>csv-doc</code> and <code>json-doc</code>, would you expect them to infer the
encoding?</li>
</ul></li>
<li>MK: I think the answer there is, if nothing is supplied, I would expect it. It
comes in HTTP headers, for example.</li>
<li>CG: So I could imagine that someone might want to swap <code>cvs-doc</code> and
<code>parse-csv</code> because the data is already available. So it would be helpful if
the interface was the same. That would be a consistency issue.</li>
<li>MK: This is about the parse functions not the doc functions.
<ul class="org-ul">
<li>… I think it’s at the point where you’re dealing with the external resource
where you want to decode.</li>
</ul></li>
<li>JLO: I’m uncomfortable dropping it. I’d like to not have the extra step
necessary. Now that I hear that there might be some usefulness in interpreting
the BOM, I’m torn.</li>
<li>JK: CG, you mentioned another PR for decode string. Where is that?</li>
<li>CG presents issue <a href="https://github.com/qt4cg/qtspecs/issues/2217">#2217</a> where the proposal exists.</li>
<li>JK: Would that be used to extend parse functions to do binary.</li>
<li>CG: That’s what I did by putting binary into all the parse functions.</li>
<li>MK: JSON and CSV start with characters, so you don’t need binary.</li>
<li>JWL: Is it a great deal of implementation work?</li>
<li>MK: It’s more about writing tests!</li>
<li>CG: We might also want to consider adding an encoding option.</li>
<li>MK: That’s also a problem, once you add complexity, it starts to multiply.
<ul class="org-ul">
<li>… In fact, that’s how this started. We have parse-csv that accepts binary
but we have no way of specifying the encoding.</li>
</ul></li>
<li>WP: I’m a bit out of my depth; but in my experience the problem goes beyond
what we can do. The specs say one thing and the world does something else.
<ul class="org-ul">
<li>… I think making it transparent and usable on the edges is good.</li>
<li>… If that’s the case, I’d be in favor of allowing binary.</li>
</ul></li>
<li>JK: I think before deciding on the fate of this, we should look at decode string.</li>
</ul>

<p>
There isn’t consensus to make this change; we’ll leave the status quo.
</p>
</div>
</div>
</div>
<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>NW: Next week, I’ve agreed to let JWL and JLO give a brief summary of what
they’re planing to present about QT4 at Declarative Amsterdam.</li>
<li>JLO: In the eXist-db community call yesterday, I observed that there haven’t
been any plans to update XQuery Update or XQueryX.</li>
<li>MK: Both were dropped in the 3.x time frame.</li>
<li>CG: XQuery Update 3.0 is a working group note but many people are maybe
confused by that.</li>
<li>JK: How can we make functions easier to find.</li>
<li>MK: I’ve got an open issue to add better cross referencing from functions to
related functions.</li>
<li>NW: Maybe we need to think about indexes.</li>
</ul>
</div>
</div>
</div>
</body>
</html>
