:PROPERTIES:
:ID:       6BD57A78-4D4B-4E7B-BBB5-31B9F71E7429
:END:
#+title: QT4 CG Meeting 138 Minutes 2025-10-14
#+author: Norm Tovey-Walsh
#+filetags: :qt4cg:
#+options: html-style:nil h:6 toc:nil
#+html_head: <link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
#+html_head: <link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
#+html_head: <link rel="shortcut icon" href="/img/QT4-64.png" />
#+html_head: <link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
#+html_head: <link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
#+options: author:nil email:nil creator:nil timestamp:nil
#+startup: showall

[[../][Meeting index]] / [[https://qt4cg.org][QT4CG.org]] / [[https://qt4cg.org/dashboard][Dashboard]] / [[https://github.com/qt4cg/qtspecs/issues][GH Issues]] / [[https://github.com/qt4cg/qtspecs/pulls][GH Pull Requests]]

#+TOC: headlines 6

* Draft Minutes
:PROPERTIES:
:unnumbered: t
:CUSTOM_ID: minutes
:END:

* Summary of new and continuing actions [0/0]
:PROPERTIES:
:unnumbered: t
:CUSTOM_ID: new-actions
:END:

None

* Administrivia
:PROPERTIES:
:CUSTOM_ID: administrivia
:END:

** Roll call [7/11]
:PROPERTIES:
:CUSTOM_ID: roll-call
:END:

Regrets: DB, JWL.

+ [ ] David J Birnbaum (DB)
+ [X] Reece Dunn (RD)
+ [X] Christian Grün (CG)
+ [X] Joel Kalvesmaki (JK)
+ [X] Michael Kay (MK)
+ [ ] Juri Leino (JLO)
+ [X] John Lumley (JWL) [:39-]
+ [X] Wendell Piez (WP)
+ [ ] Ed Porter (EP)
+ [ ] Bethan Tovey-Walsh (BTW)
+ [X] Norm Tovey-Walsh (NW) /Scribe/. /Chair/.

** Accept the agenda
:PROPERTIES:
:CUSTOM_ID: agenda
:END:

Proposal: Accept [[../../agenda/2025/10-14.html][the agenda]].

Accepted.

** Approve minutes of the previous meeting
:PROPERTIES:
:CUSTOM_ID: approve-minutes
:END:

Proposal: Accept [[../../minutes/2025/10-07.html][the minutes of the previous meeting]]. 

Accepted.

** Next meeting
:PROPERTIES:
:CUSTOM_ID: next-meeting
:END:

The next meeting is planned for 21 October 2025.

No regrets heard.

** Review of open action items [6/9]
:PROPERTIES:
:CUSTOM_ID: open-actions
:END:

(Items marked [X] are believed to have been closed via email before
this agenda was posted.)

+ [X] QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available
  + Overtaken by [[https://github.com/qt4cg/qtspecs/issues/2245][#2245]].
+ [X] QT4CG-127-01: NW to diagram the JTree representing arbitrary XDM content.
+ [X] QT4CG-128-03: NW to compare the file: module against the equivalent XProc 3.1 steps
+ [X] QT4CG-137-01: NW to make a concrete proposal for tagged drafts
+ [X] QT4CG-137-02: NW to try to review the spec vis-a-vis #2148

** Review of open pull requests and issues
:PROPERTIES:
:CUSTOM_ID: open-pull-requests
:END:

This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See [[#technical-agenda][Technical Agenda]] below for the focus of this
meeting.

*** Blocked
:PROPERTIES:
:CUSTOM_ID: blocked
:END:

The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.

+ PR [[https://qt4cg.org/dashboard/#pr-2224][#2224]]: 2148 fn:base-uri: Raise error
+ PR [[https://qt4cg.org/dashboard/#pr-2222][#2222]]: 2217 bin:decode-string: Input encoding
+ PR [[https://qt4cg.org/dashboard/#pr-2124][#2124]]: 573 Functions to Construct Trees
+ PR [[https://qt4cg.org/dashboard/#pr-2120][#2120]]: 2007 Revised design for xsl:array
+ PR [[https://qt4cg.org/dashboard/#pr-2071][#2071]]: 77c deep update
+ PR [[https://qt4cg.org/dashboard/#pr-2019][#2019]]: 1776: XSLT template rules for maps and array

*** Merge without discussion
:PROPERTIES:
:CUSTOM_ID: merge-without-discussion
:END:

The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.

+ PR [[https://qt4cg.org/dashboard/#pr-2244][#2244]]: Fix bibliographic reference
+ PR [[https://qt4cg.org/dashboard/#pr-2231][#2231]]: Updated status section for all documents

Proposal: merge without discussion.

Accepted.

*** Close without action
:PROPERTIES:
:CUSTOM_ID: close-without-action
:END:

It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.

+ Issue [[https://github.com/qt4cg/qtspecs/issues/1537][#1537]]: XSLT: local functions within an enclosing xsl:mode

Proposal: close without further action.

Accepted.

* Technical agenda
:PROPERTIES:
:CUSTOM_ID: technical-agenda
:END:

This agenda attempts to front-load PRs that appear to be straightforward and
likely to meet with quick approval. Proposals for reordering are always in
order, no pun intended.

** PR #2239: First cut at diagrams for JNodes (completes QT4CG-127-01)
:PROPERTIES:
:CUSTOM_ID: pr-2239
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2239][#2239]].

Proposal: accept the PR.

Accepted.

** PR #2232: 1935 Errors from doc-available
:PROPERTIES:
:CUSTOM_ID: pr-2232
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2232][#2232]].

+ MK: I think this is mostly editorial. There’s clarification here about when an
  error might be raised.
  + … It’s a bit arbitrary, but I thought a consistent response was better than
    lots of error conditions.

Proposal: accept the PR.

Accepted.

** PR #2228: 2012 Define array:sort-with, revise fn:sort-with
:PROPERTIES:
:CUSTOM_ID: pr-2228
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2228][#2228]].

+ MK: The ~array:sort-with~ function has been longstanding and in review, I
  decided that editorial improvements to ~fn:sort-with~ were needed.
  + … The only technical change is that at least one comparitor is required.
  + … The description is narrative so that it looks less like an implementation.
  + … If a comparitor raises an error, that’s raised by the sort function.
+ MK: The ~array:sort-with~ reuses the same text, adjusted accordingly.

Proposal: accept the PR.

Accepted.

** PR #2227: 2079 Allow optional prefix in EQName syntax
:PROPERTIES:
:CUSTOM_ID: pr-2227
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2227][#2227]].

+ MK: This one came from a Saxon user request. There are various APIs where you
  can supply EQNames and the user observed that there was no way to provide a
  prefix for the QName. That meant it had no prefix in error messages.
  + … Expanding the API to allow a prefix fixes this problem.
+ MK: It also effects the ~fn:parse-EQName~ function.

MK reviews the impact in XPath.

+ MK: It’s the prefix followed by the colon that’s optional.
+ RD: There are two ways of specifying a qualified name, by way of an in-scope
  prefix, or to use the qualified name and specify the namespace URI. This would
  only apply in the case where the namespace isn’t in the predefined namespaces?

Some discussion of the problems of passing namespace contexts through APIs.

+ MK: Internally, the only way to define an error code in some contexts is with
  an AVT, so you need to pass in the name as a string.

Some discussion of what constitutes a QName. It’s a triple, a namespace URI, a
local part, and a prefix.

+ RD: One issue I forsee is that if you have xs: or xsd: as the schema prefix,
  and you specify the namespace and a different prefix, which one takes
  priority? Is it an error?
+ MK: You’re just creating a QName here, you’re not putting it in any context.
  + … This doesn’t refer to any in-scope bindings; it’s just creating a triple.

Further discussion of possible confusion.

+ RD: In Dublin Core there are two namespaces, one for the elements and one for
  the terms. You could define the terms as “dc:” in the prolog. In your code you
  could bind “dc:” to the elements namespace.

Some discussion of namespace fixup in serialization.

+ MK: It’s already possible to use ~fn:QName~ to make arbitrary triples. This
  doesn’t change that, it just gives you another way to do it.
+ WP: RD is identifying the original sin of namespaces…
+ RD: With ~fn:QName~ you can’t do static lookup of a function, but if we had
  the extended EQName syntax, then you could try calling ~fn:count~…
+ MK: The spec for function lookup says that it ignores the prefix component.
+ NW: MK is right, there’s nothing new here.
+ RD: In this case, the namespace still takes priority.
+ MK: In nearly all context, the prefix is ignored. It only matters when you
  turn it into a string.

Some discussion of when and how the prefix is used to lookup a namespace
binding.

CG provides an XQuery example in which a prefix is defined more than once
(already possible):

#+BEGIN_SRC
element {
  QName('uri', 'prefix:local')
} {
  namespace prefix { 'uri2' }
}
#+END_SRC

Possible result (dependent on implementation):

#+BEGIN_SRC
<prefix:local xmlns:prefix="uri" xmlns:prefix_1="uri2"/>
#+END_SRC

+ CG: There’s a typo in the PR.

Proposal: accept this PR.

Accepted.

** PR #2226: 2186 Change adaptive serialization of JNodes
:PROPERTIES:
:CUSTOM_ID: pr-2226
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2226][#2226]].

MK introduces the PR.

+ MK: This is from my own experience where you get back a JNode when you were
  expecting the data.

MK reviews the changes proposed in the PR:

Proposal: accept this PR.

Accepted.

** PR #2225: 1718 Ordered Maps: positions in callback functions
:PROPERTIES:
:CUSTOM_ID: pr-2225
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2225][#2225]].

CG introduces the PR.

+ CG: Now that maps are ordered, there are many opportunities to use maps
  instead of sequences when you have key/value pairs.
  + … This PR allows you to use the position.
+ MK: It took me a while to get myself reconciled to this idea, but now that
  ordering is fully entrenched for maps, I think it makes sense.

Proposal: accept this PR.

Accepted.

** PR #2240: 2237 XSLT impact of multiple schemas
:PROPERTIES:
:CUSTOM_ID: pr-2240
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2240][#2240]].

+ MK: This is essentially editorial; we accepted the proposal to allow multiple
  schemas to be imported.
  + … This PR adds text to clarify what that means in places that didn’t admit
    that possibility.

MK reviews the changes.

Proposal: accept this PR.

Accepted.

** PR #2236: 2235 Tweak the rules for default function namespace
:PROPERTIES:
:CUSTOM_ID: pr-2236
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2236][#2236]].

+ MK: We made it possible to have functions without a prefix and those should be
  used in preference to the default function namespace.
  + … This PR fixes a few gaps.
  + … If you specify a default function namespace, that’s the only one that’s searched.
  + … In XSLT, you can’t define a default function namespace, but you’re only
    allowed to omit the prefix on a private function. That means it doesn’t
    complicate the rules for functions across packages.
+ JWL: Are we losing something in terms of guarding against accidental spelling
  errors and things like that.
  + … Something about this doesn’t feel quite right…
+ MK: We do regard having ambiguous references with a bit of horror; but most
  programming languages allow function names to mean different things in
  different places. There’s always some sort of implicit qualification.
+ JWL: Could I do something like next match, or xsl:original in packages? Can I
  make my own subsequence that calls the fn: one?
+ MK: Yes, by using the namespace prefix explicitly.
+ WP: The main question for me is, should we be saying anything about the use
  case of overriding?
+ MK: Yes, a little bit of usage guidance might be good.

Proposal: accept this PR.

Accepted.

** PR #2208: 675 (part) Update XSLT streamability rules
:PROPERTIES:
:CUSTOM_ID: h-EA605FF8-78BF-4E0E-981D-7FF7358857E0
:END:
See PR [[https://qt4cg.org/dashboard/#pr-2208][#2208]].

+ MK reviews the proposal.
+ MK: You can’t put streamed nodes in a map or array
  + … The first argument of ~array:slice~ can’t be a streamed node, so T doesn’t
   make sense.
  + … I fixed a few others along the same lines.
+ MK: There was a section on maps and streaming; I’ve added a parallel section
  on arrays and streaming.

Proposal: accept this PR.

Accepted.

* Any other business
:PROPERTIES:
:CUSTOM_ID: any-other-business
:END:

None heard.
