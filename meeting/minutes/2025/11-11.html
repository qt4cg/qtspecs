<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 141 Minutes 2025-11-11</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 141 Minutes 2025-11-11</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/2]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[9/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/2]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-2277">2.1. PR #2277: 2195 Editorial Omnibus</a></li>
<li><a href="#pr-2273">2.2. PR #2273: 2219 A method can be applied to multiple maps</a></li>
<li><a href="#pr-2266">2.3. PR #2266: 540 system-property equivalent for XQuery</a></li>
<li><a href="#pr-2259">2.4. PR #2259: 938 Canonical serialization</a></li>
<li><a href="#pr-2120">2.5. PR #2120: 2007 Revised design for xsl:array</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>
<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="../2025/11-18.html">at meeting 142</a> on 18 November 2025.
</p>
</div>
</div>
<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/2]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-140-02: MK to add a note about dealing with binary in parse-cvs and parse-json</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-141-01: MK to follow up on a comment by JWL on #2269</li>
</ul>
</div>
</div>
<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>
<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[9/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: DB
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>
<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/11-11.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/10-28.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is planned for 18 November 2025.
</p>
</div>
</div>
<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/2]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="on"><code>[X]</code> QT4CG-140-01: NW to make sure that the new spec is in the dashboard.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-140-02: MK to add a note about dealing with binary in parse-cvs and parse-json</li>
</ul>
</div>
</div>
<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>
<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2256">#2256</a>: 2216 All atomic types become ordered</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2160">#2160</a>: 2073 data model changes for JNodes and Sequences</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2124">#2124</a>: 573 Functions to Construct Trees</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2071">#2071</a>: 77c deep update</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
</ul>
</div>
</div>
<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2272">#2272</a>: 2253 Add examples for Q{uri}prefix:local</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2270">#2270</a>: 2267 Fix inconsistency in XQuery unprefixed function declarations</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2269">#2269</a>: 2268 Correct equivalent expression for for-each-pair</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Accepted.
</p>

<p>
ACTION QT4CG-141-01: MK to follow up on a comment by JWL on #2269
</p>
</div>
</div>
<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/2265">#2265</a>: XDM 4.0: a question about mutability/immutability of sequence types</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/2203">#2203</a>: Drop XSLT Streaming?</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1953">#1953</a>: Make generation of constructor function for named record types optional</li>
</ul>

<p>
Proposal: close without further action.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>
<div id="outline-container-pr-2277" class="outline-3">
<h3 id="pr-2277"><span class="section-number-3">2.1.</span> PR #2277: 2195 Editorial Omnibus</h3>
<div class="outline-text-3" id="text-pr-2277">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2277">#2277</a>.
</p>

<ul class="org-ul">
<li>MK: CG has added check boxes; let’s merge the changes we’ve got and press on.</li>

<li>CG: Many of the comments refer to typos and don’t need much work.
<ul class="org-ul">
<li>… Some issues need a more thorough review</li>
</ul></li>
<li>MK: Yes, if you find something non-trival, it should probably be an issue in
its own right.</li>
</ul>

<p>
Proposal: accept this PR, but leave the issue open.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2273" class="outline-3">
<h3 id="pr-2273"><span class="section-number-3">2.2.</span> PR #2273: 2219 A method can be applied to multiple maps</h3>
<div class="outline-text-3" id="text-pr-2273">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2273">#2273</a>.
</p>

<p>
MK reviews the PR
</p>

<ul class="org-ul">
<li>MK: I think this PR only points out consequences of the spec as its written.
It doesn’t make any changes.
<ul class="org-ul">
<li>… We want maps and arrays to behave like nodes, so we have to allow
functions to behave that way (because maps and arrays are functions).</li>
<li>… We also want it to work that way so you don’t have to do a test for empty.</li>
</ul></li>

<li>JWL: The CSV to arrays example uses csv-to-arrays() which produces a sequence
of arrays, which is a sequence of functions, that’s subtle!</li>

<li>JLO: I’m often using a different form of that, using <code>?</code> to lookup something.
It fails when we have an empty sequence.</li>

<li>MK: No, empty maps to empty now.</li>
</ul>

<p>
MK continues the review.
</p>

<ul class="org-ul">
<li>MK: There was a suggestion that each application of <code>=?&gt;</code> could return zero or
more functions, but I haven’t changed that. Each application must return
exactly one, but there can be multiple maps on the left.</li>

<li>JWL: You normally expect the context item to be consumed fairly quickly.</li>

<li>MK: Yes, but it’s okay here because the function doesn’t change the context
item.</li>

<li>CG: I need to think about the last example; on the right there are function
items. Is that okay? Wouldn’t they need more parentheses.</li>

<li>NW: I hate it, I agree we have to do it, but I hate it.</li>

<li>JLO: The result would be a sequence of all the function calls.</li>

<li>MK: It’s exactly like the first example.</li>

<li>JLO: I often use the <code>!</code> operator so that I can return sequences of stuff.</li>

<li>JWL: That means you could have maps of dispatch functions to process bits and
pieces, couldn’t you?</li>

<li>MK: Yes, it opens up all sorts of amazing things.</li>

<li>CG: What about this example:</li>
</ul>

<div class="org-src-container">
<pre class="src src-xquery"><span style="color: #bf360c;">let</span> <span style="color: #455A64;">$math</span> := { <span style="color: #6C3082;">'n'</span>: -123, <span style="color: #6C3082;">'abs'</span>: fn { <span style="color: #388E3C;">abs</span>(?n) } }
<span style="color: #bf360c;">return</span> (
  <span style="color: #795548;">(: </span><span style="color: #795548;">&#10003; works</span><span style="color: #795548;"> :)</span> <span style="color: #455A64;">$math</span> ? <span style="color: #388E3C;">abs</span>(<span style="color: #455A64;">$math</span>),
  <span style="color: #795548;">(: </span><span style="color: #795548;">&#10003; works</span><span style="color: #795548;"> :)</span> <span style="color: #455A64;">$math</span> =?&gt; <span style="color: #388E3C;">abs</span>(),

  <span style="color: #795548;">(: </span><span style="color: #795548;">&#10003; works</span><span style="color: #795548;"> :)</span> <span style="color: #455A64;">$math</span> ? <span style="color: #388E3C;">wrong</span>(),
  <span style="color: #795548;">(: </span><span style="color: #795548;">&#10003; fails</span><span style="color: #795548;"> :)</span> <span style="color: #455A64;">$math</span> =?&gt; <span style="color: #388E3C;">wrong</span>()
)
</pre>
</div>

<ul class="org-ul">
<li>CG: I think the last two cases should do the same thing.
<ul class="org-ul">
<li>… A map can have functions that do or don’t require maps as the first argument.</li>
</ul></li>

<li>MK: Yes. I’d just like to retain a few places where you can get static errors
if you misspell things.
<ul class="org-ul">
<li>… This is saying methods should work a bit like static function calls. So
there’s some chance of producing a static error.</li>
</ul></li>

<li>JLO: What does “works” mean for <code>$math ? wrong()</code>?</li>

<li>CG: It returns an empty sequence.</li>

<li>JLO: I sort of think that shouldn’t work, but also why it should.</li>

<li>CG: The lookup expression is used for many things; if you use it to call
functions, you’ll have those challenges. If you’re just using it for lookups,
you maybe don’t want errors. But it can be missleading if you’re calling
functions.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>CG: Can we keep 2219 open then?</li>
</ul>
</div>
</div>
<div id="outline-container-pr-2266" class="outline-3">
<h3 id="pr-2266"><span class="section-number-3">2.3.</span> PR #2266: 540 system-property equivalent for XQuery</h3>
<div class="outline-text-3" id="text-pr-2266">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2266">#2266</a>.
</p>

<p>
MK introduces the PR.
</p>

<ul class="org-ul">
<li>MK: I added some magic environment variables.</li>
<li>NW: Why is this better than <code>fn:system-property()?</code></li>
<li>MK: The system property function expects QNames in the XSL namespace.
<ul class="org-ul">
<li>… I think that could be terribly confusing.</li>
</ul></li>
<li>NW: Fair enough, I’m not going to lie down in the road over this.</li>
<li>WP: I guess I have similar concerns to NW.
<ul class="org-ul">
<li>I see the problem with namespaces, but it seems like we should be doing it
the same way.</li>
</ul></li>
<li>MK: I reviewed the list of system properties and some are very XSLT-specific.
<ul class="org-ul">
<li>… There are things like the vendor URL that isn’t really sufficient.</li>
</ul></li>
</ul>

<p>
Some discussion of the actual list of properties proposed.
</p>

<ul class="org-ul">
<li>WP: I think my question is about user migration.</li>
<li>MK: It doesn’t take away system property in XSLT.</li>
<li>JLO: I think a function like this is needed; every processor has a function
that does something like this.
<ul class="org-ul">
<li>… Why isn’t this one function that returns a map?</li>
</ul></li>
<li>MK: Because this is the way the environment variables function works.
<ul class="org-ul">
<li>… We’d probably do that differently if we were adding it today, but I just
wanted an incremental change.</li>
<li>… And we could add this to a 3.0 or 3.1 processor without introducing a
non-conformity.</li>
</ul></li>
<li>JLO: I’d be in favor of a system properties function that just did this new behavior.</li>
<li>CG: I think I agree with JLO; if we have a custom function, we can add
implementation defined properties.</li>
<li>RD: Why can’t we use system property again?</li>
<li>MK: It’s use of the XSL namespace.</li>
<li>RD: If we did adopt that function, couldn’t we keep them separate.</li>
<li>MK: It creates a lot of complexity in something like a <code>use-when</code> attribute,
is that in the XSLT context or the XPath context? What about in <code>xsl:evaluate</code> or
in <code>load-query-module</code>.</li>
<li>MK: Let’s see what it looks like if we add a new <code>system-properties</code></li>
</ul>
</div>
</div>
<div id="outline-container-pr-2259" class="outline-3">
<h3 id="pr-2259"><span class="section-number-3">2.4.</span> PR #2259: 938 Canonical serialization</h3>
<div class="outline-text-3" id="text-pr-2259">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2259">#2259</a>.
</p>

<ul class="org-ul">
<li>JK: It’s not ready to vote on, but I could use some feedback.
<ul class="org-ul">
<li>… The design choice is to add a new parameter named <code>canonical</code> that takes <code>yes</code> or <code>no</code>
and allows canonicalization on XML and JSON, but could also be extended to XHTML.</li>
<li>… Most parameters in serialization get suspended if you say <code>canonical=yes</code>.
But what about <code>use-character-maps</code>.</li>
</ul></li>
<li>MK: I think you should. If you canonical, then the output should be canonical
XML rather than something else. And from an implementation perspective, it’s
very muddled what order you do things in them.</li>
<li>JK: I’ve written that the substitution occurs much earlier than C14N.</li>
<li>MK: But that means you have to literally implement as proposed, doing a
non-canonical serialization and then reparse. And gives rise to new possible
errors.</li>
<li>NW: You could do the double-parsing by hand if you needed to.</li>
<li>JK: That’d be similar to Unicode normalization. But the C14N specs opt out of
that. You have to supply that as a parameter.</li>
</ul>
</div>
</div>
<div id="outline-container-pr-2120" class="outline-3">
<h3 id="pr-2120"><span class="section-number-3">2.5.</span> PR #2120: 2007 Revised design for xsl:array</h3>
<div class="outline-text-3" id="text-pr-2120">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2120">#2120</a>.
</p>

<p>
MK reviews the PR.
</p>

<ul class="org-ul">
<li>MK: This takes into account some of JK’s comments on the previous proposal.
<ul class="org-ul">
<li>… It attempts to provide a single instruction that meets all use cases.</li>
</ul></li>
<li>MK: I’ve reintroduced <code>xsl:array-member</code> as a sub-instruction</li>
<li>MK: I start with the use cases…</li>
</ul>

<p>
MK walked through the documented use cases.
</p>

<ul class="org-ul">
<li>JWL: I’m happy that <code>xsl:array-member</code> is back. It’s much clearer.
<ul class="org-ul">
<li>… If you have an array with a <code>for-each</code> but no <code>select</code> and the sequence
constructor contains multiple <code>xsl:array-member</code> children, what happens?</li>
</ul></li>
<li>MK: Excellent question. (Reviewing the rules) In that case, it has no effect.
Each evaluation of the sequence constructor gives you one member.</li>
<li>JWL: Does that mean <code>xsl:array-member</code> is not permitted when you have no <code>select</code>?</li>
<li>MK: I thought about that, but thought maybe a warning was better.
<ul class="org-ul">
<li>… YOu might be right. The orthogonality isn’t perfect.</li>
</ul></li>
<li>JK: I’m also happy to have <code>xsl:array-member</code> back. I think arrays are more
conducive to mapping over XML structures.
<ul class="org-ul">
<li>… I’d like to see the <code>xsl:array-member</code> with a different parent.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
Tutorial feedback.
</p>

<ul class="org-ul">
<li>NW: I thought it was great.</li>
<li>WP: They did an awesome job. Will the results be published?</li>
<li>JWL: The notes and slides and workbench should remain available.</li>
<li>MK: What feedback did you get at the conference?</li>
<li>JLO: All very positive. And thanks to everyone for the hard work!</li>
<li>JWL: It was the BaseX fiddle that really made it possible for people to try
things out!</li>
<li>WP: People were very positive about JNodes.</li>
<li>CG: I thought it was very informative and helpful.</li>
<li>JLO: Jirka asked me if we want to do it again at XML Prague.</li>
</ul>
</div>
</div>
</div>
</body>
</html>
