<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 146 Minutes 2025-12-16</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 146 Minutes 2025-12-16</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/5]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[8/13]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[2/5]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#merge-without-discussion">1.6.1. Merge without discussion</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-2342">2.1. PR #2342: 2341 Canonical JSON serialization</a></li>
<li><a href="#pr-2329">2.2. PR #2329: 2327 Rename sequence-join as intersperse</a></li>
<li><a href="#pr-2324">2.3. PR #2324 &amp; #2282: bin:infer-encoding / bin:decode-string</a></li>
<li><a href="#pr-2313">2.4. PR #2313: 2298 XQFO rules: definition of default values</a></li>
<li><a href="#pr-2336">2.5. PR #2336: 2334 Revise XSLT pattern syntax and semantics</a></li>
<li><a href="#pr-2323">2.6. PR #2323: 2322 Generalize simplified stylesheets</a></li>
<li><a href="#pr-2283">2.7. PR #2283: 2276 Relax XSLT rules on Extension Attributes</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>
<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>
<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/5]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-143-02: MK to try to recover the ability to extract formal equivalences into tests</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-143-03: JK to look for C14N test suites.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-144-01: MK to consider if any now lost value comparisons should be added as examples.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-146-01: NW to attempt to provide a markup solution for argument defaults</li>
</ul>
</div>
</div>
<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>
<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[8/13]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: SF, RD.
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> David J Birnbaum (DB)</li>
<li class="off"><code>[&#xa0;]</code> Reece Dunn (RD)</li>
<li class="off"><code>[&#xa0;]</code> Sasha Frisov (SF)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="off"><code>[&#xa0;]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="off"><code>[&#xa0;]</code> Alan Painter (AP</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="off"><code>[&#xa0;]</code> Ruvim Pinka (RP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>
<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/12-16.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/12-09.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is planned for 6 January 2026.
</p>

<p>
The CG will not meet for the remainder of 2025. Happy New Year, everyone!
</p>
</div>
</div>
<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[2/5]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<ul class="org-ul">
<li class="on"><code>[X]</code> QT4CG-143-01: CG to make another attempt at binary functions.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-143-02: MK to try to recover the ability to extract formal equivalences into tests</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-143-03: JK to look for C14N test suites.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-144-01: MK to consider if any now lost value comparisons should be added as examples.</li>
<li class="on"><code>[X]</code> QT4CG-144-02: MK to add notes about edge cases: sequence normalization and character maps for example.</li>
</ul>
</div>
</div>
<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>
<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.1.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2347">#2347</a>: 2340 Add a note explaining 1972-01-01</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2346">#2346</a>: 2343 Add examples of format-integer with negative numbers</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>
<div id="outline-container-pr-2342" class="outline-3">
<h3 id="pr-2342"><span class="section-number-3">2.1.</span> PR #2342: 2341 Canonical JSON serialization</h3>
<div class="outline-text-3" id="text-pr-2342">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2342">#2342</a>.
</p>

<p>
MK introduces the PR.
</p>

<ul class="org-ul">
<li>MK: This brings a few details about canonical JSON serialization to the
reader’s attention.</li>
<li>MK: Map entries are sorted; added a note pointing out how that sorting must be done.</li>
<li>MK: The rules for canonical numbers in RFC 8785 are quite complex.
<ul class="org-ul">
<li>… I’ve added a note that if the output <b>is not</b> canonical, output decimals
(including integer) as the string value (not scientific notation).</li>
<li>… For strings, I’ve restated the escaping rules for convenience; they differ from our usual rules.</li>
</ul></li>
<li>MK: In JSON canonicalization, the RFC takes as the input an existing JSON
document, where we take an XDM value representing the tree. I thought about
wording it that way, but that gives too much freedom for numerics. We say that
our rules are effectively a mapping to the implicit data model of I-JSON.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2329" class="outline-3">
<h3 id="pr-2329"><span class="section-number-3">2.2.</span> PR #2329: 2327 Rename sequence-join as intersperse</h3>
<div class="outline-text-3" id="text-pr-2329">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2329">#2329</a>.
</p>

<p>
MK begins by reviewing the issue and the alternate names proposed.
</p>

<ul class="org-ul">
<li>MK: I think <code>fn:insert-separator</code> has the most support.</li>
<li>CG: I can see that there are concerns about <code>fn:sequence-join</code>. I would be
fine with several of these. Make it more explicit what the function does; I’d
also revert <code>fn:array-join</code> at the same time.</li>
<li>JK: From my perspective, the function under discussion is similar to
<code>fn:insert-before</code>. If that’s the case, I’d like to see greater parity between
them. I prefer <code>fn:insert-throughout</code>.</li>
<li>WP: JK’s point being taken, maybe “connect with” or “connect by”? I like any
of the ones that give you a hint.</li>
<li>JWL: The separator can be a sequence, can’t it? And it can be empty.
<ul class="org-ul">
<li>… So there’s an argument for insert separator*s*.</li>
</ul></li>
</ul>

<p>
Proposal: we have consensus for <code>fn:insert-separator</code>.
</p>

<p>
Accepted.
</p>

<p>
And MK to merge when it’s changed.
</p>

<ul class="org-ul">
<li>CG: Maybe if there are other features that we think we could revert. Maybe we
should do that now?</li>
<li>MK: I think the problem is that you discover the problems as you try to use them.</li>
<li>CG: I opened one issue for the predicate filters.</li>
</ul>
</div>
</div>
<div id="outline-container-pr-2324" class="outline-3">
<h3 id="pr-2324"><span class="section-number-3">2.3.</span> PR #2324 &amp; #2282: bin:infer-encoding / bin:decode-string</h3>
<div class="outline-text-3" id="text-pr-2324">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2324">#2324</a> and <a href="https://qt4cg.org/dashboard/#pr-2282">#2282</a>.
</p>

<p>
CG introduces the topic.
</p>

<ul class="org-ul">
<li>CG: We had some discussion on <code>bin:decode-string</code>. We currently have a
<code>bin:decode-string</code> with an offset that defaults to 0. There are too many ways to
similar things. Can we make it more composable?
<ul class="org-ul">
<li>… My proposal is to invoke <code>bin:part</code> wehnever an offset is provided.</li>
<li>… After that, we don’t have to look at the offset and size anymore</li>
<li>… Then we invoke <code>bin:infer-encoding</code> to retrieve the effectiver encoding.</li>
</ul></li>
<li>CG: I’ve extended <code>bin:infer-encoding</code> to accept an encoding argument. That’s
for resolving UTF-16 endianness. A processor may have a heuristic if no
encoding is provided. If there’s no byte order mark, the encoding specified is
used.</li>
<li>CG: There’s no reference to <code>fn:unparsed-text</code> and the rules are simpler again.
<ul class="org-ul">
<li>… Whenever you have substrings in your binary data, if the substring begins
with a BOM, then it will be respected.</li>
</ul></li>
<li>MK: I’m okay with that.</li>
<li>NW: I think that works for me.</li>
<li>JWL: Are there cases where you could be building a binary structure where
you’ve got combining strings that have different byte order marks inside them?</li>
<li>CG: In this case, you could have different byte order marks.</li>
<li>MK: I can imagine that happening in an archive format like ZIP.</li>
<li>JWL: It might be worth adding a note about that.</li>
</ul>

<p>
Proposal: accept #2342, drop #2282
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2313" class="outline-3">
<h3 id="pr-2313"><span class="section-number-3">2.4.</span> PR #2313: 2298 XQFO rules: definition of default values</h3>
<div class="outline-text-3" id="text-pr-2313">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2313">#2313</a>.
</p>

<p>
CG introduces the issue.
</p>

<ul class="org-ul">
<li>CG: Right now we have more than 100 built-in functions with default values.
<ul class="org-ul">
<li>… I noticed while implementing them that we have two types of default values.</li>
<li>… For some functions, you get identical behavior for absent value or empty sequence
<ul class="org-ul">
<li><code>fn:string-join</code></li>
</ul></li>
<li>… For others, you get different behavior for absent value and empty sequence
<ul class="org-ul">
<li><code>fn:node-name</code></li>
</ul></li>
</ul></li>
<li>CG: The problem is that looking at the signature, you can’t tell what will happen.
<ul class="org-ul">
<li>… You can look it up, but that might be tedious for 100+ functions.</li>
</ul></li>
<li>CG: Another example is the case where there’s a default value but it can’t be the empty sequence.
<ul class="org-ul">
<li><code>fn:sort</code></li>
</ul></li>
<li>CG: My attempt was to make all this consistent in one way. The approach I
chose is one we have to discuss.
<ul class="org-ul">
<li>… Most of the function signatures are hard to read in the diff version.</li>
</ul></li>
<li>CG: My thought would be to change the rules for intepreting function
signatures for XQFO so that you can look at the signature and know what is
going to happen.
<ul class="org-ul">
<li>… If the value supplied matches the type, that value is used</li>
<li>… If no value is supplied, the default value is selected</li>
<li>… If the value is teh empty sequence, the default value is selected</li>
<li>… Otherwise a type error</li>
</ul></li>
<li>CG: This would let you know what is going to happen just by looking at the signature.</li>
<li>CG: So for example, in <code>fn:string-join</code>, the <code>?</code> is removed from <code>xs:string</code>
because the default is used if you supply an empty sequence.</li>
<li>CG: Many of the specific rules from the prose are no longer required.
<ul class="org-ul">
<li>… That prose is hard to find because there’s a long history. So this also
makes the whole document more consistent.</li>
</ul></li>
<li>MK: I’m very sympathetic to the intent: both to increased consistency and
relying more on declarative ways of describing the semantics.
<ul class="org-ul">
<li>… I’m concerned that this appears to attach semantics to signatures in the
F&amp;O spec that don’t apply to the same syntax used for a user-defined function in XQuery or XSLT.</li>
<li>… I’m also concerned that there’s possible confusion between the notation
here and the symantics of function calls defined in XPath.</li>
<li>… For example “the supplied option matches” doesn’t mention the coercion rules.</li>
<li>… As it happens, I don’t think coercion plays an especially significant rule
because we don’t coerce to or from an empty sequence.</li>
</ul></li>
<li>MK: I wonder if we could do this with an alternative way using the properties mechanism.
<ul class="org-ul">
<li>… We adopt some markup convention that allows the rule to be expressed in
the properties section.</li>
</ul></li>
<li>CG: I had similar thoughts.</li>
<li>NW: The rules that only apply to F&amp;O functions is confusing.</li>
<li>JK: Could we hear more about the <code>fn:adjust-dateTime-to-timezone</code>? The empty
sequence has a different meaning there.
<ul class="org-ul">
<li>… I’m concerned that people may be using empty sequence to avoid the default.</li>
</ul></li>
</ul>

<p>
Some discussion of whether or not the rules provided cover this case.
</p>

<p>
Some discussion of how this change would effect test generation.
</p>

<ul class="org-ul">
<li>WP: So the item <code>xs:integer</code> would be satisfied with an empty sequence?</li>

<li>NW: What’s the markup approach?</li>
</ul>

<p>
Some discussion of the <code>fn:array-get</code> function because it’s two argument form
can’t be represented by any default for the third argument.
</p>

<ul class="org-ul">
<li>MK: We need an “empty sequence = default” notation.</li>
</ul>

<p>
ACTION QT4CG-146-01: NW to attempt to provide a markup solution for argument defaults
</p>
</div>
</div>
<div id="outline-container-pr-2336" class="outline-3">
<h3 id="pr-2336"><span class="section-number-3">2.5.</span> PR #2336: 2334 Revise XSLT pattern syntax and semantics</h3>
<div class="outline-text-3" id="text-pr-2336">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2336">#2336</a>.
</p>

<ul class="org-ul">
<li>MK: This is probably too big for today.</li>
<li>JWL: I’ll try to run my grammar generators over it and see if I can find out if there are any ambiguities.</li>
</ul>
</div>
</div>
<div id="outline-container-pr-2323" class="outline-3">
<h3 id="pr-2323"><span class="section-number-3">2.6.</span> PR #2323: 2322 Generalize simplified stylesheets</h3>
<div class="outline-text-3" id="text-pr-2323">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2323">#2323</a>.
</p>

<ul class="org-ul">
<li>MK: This arose because I wondered why we can’t use simplified stylesheets for
JSON documents.
<ul class="org-ul">
<li>… I don’t use simplified stylesheets very often, but sometimes they are handy.</li>
</ul></li>
<li>MK: The essential change is that instead of the outermost element being a
literal result element, it can be any instruction.</li>
<li>MK: The stylesheet that unsimplifies the stylesheet is about the same.
<ul class="org-ul">
<li>… The top level match pattern is no longer “/”, it’s now “.”.</li>
</ul></li>
<li>NW: What about silly things?</li>
<li>MK: I haven’t tried to rule them out.</li>
<li>JWL: The <code>select="'.'"</code> in the expansion, what does that mean?</li>
<li>MK: It’s going to generate a literal “.”.
<ul class="org-ul">
<li>… I’ve used xsl:element only very, very rarely.</li>
</ul></li>
<li>WP: This could be interesting.</li>
</ul>

<p>
Proposal: accept this PR
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2283" class="outline-3">
<h3 id="pr-2283"><span class="section-number-3">2.7.</span> PR #2283: 2276 Relax XSLT rules on Extension Attributes</h3>
<div class="outline-text-3" id="text-pr-2283">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2283">#2283</a>.
</p>

<ul class="org-ul">
<li>MK: This is an attempt to bring the spec into align with common practice.
<ul class="org-ul">
<li>… In practice, people (including Saxon) use extension attributes to do
anything where it’s useful to vary the processor.</li>
<li>… Tracing and debugging, that are entirely conformant, and other things like
saying that the collection function is non-stable, that are not.</li>
</ul></li>
<li>MK: This proposal slightly changes the rules to say that it’s okay to change
the behavior if you have good reason, for example, security.</li>
<li>MK: The PR also brings extension attributes more in line with extension
functions and elements.</li>
</ul>

<p>
MK reviews the prose of the PR.
</p>

<ul class="org-ul">
<li>JWL: I can well understand these changes.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<ul class="org-ul">
<li>NW: Enjoy the holidays and Happy New Year!</li>
</ul>
</div>
</div>
</div>
</body>
</html>
