<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 124 Minutes 2025-06-10</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 124 Minutes 2025-06-10</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/7]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[8/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[1/6]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-2031">2.1. PR #2031: 2025 JNodes</a></li>
<li><a href="#pr-2028">2.2. PR #2028: 2027 '#' syntax for computed PIs and namespaces</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="../2025/06-17.html">at meeting 125</a> on 17 June 2025.
</p>
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/7]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with NW to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-112-01: JLO to propose a concrete example that uses “.” in a ~%method~s.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-123-01: MK to do the set example in XQuery.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-124-01: MK to provide a copy of the slide deck for the minutes.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[8/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW, DB
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="off"><code>[&#xa0;]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="off"><code>[&#xa0;]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/06-10.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/05-27.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is scheduled for 17 June 2025.
</p>

<p>
JWL gives regrets.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[1/6]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with NW to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-112-01: JLO to propose a concrete example that uses “.” in a ~%method~s.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="on"><code>[X]</code> QT4CG-119-02: MK to add a note about how schema composition is done for multiple options</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-123-01: MK to do the set example in XQuery.</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1942">#1942</a>: 37 Support sequence, array, and map destructuring declarations</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1283">#1283</a>: 77b Update expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>: 150bis revised proposal for fn:ranks</li>
</ul>

<p>
RD suggests that #1942 is ready for discussion again.
</p>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2033">#2033</a>: 2032 Fix typo in example</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2026">#2026</a>: 2022 Drop module feature</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1127">#1127</a>: Binary resources</li>
</ul>

<p>
Proposal: close without further action.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
<p>
The following substantive PRs are scheduled for discussion this week.
</p>
</div>

<div id="outline-container-pr-2031" class="outline-3">
<h3 id="pr-2031"><span class="section-number-3">2.1.</span> PR #2031: 2025 JNodes</h3>
<div class="outline-text-3" id="text-pr-2031">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2031">#2031</a>
</p>

<p>
MK reviews a presentation prepared about JNodes.
</p>

<p>
See also MK’s <a href="https://markupuk.org/webhelp/index.html#ar04.html">MarkupUK paper</a>.
</p>

<p>
ACTION QT4CG-124-01: MK to provide a copy of the slide deck for the minutes.
</p>

<p>
(The scribe isn’t going to attempt to transcribe the slides.)
</p>

<p>
Slide 7:
</p>

<ul class="org-ul">
<li>JL: Are you saying that the child is implicit in the syntax but whether or not
there’s a wrapper is open.</li>
<li>MK: Yes, but you get flattening if there’s a bare key on the right hand side.</li>
</ul>

<p>
Slide 10:
</p>

<ul class="org-ul">
<li>NW: What’s the significance of the ¶?</li>
<li>MK: It’s just to indicate the properties of JNodes.</li>
</ul>

<p>
MK wraps up his presentation.
</p>

<ul class="org-ul">
<li>JL: On slide 12, in template match <code>?name</code>, I assume you can add predicates?</li>
<li>MK: Yes.</li>
<li>JL: You can get to an XNode tree from a JNode tree, but you can never get back. Is that right?</li>
<li>MK: If you have a map that points to nodes. The child access will give you a
JNode that maps the XNode.</li>
<li>JL: That’s a leaf in the JTree.</li>
<li>JL: Can I do a composite path, so <code>??</code> through the JTree then <code>/</code> when it’s an XTree?</li>
<li>MK: Yes, though there might questions of priority.</li>
<li>RD: I like the general direction and approach. This is somewhat similar to how
MarkLogic and JSoniq work. The difference with those is that they have
specific nodes for maps and arrays. I wonder if would make sense to do
something similar, rather than wrapping it in a JNode.
<ul class="org-ul">
<li>… Then every map would effectively be a map node, every array an array node, etc.</li>
<li>… Then you don’t need pin or unpin.</li>
</ul></li>
<li>MK: I think the main problem is that you don’t want a “string” to have a parent.
<ul class="org-ul">
<li>… In the same way we distinguish a text node from a string, we want to
distinguish the strings in an array.</li>
</ul></li>
<li>RD: Don’t we have types in the hierarchy that are multiple types, so in effect
you could have a string not part of a JSON structure be the existing string,
but a string in a JSON structure be both an xs:string and a JSON string.</li>
<li>MK: We get benefits from the fact that maps and arrays don’t have identity
that effects the semantics.
<ul class="org-ul">
<li>… We have an enormous cost making as small change to a big XTree because we
have to make something that looks like a copy with new node identities everywhere.</li>
<li>… We don’t have that cost with maps. You don’t have that overhead.</li>
<li>… I’ve found it very hard to find an implementation of small updates that
works with nodes.</li>
</ul></li>
<li>RD: When pinning and unpinning the nodes to construct the JNodes, would it
make sense there to differentiate, map, array, and value nodes?</li>
<li>MK: In the item type syntax the JNode is parameterized by the thing it contains.
<ul class="org-ul">
<li>… It’s more like a generic type.</li>
</ul></li>
<li>RD: I’m wondering then if we can take advantage of the data model functions
and define those on the specific JNodes.</li>
<li>MK: Which functions?</li>
<li>RD: When you look at the definition of elements and attributes, it maps them
to things like <code>dm:parent</code> etc.</li>
<li>MK: Yes, I’m sure one can define as much aparatus as you like. It’s an open
question how much is useful.</li>
<li>RD: If we define those on JNodes then a lot of the features that are derived
from them come for free.</li>
<li>JK: As I expressed last night, this is fantastic. 
<ul class="org-ul">
<li>… The slide on “benefits”, I would add that this potentially unifies the
syntax that XPath uses on trees, arrays, and maps. They snap together.</li>
</ul></li>
<li>MK: Yes, we get benefits and the users get different benefits.</li>
<li>JK: Thinking of arrays and maps as types of trees is very natural.
<ul class="org-ul">
<li>… We’ll have to review all the function signatures to see if the should or
should not work with JNodes.</li>
</ul></li>
<li>JK: Are predicate fair game?</li>
<li>MK: Yes, they’re applied to those just as they would be to any other items in
the sequence. The JNode is the context item.
<ul class="org-ul">
<li>… I’m sure there are examples in the proposal somewhere.</li>
</ul></li>
<li>JK: We need more examples of how to convert XPath</li>
<li>JK: If the ?? finds deeply embedded XNodes, do they fall into a trap?</li>
<li>MK: The ?? operator will give you a JNode, but it gets implicitly unpinned if
you use an operator that doesn’t work on JNodes.</li>
<li>JK: So given a map that contains a bunch of book trees, <code>??book/title</code> will return
the titles.</li>
<li>JL: Was there a proposal where the right hand side of <code>?</code> can be a variable binding?</li>
<li>MK: It can be a variable reference.</li>
<li>JL: Do we want to do the same for XNodes on XPath?</li>
<li>MK: Unfortunately, it has a different meaning.</li>
<li>JL: You can get higher order like functionality.</li>
<li>MK: This is why we can’t unify <code>/</code> and <code>??</code>, there’s a deep difference.</li>
<li>CG: I really like it. It looks very intuitive.
<ul class="org-ul">
<li>… Referring to the backwards compatibility, I guess it will be difficult to fix it.</li>
<li>… There are <code>instance of</code> checks and other things that don’t do implicity coercion.</li>
</ul></li>
<li>CG: One very general thought, how much time will it take to get this rather
fundamental change finalized? People are asking when 4.0 will be finished.</li>
<li>MK: The time taken all depends on how many good ideas people come up with!
<ul class="org-ul">
<li>… It takes far less time to make things work if you have a good proposal.</li>
</ul></li>
<li>NW: It’s going to be a fair bit of work…</li>
<li>JL: Might it go as far as influencing the serialization specs?</li>
<li>MK: There’s a minor impact in that if you serialize a JNode, it just gives you
the serialization of its value.</li>
<li>WP: Briefly, I too am very impressed. I’d like to see conference papers and
other explorations of this idea.
<ul class="org-ul">
<li>… The radical thing here is how it treats JSON.</li>
<li>… I’d like to see more attention drawn to it. If it’s as good as we think,
maybe we need to air the idea more broadly.</li>
</ul></li>
</ul>

<p>
What can we do?
</p>

<ul class="org-ul">
<li>MK: Please review the proposal in detail and make comments. I think it’s
capable of being merged in roughly in its current state. I’d like to establish
it as a baseline quickly, so we can build other things on top of it.</li>
</ul>

<p>
We’ll spend next week doing something else and come back to it in two weeks.
</p>
</div>
</div>

<div id="outline-container-pr-2028" class="outline-3">
<h3 id="pr-2028"><span class="section-number-3">2.2.</span> PR #2028: 2027 '#' syntax for computed PIs and namespaces</h3>
<div class="outline-text-3" id="text-pr-2028">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2028">#2028</a>
</p>

<p>
MK reviews the PR.
</p>

<ul class="org-ul">
<li>MK: We added QName literals to element and attribute constructors.
<ul class="org-ul">
<li>… That left the question of what to do with PI and namespace constructors.</li>
<li>… This proposal says we should use a <code>MarkedNCName</code> that’s only used in this
context.</li>
</ul></li>
</ul>

<p>
Proposal: Merge this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
