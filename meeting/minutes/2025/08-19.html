<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 133 Minutes 2025-08-19</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 133 Minutes 2025-08-19</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/11]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[7/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[4/11]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#close-without-action">1.6.3. Close without action</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-2168">2.1. PR #2168: 2139 Make hexBinary and base64Binary fully comparable</a></li>
<li><a href="#pr-2167">2.2. PR #2167: 2166 Reinstate lost text for lookup expressions</a></li>
<li><a href="#pr-2160">2.3. PR #2160: 2073 data model changes for JNodes and Sequences</a></li>
<li><a href="#pr-2116">2.4. PR #2116: 2112 Refine/revise the rules for get() in node tests</a></li>
<li><a href="#pr-2155">2.5. PR #2155: 2150 Define patterns for JNodes</a></li>
<li><a href="#pr-2123">2.6. PR #2123: 2051: XSLT group by cluster</a></li>
<li><a href="#pr-2071">2.7. PR #2071: 77c deep update</a></li>
<li><a href="#pr-2019">2.8. PR #2019: 1776: XSLT template rules for maps and array</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>
<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>
<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/11]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-127-01: NW to diagram the JTree representing arbitrary XDM content.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-128-03: NW to compare the file: module against the equivalent XProc 3.1 steps</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-01: MK to add a non-schema aware result.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-02: MK to expand on the <code>$E := &lt;e A="p q r"…</code> example</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-03: MK to change “invert” to “transpose” in the matrix example.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-133-01: MK to correct the use of “Expr” in examples for get()</li>
</ul>
</div>
</div>
<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>
<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[7/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<ul class="org-ul">
<li class="on"><code>[X]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="off"><code>[&#xa0;]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="off"><code>[&#xa0;]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>
<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/08-19.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/08-12.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The CG will take a short recess in late August. We will <b>not</b> meet on 26 August,
2 September, or 9 September.
</p>

<p>
The next meeting is planned for 16 September 2025.
</p>
</div>
</div>
<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[4/11]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-127-01: NW to diagram the JTree representing arbitrary XDM content.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-128-03: NW to compare the file: module against the equivalent XProc 3.1 steps</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-01: MK to add a non-schema aware result.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-02: MK to expand on the <code>$E := &lt;e A="p q r"…</code> example</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-131-03: MK to change “invert” to “transpose” in the matrix example.</li>
<li class="on"><code>[X]</code> QT4CG-132-01: MK to add more examples for <code>innermost</code>, <code>outermost</code>, <code>has-children</code> and <code>path</code> with JNodes</li>
<li class="on"><code>[X]</code> QT4CG-132-02: MK to double-check the signature of <code>innermost</code></li>
<li class="on"><code>[X]</code> QT4CG-132-03: MK to double-check stray text in h.i. in <code>path</code></li>
<li class="on"><code>[X]</code> QT4CG-132-04: MK to add resize to the rectangle in the example of chaining method calls and flesh out the example.</li>
</ul>
</div>
</div>
<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>
<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2124">#2124</a>: 573 Functions to Construct Trees</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2120">#2120</a>: 2007 Revised design for xsl:array</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
</ul>
</div>
</div>
<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2164">#2164</a>: Fix return type in <code>fn:parse-csv</code> signature</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2162">#2162</a>: QT4CG-132-04 Expand the rectangle?area example</li>
</ul>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-close-without-action" class="outline-4">
<h4 id="close-without-action"><span class="section-number-4">1.6.3.</span> Close without action</h4>
<div class="outline-text-4" id="text-close-without-action">
<p>
It has been proposed that the following issues be closed without action.
If you think discussion is necessary, please say so.
</p>

<ul class="org-ul">
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/2143">#2143</a>: JNodes and Methods</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/1714">#1714</a>: sibling:: axis. Action Item QT4CG-097-03</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/350">#350</a>: CompPath (Composite-objects path) Expressions</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/119">#119</a>: Allow a map's key value to be any sequence</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/106">#106</a>: Decorators' support</li>
<li>Issue <a href="https://github.com/qt4cg/qtspecs/issues/34">#34</a>: Proposal to introduce the set datatype in XPath 4</li>
</ul>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>
<div id="outline-container-pr-2168" class="outline-3">
<h3 id="pr-2168"><span class="section-number-3">2.1.</span> PR #2168: 2139 Make hexBinary and base64Binary fully comparable</h3>
<div class="outline-text-3" id="text-pr-2168">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2168">#2168</a>
</p>

<ul class="org-ul">
<li>MK: The history of this is that we’d changed the <code>eq</code> operator to allow mutual comparisons.
<ul class="org-ul">
<li>… But we balked at the idea of making them equal for keys in maps because of
compatibility implications.</li>
<li>… Basically, we’re being braver now: this is a more rational and consistent
approach, and we assume that the number of users hit by the backwards
compatibility issue will be small.</li>
</ul></li>
<li>JWL: We have no operator that says “is this the same type”?
<ul class="org-ul">
<li>… We’ve got castable which would allow you to infer one way.</li>
<li>… In the situations where you’d want to have a difference between the two, what could you do.</li>
<li>… The types are still distinct.</li>
</ul></li>
<li>MK: You could maniuplate the value if you wanted to keep them distinct.</li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2167" class="outline-3">
<h3 id="pr-2167"><span class="section-number-3">2.2.</span> PR #2167: 2166 Reinstate lost text for lookup expressions</h3>
<div class="outline-text-3" id="text-pr-2167">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2167">#2167</a>
</p>

<ul class="org-ul">
<li>MK: We had a load of machiner that we added to lookup expressions (modifiers, type predicates, etc.)
<ul class="org-ul">
<li>… The JNodes proposal replaced all of that and I accidentally deleted more
text than I should have done.</li>
</ul></li>
<li>MK reviews the PR</li>
<li>MK: The text that’s being restored has been lightly updated to deal with JNodes.
<ul class="org-ul">
<li>… Added a note about out of bounds conditions.</li>
</ul></li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2160" class="outline-3">
<h3 id="pr-2160"><span class="section-number-3">2.3.</span> PR #2160: 2073 data model changes for JNodes and Sequences</h3>
<div class="outline-text-3" id="text-pr-2160">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2160">#2160</a>
</p>

<ul class="org-ul">
<li>MK: This is the first half the work, but I don’t think we can accept it yet.</li>
<li>MK: It only addresses the data model changes.</li>
<li>MK: The position property of a JNode is discarded (replaced by the selector property, effectively)
<ul class="org-ul">
<li>… It has a parent, selector, or kind property.</li>
<li>… If a JNode represents a sequence of two or more items, an array or map
that’s a sequence, then you have a children property, one child per item.</li>
<li>… If you’re a singleton, you don’t. So there’s an asymmetry there.</li>
<li>… That keeps the tree finite.</li>
<li>… That asymmetry is unfortunate, but less so than the current situation
where sequences of more than one item are pretty unmanagable.</li>
</ul></li>
</ul>

<p>
MK continues through the PR.
</p>

<ul class="org-ul">
<li>MK: I reworked the second example as a table. I propose to do the same thing
for the first example.</li>
<li>MK: That’s my current thinking; there’s been a fair bit of discussion on the proposal.
<ul class="org-ul">
<li>… One of the ideas is that a sequence of length 1 should have children
provided that you only go one level deep.</li>
<li>… An atomic value would have a child that contains the value, but that child
wouldn’t also have a child.</li>
</ul></li>
<li>MK: One of the questions here is what is the consequence on the <code>descendant</code>
axis. You want that axis to select each descendant exactly once.</li>

<li>CG: I can’t give real comments, but I think this way forward is a good one.
All the other approaches we’ve tried were much more inconsistent.</li>
<li>MK: Okay, I’ll try to push forward.</li>
</ul>
</div>
</div>
<div id="outline-container-pr-2116" class="outline-3">
<h3 id="pr-2116"><span class="section-number-3">2.4.</span> PR #2116: 2112 Refine/revise the rules for get() in node tests</h3>
<div class="outline-text-3" id="text-pr-2116">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2116">#2116</a>
</p>

<ul class="org-ul">
<li>JWL: We changed it so that the argument to the get is an <code>ExprSingle</code> but in
some of the examples we still use <code>Expr</code>.</li>
<li>MK: Okay, let’s take a look at that one.</li>
</ul>

<p>
MK reviews the XQuery diffs.
</p>

<ul class="org-ul">
<li>MK: Yes. I see the places where <code>Expr</code> is still used in the examples.
<ul class="org-ul">
<li>… It’s probably best to use a variable in the <code>get()</code> to avoid the
implication that it’s the same thing as the grammar rule.</li>
</ul></li>
</ul>

<p>
ACTION QT4CG-133-01: MK to correct the use of “Expr” in examples for get()
</p>

<ul class="org-ul">
<li>MK: The main subject is about the focus of the expression. There’s been a fair
bit of discussion.
<ul class="org-ul">
<li>… The focus could be the thing to either the left or right of the slash. In
both cases semantics that sort of make sense could be defined. But it’s so
easy to get wrong, that I think it’s better to make the expression context-free.</li>
</ul></li>
<li>CG: I don’t think it’s that important, but I think one reason to support the
context is that in all right-hand-side expressions, you can use the “.” and it
doesn’t make any sense. This exception for the pseudo-function <code>get()</code> when
it’s allowed everywhere else doesn’t make sense.</li>
<li>MK: If the focus is on the right-hand-side, then you’d have to evaluate it for
everything on the left hand side.
<ul class="org-ul">
<li>… It’s like “.” in a predicate; you end up with a lot of tests that aren’t
very useful.</li>
<li>… I think the analogy with <code>array:get</code> is sort of a false one. Doing
<code>array:get</code> on the right is applying the function to every item on the left.
The <code>get()</code> pseudo-function is much more like using <code>element()</code> or <code>node()</code>.</li>
<li>… We could restrict it to a constant, but that seemed like going too far.</li>
</ul></li>
<li>CG: There are lots of places where it doesn’t make sense, but maybe users will
have uses for it. So many basic constructs in XPath that can be used to write
weird things. It’s always up to the developer.</li>
<li>MK: I don’t think we’re losing any functionality because you can use a predict.</li>
<li>CG: But that’s true if we don’t have the <code>get()</code> pseudo-function at all.</li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>

<p>
MK will merge this after completing his action.
</p>
</div>
</div>
<div id="outline-container-pr-2155" class="outline-3">
<h3 id="pr-2155"><span class="section-number-3">2.5.</span> PR #2155: 2150 Define patterns for JNodes</h3>
<div class="outline-text-3" id="text-pr-2155">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2155">#2155</a>
</p>

<ul class="org-ul">
<li>MK: This has a technical flaw, there’s an ambiguity in the grammar.
<ul class="org-ul">
<li>… I’ve asked John Lumley for advice.</li>
<li>… I think it’s probably solvable with some subtlety.</li>
</ul></li>
<li>MK: The issue is to do with parenthesized expressions.</li>
</ul>

<p>
MK reviews the PR.
</p>

<ul class="org-ul">
<li>MK: Patterns are now part of the section on template rules.
<ul class="org-ul">
<li>… Although path expressions between XNodes and JNodes look much the same,
match patterns are distinct and can only match one kind of node.</li>
</ul></li>
<li>MK: The ambiguity is in how union, intersect, and except operators are applied.
<ul class="org-ul">
<li>… They’re not defined in terms of node sets anymore.</li>
</ul></li>
<li>MK: The text for XNode patterns is largely unchanged, but reorganized a bit.</li>
<li>MK: JNode patterns are new.
<ul class="org-ul">
<li>… Always introduced by <code>jnode(</code></li>
<li>… Both operands are currently required.</li>
<li>… It sort of mirrors the way that <code>element()</code> with two arguments works.</li>
</ul></li>
<li>MK: The default priorities broadly parallel elements and other things.</li>
</ul>

<p>
JWL demonstrates the grammar in his jwiXML processor.
</p>

<ul class="org-ul">
<li>JWL: The inside and outside are the same, but the path from
XNodePattern-&gt;ParentehsizedExpreP or ParentesizedPattern-&gt;XNode pattern is
ambiguous.</li>

<li>MK: Defining patterns for JNodes is the first part of a piece of work to talk
about doing template rules on a tree of maps and arrays.</li>
</ul>
</div>
</div>
<div id="outline-container-pr-2123" class="outline-3">
<h3 id="pr-2123"><span class="section-number-3">2.6.</span> PR #2123: 2051: XSLT group by cluster</h3>
<div class="outline-text-3" id="text-pr-2123">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2123">#2123</a>
</p>

<p>
Wait for JK.
</p>
</div>
</div>
<div id="outline-container-pr-2071" class="outline-3">
<h3 id="pr-2071"><span class="section-number-3">2.7.</span> PR #2071: 77c deep update</h3>
<div class="outline-text-3" id="text-pr-2071">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2071">#2071</a>
</p>
</div>
</div>
<div id="outline-container-pr-2019" class="outline-3">
<h3 id="pr-2019"><span class="section-number-3">2.8.</span> PR #2019: 1776: XSLT template rules for maps and array</h3>
<div class="outline-text-3" id="text-pr-2019">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>
</p>

<p>
Needs to be rewritten.
</p>
</div>
</div>
</div>
<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
JWL and JLO are doing a 4.0 tutorial at Declarative Amsterdam.
</p>
</div>
</div>
<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
