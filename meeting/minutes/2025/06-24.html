<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 126 Minutes 2025-06-24</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 126 Minutes 2025-06-24</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Draft Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/7]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[7/12]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[0/5]</code></a></li>
<li><a href="#open-pull-requests">1.6. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.6.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.6.2. Merge without discussion</a></li>
<li><a href="#substantive">1.6.3. Substantive PRs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-2013">2.1. PR #2013: 748 Parse functions: consistency</a></li>
<li><a href="#pr-2049">2.2. PR #2049: 2045 Context value can be an empty sequence</a></li>
<li><a href="#pr-2015">2.3. PR #2015: 2009 Avoid constructing document node when it makes no sense</a></li>
<li><a href="#qname-literals">2.4. Issues relating to QName literals</a></li>
<li><a href="#pr-2065">2.5. PR #2065</a></li>
<li><a href="#pr-2062">2.6. PR #2062</a></li>
<li><a href="#h-E0E86275-C41A-4199-A786-ECFB368F7E8B">2.7. Steps: variable element names, issue #2057</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
<li><a href="#adjourned">4. Adjourned</a></li>
</ul>
</div>
</div>

<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Draft Minutes</h2>
<div class="outline-text-2" id="text-minutes">
</div>
</div>

<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/7]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with NW to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-112-01: JLO to propose a concrete example that uses “.” in a ~%method~s.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-123-01: MK to do the set example in XQuery.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-126-01: JLO to add an example where the map:build key function returns multiple keys.</li>
</ul>
</div>
</div>

<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>

<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[7/12]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: BTW, DB, MK
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> David J Birnbaum (DB)</li>
<li class="on"><code>[X]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="on"><code>[X]</code> Joel Kalvesmaki (JK) [:05-]</li>
<li class="off"><code>[&#xa0;]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="off"><code>[&#xa0;]</code> Dimitre Novatchev (DN)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="off"><code>[&#xa0;]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>

<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/06-24.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/06-17.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is scheduled for 1 July 2025.
</p>

<p>
JWL gives regrets for 1 and 8 July.
</p>
</div>
</div>

<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[0/5]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
(Items marked [X] are believed to have been closed via email before
this agenda was posted.)
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-082-02: DN to work with NW to come to agreement on the fn:ranks proposal</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-112-01: JLO to propose a concrete example that uses “.” in a ~%method~s.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-116-01: Add a specific error code for unsupported options on doc and doc-available</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-118-01: MK to make an incorrect type raise an error in #1906</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-123-01: MK to do the set example in XQuery.</li>
</ul>
</div>
</div>

<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.6.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>

<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.6.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1283">#1283</a>: 77b Update expressions</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1062">#1062</a>: 150bis revised proposal for fn:ranks</li>
</ul>
</div>
</div>

<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.6.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2055">#2055</a>: 37 Sequence, Array, and Map destructuring</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-substantive" class="outline-4">
<h4 id="substantive"><span class="section-number-4">1.6.3.</span> Substantive PRs</h4>
<div class="outline-text-4" id="text-substantive">
<p>
The following substantive PRs were open when this agenda was prepared.
(Only a few are likely to be discussed at this meeting.)
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2013">#2013</a>: 748 Parse functions: consistency</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2049">#2049</a>: 2045 Context value can be an empty sequence</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2015">#2015</a>: 2009 Avoid constructing document node when it makes no sense</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-1942">#1942</a>: 37 Support sequence, array, and map destructuring declarations</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2011">#2011</a>: 675(part): Add XSLT static typing rules for new kinds of XPath expression</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2014">#2014</a>: QT4CG-122-01 Add notes, examples, and rationale for xsl:select</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2031">#2031</a>: 2025 JNodes</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2037">#2037</a>: 2036 Add rule for streamability of xsl:map</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2043">#2043</a>: 2038 Tweak the rules for fn:apply-templates references to modes</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2050">#2050</a>: 2040 Fix context value declaration issues</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
<p>
The following substantive PRs were open when this agenda was prepared.
</p>
</div>

<div id="outline-container-pr-2013" class="outline-3">
<h3 id="pr-2013"><span class="section-number-3">2.1.</span> PR #2013: 748 Parse functions: consistency</h3>
<div class="outline-text-3" id="text-pr-2013">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2013">#2013</a>
</p>

<p>
CG has incorporated most of the feedback from last week.
</p>

<ul class="org-ul">
<li>CG: One observation was that we could use <code>unparsed-binary</code> instead of <code>unparsed-text</code>.
<ul class="org-ul">
<li>… Also, we wanted to have some comments on parsing XML.</li>
<li>… Added a reference to the <code>fn:doc</code> function which has some information about encodings.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-2049" class="outline-3">
<h3 id="pr-2049"><span class="section-number-3">2.2.</span> PR #2049: 2045 Context value can be an empty sequence</h3>
<div class="outline-text-3" id="text-pr-2049">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2049">#2049</a>
</p>

<p>
CG displays the document for us.
</p>

<ul class="org-ul">
<li>NW: this PR changes a half-dozen or so functions to allow the empty sequence.</li>
<li>JLO: Generally, I think this fine. I would still like to know the justification.</li>
</ul>

<p>
Some discussion of the consequence of allowing the context value to be a sequence.
</p>

<ul class="org-ul">
<li>JWL: In all of these cases, if the context value is an empty sequence, the
functions return an empty sequence.</li>
</ul>

<p>
That’s correct.
</p>

<ul class="org-ul">
<li>WP: When you call it with no argument, you’re still going to default with the
current context, but that might now be an empty sequence.</li>
<li>JWL: The point is that it’s still <code>.</code> but that can now be an empty sequence.
Previously, we expected <code>.</code> to be a singleton.</li>
</ul>

<p>
Observe that the test is for <code>node()?</code>, so you can’t pass a sequence of more
than one item.
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-2015" class="outline-3">
<h3 id="pr-2015"><span class="section-number-3">2.3.</span> PR #2015: 2009 Avoid constructing document node when it makes no sense</h3>
<div class="outline-text-3" id="text-pr-2015">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2015">#2015</a>
</p>

<p>
A quick review of the PR.
</p>

<ul class="org-ul">
<li>RD: This is only apply to maps and arrays?</li>
</ul>

<p>
Some discussion of what the result is if the result is a string, instead of a map or array.
</p>

<p>
(Some fumbling with the result of the diff.)
</p>

<ul class="org-ul">
<li>RDL: Does this need to be noted as a breaking change? If a string is returned,
you won’t get a document node?</li>

<li>NW: I think that’s only true if you use <code>xsl:select</code>.</li>

<li>JWL: There’s a distinction here between <code>xsl:sequence select=…</code> and <code>xsl:select</code>.
<ul class="org-ul">
<li>… The way to think of it is that <code>xsl:select</code> is letting you use a child
instead of an attribute so that you avoid normalization.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-qname-literals" class="outline-3">
<h3 id="qname-literals"><span class="section-number-3">2.4.</span> Issues relating to QName literals</h3>
<div class="outline-text-3" id="text-qname-literals">
<ul class="org-ul">
<li><a href="https://github.com/qt4cg/qtspecs/issues/2059">Issue 2059</a>: Literal QNames: Adaptive serialization</li>
<li><a href="https://github.com/qt4cg/qtspecs/issues/2058">Issue 2058</a>: Literal QNames continued</li>
<li><a href="https://github.com/qt4cg/qtspecs/issues/2056">Issue 2056</a>: Implicit Whitespace in MarkedNCName and QNameLiteral</li>
</ul>

<p>
CG created PRs and the group agreed to discuss them today.
</p>

<ul class="org-ul">
<li>CG: The adative serialization method is mostly for debugging, so we can make
that simpler.</li>
</ul>

<p>
CG reviews PR <a href="https://qt4cg.org/dashboard/#pr-2060">#2060</a>.
</p>

<ul class="org-ul">
<li>JLO: In the example that you showed, even with an empty namespace there was a #Q{}a</li>
<li>CG: Yes, that was my first idea, but we can omit the braces in that case.</li>
<li>RD: Can we look at the text without the diff?</li>
<li>CG: Yes.</li>
<li>JWL: Do we have anywhere else where we’re likely to get a problem with #
followed by a letter?
<ul class="org-ul">
<li>… We have Q{} or # just followed by a string. What if the name starts with a Q?</li>
</ul></li>
<li>RD: If it’s not followed by a curly brace then it won’t be a QName.</li>
<li>JLO: So it’s easy to tell.</li>
<li>JWL: If this is really for debugging and you aren’t going to parse it, I’m not
sure if using # without the curly braces is actually less confusing.</li>
<li>JLO: I’m using adaptive serialization a lot, the distinction is between # and “#”.
<ul class="org-ul">
<li>… There’s no other way to get a # without quotes, so I don’t think there’s a problem.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>CG: Next we have annotations.</li>
</ul>

<p>
CG reviews PR <a href="https://qt4cg.org/dashboard/#pr-2061">#2061</a>.
</p>

<ul class="org-ul">
<li>CG: This is XQuery only because it’s annotations; this could be useful for
RESTXQ. It wouldn’t require parsing strings, you could just supply literals.</li>
<li>RD: Another example of this is that you could have a throws annotation that
specifies the error literal directly as a QName.</li>
<li>JLO: I’m completely in favor, but why don’t we allow maps and array literals?</li>
<li>NW: That sounds like a separate question.</li>
<li>CG: I think the main reason is because its easier to have things that can be
statically parsed.
<ul class="org-ul">
<li>We avoid using unary here, for example, because we don’t want to allow more
expressions.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>

<ul class="org-ul">
<li>CG: Gunther observed that whitespace is not allowed between # and the name.
<ul class="org-ul">
<li>… It has no effect on pragmas, because they require a whitespace.</li>
</ul></li>
</ul>

<p>
CG reviews PR <a href="https://qt4cg.org/dashboard/#pr-2064">#2064</a>.
</p>

<p>
(Only the grammar has changed, so there are no diffs.)
</p>

<ul class="org-ul">
<li>CG: The change is just removing <code>whitespace-spec</code> in the production.</li>
<li>JWL: Has anyone ever <b>actually</b> seen anyone use spaces after <code>$</code>.</li>
<li>JLO: It’d be interesting to know how many parsers fail at this point.</li>
<li>RD: My IntelliJ plugin has loads of tests for this sort of thing.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>

<p>
The group agrees to look at a few more PRs.
</p>
</div>
</div>

<div id="outline-container-pr-2065" class="outline-3">
<h3 id="pr-2065"><span class="section-number-3">2.5.</span> PR #2065</h3>
<div class="outline-text-3" id="text-pr-2065">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2065">#2065</a>
</p>

<ul class="org-ul">
<li>CG: This is mostly editorial. In <code>map:build</code>, multiple keys is mostly a special case.
<ul class="org-ul">
<li>… This PR also removes the ability for simplicity.</li>
</ul></li>
<li>RD: Not related to this, but it might be easier to read if the elements in the
sygnature table are allowed at the top.</li>
<li>NW: Yes, make an issue and assign it to me, please.</li>
<li>JWL: We have decided not to support any idea of a sequence value for a key. Is that right?</li>
<li>CG: That’s right.</li>
<li>JLO: The function that produces the key is still <code>xs:anyAtomicType*</code></li>
<li>CG: The function isn’t changing, just removing the plural.</li>
</ul>

<p>
Some discussion of what happens when the key is an empty sequence; no entry is created.
</p>

<ul class="org-ul">
<li>JLO: Are there any examples of multiple keys?</li>
<li>CG: Apparently not.</li>
</ul>

<p>
ACTION QT4CG-126-01: JLO to add an example where the map:build key function returns multiple keys.
</p>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-pr-2062" class="outline-3">
<h3 id="pr-2062"><span class="section-number-3">2.6.</span> PR #2062</h3>
<div class="outline-text-3" id="text-pr-2062">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2062">#2062</a>
</p>

<ul class="org-ul">
<li>CG: The <code>fn:sort-by</code> function allowed you to omit the second argument. It
looks a bit lost to have sort by with out any sort key. My suggestion is to
make it manditory, even if it can be the empty sequence.</li>
<li>NW: Seems reasonable to me.</li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>

<div id="outline-container-h-E0E86275-C41A-4199-A786-ECFB368F7E8B" class="outline-3">
<h3 id="h-E0E86275-C41A-4199-A786-ECFB368F7E8B"><span class="section-number-3">2.7.</span> Steps: variable element names, issue #2057</h3>
<div class="outline-text-3" id="text-h-E0E86275-C41A-4199-A786-ECFB368F7E8B">
<p>
CG introduces the issue.
</p>

<ul class="org-ul">
<li>CG: I haven’t checked all the details yet, so this is just a suggestion.</li>
<li>JWL: This is what I was asking MK about with JNodes.
<ul class="org-ul">
<li>… I asked could you do a similar thing on normal nodes.</li>
<li>… He implied that this was a lot more problematic, I’d like to hear his opinion.</li>
<li>… I <b>like</b> it, it would be an easy dynamic mechanism for putting them in expressions.</li>
</ul></li>
<li>CG: I think we about <code>$node/$name</code> and that definitely won’t work.
<ul class="org-ul">
<li>… But I think adding <code>element()</code> would work.</li>
</ul></li>
<li>JLO: I didn’t know that you can do <code>$node/$name</code>.</li>
</ul>

<p>
Some discussion of what that currently means!
</p>

<ul class="org-ul">
<li>JK: I’d like some feedback on my #2051 if anyone can take a look.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>

<div id="outline-container-adjourned" class="outline-2">
<h2 id="adjourned"><span class="section-number-2">4.</span> Adjourned</h2>
<div class="outline-text-2" id="text-adjourned">
</div>
</div>
</div>
</body>
</html>
