<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>QT4 CG Meeting 140 Minutes 2025-10-28</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/meeting/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/style.css"/>
<link rel="shortcut icon" href="/img/QT4-64.png" />
<link rel="apple-touch-icon" sizes="64x64" href="/img/QT4-64.png" type="image/png" />
<link rel="apple-touch-icon" sizes="76x76" href="/img/QT4-76.png" type="image/png" />
<link rel="apple-touch-icon" sizes="120x120" href="/img/QT4-120.png" type="image/png" />
<link rel="apple-touch-icon" sizes="152x152" href="/img/QT4-152.png" type="image/png" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">QT4 CG Meeting 140 Minutes 2025-10-28</h1>
<p>
<a href="../">Meeting index</a> / <a href="https://qt4cg.org">QT4CG.org</a> / <a href="https://qt4cg.org/dashboard">Dashboard</a> / <a href="https://github.com/qt4cg/qtspecs/issues">GH Issues</a> / <a href="https://github.com/qt4cg/qtspecs/pulls">GH Pull Requests</a>
</p>

<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#minutes">Minutes</a></li>
<li><a href="#new-actions">Summary of new and continuing actions <code>[0/2]</code></a></li>
<li><a href="#administrivia">1. Administrivia</a>
<ul>
<li><a href="#roll-call">1.1. Roll call <code>[8/11]</code></a></li>
<li><a href="#agenda">1.2. Accept the agenda</a></li>
<li><a href="#approve-minutes">1.3. Approve minutes of the previous meeting</a></li>
<li><a href="#next-meeting">1.4. Next meeting</a></li>
<li><a href="#open-actions">1.5. Review of open action items <code>[/]</code></a></li>
<li><a href="#group-photo">1.6. Group photograph for JWL/JLO presentation</a></li>
<li><a href="#open-actions">1.7. Review of open action items <code>[0/0]</code></a></li>
<li><a href="#open-pull-requests">1.8. Review of open pull requests and issues</a>
<ul>
<li><a href="#blocked">1.8.1. Blocked</a></li>
<li><a href="#merge-without-discussion">1.8.2. Merge without discussion</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#technical-agenda">2. Technical agenda</a>
<ul>
<li><a href="#pr-2120">2.1. PR #2120: 2007 Revised design for xsl:array</a></li>
<li><a href="#pr-2264">2.2. PR #2264: 2214 Separate streaming into its own spec</a></li>
<li><a href="#pr-2222">2.3. PR #2222: 2217 bin:decode-string: Input encoding</a></li>
<li><a href="#pr-2213">2.4. PR #2213: 2047 External resources and security</a></li>
<li><a href="#pr-2205">2.5. PR #2205: 2190 Drop binary input for parse-csv and parse-json</a></li>
<li><a href="#pr-2259">2.6. PR #2259: 938 Canonical serialization</a></li>
</ul>
</li>
<li><a href="#any-other-business">3. Any other business</a></li>
</ul>
</div>
</div>
<div id="outline-container-minutes" class="outline-2">
<h2 id="minutes">Minutes</h2>
<div class="outline-text-2" id="text-minutes">
<p>
Approved <a href="../2025/11-11.html">at meeting 141</a> on 11 November 2025.
</p>
</div>
</div>
<div id="outline-container-new-actions" class="outline-2">
<h2 id="new-actions">Summary of new and continuing actions <code>[0/2]</code></h2>
<div class="outline-text-2" id="text-new-actions">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> QT4CG-140-01: NW to make sure that the new spec is in the dashboard.</li>
<li class="off"><code>[&#xa0;]</code> QT4CG-140-02: MK to add a note about dealing with binary in parse-cvs and parse-json</li>
</ul>
</div>
</div>
<div id="outline-container-administrivia" class="outline-2">
<h2 id="administrivia"><span class="section-number-2">1.</span> Administrivia</h2>
<div class="outline-text-2" id="text-administrivia">
</div>
<div id="outline-container-roll-call" class="outline-3">
<h3 id="roll-call"><span class="section-number-3">1.1.</span> Roll call <code>[8/11]</code></h3>
<div class="outline-text-3" id="text-roll-call">
<p>
Regrets: JK
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> David J Birnbaum (DB)</li>
<li class="off"><code>[&#xa0;]</code> Reece Dunn (RD)</li>
<li class="on"><code>[X]</code> Christian Grün (CG)</li>
<li class="off"><code>[&#xa0;]</code> Joel Kalvesmaki (JK)</li>
<li class="on"><code>[X]</code> Michael Kay (MK)</li>
<li class="on"><code>[X]</code> Juri Leino (JLO)</li>
<li class="on"><code>[X]</code> John Lumley (JWL)</li>
<li class="on"><code>[X]</code> Wendell Piez (WP)</li>
<li class="on"><code>[X]</code> Ed Porter (EP)</li>
<li class="off"><code>[&#xa0;]</code> Bethan Tovey-Walsh (BTW)</li>
<li class="on"><code>[X]</code> Norm Tovey-Walsh (NW) <i>Scribe</i>. <i>Chair</i>.</li>
</ul>
</div>
</div>
<div id="outline-container-agenda" class="outline-3">
<h3 id="agenda"><span class="section-number-3">1.2.</span> Accept the agenda</h3>
<div class="outline-text-3" id="text-agenda">
<p>
Proposal: Accept <a href="../../agenda/2025/10-28.html">the agenda</a>.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-approve-minutes" class="outline-3">
<h3 id="approve-minutes"><span class="section-number-3">1.3.</span> Approve minutes of the previous meeting</h3>
<div class="outline-text-3" id="text-approve-minutes">
<p>
Proposal: Accept <a href="../../minutes/2025/10-21.html">the minutes of the previous meeting</a>. 
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-next-meeting" class="outline-3">
<h3 id="next-meeting"><span class="section-number-3">1.4.</span> Next meeting</h3>
<div class="outline-text-3" id="text-next-meeting">
<p>
The next meeting is planned for 11 November 2025.
</p>

<p>
We will <b>not</b> meet on 4 November.
</p>
</div>
</div>
<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.5.</span> Review of open action items <code>[/]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
None
</p>
</div>
</div>
<div id="outline-container-group-photo" class="outline-3">
<h3 id="group-photo"><span class="section-number-3">1.6.</span> Group photograph for JWL/JLO presentation</h3>
<div class="outline-text-3" id="text-group-photo">
<p>
JWL has asked if he might take a screenshot of us all to show at the tutorial he
and JLO are giving at Declarative Amsterdam.
</p>

<p>
Done!
</p>
</div>
</div>
<div id="outline-container-open-actions" class="outline-3">
<h3 id="open-actions"><span class="section-number-3">1.7.</span> Review of open action items <code>[0/0]</code></h3>
<div class="outline-text-3" id="text-open-actions">
<p>
None recorded.
</p>
</div>
</div>
<div id="outline-container-open-pull-requests" class="outline-3">
<h3 id="open-pull-requests"><span class="section-number-3">1.8.</span> Review of open pull requests and issues</h3>
<div class="outline-text-3" id="text-open-pull-requests">
<p>
This section summarizes all of the issues and pull requests that need to be
resolved before we can finish. See <a href="#technical-agenda">Technical Agenda</a> below for the focus of this
meeting.
</p>
</div>
<div id="outline-container-blocked" class="outline-4">
<h4 id="blocked"><span class="section-number-4">1.8.1.</span> Blocked</h4>
<div class="outline-text-4" id="text-blocked">
<p>
The following PRs are open but have merge conflicts or comments which
suggest they aren’t ready for action.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2256">#2256</a>: 2216 All atomic types become ordered</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2160">#2160</a>: 2073 data model changes for JNodes and Sequences</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2124">#2124</a>: 573 Functions to Construct Trees</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2120">#2120</a>: 2007 Revised design for xsl:array</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2071">#2071</a>: 77c deep update</li>
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2019">#2019</a>: 1776: XSLT template rules for maps and array</li>
</ul>
</div>
</div>
<div id="outline-container-merge-without-discussion" class="outline-4">
<h4 id="merge-without-discussion"><span class="section-number-4">1.8.2.</span> Merge without discussion</h4>
<div class="outline-text-4" id="text-merge-without-discussion">
<p>
The following PRs are editorial, small, or otherwise appeared to be
uncontroversial when the agenda was prepared. The chairs propose that
these can be merged without discussion. If you think discussion is
necessary, please say so.
</p>

<ul class="org-ul">
<li>PR <a href="https://qt4cg.org/dashboard/#pr-2262">#2262</a>: 2258 Correct the statement that split is the inverse of join</li>
</ul>

<p>
Proposal: merge without discussion.
</p>

<p>
Accepted.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-technical-agenda" class="outline-2">
<h2 id="technical-agenda"><span class="section-number-2">2.</span> Technical agenda</h2>
<div class="outline-text-2" id="text-technical-agenda">
</div>
<div id="outline-container-pr-2120" class="outline-3">
<h3 id="pr-2120"><span class="section-number-3">2.1.</span> PR #2120: 2007 Revised design for xsl:array</h3>
<div class="outline-text-3" id="text-pr-2120">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2120">#2120</a>
</p>

<p>
JWL/JLO would like an update on the status of this PR as it’s reflected in their
proposed tutorial about the 4.0 specifications at Declarative Amsterdam.
</p>

<ul class="org-ul">
<li>MK: This is awaiting further work following the last review.
<ul class="org-ul">
<li>… We have a spec reorg pending that makes it messy to work on it.</li>
<li>… I’m not entirely sure what to do about it.</li>
</ul></li>
<li>JWL: I’m going to use it anyway on the basis of that PR.
<ul class="org-ul">
<li>… The problem of making an array with sequences inside it isn’t trivial.</li>
</ul></li>
<li>MK: That’s why I’m stuck!</li>
<li>JWL I’ve got a projection of it into the 3.0 in my workbench</li>
<li>JWL: I’ll make it clear that it’s a work in progress.</li>
</ul>
</div>
</div>
<div id="outline-container-pr-2264" class="outline-3">
<h3 id="pr-2264"><span class="section-number-3">2.2.</span> PR #2264: 2214 Separate streaming into its own spec</h3>
<div class="outline-text-3" id="text-pr-2264">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2264">#2264</a>
</p>

<p>
Reminder: see <a href="https://qt4cg.org/pr/streaming/">https://qt4cg.org/pr/streaming/</a> for the formatted “dashboard” view.
</p>

<ul class="org-ul">
<li>MK: How do people want to review it.
<ul class="org-ul">
<li>… The immediate motivation was to get streaming off the critical path if we need it to be</li>
<li>… I’m hoping that’s not the case, but it’s good to have options. I don’t think that much
needs to be done with streaming.</li>
<li>… I think both specs are easier to read.</li>
</ul></li>
<li>MK: There’s almost no new or deleted text other than notes and cross
references to make the narrative make sense.
<ul class="org-ul">
<li>… I ended up with a fairly substantial reorganization of the streaming specification.</li>
</ul></li>
<li>NW: I’m happy to accept that you’ve done a competent editorial job and we’ll
see more of the details as we work through the respective drafts.</li>
<li>JWL: I started reading the streaming one, it’s nice at the beginning that you
have principles of streaming. There’s a narrative before you get to the real
problems. The one thing I didn’t find, in the main spec, is there a concept at
the top saying there are other bits, like serialization and streaming, that
may impact you but aren’t here.</li>
<li>MK: I tried to do that. There’s still a section in the XSLT concepts section
about it.
<ul class="org-ul">
<li>… There’s plenty of room for refining that sort of thing.</li>
</ul></li>
</ul>

<p>
Proposal: accept this PR.
</p>

<p>
Accepted.
</p>

<p>
ACTION QT4CG-140-01: NW to make sure that the new spec is in the dashboard.
</p>
</div>
</div>
<div id="outline-container-pr-2222" class="outline-3">
<h3 id="pr-2222"><span class="section-number-3">2.3.</span> PR #2222: 2217 bin:decode-string: Input encoding</h3>
<div class="outline-text-3" id="text-pr-2222">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2222">#2222</a>
</p>

<ul class="org-ul">
<li>CG: The term “Unicode encoding” ehas been changed to “UTF encoding” in F&amp;O.
<ul class="org-ul">
<li>… Most of the changes are in the binary module.</li>
</ul></li>
<li>CG: Last week we talked about unparsed text; I basically adopted the decisions
we made then.
<ul class="org-ul">
<li>…</li>
</ul></li>
<li>NW: The binary module is zero based. Huh.</li>
<li>JLO: So there is no way to get to the BOM?</li>
<li>CG: Yes.</li>
<li>JLO: Can’t you just say the encoding is different and then get the BOM?</li>
<li>CG: If there’s a BOM at the zero position, it’s ignored. That’s what unparsed
text does. Only if you have another offset then it’s not interpreted.</li>
<li>MK: You can get the BOM with a different function that doesn’t decode it. If
you just try to get the part of the string starting at 0, it’s only if you
decode it that you can’t get the BOM.</li>
</ul>

<p>
Some agreement.
</p>

<ul class="org-ul">
<li>CG: I also opened an issue for a function to infer the encoding, #2250.
<ul class="org-ul">
<li>… My thinking is that the ICU library gives you a confidence for each
encoding. So perhaps you could return multiple results with a confidence
value. But that’s a different issue.</li>
</ul></li>
</ul>

<p>
Proposal: Accept this PR.
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2213" class="outline-3">
<h3 id="pr-2213"><span class="section-number-3">2.4.</span> PR #2213: 2047 External resources and security</h3>
<div class="outline-text-3" id="text-pr-2213">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2213">#2213</a>
</p>

<p>
Based on the outcome of disucssions about #2222, perhaps progress can be made
here?
</p>

<ul class="org-ul">
<li>MK: I’ve now expanded this based on feedback from CG and others.
<ul class="org-ul">
<li>… We need to address the concerns somehow.</li>
<li>… XQuery begins with a discussion of the subject, 2.3 External Resources and Security.</li>
</ul></li>
</ul>

<p>
MK walks through the proposed new text.
</p>

<ul class="org-ul">
<li>MK: In F&amp;O, if we look at <code>load-xquery-module</code>, for example, we find it has a
“trusted” option with the default set to <code>false()</code>.
<ul class="org-ul">
<li>… If we look at <code>doc</code>, we find a “trusted” option again with appropriate
semantics.</li>
<li>… That carries through to other functions.</li>
</ul></li>

<li>CG: The file module could be added to the list.</li>
<li>MK: Yes, we should say something more explicit about that.</li>
<li>CG: If <code>untrusted</code> is false by default, then how many existing projects will
now raise errors? Maybe it would be better to keep it <code>true()</code>.</li>
<li>MK: As long as we provide a way to provide a way to override it at top level,
that’s probably good enough.
<ul class="org-ul">
<li>… But products are in charge of their own API design; you can have a way to change that.</li>
<li>… But at the spec level, I think we should make it secure by default.</li>
</ul></li>
<li>CG: Then shouldn’t we make everything untrusted?</li>
<li>MK: I think the question of whether the code at the top level is trusted is a
question of API design.</li>
<li>CG: Having two flags, one that controls functions and another for the top
level, that could be confusing.
<ul class="org-ul">
<li>… It probably depends on the use cases. Having everything trusted might be
one use case, but loaded query modules will be untrusted.</li>
<li>… It needs more thought.</li>
</ul></li>
<li>JWL: If we take the example where we’re going to run <code>fn:transform</code>, you could
say I don’t want this thing executing any <code>fn:doc</code> functions. We could put
that on the call to the transform. Is that the case?</li>
<li>MK: Yes, you could say that call is not trusted.</li>
<li>JWL: What about a case where I don’t want the code to be doing <code>fn:doc()</code> but
I’m happy to get them.</li>
<li>MK: You could do that by passing parameters.</li>
<li>JWL: Yes, I guess.
<ul class="org-ul">
<li>… Can you read your own trust level?</li>
</ul></li>
<li>MK: I’m not sure if you should be able to.</li>
<li>JLO: I’m all for secure-by-default. Having a way to override that per-call makes sense.
<ul class="org-ul">
<li>… Even though I don’t have access to the callers context, I can still be
passed any values. That way I can send specific resources to the untrusted
query.</li>
</ul></li>
</ul>

<p>
Some discussion of the use cases for which that works; it doesn’t work if you
want to crawl the web.
</p>

<ul class="org-ul">
<li>JLO: What about having a sandbox that lets you access the filesystem or the
web or something else.</li>
<li>MK: This is intended to be abstract enough to support that kind of API.
<ul class="org-ul">
<li>… In untrusted, you could for example, say that access to the database is
allowed but not access to the web.</li>
</ul></li>
<li>JLO: What about a function?</li>
<li>MK: I think that gets too complicated.</li>
<li>JLO: I guess I need to think about this some more too.</li>
</ul>

<p>
Some discussion of implementation defined mechanisms that might be used.
</p>

<ul class="org-ul">
<li>WP: I like the direction. It is a hard problem. The biggest issue I have so
far is that <code>false()</code> doesn’t mean here mean “false” it means “false except
when the system says true”. I wonder if there could be an in-between setting,
“as configured” that means use configurations. That frees up <code>false()</code> to mean
actually false.</li>
</ul>

<p>
Some discussion of the previous three-valued approach.
</p>

<ul class="org-ul">
<li>WP: As a user, if I set the flag to <code>false()</code> I can’t prohibit what the system
allows. The <code>false()</code> value doesn’t mean false.</li>
<li>WP: What about import and include?</li>
<li>MK: Yes, I think they have to be controlled the same way.</li>
<li>WP: That’s one of the concerns. There’s also the use case where a user is
using a library and there’s in-between code. It’s not just Saxon, it’s the
library I’m using that uses Saxon. Are they doing the right thing? Generally,
not.</li>
<li>WP: You want implementation level control, but I think the user needs to be
aware of that.</li>

<li>CG: Have you checked html-doc?</li>
<li>MK: I think I chickened out on that. It’s just doing unparsed binary and
passing it to the parse HTML function.
<ul class="org-ul">
<li>… But I’m not sure the HTML parsers give us any control anyway.</li>
</ul></li>
</ul>

<p>
Some discussion of HTML security issues; usually related to rendering.
</p>

<p>
We’ll continue the discussion in two weeks.
</p>
</div>
</div>
<div id="outline-container-pr-2205" class="outline-3">
<h3 id="pr-2205"><span class="section-number-3">2.5.</span> PR #2205: 2190 Drop binary input for parse-csv and parse-json</h3>
<div class="outline-text-3" id="text-pr-2205">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2205">#2205</a>
</p>

<p>
Based on the outcome of discussions about #2222, perhaps progress can be made
here?
</p>

<ul class="org-ul">
<li>MK: If you have CSV and JSON, you can now use <code>decode-string</code> to parse it and
pass it to those functions. There’s no reason to combine decoding and parsing
because they’re unrelated, unlike XML.</li>
<li>CG: I still have a slight preference to make it easier for users, but I
understand that it makes sense to keep the functionality separated.</li>
<li>JLO: I think this separation is much better.
<ul class="org-ul">
<li>… I think parse-csv and parse-json shouldn’t do any decoding, but the
csv-doc and json-doc still need to do it.</li>
</ul></li>
<li>MK: Those are composite functions.</li>
<li>JWL: I wonder if it’s worth putting a note on parse-csv and parse-json to tell
users a technique for dealing with binary input.</li>
</ul>

<p>
ACTION QT4CG-140-02: MK to add a note about dealing with binary in parse-cvs and parse-json
</p>

<p>
MK displays the changes.
</p>

<p>
Proposal: accept this PR
</p>

<p>
Accepted.
</p>
</div>
</div>
<div id="outline-container-pr-2259" class="outline-3">
<h3 id="pr-2259"><span class="section-number-3">2.6.</span> PR #2259: 938 Canonical serialization</h3>
<div class="outline-text-3" id="text-pr-2259">
<p>
See PR <a href="https://qt4cg.org/dashboard/#pr-2259">#2259</a>
</p>

<p>
Skip until JK is present.
</p>
</div>
</div>
</div>
<div id="outline-container-any-other-business" class="outline-2">
<h2 id="any-other-business"><span class="section-number-2">3.</span> Any other business</h2>
<div class="outline-text-2" id="text-any-other-business">
<p>
None heard.
</p>
</div>
</div>
</div>
</body>
</html>
