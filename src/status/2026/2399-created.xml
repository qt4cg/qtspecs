<item>
   <title>Issue #2399 created</title>
   <pubDate>2026-01-22T10:45:49Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2399</link>
   <guid>https://qt4cg.org/@qt4cg/2026/#created-2399</guid>
   <description>&lt;div&gt;&lt;p&gt;Canonical JSON Serialization: edge cases&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;RFC 8785 says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: Since Not a Number (NaN) and Infinity are not permitted in JSON, occurrences of NaN or Infinity MUST cause a compliant JCS implementation to terminate with an appropriate error.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We have just decided to treat these cases more liberally, but I think we should continue to raise an error if canonical serialization is requested.&lt;/p&gt;
&lt;p&gt;In our serialization spec, we also say:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Implementations may serialize an xs:double value using any lexical representation of a JSON number defined in &lt;a href="https://qt4cg.org/specifications/xslt-xquery-serialization-40/Overview.html#rfc7159"&gt;[RFC 7159]&lt;/a&gt;, but it is recommended to use the same representation as when the canonical parameter is true.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We may need to exclude the edge cases from this recommendation.&lt;/p&gt;
&lt;p&gt;If we keep the recommendation, we may need to fix the test case &lt;a href="https://github.com/qt4cg/qt4tests/blob/d1d9e32460246b66c0dcaa14c457cfc7a1cc007b/ser/method-json.xml#L164-L178"&gt;Serialization-json-11&lt;/a&gt;, which expects &lt;code&gt;-0&lt;/code&gt; instead of &lt;code&gt;0&lt;/code&gt; (what is returned for RFC8785).&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
