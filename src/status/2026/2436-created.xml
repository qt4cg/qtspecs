<item>
   <title>Issue #2436 created</title>
   <pubDate>2026-02-03T12:04:25Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2436</link>
   <guid>https://qt4cg.org/@qt4cg/2026/#created-2436</guid>
   <description>&lt;div&gt;&lt;p&gt;`jnode` type: arguments (spec vs. tests)&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;The current spec defines the following grammar for the &lt;code&gt;jnode&lt;/code&gt; type:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;JNodeType  ::=  "jnode" "(" (("*" | NCName | Constant) ("," ("*" | SequenceType))?)? ")"
Constant   ::=   StringLiteral | ("-"? NumericLiteral) | QNameLiteral | ("true" "(" ")") | ("false" "(" ")")
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As far as I can judge, none of the current test cases seems to use this syntax. Instead, the tests I found expect a single sequence type argument, for example &lt;a href="https://github.com/qt4cg/qt4tests/blob/2dfc00ccfc670602264e879d03e0e94701d58dea/fn/jtree.xml#L62-L69"&gt;fn-jtree-006&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xml"&gt;&amp;lt;test-case name="fn-jtree-006"&amp;gt;
  &amp;lt;description&amp;gt; JNode applied to an array - type of result&amp;lt;/description&amp;gt;
  &amp;lt;created by="Michael Kay" on="2025-06-16"/&amp;gt;
  &amp;lt;test&amp;gt;fn:jtree([1,2,3]) instance of jnode(array(xs:integer))&amp;lt;/test&amp;gt;
  &amp;lt;result&amp;gt;
    &amp;lt;assert-true/&amp;gt;
  &amp;lt;/result&amp;gt;
&amp;lt;/test-case&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Is it the test suite or the spec that needs to be updated?&lt;/p&gt;
&lt;p&gt;If this is still subject to discussion, my preference would be to disallow constants in the &lt;code&gt;jnode&lt;/code&gt; syntax:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It is not clear to me how &lt;code&gt;fn:jtree({ 'a': 1, 'b': 2 }) instance of &lt;/code&gt;jnode(a)` can be interpreted.&lt;/li&gt;
&lt;li&gt;Instance checks for linear hierarchies are generelly more intuitive.&lt;/li&gt;
&lt;li&gt;With the presence of  &lt;code&gt;get()&lt;/code&gt;, the jnode constants should be redundant.&lt;/li&gt;
&lt;li&gt;We can only use atomic items in the node tests for which literals exists.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
