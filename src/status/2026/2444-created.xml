<item>
   <title>Issue #2444 created</title>
   <pubDate>2026-02-04T22:00:05Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2444</link>
   <guid>https://qt4cg.org/@qt4cg/2026/#created-2444</guid>
   <description>&lt;div&gt;&lt;p&gt;XSLT Patterns for matching JNodes&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;A pattern such as &lt;code&gt;match="order"&lt;/code&gt; currently matches both an element named "order" and a JNode whose selector is "order".&lt;/p&gt;
&lt;p&gt;This makes it much more difficult to do type inferencing on the body of the template rule, and it greatly complicates streamability analysis. While usability rightly takes priority over implementation concerns, I don't think this design has usability benefits either. I think in practice users will know whether their template rules are intended to match XNodes or JNodes, and using the same pattern syntax for both is more confusing than helpful. We already offer the syntax `match="jnode(order)" to match JNodes, and I think that is clearer.&lt;/p&gt;
&lt;p&gt;Note that the semantics of &lt;code&gt;match="order"&lt;/code&gt; already depart from the semantics of the equivalent XPath expression &lt;code&gt;child::order&lt;/code&gt; because the pattern will match a parentless element. So we only have to adapt the current magic rule:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If PS uses the child axis (explicitly or implicitly), and if the NodeTest in PS is not document-node() (optionally with arguments), then the axis in step PS is replaced by child-or-top, which is defined as follows. If the context node is a parentless element, comment, processing instruction, or text node then the child-or-top axis selects the context node; otherwise it selects the children of the context node. It is a forwards axis whose principal node kind is element.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;so that the child-or-top axis only selects XNodes.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
