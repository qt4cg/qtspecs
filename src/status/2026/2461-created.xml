<item>
   <title>Issue #2461 created</title>
   <pubDate>2026-02-14T10:33:05Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2461</link>
   <guid>https://qt4cg.org/@qt4cg/2026/#created-2461</guid>
   <description>&lt;div&gt;&lt;p&gt;Unparsed entities&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Support for unparsed entities and notations is something of a minority interest, but recent correspondence with a Saxon user reminds me that there are applications that depend on them quite heavily. There is limited support for them in the data model and in XSLT, but none in XPath or XQuery.&lt;/p&gt;
&lt;p&gt;There is no logical reason for the two functions unparsed-entity-uri() and unparsed-entity-public-id() to be XSLT-only, other than to save XQuery implementors the trouble of implementing them.&lt;/p&gt;
&lt;p&gt;At the same time, the functions are incomplete and inadequate. For example, there is no way of obtaining a complete list of declared entities, and there is no way of getting information about the notations that they refer to.&lt;/p&gt;
&lt;p&gt;Many XML parsers do not expose information about entities and notations, so anything we define should be capable of returning a result that indicates "information not available for this document (or for this implementation)".&lt;/p&gt;
&lt;p&gt;I propose a new function unparsed-entities($doc) which returns a map along the lines:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{ "entities": {
     "e-name-1": {
         "system-id": ....
         "public-id": ....
         "notation": ....
     }, ....
  },
 "notations":{
    "n-name-1": "system-id", ...
  }
} 
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and which is allowed to return an empty sequence if information about unparsed entities is not available (making it possible to provide a trivial fallback implementation).&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
