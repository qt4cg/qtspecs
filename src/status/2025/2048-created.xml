<item>
   <title>Issue #2048 created</title>
   <pubDate>2025-06-13T16:12:51Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2048</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-2048</guid>
   <description>&lt;div&gt;&lt;p&gt;Untrusted execution, and security more generally&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Discussion of untrusted execution (that is, a Processor executing code from an untrusted source), and security in general, is present in the spec, but spread out and not really connected.&lt;/p&gt;
&lt;p&gt;Untrusted execution seems to me to be one of the biggest security issues for XSLT/XQuery and XPath in general, and I think it’s important to make the distinction between untrusted execution where an untrusted stylesheet or query is executed (perhaps via Saxon’s &lt;code&gt;XsltCompiler.compile()&lt;/code&gt;), and when a trusted stylesheet or query causes untrusted code to be executed, as with &lt;code&gt;fn:parse-xml()&lt;/code&gt;, &lt;code&gt;fn:doc()&lt;/code&gt;, &lt;code&gt;fn:transform()&lt;/code&gt; and &lt;code&gt;&amp;lt;xsl:evaluate&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The proposals in #2034 address one case, but have no effect on the other, and that raises the question of what would happen if an untrusted (unsafe) stylesheet executed &lt;code&gt;fn:doc()&lt;/code&gt; with &lt;code&gt;safe = true&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I would like to see the specs address the security implications of untrusted execution more explicitly, and to provide clearer guidance for implementation authors around both completely untrusted code, and trusted code which executes untrusted code.&lt;/p&gt;
&lt;p&gt;I think that could take the form of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Annotation of all functions that have potentially problematic external effects (primarily file / resource access).&lt;/li&gt;
&lt;li&gt;Clear expectations for implementors about what (and how) security restrictions should be configurable.&lt;/li&gt;
&lt;li&gt;Consistent Error codes for security-related exceptions&lt;/li&gt;
&lt;li&gt;Consistent security-related options for functions which can cause untrusted source parsing or code execution.&lt;/li&gt;
&lt;li&gt;A additional security section in the spec under section 2 (Concepts / Basics) in the XSLT/XQuery/XPath specs, and section 1 of XPFO, which collects the overview and points to what to look for in the rest of the spec.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
