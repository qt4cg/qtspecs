<item>
   <title>Issue #2341 created</title>
   <pubDate>2025-12-12T08:51:57Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2341</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-2341</guid>
   <description>&lt;div&gt;&lt;p&gt;JSON Canonical Serialization&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Our specification says:&lt;/p&gt;
&lt;p&gt;The [serializer] must serialize the normalized sequence according to [[RFC8785]].&lt;/p&gt;
&lt;p&gt;RFC8785, however, states that the input to serialization is constrained to conform to Iâ€‘JSON [[RFC7493]; we say nothing about how you get from a "normalized sequence" to an I-JSON instance.&lt;/p&gt;
&lt;p&gt;And in any case, the JSON output method does not perform sequence normalization, so it's not even clear that there is a normalized sequence to start with. What we actually start with is an arbitrary XDM value.&lt;/p&gt;
&lt;p&gt;Many of the answers as to how we get from an arbitrary XDM value to an I-JSON instance are implicit in the introductory section of chapter 9, but extracting the answers requires a lot of reading between the lines.&lt;/p&gt;
&lt;p&gt;The main gap in practice is the handling of numerics.&lt;/p&gt;
&lt;p&gt;In fact, there's a gap here between the two RFCs. RFC 8785 tells us precisely how to serialize an IEEE 754 (xs:double) value, but I-JSON is a profile of JSON, and therefore represents numbers as a string representation. Neither specification seems to give precise rules for getting from the string representation to the IEEE 754 value. This need not concern us too much, because we're typically starting from an &lt;code&gt;xs:double&lt;/code&gt;. But we do need to say what happens if you start with a numeric value other than an &lt;code&gt;xs:double&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
