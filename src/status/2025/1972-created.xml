<item>
   <title>Issue #1972 created</title>
   <pubDate>2025-05-02T08:24:18Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1972</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-1972</guid>
   <description>&lt;div&gt;&lt;p&gt;Dynamic function call applied to empty sequence&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;A note in F+O under map:get states&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;map:get(map:get(map:get($map, 'employee'), 'name'), 'first')&lt;/code&gt; can be written as &lt;code&gt;$map('employee')('name')('first')&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That's technically correct: both these expressions will fail in the same way if &lt;code&gt;$map&lt;/code&gt; does not contain an entry for the key &lt;code&gt;employee&lt;/code&gt;. Unlike the lookup expression &lt;code&gt;$map?employee?name?first&lt;/code&gt; which returns an empty sequence in this situation.&lt;/p&gt;
&lt;p&gt;The rules for dynamic function calls (xpath, ยง4.5.3.1) state that &lt;code&gt;$F($X)&lt;/code&gt; raises a type error if &lt;code&gt;$F&lt;/code&gt; is an empty sequence.&lt;/p&gt;
&lt;p&gt;I think it would be more useful if both map:get() and dynamic function calls were changed to have "empty if empty" semantics.&lt;/p&gt;
&lt;p&gt;This is related to #1240 which goes further by allowing &lt;code&gt;$F&lt;/code&gt; to be a sequence of function items.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
