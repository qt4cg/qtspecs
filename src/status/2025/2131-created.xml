<item>
   <title>Issue #2131 created</title>
   <pubDate>2025-07-28T10:28:36Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2131</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-2131</guid>
   <description>&lt;div&gt;&lt;p&gt;XSLT `xsl:for-each-group` `split-when` variables&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;Currently the spec &lt;a href="https://qt4cg.org/specifications/xslt-40/Overview.html#xsl-for-each-group"&gt;says&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The expression is supplied with two variables: &lt;code&gt;$group&lt;/code&gt; is set to the contents of the current group being constructed, and &lt;code&gt;$next&lt;/code&gt; is the next item in the population.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;1. Do these supplied variables shadow the user-defined variable of the same name?  (probably they should, but it is not mentioned)
For example:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xslt"&gt;  &amp;lt;xsl:variable name="group" select="(1,2,3)"/&amp;gt;  
  &amp;lt;xsl:for-each-group select="$input" split-when=" $next = $group "&amp;gt; ... &amp;lt;/xsl:for-each-group&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Maybe these variables should be in the &lt;code&gt;fn:&lt;/code&gt; namespace?&lt;/p&gt;
&lt;p&gt;2. To access the &lt;strong&gt;current grouping key&lt;/strong&gt; and &lt;strong&gt;current group&lt;/strong&gt; the functions &lt;code&gt;fn:current-grouping-key&lt;/code&gt; and &lt;code&gt;fn:current-group&lt;/code&gt; are used. What is the rationale of introducing &lt;em&gt;variables&lt;/em&gt; instead of &lt;em&gt;functions&lt;/em&gt; to access the group and item in &lt;code&gt;split-when&lt;/code&gt;?&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
