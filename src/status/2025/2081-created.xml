<item>
   <title>Issue #2081 created</title>
   <pubDate>2025-07-03T20:29:30Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2081</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-2081</guid>
   <description>&lt;div&gt;&lt;p&gt;Destructuring let combined with for clause&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;We may need to look at expressions of the following kind…&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;let $($a, $b) := (1 to 6) ! string()
for $i in 1 to 3
return ($a, $b, $i)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…which currently yield an exception:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Improper use? Potential bug? Your feedback is welcome:
Contact: basex-talk@mailman.uni-konstanz.de
Version: BaseX 12.1 beta
Java: Eclipse Adoptium, 17.0.14
OS: Windows 11, amd64
java.lang.ArrayIndexOutOfBoundsException: Index -1 out of bounds for length 32
	at org.basex.query.var.QueryStack.set(QueryStack.java:124)
	at org.basex.query.QueryContext.set(QueryContext.java:577)
	at org.basex.query.expr.gflwor.Let$LetEval.next(Let.java:147)
	at org.basex.query.expr.gflwor.GFLWOR$1.next(GFLWOR.java:79)
	at org.basex.query.scope.MainModule$1.next(MainModule.java:65)
	at org.basex.query.QueryContext.next(QueryContext.java:395)
	at org.basex.query.QueryContext.lambda$6(QueryContext.java:629)
	at org.basex.query.QueryContext.run(QueryContext.java:770)
	at org.basex.query.QueryContext.cache(QueryContext.java:609)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
