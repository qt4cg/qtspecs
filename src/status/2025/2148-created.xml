<item>
   <title>Issue #2148 created</title>
   <pubDate>2025-08-05T09:21:22Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2148</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-2148</guid>
   <description>&lt;div&gt;&lt;p&gt;fn:base-uri: Raise errors?&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;The (rather old) test case &lt;a href="https://github.com/qt4cg/qt4tests/blob/cf7c1ed9990279dbaf2297b8fe252a3ca4a3c0ad/fn/base-uri.xml#L799-L811"&gt;&lt;code&gt;K2-BaseURIFunc-29&lt;/code&gt;&lt;/a&gt; indicates that invalid URIs may result in an error:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xml"&gt;&amp;lt;test-case name="K2-BaseURIFunc-29"&amp;gt;
  &amp;lt;description&amp;gt; Use an URI in an xml:base element that is a valid URI, but an invalid HTTP URL. 
    Since implementations aren't required to validate specific schemes but allowed to, 
    this may either raise an error or return the URI. 
  &amp;lt;/description&amp;gt;
  &amp;lt;created by="Frans Englich" on="2007-11-26"/&amp;gt;
  &amp;lt;dependency type="spec" value="XQ10+"/&amp;gt;
  &amp;lt;test&amp;gt;&amp;lt;![CDATA[let $i := fn:base-uri(&amp;lt;anElement xml:base="http:\\example.com\\examples"&amp;gt;Element content&amp;lt;/anElement&amp;gt;) 
    return $i eq "http:\\example.com\\examples" or empty($i)]]&amp;gt;&amp;lt;/test&amp;gt;
  &amp;lt;result&amp;gt;
    &amp;lt;assert-true/&amp;gt;
  &amp;lt;/result&amp;gt;
&amp;lt;/test-case&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I raise this issue in the qtspecs repository as I wondered whether we should clarify how invalid URIs are to be handled by &lt;code&gt;fn:base-uri&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If itâ€™s the test that is misleading, I will be glad to correct the comment, or add an error code.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
