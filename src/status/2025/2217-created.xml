<item>
   <title>Issue #2217 created</title>
   <pubDate>2025-09-29T13:09:00Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2217</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-2217</guid>
   <description>&lt;div&gt;&lt;p&gt;`bin:decode-string`: Interpretation of `$encoding` argument&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;When the &lt;code&gt;$encoding&lt;/code&gt; argument for &lt;a href="https://qt4cg.org/specifications/expath-binary-40/Overview.html#func-bin-decode-string"&gt;&lt;code&gt;bin:decode-string&lt;/code&gt;&lt;/a&gt; is omitted, the &lt;code&gt;utf-8&lt;/code&gt; encoding is assumed.&lt;/p&gt;
&lt;p&gt;I propose to change the function signature to…&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;bin:decode-string(
  $in        as (xs:hexBinary | xs:base64Binary)?,	
  $encoding  as xs:string?                         := ()   (: before: 'utf-8' :)
  $offset    as xs:integer?                        := 0,
  $size      as xs:integer?                        := ()
) as xs:string?
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;…and, if the encoding is omitted, to try to interpret the first read bytes as byte order mark and, if no BOM is found, assume UTF-8.&lt;/p&gt;
&lt;p&gt;As a result, both &lt;code&gt;bin:decode-string(xs:hexBinary('41'))&lt;/code&gt; and &lt;code&gt;bin:decode-string(xs:hexBinary('EFBBBF41'))&lt;/code&gt; would return &lt;code&gt;A&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
