<item>
   <title>Issue #1889 created</title>
   <pubDate>2025-03-20T15:32:00Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/1889</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-1889</guid>
   <description>&lt;div&gt;&lt;p&gt;HTML serialization: `html-version` and `version` parameters; allowed values&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;The serialization spec says (&lt;a href="https://qt4cg.org/specifications/xslt-xquery-serialization-40/Overview.html#HTML_VERSION"&gt;HTML Output Method: the version and html-version Parameters&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If the &lt;code&gt;html-version&lt;/code&gt; serialization parameter is not absent, the requested HTML version is the value of the &lt;code&gt;html-version&lt;/code&gt; serialization parameter; otherwise, it is the value of the &lt;code&gt;version&lt;/code&gt; serialization parameter.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-serialize"&gt;fn:serialize&lt;/a&gt; defines the following defaults:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;html-version&lt;/code&gt;: &lt;code&gt;5&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;version&lt;/code&gt;: &lt;code&gt;1.0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I wonder whether these rules cover all possible cases:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Is it correct that HTML will be serialized as HTML5 if no options are supplied?&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;(: html-version=5 :) 
serialize(&amp;lt;html/&amp;gt;, { 'method': 'html' })
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start="2"&gt;
&lt;li&gt;If only &lt;code&gt;version&lt;/code&gt; is supplied, is it correct that it is ignored because of &lt;code&gt;html-version&lt;/code&gt; defaulting to &lt;code&gt;5&lt;/code&gt;?&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;(: html-version=5 ? :) 
serialize(&amp;lt;html/&amp;gt;, { 'method': 'html', 'version': '4.01' })
&lt;/code&gt;&lt;/pre&gt;
&lt;ol start="3"&gt;
&lt;li&gt;If no, i.e., if &lt;code&gt;{ 'version': '4.01' }&lt;/code&gt; is expected to overwrite the default for &lt;code&gt;html-version&lt;/code&gt;, how can we know at which stage the default values are to be considered?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In addition, the serialization specification mentions versions HTML 4.01 and HTML5 various times, but it seems to be up to the implementation to decide which HTML versions to support. However, we seem to have test cases for &lt;code&gt;4.0&lt;/code&gt; and &lt;code&gt;5&lt;/code&gt;. Would it make sense to define a miminum set of versions that need to be supported?&lt;/p&gt;
&lt;p&gt;Finally, for some reason, the &lt;code&gt;html-version&lt;/code&gt; parameter was defined to be a decimal, whereas &lt;code&gt;version&lt;/code&gt; is defined as a string (since XQFO 3.1). Maybe this leads to the surprising result that Saxon seems to accept the option &lt;code&gt;{ 'version': '4.0' }&lt;/code&gt;, but rejects &lt;code&gt;{ 'html-version': 4 }&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
