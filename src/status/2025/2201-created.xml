<item>
   <title>Issue #2201 created</title>
   <pubDate>2025-09-21T09:31:48Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/2201</link>
   <guid>https://qt4cg.org/@qt4cg/2025/#created-2201</guid>
   <description>&lt;div&gt;&lt;p&gt;Subtyping: schema-element(X) and schema-attribute(X)&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;According to the specs, in both 3.1 and 4.0, &lt;code&gt;schema-attribute(X)&lt;/code&gt; is not a subtype of &lt;code&gt;attribute()&lt;/code&gt;, and &lt;code&gt;schema-element(X)&lt;/code&gt; is not a subtype of &lt;code&gt;element()&lt;/code&gt;. This seems intuitively wrong. The set of nodes matched by &lt;code&gt;schema-attribute(X)&lt;/code&gt; is clearly a subset of those matched by &lt;code&gt;attribute()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;(The issue arises because it seems Saxon has always treated &lt;code&gt;schema-attribute(X)&lt;/code&gt; as being a subtype of &lt;code&gt;attribute()&lt;/code&gt;, but in response to a rather complicated bug I rewrote the code to follow the spec more closely, and wrote new tests in the misc-Subtyping family to check conformance more closely: this has caused various optimizations to break.)&lt;/p&gt;
&lt;p&gt;Although it's intuitive that &lt;code&gt;schema-attribute(X)&lt;/code&gt; should be a subtype of &lt;code&gt;attribute()&lt;/code&gt;, the exact rules (especially for elements) require careful thought, taking into account substitution groups and nillability.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
