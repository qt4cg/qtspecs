<item>
   <title>Issue #868 created</title>
   <pubDate>2023-12-04T11:54:03Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/868</link>
   <guid>https://qt4cg.org/@qt4cg/2023/#created-868</guid>
   <description>&lt;div&gt;&lt;p&gt;fn:intersperse → fn:join, array:join($arrays, $separator)&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;With &lt;code&gt;string-join&lt;/code&gt;, you can create a string for multiple strings, optionally interspersed with a separator. &lt;code&gt;array:join&lt;/code&gt; can be used to create an array from multiple arrays.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;fn:intersperse&lt;/code&gt;, which has been added to the XQuery 4 draft, does something very similar, and early feedback indicates that the function is useful, but easily to overlook due to its name.&lt;/p&gt;
&lt;p&gt;I propose to unify the functions by…&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;renaming &lt;code&gt;fn:intersperse&lt;/code&gt; to &lt;code&gt;fn:join&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;adding a parameter to &lt;code&gt;array:join&lt;/code&gt;: &lt;code&gt;$separator as array(*)* := ()&lt;/code&gt;; and&lt;/li&gt;
&lt;li&gt;allowing a separator sequence for &lt;code&gt;fn:string-join&lt;/code&gt;: &lt;code&gt;$separator as xs:string* := ()&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;h4&gt;Examples&lt;/h4&gt;
&lt;p&gt;Query | Result | Info
-- | -- | --
&lt;code&gt;string-join(('1','2','3'))&lt;/code&gt; | &lt;code&gt;'123'&lt;/code&gt; | &lt;em&gt;existing syntax&lt;/em&gt;
&lt;code&gt;string-join(('1','2','3'), '-')&lt;/code&gt; | &lt;code&gt;'1-2-3'&lt;/code&gt; | &lt;em&gt;existing syntax&lt;/em&gt;
&lt;code&gt;array:join([[1],[2],[3]])&lt;/code&gt; | &lt;code&gt;[1,2,3]&lt;/code&gt; | &lt;em&gt;existing syntax&lt;/em&gt;
&lt;code&gt;join((1,2,3))&lt;/code&gt; | &lt;code&gt;(1,2,3)&lt;/code&gt; | &lt;em&gt;currently:&lt;/em&gt; &lt;code&gt;intersperse((1,2,3))&lt;/code&gt;&lt;br/&gt;(&lt;em&gt;or just&lt;/em&gt; &lt;code&gt;(1,2,3)&lt;/code&gt;)
&lt;code&gt;join((1,2,3), '-')&lt;/code&gt; | &lt;code&gt;(1,'-',2,'-',3)&lt;/code&gt; | &lt;em&gt;currently:&lt;/em&gt; &lt;code&gt;intersperse((1,2,3),'-')&lt;/code&gt;
&lt;code&gt;join((1,2,3), ('-','+'))&lt;/code&gt; | &lt;code&gt;(1,'-','+',2,'-','+',3)&lt;/code&gt; | &lt;em&gt;currently:&lt;/em&gt; &lt;code&gt;intersperse((1,2,3),('-','+'))&lt;/code&gt;
&lt;code&gt;string-join(('1','2','3'), ('-','+'))&lt;/code&gt; | &lt;code&gt;'1-+2-+3'&lt;/code&gt; | &lt;em&gt;new&lt;/em&gt;
&lt;code&gt;array:join([[1],[2],[3]], ['-'])&lt;/code&gt; | &lt;code&gt;[1,'-',2,'-',3]&lt;/code&gt; | &lt;em&gt;new&lt;/em&gt;
&lt;code&gt;array:join([[1],[2],[3]], ['-','+'])&lt;/code&gt; | &lt;code&gt;[1,'-','+',2,'-','+',3]&lt;/code&gt; | &lt;em&gt;new&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
