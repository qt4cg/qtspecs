<item>
   <title>Issue #760 created</title>
   <pubDate>2023-10-18T08:47:05Z</pubDate>
   <link>https://github.com/qt4cg/qtspecs/issues/760</link>
   <guid>https://qt4cg.org/@qt4cg/2023/#created-760</guid>
   <description>&lt;div&gt;&lt;p&gt;Serialize functions: consistency&lt;/p&gt;&lt;div class="markup"&gt;&lt;p&gt;We should be more ambitious about ensuring consistency when serializing data back to its original representation, and how to achieve it. This is the status quo:&lt;/p&gt;
&lt;p&gt;Format| Serialize Function | Parse Function
--- | --- | ---
&lt;strong&gt;XML&lt;/strong&gt; | &lt;code&gt;fn:serialize($input)&lt;/code&gt; | &lt;code&gt;fn:parse-xml&lt;/code&gt;
&lt;strong&gt;JSON&lt;/strong&gt; | &lt;code&gt;fn:serialize($input, map { 'method': 'json' })&lt;/code&gt; | &lt;code&gt;fn:parse-json&lt;/code&gt;
&lt;strong&gt;JSON&lt;/strong&gt; | &lt;code&gt;fn:xml-to-json($input)&lt;/code&gt; | &lt;code&gt;fn:json-to-xml&lt;/code&gt;
&lt;strong&gt;XHTML&lt;/strong&gt; | &lt;code&gt;fn:serialize($input, map { 'method': 'xhtml' })&lt;/code&gt; | &lt;code&gt;fn:parse-html&lt;/code&gt;
&lt;strong&gt;HTML&lt;/strong&gt; | &lt;code&gt;fn:serialize($input, map { 'method': 'html' })&lt;/code&gt; | &lt;code&gt;fn:parse-html&lt;/code&gt;
&lt;strong&gt;CSV&lt;/strong&gt; | &lt;em&gt;still missing&lt;/em&gt; | &lt;code&gt;fn:parse-csv&lt;/code&gt; and variants&lt;/p&gt;
&lt;p&gt;In BaseX, the XML created by &lt;code&gt;fn:json-to-xml&lt;/code&gt; can already be serialized back to JSON as follows (related: #759):&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;serialize(
  &amp;lt;map xmlns="http://www.w3.org/2005/xpath-functions"&amp;gt;
    &amp;lt;number key="A"&amp;gt;1&amp;lt;/number&amp;gt;
  &amp;lt;/map&amp;gt;,
  map { 'method': 'json', 'json': map { 'format': 'basic' }
})
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For CSV, weâ€™ve introduced a CSV serialization method that supports all CSV flavors we support (see &lt;a href="docs.basex.org/wiki/CSV_Module"&gt;CSV Module&lt;/a&gt; for more details):&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-xquery"&gt;serialize(
  &amp;lt;map xmlns="http://www.w3.org/2005/xpath-functions"&amp;gt;
    &amp;lt;number key="A"&amp;gt;1&amp;lt;/number&amp;gt;
  &amp;lt;/map&amp;gt;,
  map { 'method': 'csv', 'csv': map { 'format': 'direct' }
})
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Related (parse functions): #748&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description>
</item>
