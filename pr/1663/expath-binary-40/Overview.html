<!DOCTYPE HTML>
<html lang="EN">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>EXPath Binary Module 4.0 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <link rel="stylesheet" type="text/css" href="css/w3c-base.css">
      <link rel="stylesheet" href="css/qtspecs.css">
      <link rel="stylesheet" href="css/xpath-functions-40.css"><script src="js/fo-datalist.js"></script></head>
   <body>
      <div class="head">
         <p><a href="https://www.w3.org/"><img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" height="48" width="72"></a></p>
         
         <h1><a id="title"></a>EXPath Binary Module 4.0 </h1>
         
         <h2><a id="w3c-doctype"></a>W3C Editor's Draft 19&nbsp;December&nbsp;2024</h2>
         <dl>
            <dt>This version:</dt>
            <dd><a href="https://qt4cg.org/pr/1663/EXPath/binary-40//">https://qt4cg.org/pr/1663/EXPath/binary-40/</a></dd>
            <dt>Latest version of EXPath Binary Module 4.0:</dt>
            <dd>
               <a href="https://qt4cg.org/specifications/EXPath/binary-40/">https://qt4cg.org/specifications/EXPath/binary-40/</a>
               </dd>
            <dt>Most recent Recommendation of EXPath Binary Module:</dt>
            <dd>
               <a href="http://expath.org/spec/binary">http://expath.org/spec/binary</a>
               
               </dd>
            <dt>Editors:</dt>
            <dd>Jirka Kosek <a href="http://www.saxonica.com/">&lt;http://kosek.com/&gt;</a></dd>
            <dd>John Lumley <a href="http://www.saxonica.com/">&lt;http://www.saxonica.com/&gt;</a></dd>
         </dl>
         <p>Please check the <a href="https://www.w3.org/XML/2017/qt-errata/xpath-functions-31-errata.html"><strong>errata</strong></a> for any errors or issues reported since publication.</p>
         <p>See also <a href="https://www.w3.org/2003/03/Translations/byTechnology?technology=xpath-functions-40"><strong>translations</strong></a>.</p>
         <p>This document is also available in these non-normative formats: <a href="binary-40.xml">Specification in XML format using HTML5 vocabulary</a> and&nbsp;<a href="function-catalog.xml">XML function catalog</a>.</p>
         <p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2000&nbsp;<a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>
         <hr>
      </div>
      <div>
         
         <h2><a id="abstract"></a>Abstract</h2>
         <p>This document defines an API for XPath 4.0 to handle the manipulation of binary data.
                It defines extension functions to process data from, and generate date for, binary
                resources, including extracting subparts, searching, basic binary operations and
                conversion between binary and structured forms of XDM numbers and strings.</p>
         <p>The document is an update of the original <a href="#expath-bin">[EXPath Binary 1.0]</a> specification,
                developed by the <a href="http://www.w3.org/community/expath/">EXPath Community
                    Group</a>, defined for <a href="#xpath20">[XML Path Language (XPath) 2.0]</a> and published in 2013.</p>
         <p>The principal semantic alteration is use of functional argument defaults available in
                XPath 4.0.</p>
         <p>These functions are defined for use in <a href="#xpath-40">[XML Path Language (XPath) 4.0]</a> and <a href="#xquery-40">[XQuery 4.1: An XML Query Language]</a> and <a href="#xslt-40">[XSL Transformations (XSLT) Version 4.0]</a> and other related XML standards.
                The signatures and summaries of functions defined in this document are available at:
                    <a href="https://qt4cg.org/specifications/EXPath/binary-40/">https://qt4cg.org/specifications/EXPath/binary-40/</a>.</p>
         <p>A summary of changes since published version 1.0 (the XPath 2.0 version) is provided
                at <a href="#changelog"><b>F Changes since version 1.0</b></a>.</p>
      </div>
      <div>
         
         <h2><a id="status"></a>Status of this Document</h2>
         <p>This version of the specification is work in progress. It is produced by the QT4
                Working Group, officially the W3C XSLT 4.0 Extensions Community Group. Individual
                functions specified in the document may be at different stages of review, reflected
                in their <b>History</b> notes. Comments are invited, in the form of GitHub
                issues at <a href="https://github.com/qt4cg/qtspecs">https://github.com/qt4cg/qtspecs</a>.</p>
      </div>
      <nav id="toc">
         
         <div id="function-finder">
            <div class="ffheader">FUNCTION FINDER</div>
            <div><span>Function search: <input id="select-fn" list="fn-list" type="text"> <button id="help-select-fn-button">?</button></span><p id="help-select-fn" style="display:none;">Type a function name, or press down arrow for a list.</p><datalist id="fn-list">
                  <option value="bin:and⁣"></option>
                  <option value="bin:bin⁣"></option>
                  <option value="bin:decode-string⁣"></option>
                  <option value="bin:encode-string⁣"></option>
                  <option value="bin:find⁣"></option>
                  <option value="bin:from-octets⁣"></option>
                  <option value="bin:hex⁣"></option>
                  <option value="bin:insert-before⁣"></option>
                  <option value="bin:join⁣"></option>
                  <option value="bin:length⁣"></option>
                  <option value="bin:not⁣"></option>
                  <option value="bin:octal⁣"></option>
                  <option value="bin:or⁣"></option>
                  <option value="bin:pack-double⁣"></option>
                  <option value="bin:pack-float⁣"></option>
                  <option value="bin:pack-integer⁣"></option>
                  <option value="bin:pad-left⁣"></option>
                  <option value="bin:pad-right⁣"></option>
                  <option value="bin:part⁣"></option>
                  <option value="bin:shift⁣"></option>
                  <option value="bin:to-octets⁣"></option>
                  <option value="bin:unpack-double⁣"></option>
                  <option value="bin:unpack-float⁣"></option>
                  <option value="bin:unpack-integer⁣"></option>
                  <option value="bin:unpack-unsigned-integer⁣"></option>
                  <option value="bin:xor⁣"></option></datalist></div>
         </div>
         <h2><a id="contents"></a>Table of Contents</h2>
         <ol class="toc">
            <li><a href="#intro"><span class="secno">1 </span><span class="content toc-chg">Introduction</span></a>
               
               <ol class="toc">
                  <li><a href="#error.management"><span class="secno">1.1 </span><span class="content">Error management</span></a></li>
                  <li><a href="#type"><span class="secno">1.2 </span><span class="content toc-chg">Binary type</span></a></li>
                  <li><a href="#testing"><span class="secno">1.3 </span><span class="content">Test suite</span></a></li>
                  <li><a href="#conformance"><span class="secno">1.4 </span><span class="content">Conformance</span></a></li>
                  <li><a href="#namespace-prefixes"><span class="secno">1.5 </span><span class="content">Namespaces and prefixes</span></a></li>
                  <li><a href="#func-signatures"><span class="secno">1.6 </span><span class="content">Function signatures and descriptions</span></a></li>
               </ol>
            </li>
            <li><a href="#use-cases"><span class="secno">2 </span><span class="content">Use cases</span></a>
               
               <ol class="toc">
                  <li><a href="#example-JPEG"><span class="secno">2.1 </span><span class="content">Example – finding JPEG size</span></a></li>
                  <li><a href="#example-ASN1"><span class="secno">2.2 </span><span class="content toc-chg">Example – reading and writing variable length ASN.1 integers</span></a></li>
               </ol>
            </li>
            <li><a href="#loading"><span class="secno">3 </span><span class="content toc-chg">Loading and saving binary data</span></a>
               
               <ol class="toc"></ol>
            </li>
            <li><a href="#constants"><span class="secno">4 </span><span class="content">Defining 'constants' and conversions</span></a>
               
               <ol class="toc">
                  <li><a href="#func-bin-hex"><span class="secno">4.1 </span><span class="content">bin:hex</span></a></li>
                  <li><a href="#func-bin-binary"><span class="secno">4.2 </span><span class="content">bin:bin</span></a></li>
                  <li><a href="#func-bin-octal"><span class="secno">4.3 </span><span class="content">bin:octal</span></a></li>
                  <li><a href="#func-bin-to-octets"><span class="secno">4.4 </span><span class="content">bin:to-octets</span></a></li>
                  <li><a href="#func-bin-from-octets"><span class="secno">4.5 </span><span class="content">bin:from-octets</span></a></li>
               </ol>
            </li>
            <li><a href="#basic-operations"><span class="secno">5 </span><span class="content toc-chg">Basic operations</span></a>
               
               <ol class="toc">
                  <li><a href="#func-bin-length"><span class="secno">5.1 </span><span class="content">bin:length</span></a></li>
                  <li><a href="#func-bin-part"><span class="secno">5.2 </span><span class="content">bin:part</span></a></li>
                  <li><a href="#func-bin-join"><span class="secno">5.3 </span><span class="content">bin:join</span></a></li>
                  <li><a href="#func-bin-insert-before"><span class="secno">5.4 </span><span class="content">bin:insert-before</span></a></li>
                  <li><a href="#func-bin-pad-left"><span class="secno">5.5 </span><span class="content">bin:pad-left</span></a></li>
                  <li><a href="#func-bin-pad-right"><span class="secno">5.6 </span><span class="content">bin:pad-right</span></a></li>
                  <li><a href="#func-bin-find"><span class="secno">5.7 </span><span class="content">bin:find</span></a></li>
               </ol>
            </li>
            <li><a href="#text-encoding"><span class="secno">6 </span><span class="content">Text decoding and encoding</span></a>
               
               <ol class="toc">
                  <li><a href="#func-bin-decode-string"><span class="secno">6.1 </span><span class="content">bin:decode-string</span></a></li>
                  <li><a href="#func-bin-encode-string"><span class="secno">6.2 </span><span class="content">bin:encode-string</span></a></li>
               </ol>
            </li>
            <li><a href="#numeric-packing"><span class="secno">7 </span><span class="content">Packing and unpacking of encoded numeric values</span></a>
               
               <ol class="toc">
                  <li><a href="#number-rep"><span class="secno">7.1 </span><span class="content">Numeric representation</span></a><ol class="toc">
                        <li><a href="#endianness"><span class="secno">7.1.1 </span><span class="content">Number 'endianness'</span></a></li>
                        <li><a href="#integer"><span class="secno">7.1.2 </span><span class="content">Integer representation</span></a></li>
                        <li><a href="#floating"><span class="secno">7.1.3 </span><span class="content">Representation of floating point numbers</span></a></li>
                     </ol>
                  </li>
                  <li><a href="#func-bin-pack-double"><span class="secno">7.2 </span><span class="content">bin:pack-double</span></a></li>
                  <li><a href="#func-bin-pack-float"><span class="secno">7.3 </span><span class="content">bin:pack-float</span></a></li>
                  <li><a href="#func-bin-pack-integer"><span class="secno">7.4 </span><span class="content">bin:pack-integer</span></a></li>
                  <li><a href="#func-bin-unpack-double"><span class="secno">7.5 </span><span class="content">bin:unpack-double</span></a></li>
                  <li><a href="#func-bin-unpack-float"><span class="secno">7.6 </span><span class="content">bin:unpack-float</span></a></li>
                  <li><a href="#func-bin-unpack-integer"><span class="secno">7.7 </span><span class="content">bin:unpack-integer</span></a></li>
                  <li><a href="#func-bin-unpack-unsigned-integer"><span class="secno">7.8 </span><span class="content">bin:unpack-unsigned-integer</span></a></li>
               </ol>
            </li>
            <li><a href="#bitwise"><span class="secno">8 </span><span class="content">Bitwise operations</span></a>
               
               <ol class="toc">
                  <li><a href="#func-bin-or"><span class="secno">8.1 </span><span class="content">bin:or</span></a></li>
                  <li><a href="#func-bin-xor"><span class="secno">8.2 </span><span class="content">bin:xor</span></a></li>
                  <li><a href="#func-bin-and"><span class="secno">8.3 </span><span class="content">bin:and</span></a></li>
                  <li><a href="#func-bin-not"><span class="secno">8.4 </span><span class="content">bin:not</span></a></li>
                  <li><a href="#func-bin-shift"><span class="secno">8.5 </span><span class="content">bin:shift</span></a></li>
               </ol>
            </li>
            <li><a href="#biblio"><span class="secno">A </span><span class="content">References</span></a>
               
               <ol class="toc">
                  <li><a href="#normative-biblio"><span class="secno">A.1 </span><span class="content">Normative references</span></a></li>
                  <li><a href="#non-normative-biblio"><span class="secno">A.2 </span><span class="content">Non-normative references</span></a></li>
               </ol>
            </li>
            <li><a href="#error-summary"><span class="secno">B </span><span class="content">Error summary</span></a>
               
               <ol class="toc"></ol>
            </li>
            <li><a href="#glossary"><span class="secno">C </span><span class="content">Glossary</span></a> (Non-Normative)
               <ol class="toc"></ol>
            </li>
            <li><a href="#other-functions"><span class="secno">D </span><span class="content">Other Functions</span></a> (Non-Normative)
               <ol class="toc">
                  <li><a href="#functions-in-other-w3c-specs"><span class="secno">D.1 </span><span class="content">XPath Functions and Operators Defined in Other W3C Recommendations</span></a><ol class="toc">
                        <li><a href="#functions-defined-in-XPathFO"><span class="secno">D.1.1 </span><span class="content">Functions and Operators Defined in XPath and XQuery Functions and
                                 Operators</span></a></li>
                     </ol>
                  </li>
                  <li><a href="#functions-defined-by-community-groups"><span class="secno">D.2 </span><span class="content">Functions Defined by Community Groups</span></a><ol class="toc">
                        <li><a href="#functions-defined-in-EXPathFile"><span class="secno">D.2.1 </span><span class="content">Functions Defined in EXPath File</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="#impl-def"><span class="secno">E </span><span class="content">Checklist of implementation-defined features</span></a> (Non-Normative)
               <ol class="toc"></ol>
            </li>
            <li><a href="#changelog"><span class="secno">F </span><span class="content">Changes since version 1.0</span></a> (Non-Normative)
               <ol class="toc">
                  <li><a href="#changes-summary"><span class="secno">F.1 </span><span class="content">Summary of Changes</span></a></li>
                  <li><a href="#changes-to-function-signatures"><span class="secno">F.2 </span><span class="content">Changes to Function Signatures</span></a></li>
                  <li><a href="#editorial-changes"><span class="secno">F.3 </span><span class="content">Editorial Changes</span></a></li>
               </ol>
            </li>
            <li><a href="#back-compatibility"><span class="secno">G </span><span class="content">Compatibility with Previous Versions</span></a> (Non-Normative)
               <ol class="toc"></ol>
            </li>
         </ol>
      </nav>
      <hr>
      <div class="body">
         <div class="div1">
            
            <h2><a id="intro"></a>1 Introduction</h2>
            <div class="changes">
               <p class="changesHeading">Changes in 4.0&nbsp;<a href="#type">⬇</a></p>
               <ol>
                  <li>
                     <p>Use the arrows to browse significant changes since the 1.0 version of this
                    specification.</p>
                  </li>
                  <li>
                     <p>Sections with significant changes are marked Δ in the table of contents. New
                    functions introduced in this version are marked ➕ in the table of
                    contents.</p>
                  </li>
               </ol>
            </div>
            <p>The purpose of this document is to define functions to manipulate binary data for
                inclusion in XPath 4.0, XQuery 4.0, and XSLT 4.0. The binary data is represented by
                the type <code>xs:base64Binary</code> as defined by <a href="https://www.w3.org/TR/xmlschema-2/#base64Binary">Section 
3.2.16 base64Binary</a><sup><small>XS2</small></sup>.</p>
            <p>The exact syntax used to call these functions and operators is specified in <a href="#xpath-40">[XML Path Language (XPath) 4.0]</a>, <a href="#xquery-40">[XQuery 4.1: An XML Query Language]</a> and <a href="#xslt-40">[XSL Transformations (XSLT) Version 4.0]</a>. </p>
            <p>This document defines several classes of functions:</p>
            <ul>
               <li>
                  <p>Functions to create binary 'constants' and convert between the binary forms
                        and sequences of octets. </p>
               </li>
               <li>
                  <p>Functions to perform basic operations on binary values, such as joining,
                        selecting and searching.</p>
               </li>
               <li>
                  <p>Functions to perform bitwise operations.</p>
               </li>
               <li>
                  <p>Functions to pack or unpack numeric values from within or into binary
                        data.</p>
               </li>
               <li>
                  <p>Functions to decode or encode strings from within or into binary data&gt;.</p>
               </li>
            </ul>
            <p>References to specific sections of some other specifications are indicated by
                cross-document links in this document. Each such link consists of a pointer to a
                specific section followed a superscript specifying the linked document. The
                superscripts have the following meanings: FILE40 <a href="#expath-file-40">[EXPath File 4.0]</a>,
                FO40 <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> and XS2 <a href="#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a></p>
            <div class="div2">
               
               <h3><a id="error.management"></a>1.1 Error management</h3>
               <p>Error conditions are identified by a code (a <code>QName</code>.) When such an
                    error condition is reached in the evaluation of an expression, a dynamic error
                    is thrown, with the corresponding error code (as if the standard XPath function
                    <code>error()</code> had been called.)</p>
               <p>In this specification these codes use the
                    <code>http://expath.org/ns/binary</code> namespace and a 'descriptive string'
                    local part, e.g. <code>bin:index-out-of-range</code>, rather than the
                    <code>http://www.w3.org/2005/xqt-errors</code> namespace and alpha-numeric local
                    part, e.g. <code>err:FOCH0004</code>, used in <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a>. These error codes were chosen originally in the 1.0 version of 2013.</p>
            </div>
            <div class="div2">
               
               <h3><a id="type"></a>1.2 Binary type</h3>
               <div class="changes">
                  <p class="changesHeading">Changes in 4.0&nbsp;<a href="#example-ASN1">⬇</a>&nbsp;<a href="#intro">⬆</a></p>
                  <ol>
                     <li>
                        <p>Binary 'data' arguments to the functions are now declared to be either
                        <code>xs:hexBinary</code> or <code>xs:base64Binary</code>, but binary
                        function results remain of type <code>xs:base64Binary</code>. This should
                        not cause any backward incompatibilities as casting back and forth between
                        the two representations has been possible since at least version
                        2.0</p>
                     </li>
                  </ol>
               </div>
               <p>The principal binary type within this module is <code>xs:base64Binary</code> as
                    defined by <a href="https://www.w3.org/TR/xmlschema-2/#base64Binary">Section 
3.2.16 base64Binary</a><sup><small>XS2</small></sup>.</p>
               <p>In general, for the functions defined in this specification, if the result return
                    is binary data, it will <em>always</em> be of type
                    <code>xs:base64Binary</code>. Any arguments to a function which are considered
                    to be binary data can be either of type <code>xs:base64Binary</code> or
                    <code>xs:hexBinary</code>. </p>
               <p>Conversion to and from <code>xs:hexBinary</code> can be performed by casting with
                    <code>xs:hexBinary()</code> and <code>xs:base64Binary()</code>.</p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>As these types are normally implemented as wrappers around byte array
                        structures containing the data, and differ only when being serialized to or
                        parsed from text, such casting in-process should not involve data
                        copying.</p>
               </div>
               <p>An item of type <code>xs:base64Binary</code> can be <em>empty</em>, i.e.
                    contain no data, (in the same way that items of type <code>xs:string</code> can
                    contain no characters.) Where 'data' arguments to functions that return binary
                    data are optional (i.e. <code><em>$arg as type</em>?</code>) and any of
                    those optional arguments is set to the empty sequence, in general an empty
                    sequence is returned, rather than an empty item of type
                    <code>xs:base64Binary</code>. </p>
            </div>
            <div class="div2">
               
               <h3><a id="testing"></a>1.3 Test suite</h3>
               <p>A suite of test-cases for all the functions defined in this module, in <a href="#qt3">[QT3]</a> format, is defined at <a href="#tests.binary">[Test-suite]</a>.</p>
            </div>
            <div class="div2">
               
               <h3><a id="conformance"></a>1.4 Conformance</h3>
               <p>This specification follows the general remarks on and terminology for conformance
                    given in <a href="https://qt4cg.org/specifications/xpath-functions-40/#conformance">Section 1.2 Conformance</a><sup><small>FO</small></sup></p>
               <p>In this document, text labeled as an example or as a note is provided for
                    explanatory purposes and is not normative.</p>
            </div>
            <div class="div2">
               
               <h3><a id="namespace-prefixes"></a>1.5 Namespaces and prefixes</h3>
               <p>The functions defined in this document are contained exclusively in the namespace
                    <code>http://expath.org/ns/binary</code> and referenced using a
                    <code>xs:QName</code> binding to that namespace.</p>
               <p>This document uses the prefix <code>bin</code> to refer to this namespace.
                    User-written applications can choose a different prefix to refer to the
                    namespace, so long as it is bound to the correct URI. In accordance with current
                    practice, it is recommended that the prefix <code>bin</code> be reserved for use
                    with this namespace.</p>
            </div>
            <div class="div2">
               
               <h3><a id="func-signatures"></a>1.6 Function signatures and descriptions</h3>
               <p>Each function (or group of functions having the same name) is defined in this
                    specification using a standard proforma, full details of which can be found in
                        <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-signatures">Section 1.5 Function signatures and descriptions</a><sup><small>FO</small></sup>. In particular in this update
                    (trailing) optional arguments for functions (introduced in XPath 4.0) are used
                    where appropriate in the signatures, rather than multiple-arity signatures as
                    previously. </p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="use-cases"></a>2 Use cases</h2>
            <p>Development of this specification was driven by requirements which some XML
                developers regularly encounter in examining or generating data which is presented in
                binary, or other non-textual forms. Some typical use cases include:</p>
            <ul>
               <li>
                  <p>Getting the dimensions of an image file.</p>
               </li>
               <li>
                  <p>Extracting image metadata.</p>
               </li>
               <li>
                  <p>Processing images embedded as base64 encodings within a SOAP message.</p>
               </li>
               <li>
                  <p>Processing legacy text files which use different encodings in separate
                        sections.</p>
               </li>
               <li>
                  <p>Generating PDF files from SVG graphical data.</p>
               </li>
            </ul>
            <div class="div2">
               
               <h3><a id="example-JPEG"></a>2.1 Example – finding JPEG size</h3>
               <p>As an example, the following code reads the binary form of a JPEG image file,
                    searches for the 'Start of Frame/DCT' segment, and unpacks the relevant binary
                    sections to integers of height and width:</p>
               <div class="example">
                  <div class="exampleInner">
                     <pre class="small">
&lt;xsl:variable name="binary" select="file:read-binary(@href)" as="xs:base64Binary"/&gt;
&lt;xsl:variable name="location" select="bin:find($binary,0,bin:hex('FFC0'))"/&gt;
&lt;size width="{bin:unpack-unsigned-integer($binary,$location+5,2,'most-significant-first')}"
      height="{bin:unpack-unsigned-integer($binary,$location+7,2,'most-significant-first')}"/&gt;
               
      → &lt;size width="377" height="327"/&gt;</pre>
                  </div>
               </div>
               <p>(The <code>'most-significant-first'</code> argument ensures the numeric
                    conversion is 'big-endian', which is the format in JPEG.)</p>
            </div>
            <div class="div2">
               
               <h3><a id="example-ASN1"></a>2.2 Example – reading and writing variable length ASN.1 integers</h3>
               <div class="changes">
                  <p class="changesHeading">Changes in 4.0&nbsp;<a href="#loading">⬇</a>&nbsp;<a href="#type">⬆</a></p>
                  <ol>
                     <li>
                        <p>The functions in this example have been moved into a differing namespace
                        prefix (<code>asn:</code>) to avoid suggesting that they are part of the
                        supported function set.</p>
                     </li>
                  </ol>
               </div>
               <p><a href="#asn1">[ASN.1]</a> defines several formats for identifying and encoding
                    arbitrary-sized telecommunications data as streams of octets. Many of these
                    forms specify the length of data as part of their encoding. For example, in the
                    Basic Encoding Rules, an integer is represented as the following series of
                    octets:</p>
               <ul>
                  <li>
                     <p>Type – 1 octet – in this case the value <code>0x02</code></p>
                  </li>
                  <li>
                     <p>Length – ≥ 1 octet – the number of octets in the integer value. The
                            length field itself can be variable in length – to accommodate VERY
                            large integers (requiring more than 127 octets to represent, e.g.
                            2048-bit crypto keys.)</p>
                  </li>
                  <li>
                     <p>Payload – ≥ 0 octets – the octets of the integer value in
                            most-significant-first order.</p>
                  </li>
               </ul>
               <div class="example">
                  <p>To generate such a representation for an integer from XSLT/XPath, the
                        following code might be used:</p>
                  <div class="exampleInner">
                     <pre class="small">
 &lt;xsl:function name="asn:int-octets" as="xs:integer*"&gt;
    &lt;xsl:param name="value" as="xs:integer"/&gt;
    &lt;xsl:sequence
            select="if($value ne 0) then (bin:int-octets($value idiv 256),$value mod 256) else ()"/&gt;
 &lt;/xsl:function&gt;
 &lt;xsl:function name="asn:encode-ASN-integer" as="xs:base64Binary"&gt;
     &lt;xsl:param name="int" as="xs:integer"/&gt;
     &lt;xsl:variable name="octets" select="bin:int-octets($int)"/&gt;
     &lt;xsl:variable name="length-octets"
         select="let $l := count($octets) return
         (if($l le 127) then $l 
         else (let $lo := bin:int-octets($l) return (128+count($lo),$lo)))"/&gt;
     &lt;xsl:sequence select="bin:from-octets((2,$length-octets,$octets))"/&gt;
 &lt;/xsl:function&gt;</pre>
                  </div>
                  <p>The function <code>asn:int-octets</code> returns a sequence of all the
                        'significant' octets of the integer (i.e. eliminating leading 'zeroes') in
                        most-significant order. Examples of the encoding are: </p>
                  <div class="exampleInner">
                     <pre class="small">
 asn:encode-ASN-integer(0) → "AgA="
 asn:encode-ASN-integer(1234) → "AgIE0g=="
 asn:encode-ASN-integer(123456789123456789123456789123456789) → "Ag8XxuPAMviQRa10ZoQEXxU="
               
 asn:encode-ASN-integer(123456789.. 900 digits... 123456789) → "AoIBdgaTo....EBF8V"</pre>
                  </div>
                  <p>The first example requires no octets to encode zero, hence its octets are
                        <code>2,0</code>. Both the second and third examples can be represented in
                        less than 128 octets (2 and 15 respectively), so length is encoded as a
                        single octet. The first three octets of the result for the last example,
                        which encodes a 900-digit integer, are: <code>2,130,1</code> indicating that
                        the data is represented by (130-128) * 256 + 1 = 513 octets and the length
                        required two octets to encode.</p>
                  <p>Decoding is a matter of compound use of the integer decoding function:</p>
                  <div class="exampleInner">
                     <pre class="small">
 &lt;xsl:function name="asn:decode-ASN-integer" as="xs:integer"&gt;
     &lt;xsl:param name="in" as="xs:base64Binary"/&gt;
     &lt;xsl:sequence
         select="let $lo := bin:unpack-unsigned-integer($in,1,1,'BE') return (
         if($lo le 127) then bin:unpack-unsigned-integer($in,2,$lo,'BE') 
            else (let $lo2 := $lo - 128, $lo3 := bin:unpack-unsigned-integer($in,2,$lo2,'BE') return
            bin:unpack-unsigned-integer($in,2+$lo2,$lo3,'BE')))"
      /&gt;
 &lt;/xsl:function&gt;</pre>
                  </div>
                  <p>(all numbers in ASN are 'big-endian') and the examples from above
                        reverse:</p>
                  <div class="exampleInner">
                     <pre class="small">
 asn:decode-ASN-integer(xs:base64Binary("AgA=")) → 0
 asn:decode-ASN-integer(xs:base64Binary("AgIE0g==")) → 1234
 asn:encode-ASN-integer(xs:base64Binary("Ag8XxuPAMviQRa10ZoQEXxU=")) 
     → 123456789123456789123456789123456789              
 asn:encode-ASN-integer(xs:base64Binary("AoIBdgaTo....EBF8V")) 
     → 123456789.. 900 digits... 123456789</pre>
                  </div>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="loading"></a>3 Loading and saving binary data</h2>
            <div class="changes">
               <p class="changesHeading">Changes in 4.0&nbsp;<a href="#basic-operations">⬇</a>&nbsp;<a href="#example-ASN1">⬆</a></p>
               <ol>
                  <li>
                     <p>The <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> function
                    <code>fn:binary-resource</code> has been added to the list of useful
                    functions.</p>
                  </li>
               </ol>
            </div>
            <p>This module defines no specific functions for reading and writing binary data from
                resources, but other specifications provide some suitable mechanisms.</p>
            <p><a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> provides a function to retrieve binary
                resources:</p>
            <div class="proto">
               <table class="proto" border="0">
                  <tr class="name">
                     <td colspan="3"><code class="function">fn:fn:binary-resource</code>(</td>
                  </tr>
                  <tr class="arg">
                     <td><code>$filesource</code></td>
                     <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                     <td></td>
                  </tr>
                  <tr class="return-type">
                     <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary</code></code></td>
                  </tr>
               </table>
            </div>
            <p>The EXPath File Module <a href="#expath-file-40">[EXPath File 4.0]</a> provides three functions
                suitable for use in file-based situations:</p>
            <div class="proto">
               <table class="proto" border="0">
                  <tr class="name">
                     <td colspan="3"><code class="function">fn:file:read-binary</code>(</td>
                  </tr>
                  <tr class="arg">
                     <td><code>$file</code></td>
                     <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td>
                     <td></td>
                  </tr>
                  <tr class="arg">
                     <td><code>$offset</code></td>
                     <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td>
                     <td><code class="assign">:=&nbsp;</code><code>0</code>,</td>
                  </tr>
                  <tr class="arg">
                     <td><code>$size</code></td>
                     <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td>
                     <td><code class="assign">:=&nbsp;</code><code>()</code></td>
                  </tr>
                  <tr class="return-type">
                     <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary</code></code></td>
                  </tr>
               </table>
            </div>
            <p>which reads binary data from an existing file, with an optional offset and size.</p>
            <div class="proto">
               <table class="proto" border="0">
                  <tr class="name">
                     <td colspan="3"><code class="function">fn:file:write-binary</code>(</td>
                  </tr>
                  <tr class="arg">
                     <td><code>$file</code></td>
                     <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td>
                     <td></td>
                  </tr>
                  <tr class="arg">
                     <td><code>$value</code></td>
                     <td><code class="as">as&nbsp;</code><code class="type"><code>xs:base64Binary</code></code></td>
                     <td></td>
                  </tr>
                  <tr class="return-type">
                     <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td>
                  </tr>
               </table>
            </div>
            <p>which writes binary data into a new or existing file.</p>
            <div class="proto">
               <table class="proto" border="0">
                  <tr class="name">
                     <td colspan="3"><code class="function">fn:file:append-binary</code>(</td>
                  </tr>
                  <tr class="arg">
                     <td><code>$file</code></td>
                     <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string</code></code>,</td>
                     <td></td>
                  </tr>
                  <tr class="arg">
                     <td><code>$value</code></td>
                     <td><code class="as">as&nbsp;</code><code class="type"><code>xs:base64Binary</code></code></td>
                     <td></td>
                  </tr>
                  <tr class="return-type">
                     <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>empty-sequence()</code></code></td>
                  </tr>
               </table>
            </div>
            <p>which appends binary data onto the end of an extant file.</p>
         </div>
         <div class="div1">
            
            <h2><a id="constants"></a>4 Defining 'constants' and conversions</h2>
            <p>Users of the package may need to define binary 'constants' within their code or
                examine the basic octets. The following functions support these:</p>
            <div class="div2">
               
               <h3><a id="func-bin-hex"></a>4.1 bin:hex</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the binary form of the set of octets written as a sequence of (ASCII) hex
                digits ([0-9A-Fa-f]).</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:hex</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>
                <code>$in</code> will be effectively zero-padded from the left to generate an
                integral number of octets, i.e. an even number of hexadecimal digits.</p>
                     <p>Byte order in the result follows (per-octet) character order in the string.</p>
                     <p> If <code>$in</code> is an empty string, then the result will be a
                <code>xs:base64Binary</code> with no embedded data.</p>
                     <p>If <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40non-numeric-character" title="bin:non-numeric-character">bin:non-numeric-character</a>] is raised if <code>$in</code>
                cannot be parsed as a hexadecimal number.</p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">When the input string has an even number of characters, this function behaves
                similarly to the double cast
                <code>xs:base64Binary(xs:hexBinary(<em>$string</em>))</code>.</p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <table class="medium">
                           <tbody>
                              <tr>
                                 <td colspan="2">
                                    <div class="exampleInner">
                                       <pre>bin:hex('11223F4E') → "ESI/Tg=="</pre>
                                    </div>
                                 </td>
                              </tr>
                              <tr>
                                 <td colspan="2">
                                    <div class="exampleInner">
                                       <pre>bin:hex('1223F4E') → "ASI/Tg=="</pre>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-binary"></a>4.2 bin:bin</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the binary form of the set of octets written as a sequence of (8-wise)
                (ASCII) binary digits ([01]).</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:bin</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>
                <code>$in</code> will be effectively zero-padded from the left to generate an
                integral number of octets (i.e. the number of characters in <code>$in</code> will be
                a multiple of 8).</p>
                     <p>Byte order in the result follows (per-octet) character order in the string.</p>
                     <p> If <code>$in</code> is an empty string, then the result will be a
                <code>xs:base64Binary</code> with no embedded data.</p>
                     <p>If <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40non-numeric-character" title="bin:non-numeric-character">bin:non-numeric-character</a>] is raised if <code>$in</code>
                cannot be parsed as a binary number.</p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <table class="medium">
                           <tbody>
                              <tr>
                                 <td colspan="2">
                                    <div class="exampleInner">
                                       <pre>bin:bin('1101000111010101') → "0dU="</pre>
                                    </div>
                                 </td>
                              </tr>
                              <tr>
                                 <td colspan="2">
                                    <div class="exampleInner">
                                       <pre>bin:bin('1000111010101') → "EdU="</pre>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-octal"></a>4.3 bin:octal</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the binary form of the set of octets written as a sequence of (ASCII) octal
                digits ([0-7]).</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:octal</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>
                <code>$in</code> will be effectively zero-padded from the left to generate an
                integral number of octets.</p>
                     <p>Byte order in the result follows (per-octet) character order in the string.</p>
                     <p> If <code>$in</code> is an empty string, then the result will be a
                <code>xs:base64Binary</code> with no embedded data.</p>
                     <p>If <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40non-numeric-character" title="bin:non-numeric-character">bin:non-numeric-character</a>] is raised if <code>$in</code>
                cannot be parsed as an octal number.</p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <table class="medium">
                           <tbody>
                              <tr>
                                 <td colspan="2">
                                    <div class="exampleInner">
                                       <pre>bin:octal('11223047') → "JSYn"</pre>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-to-octets"></a>4.4 bin:to-octets</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns binary data as a sequence of integer octets.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:to-octets</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:integer*</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If <code>$in</code> is a zero length binary data then the empty sequence is
                returned.</p>
                     <p>Octets are returned as integers from 0 to 255.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-from-octets"></a>4.5 bin:from-octets</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Converts a sequence of octets into binary data.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:from-octets</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer*</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Octets are integers from 0 to 255.</p>
                     <p>If <code>$in</code> is the empty sequence, the function returns zero-sized binary
                data.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40octet-out-of-range" title="bin:octet-out-of-range">bin:octet-out-of-range</a>] is raised if one of the octets lies
                outside the range 0 – 255. </p>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="basic-operations"></a>5 Basic operations</h2>
            <div class="changes">
               <p class="changesHeading">Changes in 4.0&nbsp;<a href="#loading">⬆</a></p>
               <ol>
                  <li>
                     <p>The function <code>find-all</code> in the example for <a href="#func-bin-find"><code>bin:find</code></a>
                    has been moved into a differing namespace prefix (<code>f:</code>) to avoid
                    suggesting that it is part of the supported function set.</p>
                  </li>
               </ol>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-length"></a>5.1 bin:length</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the size of binary data, measured in octets.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:length</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:integer</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns the size of binary data in octets.</p>
                  </dd>
                  <dt class="label">Formal Equivalent</dt>
                  <dd>
                     <p>The effect of the function is equivalent to the result of the following XPath expression.</p>
                     <div class="exampleInner">
                        <pre>count(bin:to-octets($in))</pre>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-part"></a>5.2 bin:part</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns a specified part of binary data.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:part</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$offset</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$size</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>()</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns a section of binary data starting at the <code>$offset</code> octet. If
                <code>$size</code> is defined, the size of the returned binary data is
                <code>$size</code> octets. If <code>$size</code> is absent, all remaining data from
                <code>$offset</code> is returned.</p>
                     <p>The <code>$offset</code> is zero based.</p>
                     <p>The values of <code>$offset</code> and <code>$size</code>
                <span class="verb">must</span> be non-negative integers.</p>
                     <p>It is a dynamic error if <code>$offset</code> + <code>$size</code> is larger than the
                size of the binary data in <code>$in</code>.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40index-out-of-range" title="bin:index-out-of-range">bin:index-out-of-range</a>] is raised if <code>$offset</code> is
                negative or <code>$offset + $size</code> is larger than the size of the binary data
                of <code>$in</code>.</p>
                     <p>[<a href="#ERRBIN40negative-size" title="bin:negative-size">bin:negative-size</a>] is raised if <code>$size</code> is
                negative.</p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">Note that <code>fn:subsequence()</code> and <code>fn:substring()</code>
                 both use <code>xs:double</code> for offset and size –
                this is a legacy from XPath 1.0.</p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <table class="medium">
                           <tbody>
                              <tr>
                                 <td colspan="2">
                                    <p>Testing whether <code>$data</code> variable starts with binary content consistent
                    with a PDF file:</p>
                                 </td>
                              </tr>
                              <tr>
                                 <td colspan="2">
                                    <div class="exampleInner">
                                       <pre>bin:part($data, 0, 4) eq bin:hex("25504446")</pre>
                                    </div>
                                 </td>
                              </tr>
                              <tr>
                                 <td colspan="2">
                                    <p><code>25504446</code> is the magic number for PDF files: it is the US-ASCII
                    encoded hexadecimal value for <code>%PDF</code>.
                    <a href="#func-bin-encode-string"><code>bin:encode-string</code></a> can be used
                    to convert a string to its binary representation.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-join"></a>5.3 bin:join</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the binary data created by concatenating the binary data items in a
                sequence.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:join</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)*</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The function returns an <code>xs:base64Binary</code> created by concatenating the
                items in the sequence <code>$in</code>, in order.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns a binary
                item containing no data bytes.</p>
                  </dd>
                  <dt class="label">Formal Equivalent</dt>
                  <dd>
                     <p>The effect of the function is equivalent to the result of the following XPath expression.</p>
                     <div class="exampleInner">
                        <pre>bin:from-octets($in !
            bin:to-octets(.))</pre>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-insert-before"></a>5.4 bin:insert-before</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Inserts additional binary data at a given point in other binary data.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:insert-before</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$offset</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$extra</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:base64Binary?</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns binary data consisting sequentially of the data from <code>$in</code> upto
                and including the <code>$offset - 1</code> octet, followed by all the data from
                <code>$extra</code>, and then the remaining data from <code>$in</code>.</p>
                     <p>The <code>$offset</code> is zero based.</p>
                     <p>The value of <code>$offset</code>
                <span class="verb">must</span> be a non-negative integer.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                     <p>If the value of <code>$extra</code> is the empty sequence, the function returns
                <code>$in</code>.</p>
                     <p>If <code>$offset eq 0</code> the result is the binary concatenation of
                <code>$extra</code> and <code>$in</code>, i.e. equivalent to
                <code>bin:join(($extra,$in))</code>.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40index-out-of-range" title="bin:index-out-of-range">bin:index-out-of-range</a>] is raised if <code>$offset</code> is
                negative or <code>$offset</code> is larger than the size of the binary data of
                <code>$in</code>.</p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">Note that when <code>$offset gt 0 and $offset lt bin:size($in)</code> the function is
                equivalent to:</p>
                     <div class="exampleInner">
                        <pre>bin:join((bin:part($in,0,$offset - 1),$extra,bin:part($in,$offset)))</pre>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-pad-left"></a>5.5 bin:pad-left</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the binary data created by padding <code>$in</code> with <code>$size</code>
                octets from the left. The padding octet values are <code>$octet</code> or zero if
                omitted.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:pad-left</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$size</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>0</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The function returns an <code>xs:base64Binary</code> created by padding the input
                with <code>$size</code> octets <em>in front of</em> the input. If
                <code>$octet</code> is specified, the padding octets each have that value, otherwise
                they are initialized to 0.</p>
                     <p><code>$size</code>
                <span class="verb">must</span> be a non-negative integer.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Formal Equivalent</dt>
                  <dd>
                     <p>The effect of the function is equivalent to the result of the following XPath expression, except in error cases.</p>
                     <div class="exampleInner">
                        <pre>bin:join((bin:from-octets((1 to $size) ! $octet), $in))</pre>
                     </div>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40negative-size" title="bin:negative-size">bin:negative-size</a>] is raised if <code>$size</code> is
                negative.</p>
                     <p>[<a href="#ERRBIN40octet-out-of-range" title="bin:octet-out-of-range">bin:octet-out-of-range</a>] is raised if <code>$octet</code>
                lies outside the range 0 – 255. </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-pad-right"></a>5.6 bin:pad-right</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the binary data created by padding <code>$in</code> with <code>$size</code>
                blank octets from the right. The padding octet values are <code>$octet</code> or
                zero if omitted.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:pad-right</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$size</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>0</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The function returns an <code>xs:base64Binary</code> created by padding the input
                with <code>$size</code> blank octets <em>after</em> the input. If
                <code>$octet</code> is specified, the padding octets each have that value, otherwise
                they are initialized to 0.</p>
                     <p><code>$size</code>
                <span class="verb">must</span> be a non-negative integer.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Formal Equivalent</dt>
                  <dd>
                     <p>The effect of the function is equivalent to the result of the following XPath expression, except in error cases.</p>
                     <div class="exampleInner">
                        <pre>bin:join((bin:from-octets($in,(1 to $size) ! $octet)))</pre>
                     </div>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40negative-size" title="bin:negative-size">bin:negative-size</a>] is raised if <code>$size</code> is
                negative.</p>
                     <p>[<a href="#ERRBIN40octet-out-of-range" title="bin:octet-out-of-range">bin:octet-out-of-range</a>] is raised if <code>$octet</code>
                lies outside the range 0 – 255. </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-find"></a>5.7 bin:find</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the first location in <code>$in</code> of <code>$search</code>, starting at
                the <code>$offset</code> octet.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:find</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$offset</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$search</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:integer?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The function returns the first location of the binary search sequence in the input,
                or if not found, the empty sequence.</p>
                     <p>If <code>$search</code> is empty <code>$offset</code> is returned.</p>
                     <p>The value of <code>$offset</code>
                <span class="verb">must</span> be a non-negative integer.</p>
                     <p>The <code>$offset</code> is zero based.</p>
                     <p>The returned location is zero based.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40index-out-of-range" title="bin:index-out-of-range">bin:index-out-of-range</a>] is raised if <code>$offset</code> is
                negative or <code>$offset</code> is larger than the size of the binary data of
                <code>$in</code>.</p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">Finding all the matches can be accomplished with simple recursive application:</p>
                     <div class="exampleInner">
                        <pre class="small">
&lt;xsl:function name="f:find-all" as="xs:integer*"&gt;
     &lt;xsl:param name="data" as="xs:base64Binary?"/&gt;
     &lt;xsl:param name="offset" as="xs:integer"/&gt;
     &lt;xsl:param name="pattern" as="xs:base64Binary"/&gt;
     &lt;xsl:sequence
         select="if(bin:length($pattern) = 0) then ()
         else let $found := bin:find($data,$offset,$pattern) return
         if($found) then ($found,
             if($found + 1 lt bin:length($data)) then f:find-all($data,$found + 1,$pattern) else ())
             else ()"/&gt;
&lt;/xsl:function&gt;</pre>
                     </div>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="text-encoding"></a>6 Text decoding and encoding</h2>
            <div class="div2">
               
               <h3><a id="func-bin-decode-string"></a>6.1 bin:decode-string</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Decodes binary data as a string in a given encoding.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:decode-string</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$encoding</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'utf-8'</code>,</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$offset</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>0</code>,</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$size</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>()</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:string?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If <code>$offset</code> and <code>$size</code> are provided, the <code>$size</code>
                octets from <code>$offset</code> are decoded. If <code>$offset</code> alone is
                provided, octets from <code>$offset</code> to the end are decoded, otherwise the
                entire octet sequence is used.</p>
                     <p>The <code>$encoding</code> argument is the name of an encoding. The values for this
                attribute follow the same rules as for the <code>encoding</code> attribute in an XML
                declaration. The only values which every implementation is
                    <span class="verb">required</span> to recognize are <code>utf-8</code> and
                <code>utf-16</code>.</p>
                     <p>If <code>$encoding</code> is omitted, <code>utf-8</code> encoding is assumed.</p>
                     <p>The values of <code>$offset</code> and <code>$size</code>
                <span class="verb">must</span> be non-negative integers.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                     <p><code>$offset</code> is zero based.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40index-out-of-range" title="bin:index-out-of-range">bin:index-out-of-range</a>]is raised if <code>$offset</code> is
                negative or <code>$offset + $size</code> is larger than the size of the binary data
                of <code>$in</code>.</p>
                     <p>[<a href="#ERRBIN40negative-size" title="bin:negative-size">bin:negative-size</a>] is raised if <code>$size</code> is
                negative.</p>
                     <p>[<a href="#ERRBIN40unknown-encoding" title="bin:unknown-encoding">bin:unknown-encoding</a>] is raised if <code>$encoding</code> is
                invalid or not supported by the implementation.</p>
                     <p>[<a href="#ERRBIN40conversion-error" title="bin:conversion-error">bin:conversion-error</a>] is raised if there is an error or
                malformed input during decoding the string. Additional information about the error
                may be passed through suitable error reporting mechanisms – this is
                implementation-dependant.</p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <table class="medium">
                           <tbody>
                              <tr>
                                 <td colspan="2">
                                    <p>Testing whether <code>$data</code> variable starts with binary content consistent
                    with a PDF file:</p>
                                 </td>
                              </tr>
                              <tr>
                                 <td colspan="2">
                                    <div class="exampleInner">
                                       <pre>bin:decode-string($data, 'UTF-8', 0, 4) eq '%PDF'</pre>
                                    </div>
                                 </td>
                              </tr>
                              <tr>
                                 <td colspan="2">
                                    <p>The first four characters of a PDF file are <code>'%PDF'</code>.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-encode-string"></a>6.2 bin:encode-string</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Encodes a string into binary data using a given encoding.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:encode-string</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$encoding</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'utf-8'</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The <code>$encoding</code> argument is the name of an encoding. The values for this
                attribute follow the same rules as for the <code>encoding</code> attribute in an XML
                declaration. The only values which every implementation is
                    <span class="verb">required</span> to recognize are <code>utf-8</code> and
                <code>utf-16</code>.</p>
                     <p>If <code>$encoding</code> is omitted, <code>utf-8</code> encoding is assumed.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40unknown-encoding" title="bin:unknown-encoding">bin:unknown-encoding</a>] is raised if <code>$encoding</code> is
                invalid or not supported by the implementation.</p>
                     <p>[<a href="#ERRBIN40conversion-error" title="bin:conversion-error">bin:conversion-error</a>]is raised if there is an error or
                malformed input during encoding the string. Additional information about the error
                may be passed through suitable error reporting mechanisms – this is
                implementation-dependant.</p>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="numeric-packing"></a>7 Packing and unpacking of encoded numeric values</h2>
            <div class="div2">
               
               <h3><a id="number-rep"></a>7.1 Numeric representation</h3>
               <div class="div3">
                  
                  <h4><a id="endianness"></a>7.1.1 Number 'endianness'</h4>
                  <p>Packing and unpacking numeric values within binary data can be performed in
                        'most-significant-first' ('big-endian') or 'least-significant-first'
                        ('little-endian') octet order. The default is
                            <em>'most-significant-first'</em>. The relevant functions have an
                        optional parameter <code>$octet-order</code> whose string value controls the
                        order. Least-significant-first order is indicated by any of the values
                        <code>least-significant-first</code>, <code>little-endian</code> or
                        <code>LE</code>. Most-significant-first order is indicated by any of the
                        values <code>most-significant-first</code>, <code>big-endian</code> or
                        <code>BE</code>.</p>
               </div>
               <div class="div3">
                  
                  <h4><a id="integer"></a>7.1.2 Integer representation</h4>
                  <p></p>
                  <p>Integers within binary data are represented, or assumed to be represented, as
                        an integral number of octets. Integers where <code>$length</code> is greater
                        than 8 octets (and thus not representable as a <code>long</code>) might be
                        expected in some situations, e.g. encryption. Whether the range of integers
                        is limited to <code>±2^63</code> is <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-dependent">implementation-dependent</a><sup><small>FO</small></sup>.</p>
               </div>
               <div class="div3">
                  
                  <h4><a id="floating"></a>7.1.3 Representation of floating point numbers</h4>
                  <p>Care should be taken with the packing and unpacking of floating point numbers
                        (<code>xs:float</code> and <code>xs:double</code>). The binary
                        representations are expected to correspond with those of the IEEE
                        single/double-precision 32/64-bit floating point types <a href="#ieee754">[IEEE 754-1985]</a>. Consequently they will occupy 4 or 8 octets when packed.</p>
                  <p>Positive and negative infinities are supported. <code>INF</code> maps to
                        <code>0x7f80
            0000</code> (float), <code>0x7ff0 0000 0000 0000</code>
                        (double). <code>-INF</code> maps to <code>0xff80 0000</code> (float),
                        <code>0xfff0 0000 0000 0000</code> (double).</p>
                  <p>Negative zero (<code>0x8000 0000 0000 0000</code> double,
                        <code>0x8000 0000</code> float) encountered during unpacking will yield
                        negative zero forms (e.g. <code>-xs:double(0.0)</code>) and negative zeros
                        will be written as a result of packing.</p>
                  <p><a href="#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> provides only one form of <code>NaN</code> which
                        corresponds to a 'quiet' <code>NaN</code> with zero payload of <a href="#ieee754">[IEEE 754-1985]</a> with forms <code>0x7fc0 0000</code> (float),
                        <code>0x7ff8 0000 0000 0000</code> (double). These are the bit forms that
                        will be packed.</p>
                  <p> 'Signalling' <code>NaN</code> values (<code>0x7f80 0001</code> →
                        <code>0x7fbf ffff</code> or <code>0xff80 0001</code> →
                        <code>0xffbf ffff</code>, <code>0x7ff0 0000 0000
            0001</code> → <code>0x7ff7 ffff ffff ffff</code> or
                        <code>0xfff0 0000 0000
            0001</code> → <code>0xfff7 ffff ffff ffff</code>) encountered
                        during unpacking will be replaced by 'quiet' <code>NaN</code>. Any low-order
                        payload in a unpacked 'quiet' <code>NaN</code> is also zeroed. </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-pack-double"></a>7.2 bin:pack-double</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the 8-octet binary representation of a <a href="http://www.w3.org/TR/xmlschema-2/#double">double</a> value.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:pack-double</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:double</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet-order</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'most-significant-first'</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Most-significant-octet-first number representation is assumed unless the
                <code>$octet-order</code> parameter is specified. Acceptable values for
                <code>$octet-order</code> are described in <a href="#endianness"><b>7.1.1 Number 'endianness'</b></a>.</p>
                     <p>The binary representation will correspond with that of the IEEE double-precision
                64-bit floating point type <a href="#ieee754">[IEEE 754-1985]</a>. For more details see <a href="#floating"><b>7.1.3 Representation of floating point numbers</b></a>.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40unknown-significance-order" title="bin:unknown-significance-order">bin:unknown-significance-order</a>] is raised if the value
                <code>$octet-order</code> is unrecognized.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-pack-float"></a>7.3 bin:pack-float</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the 4-octet binary representation of a <a href="http://www.w3.org/TR/xmlschema-2/#float">float</a> value.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:pack-float</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:float</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet-order</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'most-significant-first'</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Most-significant-octet-first number representation is assumed unless the
                <code>$octet-order</code> parameter is specified. Acceptable values for
                <code>$octet-order</code> are described in <a href="#endianness"><b>7.1.1 Number 'endianness'</b></a>.</p>
                     <p>The binary representation will correspond with that of the IEEE single-precision
                32-bit floating point type <a href="#ieee754">[IEEE 754-1985]</a>. For more details see <a href="#floating"><b>7.1.3 Representation of floating point numbers</b></a>.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40unknown-significance-order" title="bin:unknown-significance-order">bin:unknown-significance-order</a>] is raised if the value
                <code>$octet-order</code> is unrecognized.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-pack-integer"></a>7.4 bin:pack-integer</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the <em>twos-complement</em> binary representation of an integer value
                treated as <code>$size</code> octets long. Any 'excess' high-order bits are
                discarded.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:pack-integer</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$size</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet-order</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'most-significant-first'</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Most-significant-octet-first number representation is assumed unless the
                <code>$octet-order</code> parameter is specified. Acceptable values for
                <code>$octet-order</code> are described in <a href="#endianness"><b>7.1.1 Number 'endianness'</b></a>.</p>
                     <p>Specifying a <code>$size</code> of zero yields an empty binary data.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40unknown-significance-order" title="bin:unknown-significance-order">bin:unknown-significance-order</a>] is raised if the value
                <code>$octet-order</code> is unrecognized.</p>
                     <p>[<a href="#ERRBIN40negative-size" title="bin:negative-size">bin:negative-size</a>] is raised if <code>$size</code> is
                negative.</p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">If the integer being packed has a maximum precision of <code>$size</code> octets,
                then signed/unsigned versions are not necessary. If the data is considered unsigned,
                then the most significant bit of the bottom <code>$size</code> octets has a normal
                positive (<code>2^(8 *$size - 1)</code>) meaning. If it is considered to be a signed
                value, then the MSB and all the higher order, discarded bits will be '1' for a
                negative value and '0' for a positive or zero. If this function were to check the
                'sizing' of the supplied integer against the packing size, then any values of MSB
                and the discarded higher order bits other than 'all 1' or 'all 0' would constitute
                an error. <em>This function does not perform such checking.</em></p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-unpack-double"></a>7.5 bin:unpack-double</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Extract <a href="http://www.w3.org/TR/xmlschema-2/#double">double</a> value
                stored at the particular offset in binary data.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:unpack-double</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$offset</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet-order</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'most-significant-first'</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:double</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Extract the <a href="http://www.w3.org/TR/xmlschema-2/#double">double</a> value
                stored in the 8 successive octets from the <code>$offset</code> octet of the binary
                data of <code>$in</code>.</p>
                     <p>Most-significant-octet-first number representation is assumed unless the
                <code>$octet-order</code> parameter is specified. Acceptable values for
                <code>$octet-order</code> are described in <a href="#endianness"><b>7.1.1 Number 'endianness'</b></a>.</p>
                     <p>The value of <code>$offset</code>
                <span class="verb">must</span> be a non-negative integer.</p>
                     <p>The <code>$offset</code> is zero based.</p>
                     <p>The binary representation is expected to correspond with that of the IEEE
                double-precision 64-bit floating point type <a href="#ieee754">[IEEE 754-1985]</a>. For more
                details see <a href="#floating"><b>7.1.3 Representation of floating point numbers</b></a>.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40index-out-of-range" title="bin:index-out-of-range">bin:index-out-of-range</a>] is raised if <code>$offset</code> is
                negative or <code>$offset + 8</code> (octet-length of <code>xs:double</code>) is
                larger than the size of the binary data of <code>$in</code>.</p>
                     <p>[<a href="#ERRBIN40unknown-significance-order" title="bin:unknown-significance-order">bin:unknown-significance-order</a>] is raised if the value
                <code>$octet-order</code> is unrecognized.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-unpack-float"></a>7.6 bin:unpack-float</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Extract <a href="http://www.w3.org/TR/xmlschema-2/#float">float</a> value stored
                at the particular offset in binary data.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:unpack-float</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$offset</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet-order</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'most-significant-first'</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:float</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Extract the <a href="http://www.w3.org/TR/xmlschema-2/#float">float</a> value
                stored in the 4 successive octets from the <code>$offset</code> octet of the binary
                data of <code>$in</code>.</p>
                     <p>Most-significant-octet-first number representation is assumed unless the
                <code>$octet-order</code> parameter is specified. Acceptable values for
                <code>$octet-order</code> are described in <a href="#endianness"><b>7.1.1 Number 'endianness'</b></a>.</p>
                     <p>The value of <code>$offset</code>
                <span class="verb">must</span> be a non-negative integer.</p>
                     <p>The <code>$offset</code> is zero based.</p>
                     <p>The binary representation is expected to correspond with that of the IEEE
                single-precision 32-bit floating point type <a href="#ieee754">[IEEE 754-1985]</a>. For more
                details see <a href="#floating"><b>7.1.3 Representation of floating point numbers</b></a>.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40index-out-of-range" title="bin:index-out-of-range">bin:index-out-of-range</a>] is raised if <code>$offset</code> is
                negative or <code>$offset + 4</code> (octet-length of <code>xs:float</code>) is
                larger than the size of the binary data of <code>$in</code>.</p>
                     <p>[<a href="#ERRBIN40unknown-significance-order" title="bin:unknown-significance-order">bin:unknown-significance-order</a>] is raised if the value
                <code>$octet-order</code> is unrecognized.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-unpack-integer"></a>7.7 bin:unpack-integer</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns a signed integer value represented by the <code>$size</code> octets starting
                from <code>$offset</code> in the input binary representation. Necessary sign
                extension is performed (i.e. the result is negative if the high order bit is
                '1').</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:unpack-integer</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$offset</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$size</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet-order</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'most-significant-first'</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:integer</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Most-significant-octet-first number representation is assumed unless the
                <code>$octet-order</code> parameter is specified. Acceptable values for
                <code>$octet-order</code> are described in <a href="#endianness"><b>7.1.1 Number 'endianness'</b></a>.</p>
                     <p>The values of <code>$offset</code> and <code>$size</code>
                <span class="verb">must</span> be non-negative integers.</p>
                     <p><code>$offset</code> is zero based.</p>
                     <p>Specifying a <code>$size</code> of zero yields the integer <code>0</code>.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40index-out-of-range" title="bin:index-out-of-range">bin:index-out-of-range</a>] is raised if <code>$offset</code> is
                negative or <code>$offset + $size</code> is larger than the size of the binary data
                of <code>$in</code>.</p>
                     <p>[<a href="#ERRBIN40negative-size" title="bin:negative-size">bin:negative-size</a>] is raised if <code>$size</code> is
                negative.</p>
                     <p>[<a href="#ERRBIN40unknown-significance-order" title="bin:unknown-significance-order">bin:unknown-significance-order</a>] is raised if the value
                <code>$octet-order</code> is unrecognized.</p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">For discussion on integer range see <a href="#integer"><b>7.1.2 Integer representation</b></a>.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-unpack-unsigned-integer"></a>7.8 bin:unpack-unsigned-integer</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns an unsigned integer value represented by the <code>$size</code> octets
                starting from <code>$offset</code> in the input binary representation.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:unpack-unsigned-integer</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$offset</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$size</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$octet-order</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:string?</code></code></td>
                              <td><code class="assign">:=&nbsp;</code><code>'most-significant-first'</code></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:integer</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Most-significant-octet-first number representation is assumed unless the
                <code>$octet-order</code> parameter is specified. Acceptable values for
                <code>$octet-order</code> are described in <a href="#endianness"><b>7.1.1 Number 'endianness'</b></a>.</p>
                     <p>The values of <code>$offset</code> and <code>$size</code>
                <span class="verb">must</span> be non-negative integers.</p>
                     <p>The <code>$offset</code> is zero based.</p>
                     <p>Specifying a <code>$size</code> of zero yields the integer <code>0</code>.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40index-out-of-range" title="bin:index-out-of-range">bin:index-out-of-range</a>] is raised if <code>$offset</code> is
                negative or <code>$offset + $size</code> is larger than the size of the binary data
                of <code>$in</code>.</p>
                     <p>[<a href="#ERRBIN40negative-size" title="bin:negative-size">bin:negative-size</a>] is raised if <code>$size</code> is
                negative.</p>
                     <p>[<a href="#ERRBIN40unknown-significance-order" title="bin:unknown-significance-order">bin:unknown-significance-order</a>] is raised if the value
                <code>$octet-order</code> is unrecognized.</p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">For discussion on integer range see <a href="#integer"><b>7.1.2 Integer representation</b></a>.</p>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="bitwise"></a>8 Bitwise operations</h2>
            <div class="div2">
               
               <h3><a id="func-bin-or"></a>8.1 bin:or</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the "bitwise or" of two binary arguments.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:or</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$a</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$b</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns "bitwise or" applied between <code>$a</code> and <code>$b</code>.</p>
                     <p>If either argument is the empty sequence, an empty sequence is returned.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40differing-length-arguments" title="bin:differing-length-arguments">bin:differing-length-arguments</a>] is raised if the input
                arguments are of differing length.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-xor"></a>8.2 bin:xor</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the "bitwise xor" of two binary arguments.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:xor</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$a</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$b</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns "bitwise exclusive or" applied between <code>$a</code> and
                <code>$b</code>.</p>
                     <p>If either argument is the empty sequence, an empty sequence is returned.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40differing-length-arguments" title="bin:differing-length-arguments">bin:differing-length-arguments</a>] is raised if the input
                arguments are of differing length.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-and"></a>8.3 bin:and</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the "bitwise and" of two binary arguments.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:and</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$a</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$b</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns "bitwise and" applied between <code>$a</code> and <code>$b</code>.</p>
                     <p>If either argument is the empty sequence, an empty sequence is returned.</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>[<a href="#ERRBIN40differing-length-arguments" title="bin:differing-length-arguments">bin:differing-length-arguments</a>] is raised if the input
                arguments are of differing length.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-not"></a>8.4 bin:not</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the "bitwise not" of a binary argument.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:not</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns "bitwise not" applied to <code>$in</code>.</p>
                     <p>If the argument is the empty sequence, an empty sequence is returned.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-bin-shift"></a>8.5 bin:shift</h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Shift bits in binary data.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto">
                        <table class="proto" border="0">
                           <tr class="name">
                              <td colspan="3"><code class="function">bin:shift</code>(</td>
                           </tr>
                           <tr class="arg">
                              <td><code>$in</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>(xs:hexBinary | xs:base64Binary)?</code></code>,</td>
                              <td></td>
                           </tr>
                           <tr class="arg">
                              <td><code>$by</code></td>
                              <td><code class="as">as&nbsp;</code><code class="type"><code>xs:integer</code></code></td>
                              <td></td>
                           </tr>
                           <tr class="return-type">
                              <td colspan="3">)<code class="as">&nbsp;as&nbsp;</code><code><code>xs:base64Binary?</code></code></td>
                           </tr>
                        </table>
                     </div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If <code>$by</code> is positive then bits are shifted <code>$by</code> times to the
                left.</p>
                     <p>If <code>$by</code> is negative then bits are shifted <code>-$by</code> times to the
                right.</p>
                     <p>If <code>$by</code> is zero, the result is identical to <code>$in</code>.</p>
                     <p>If <code>|$by|</code> is greater than the bit-length of <code>$in</code> then an
                all-zeros result, of the same length as <code>$in</code>, is returned.</p>
                     <p><code>|$by|</code> can be greater than 8, implying multi-byte shifts.</p>
                     <p>The result always has the same size as <code>$in</code>.</p>
                     <p>The shifting is logical: zeros are placed into discarded bits.</p>
                     <p>If the value of <code>$in</code> is the empty sequence, the function returns an empty
                sequence.</p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">Bit shifting across byte boundaries implies 'big-endian' treatment, i.e. the leftmost
                (high-order) bit when shifted left becomes the low-order bit of the preceding
                byte.</p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <table class="medium">
                           <tbody>
                              <tr class="testdiv">
                                 <th style="vertical-align:top">Expression:</th>
                                 <td style="vertical-align:top">
                                    <div class="exampleInner">
                                       <pre>bin:shift(bin:hex("000001"), 17)</pre>
                                    </div>
                                 </td>
                              </tr>
                              <tr>
                                 <th style="vertical-align:top">Result:</th>
                                 <td style="vertical-align:top">
                                    <div class="exampleInner">
                                       <pre>bin:hex("020000")</pre>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </dd>
               </dl>
            </div>
         </div>
      </div>
      <div class="back">
         <div class="div1">
            
            <h2><a id="biblio"></a>A References</h2>
            <div class="div2">
               
               <h3><a id="normative-biblio"></a>A.1 Normative references</h3>
               <dl>
                  <dt class="label"><span><a id="expath-bin"></a>EXPath Binary 1.0</span></dt>
                  <dd>
                     <div>
                        <a href="http://expath.org/spec/binary">Binary Module 1.0</a>. Jirka
                        Kosek and John Lumley, editors. EXPath Module. 3 December 2013.</div>
                  </dd>
                  <dt class="label"><span><a id="expath-file"></a>EXPath File 1.0</span></dt>
                  <dd>
                     <div>
                        <a href="http://expath.org/spec/file">File Module 1.0</a>. Christian
                        Grün, Matthias Brantner and Gabriel Petrovay, editors. EXPath Module 20
                        February 2015.</div>
                  </dd>
                  <dt class="label"><span><a id="expath-file-40"></a>EXPath File 4.0</span></dt>
                  <dd>
                     <div>
                        <a href="https://qt4cg.org/specifications/EXPath/file-40/Overview.html"><cite>EXPath File Module 4.0</cite></a>, Christian
                        Grün, Matthias Brantner and Gabriel Petrovay, editors. 
                        XSLT Extensions Community Group,
                        World Wide Web Consortium.</div>
                  </dd>
                  <dt class="label"><span><a id="ieee754"></a>IEEE 754-1985</span></dt>
                  <dd>
                     <div>IEEE Standard for Binary Floating-Point
                        Arithmetic. See <a href="http://standards.ieee.org/reading/ieee/std_public/description/busarch/754-1985_desc.html">http://standards.ieee.org/reading/ieee/std_public/description/busarch/754-1985_desc.html</a></div>
                  </dd>
                  <dt class="label"><span><a id="ieee754-2019"></a>IEEE 754-2019</span></dt>
                  <dd>
                     <div>IEEE. <em>IEEE Standard for
                           Floating-Point Arithmetic.</em>
                        </div>
                  </dd>
                  <dt class="label"><span><a id="xpath20"></a>XML Path Language (XPath) 2.0</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xpath20/"><cite>XML Path Language (XPath) 2.0 (Second Edition)</cite></a>,
                        Don Chamberlin, Anders Berglund, Scott Boag, <em>et. al.</em>, Editors.
                        World Wide Web Consortium,
                        14 December 2010.
                        This version is https://www.w3.org/TR/2010/REC-xpath20-20101214/.
                        The <a href="https://www.w3.org/TR/xpath20/">latest version</a>
                        is available at https://www.w3.org/TR/xpath20/.</div>
                  </dd>
                  <dt class="label"><span><a id="xpath-functions-40"></a>XQuery and XPath Functions and Operators 4.0</span></dt>
                  <dd>
                     <div>
                        <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html"><cite>XQuery and XPath Functions and Operators 4.0</cite></a>,
                        XSLT Extensions Community Group,
                        World Wide Web Consortium.</div>
                  </dd>
                  <dt class="label"><span><a id="xpath-40"></a>XML Path Language (XPath) 4.0</span></dt>
                  <dd>
                     <div>
                        
                        </div>
                  </dd>
                  <dt class="label"><span><a id="xslt-40"></a>XSL Transformations (XSLT) Version 4.0</span></dt>
                  <dd>
                     <div>
                        <em>CITATION: T.B.D.</em>
                        </div>
                  </dd>
                  <dt class="label"><span><a id="xpath-datamodel-40"></a>XQuery and XPath Data Model (XDM) 4.0</span></dt>
                  <dd>
                     <div>
                        <a href="https://qt4cg.org/specifications/xpath-datamodel-40/Overview.html"><cite>XQuery and XPath Data Model (XDM) 4.0</cite></a>,
                        XSLT Extensions Community Group,
                        World Wide Web Consortium.</div>
                  </dd>
                  <dt class="label"><span><a id="xquery-40"></a>XQuery 4.1: An XML Query Language</span></dt>
                  <dd>
                     <div>
                        <em>CITATION: T.B.D.</em>
                        </div>
                  </dd>
                  <dt class="label"><span><a id="xmlschema-2"></a>XML Schema Part 2: Datatypes Second Edition</span></dt>
                  <dd>
                     <div> XML
                        Schema Part 2: Datatypes Second Edition, Oct. 28 2004. Available at: <a href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a>
                        </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="non-normative-biblio"></a>A.2 Non-normative references</h3>
               <dl>
                  <dt class="label"><span><a id="asn1"></a>ASN.1</span></dt>
                  <dd>
                     <div> OSI networking and system aspects – Abstract Syntax
                        Notation One (ASN.1) – see <a href="http://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf">ASN.1 encoding rules: Specification of Basic Encoding Rules (BER),
                           Canonical Encoding Rules (CER) and Distinguished Encoding Rules (DER)
                           </a>. ITU-T X.690 (07/2002) </div>
                  </dd>
                  <dt class="label"><span><a id="tests.binary"></a>Test-suite</span></dt>
                  <dd>
                     <div>The test suite for this module, using
                        QT3 format, is in the EXPath repository <a href="http://github.com/expath/expath-cg/tree/master/tests/qt3/binary">http://github.com/expath/expath-cg</a> in the directory
                        tests/qt3/binary/</div>
                  </dd>
                  <dt class="label"><span><a id="qt3"></a>QT3</span></dt>
                  <dd>
                     <div>
                        <a href="http://dev.w3.org/2011/QT3-test-suite/">XML Query Test
                           Suite</a>. W3C 21 June 2013. </div>
                  </dd>
                  <dt class="label"><span><a id="expath"></a>EXPath</span></dt>
                  <dd>
                     <div>EXPath: Collaboratively Defining Open Standards
                        for Portable XPath Extensions. <a href="http://expath.org/">http://expath.org/</a>.</div>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="error-summary"></a>B Error summary</h2>
            <p>The error text provided with these errors is non-normative.</p>
            <dl>
               <dt><a name="ERRBIN40conversion-error"></a>bin:conversion-error</dt>
               <dd>
                  <p>Error in converting to/from a string.</p>
               </dd>
               <dt><a name="ERRBIN40differing-length-arguments"></a>bin:differing-length-arguments, Arguments of different length</dt>
               <dd>
                  <p>The two arguments to a bitwise operation are of differing lengths.</p>
               </dd>
               <dt><a name="ERRBIN40index-out-of-range"></a>bin:index-out-of-range</dt>
               <dd>
                  <p>Attempting to retrieve data outside the meaningful range of a binary data
                        type.</p>
               </dd>
               <dt><a name="ERRBIN40negative-size"></a>bin:negative-size</dt>
               <dd>
                  <p>Size of binary portion, required numeric size or padding is negative.</p>
               </dd>
               <dt><a name="ERRBIN40non-numeric-character"></a>bin:non-numeric-character</dt>
               <dd>
                  <p>Wrong character in binary 'numeric constructor' string.</p>
               </dd>
               <dt><a name="ERRBIN40octet-out-of-range"></a>bin:octet-out-of-range</dt>
               <dd>
                  <p>Attempting to pack binary value with octet outside range 0-255.</p>
               </dd>
               <dt><a name="ERRBIN40unknown-encoding"></a>bin:unknown-encoding</dt>
               <dd>
                  <p>The specified encoding is not supported.</p>
               </dd>
               <dt><a name="ERRBIN40unknown-significance-order"></a>bin:unknown-significance-order</dt>
               <dd>
                  <p>Unknown octet-order value.</p>
               </dd>
            </dl>
         </div>
         <div class="div1">
            
            <h2><a id="glossary"></a>C Glossary (Non-Normative)</h2>
            <dl></dl>
         </div>
         <div class="div1">
            
            <h2><a id="other-functions"></a>D Other Functions (Non-Normative)</h2>
            <p>This Appendix describes some sources of functions or operators that fall outside the
                scope of the function library defined in this specification. It includes both
                function specifications and function implementations. Inclusion of a function in
                this appendix does not constitute any kind of recommendation or endorsement; neither
                is omission from this appendix to be construed negatively. This Appendix does not
                attempt to give any information about licensing arrangements for these function
                specifications or implementations.</p>
            <div class="div2">
               
               <h3><a id="functions-in-other-w3c-specs"></a>D.1 XPath Functions and Operators Defined in Other W3C Recommendations</h3>
               <p>A number of W3C Recommendations make use of XPath, and in some cases such
                    Recommmendations define additional functions to be made available when XPath is
                    used in a specific host language.</p>
               <div class="div3">
                  
                  <h4><a id="functions-defined-in-XPathFO"></a>D.1.1 Functions and Operators Defined in XPath and XQuery Functions and
                     Operators</h4>
                  <p>Of particular interest to this specification, <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> defines<ul><li><p>Comparison operators
                                    on <code>xs:hexBinary</code> and <code>xs:base64Binary</code>
                                    values, defining the semantics of the <code>eq</code>,
                                    <code>ne</code>, <code>lt</code> and <code>ge</code> operators
                                    applied to binary data. Each returns a boolean
                                    value.</p></li><li><p>A function to retrieve the value of a
                                    binary resource</p></li></ul></p>
                  <table class="data">
                     <thead>
                        <tr>
                           <th>Function name</th>
                           <th>Availability</th>
                           <th>Notes</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>
                              <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-binary-equal">Section 11.1.1 op:binary-equal</a><sup><small>FO</small></sup>
                              </td>
                           <td>XPath4.0+</td>
                           <td>Returns <code>true</code> if both binary values contain the same
                              octet sequence.</td>
                        </tr>
                        <tr>
                           <td>
                              <a href="https://qt4cg.org/specifications/xpath-functions-40/#func-binary-less-than">Section 11.1.2 op:binary-less-than</a><sup><small>FO</small></sup>
                              </td>
                           <td>XPath4.0+</td>
                           <td>Returns <code>true</code> if the first argument is less than the
                              second.</td>
                        </tr>
                        <tr>
                           <td>
                              <span class="markup-error">[TITLE OF FO40 SPEC, TITLE OF func-binary-resource SECTION]<sup><small>FO40</small></sup></span>
                              </td>
                           <td>XPath4.0+</td>
                           <td>Returns a resource as <code>xs:base64Binary</code>.</td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="functions-defined-by-community-groups"></a>D.2 Functions Defined by Community Groups</h3>
               <div class="div3">
                  
                  <h4><a id="functions-defined-in-EXPathFile"></a>D.2.1 Functions Defined in EXPath File</h4>
                  <p>Of particular interest to this specification, <a href="#expath-file-40">[EXPath File 4.0]</a>
                        defines the following functions for input and output of
                        <code>xs:base64Binary</code> values:</p>
                  <table class="data">
                     <thead>
                        <tr>
                           <th>Function name</th>
                           <th>Availability</th>
                           <th>Notes</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>
                              <a href="https://qt4cg.org/specifications/EXPath/file-40/#func-file-read-binary">Section 4.5 file:read-binary</a><sup><small>FILE</small></sup>
                              </td>
                           <td>XPath4.0+</td>
                           <td>Returns the content of a file in its Base64 representation.</td>
                        </tr>
                        <tr>
                           <td>
                              <a href="https://qt4cg.org/specifications/EXPath/file-40/#func-file-write-binary">Section 4.9 file:write-binary</a><sup><small>FILE</small></sup>
                              </td>
                           <td>XPath4.0+</td>
                           <td>Writes a Base64 item as binary data to a file.</td>
                        </tr>
                        <tr>
                           <td>
                              <a href="https://qt4cg.org/specifications/EXPath/file-40/#func-file-append-binary">Section 4.2 file:append-binary</a><sup><small>FILE</small></sup>
                              </td>
                           <td>XPath4.0+</td>
                           <td>Appends a Base64 item as binary data to a file.</td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="impl-def"></a>E Checklist of implementation-defined features (Non-Normative)</h2>
            <ol></ol>
         </div>
         <div class="div1">
            
            <h2><a id="changelog"></a>F Changes since version 1.0 (Non-Normative)</h2>
            <div class="div2">
               
               <h3><a id="changes-summary"></a>F.1 Summary of Changes</h3>
               <ol>
                  <li>
                     <p>Use the arrows to browse significant changes since the 1.0 version of this
                    specification.</p>
                     <p>See <a href="#intro"><b>1 Introduction</b></a></p>
                  </li>
                  <li>
                     <p>Sections with significant changes are marked Δ in the table of contents. New
                    functions introduced in this version are marked ➕ in the table of
                    contents.</p>
                     <p>See <a href="#intro"><b>1 Introduction</b></a></p>
                  </li>
                  <li>
                     <p>Binary 'data' arguments to the functions are now declared to be either
                        <code>xs:hexBinary</code> or <code>xs:base64Binary</code>, but binary
                        function results remain of type <code>xs:base64Binary</code>. This should
                        not cause any backward incompatibilities as casting back and forth between
                        the two representations has been possible since at least version
                        2.0</p>
                     <p>See <a href="#type"><b>1.2 Binary type</b></a></p>
                  </li>
                  <li>
                     <p>The functions in this example have been moved into a differing namespace
                        prefix (<code>asn:</code>) to avoid suggesting that they are part of the
                        supported function set.</p>
                     <p>See <a href="#example-ASN1"><b>2.2 Example – reading and writing variable length ASN.1 integers</b></a></p>
                  </li>
                  <li>
                     <p>The <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> function
                    <code>fn:binary-resource</code> has been added to the list of useful
                    functions.</p>
                     <p>See <a href="#loading"><b>3 Loading and saving binary data</b></a></p>
                  </li>
                  <li>
                     <p>The function <code>find-all</code> in the example for <a href="#func-bin-find"><code>bin:find</code></a>
                    has been moved into a differing namespace prefix (<code>f:</code>) to avoid
                    suggesting that it is part of the supported function set.</p>
                     <p>See <a href="#basic-operations"><b>5 Basic operations</b></a></p>
                  </li>
               </ol>
            </div>
            <div class="div2">
               
               <h3><a id="changes-to-function-signatures"></a>F.2 Changes to Function Signatures</h3>
               <ol class="enumar">
                  <li>
                     <p>The function signatures of all the specified signatures now use the
                            'optional argument' syntax of XPath 4.0 where appropriate, rather than
                            giving several signatures of differing arity. Other than that, no
                            intended change to the semantics of the functions are assumed.</p>
                  </li>
               </ol>
            </div>
            <div class="div2">
               
               <h3><a id="editorial-changes"></a>F.3 Editorial Changes</h3>
               <p>These changes are not highlighted in the change-marked version of the
                    specification.</p>
               <ol class="enumar">
                  <li>
                     <p>The example functions in <a href="#example-ASN1"><b>2.2 Example – reading and writing variable length ASN.1 integers</b></a> have been moved
                            into a differing namespace prefix (<code>asn:</code>) to avoid
                            suggesting that they are part of the supported function set. This is in
                            accordance with the principle that the namespace
                            <code>http://expath.org/ns/binary</code> is reserved solely for use in
                            QNames for functions specified in this module.</p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="back-compatibility"></a>G Compatibility with Previous Versions (Non-Normative)</h2>
            <p>This section summarizes the extent to which this specification is compatible with
                previous versions.</p>
            <p>Version 4.0 of this function library is fully backwards compatible with version 1.0,
                except as noted below:</p>
            <ol class="enumar">
               <li>
                  <p>The use of optional arguments in the function signatures means that minor
                        alterations to possible function calls, which would be invalid in 1.0, are
                        now supported. For example:</p>
                  <div class="exampleInner">
                     <pre>bin:decode-string($string,'utf-8',0,())</pre>
                  </div>
                  <p>would be invalid in 1.0, as the fourth argument <code>$size</code> is defined
                        to be of type <code>xs:integer</code>. It is valid for 4.0 as the empty
                        sequence denotes default behaviour, that is decoding all octets after
                        <code>$offset</code>
                    </p>
                  <p>The functions <a href="#func-bin-decode-string"><code>bin:decode-string</code></a>,<a href="#func-bin-encode-string"><code>bin:encode-string</code></a>,
                        <a href="#func-bin-pack-double"><code>bin:pack-double</code></a>, <a href="#func-bin-pack-float"><code>bin:pack-float</code></a>,
                        <a href="#func-bin-pack-integer"><code>bin:pack-integer</code></a>, <a href="#func-bin-pad-left"><code>bin:pad-left</code></a>,
                        <a href="#func-bin-pad-right"><code>bin:pad-right</code></a>, <a href="#func-bin-part"><code>bin:part</code></a>,
                        <a href="#func-bin-unpack-double"><code>bin:unpack-double</code></a>, <a href="#func-bin-unpack-float"><code>bin:unpack-float</code></a>,
                        <a href="#func-bin-unpack-integer"><code>bin:unpack-integer</code></a> and <a href="#func-bin-unpack-unsigned-integer"><code>bin:unpack-unsigned-integer</code></a>
                        all have similar incompatibilities.</p>
               </li>
            </ol>
         </div>
      </div><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body>
</html><!--XSLT Processor: Saxonica SAXON HE 12.2-->