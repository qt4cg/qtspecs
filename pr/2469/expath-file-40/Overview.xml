<?xml version="1.0" encoding="utf-8"?><html lang="EN"><head><title>EXPath File Module 4.0 </title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" type="text/css" href="css/w3c-base.css"/><link rel="stylesheet" href="css/qtspecs.css"/><link rel="stylesheet" href="css/xpath-functions-40.css"/><script src="js/fo-datalist.js"/></head><body><div class="head"><p><a href="https://www.w3.org/"><img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" height="48" width="72"/></a></p>
<h1><a id="title"/>EXPath File Module 4.0 </h1>
<h2><a id="w3c-doctype"/>W3C Editor's Draft 21 February 2026</h2><dl><dt>This version:</dt><dd><a href="https://qt4cg.org/pr/2469/EXPath/file-40//">https://qt4cg.org/pr/2469/EXPath/file-40/</a></dd><dt>Latest version of EXPath File Module 4.0:</dt><dd>
      <a href="https://qt4cg.org/specifications/EXPath/file-40/">https://qt4cg.org/specifications/EXPath/file-40/</a>
    </dd><dt>Most recent Recommendation of EXPath File Module:</dt><dd>
      <a href="http://expath.org/spec/file">http://expath.org/spec/file</a>
      
    </dd><dt>Editor:</dt><dd>Christian Grün, BaseX GmbH</dd></dl><p>Please check the <a href="https://www.w3.org/XML/2017/qt-errata/xpath-functions-31-errata.html"><strong>errata</strong></a> for any errors or issues reported since publication.</p><p>See also <a href="https://www.w3.org/2003/03/Translations/byTechnology?technology=xpath-functions-40"><strong>translations</strong></a>.</p><p>This document is also available in these non-normative formats: <a href="file-40.xml">Specification in XML format</a> and <a href="function-catalog.xml">XML function catalog</a>.</p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2000 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr/></div><div>
<h2><a id="abstract"/>Abstract</h2><p>This document defines a file system API for XPath 4.0. It defines extension functions
        to perform file system related operations such as listing, reading, or writing files
        or directories.</p><p>The document is an update of the original <a href="#expath-file">[EXPath File 1.0]</a> specification,
        developed by the <a href="http://www.w3.org/community/expath/">EXPath Community
        Group</a>, defined for <a href="#xpath20">[XML Path Language (XPath) 2.0]</a> and published in 2013.</p><p>The principal semantic alteration is use of functional argument defaults available in
        XPath 4.0.</p><p>These functions are defined for use in <a href="#xpath-40">[XML Path Language (XPath) 4.0]</a> and
        <a href="#xquery-40">[XQuery 4.1: An XML Query Language]</a> and <a href="#xslt-40">[XSL Transformations (XSLT) Version 4.0]</a> and other related XML standards.
        The signatures and summaries of functions defined in this document are available at:
        <a href="https://qt4cg.org/specifications/EXPath/file-40/">https://qt4cg.org/specifications/EXPath/file-40/</a>.</p><p>A summary of changes since published version 1.0 (the XPath 2.0 version) is provided
        at <a href="#changelog"><b>F Changes since version 1.0</b></a>.</p></div><div>
<h2><a id="status"/>Status of this Document</h2><p>This version of the specification is work in progress. It is produced by the QT4
        Working Group, officially the W3C XSLT 4.0 Extensions Community Group. Individual
        functions specified in the document may be at different stages of review, reflected in
        their <b>History</b> notes. Comments are invited, in the form of GitHub issues at
        <a href="https://github.com/qt4cg/qtspecs">https://github.com/qt4cg/qtspecs</a>.</p><div class="dedication" id="dedication"><h3>Dedication</h3><p>The publications of this community group 
        <a href="../xquery-40/xpath-40.html#dedication">are dedicated</a> to our co-chair,
        Michael Sperberg-McQueen (1954–2024).</p></div></div><nav id="toc">
<div id="function-finder"><div class="ffheader">FUNCTION FINDER</div><div><span>Function search: <input id="select-fn" list="fn-list" type="text"/> <button id="help-select-fn-button">?</button></span><p id="help-select-fn" style="display:none;">Type a function name, or press down arrow for a list.</p><datalist id="fn-list"><option value="file:append⁣"/><option value="file:append-binary⁣"/><option value="file:append-text⁣"/><option value="file:append-text-lines⁣"/><option value="file:base-dir⁣"/><option value="file:children⁣"/><option value="file:copy⁣"/><option value="file:create-dir⁣"/><option value="file:create-temp-dir⁣"/><option value="file:create-temp-file⁣"/><option value="file:current-dir⁣"/><option value="file:delete⁣"/><option value="file:descendants⁣"/><option value="file:dir-separator⁣"/><option value="file:exists⁣"/><option value="file:is-absolute⁣"/><option value="file:is-dir⁣"/><option value="file:is-file⁣"/><option value="file:last-modified⁣"/><option value="file:line-separator⁣"/><option value="file:list⁣"/><option value="file:list-roots⁣"/><option value="file:move⁣"/><option value="file:name⁣"/><option value="file:parent⁣"/><option value="file:path-separator⁣"/><option value="file:path-to-native⁣"/><option value="file:path-to-uri⁣"/><option value="file:read-binary⁣"/><option value="file:read-text⁣"/><option value="file:read-text-lines⁣"/><option value="file:resolve-path⁣"/><option value="file:size⁣"/><option value="file:temp-dir⁣"/><option value="file:write⁣"/><option value="file:write-binary⁣"/><option value="file:write-text⁣"/><option value="file:write-text-lines⁣"/></datalist></div></div><h2><a id="contents"/>Table of Contents<span class="expalltoc collapsed"> ▶</span></h2><ol class="toc"><li><details><summary><a href="#intro"><span class="secno">1 </span><span class="content toc-chg">Introduction</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#error.management"><span class="secno">1.1 </span><span class="content">Error management</span></a></summary></details></li><li><details><summary><a href="#file-paths"><span class="secno">1.2 </span><span class="content">File Paths</span></a></summary></details></li><li><details><summary><a href="#exec"><span class="secno">1.3 </span><span class="content">Function Execution</span></a></summary></details></li><li><details><summary><a href="#testing"><span class="secno">1.4 </span><span class="content">Test suite</span></a></summary></details></li><li><details><summary><a href="#conformance"><span class="secno">1.5 </span><span class="content">Conformance</span></a></summary></details></li><li><details><summary><a href="#namespace-prefixes"><span class="secno">1.6 </span><span class="content">Namespaces and prefixes</span></a></summary></details></li><li><details><summary><a href="#func-signatures"><span class="secno">1.7 </span><span class="content">Function signatures and descriptions</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#props"><span class="secno">2 </span><span class="content">File Properties</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#func-file-name"><span class="secno">2.1 </span><span class="content">file:name</span></a></summary></details></li><li><details><summary><a href="#func-file-last-modified"><span class="secno">2.2 </span><span class="content">file:last-modified</span></a></summary></details></li><li><details><summary><a href="#func-file-size"><span class="secno">2.3 </span><span class="content toc-chg">file:size</span></a></summary></details></li><li><details><summary><a href="#func-file-exists"><span class="secno">2.4 </span><span class="content">file:exists</span></a></summary></details></li><li><details><summary><a href="#func-file-is-dir"><span class="secno">2.5 </span><span class="content">file:is-dir</span></a></summary></details></li><li><details><summary><a href="#func-file-is-file"><span class="secno">2.6 </span><span class="content">file:is-file</span></a></summary></details></li><li><details><summary><a href="#func-file-is-absolute"><span class="secno">2.7 </span><span class="content toc-chg">file:is-absolute</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#entities"><span class="secno">3 </span><span class="content">Manipulation of Files as Entities</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#func-file-copy"><span class="secno">3.1 </span><span class="content">file:copy</span></a></summary></details></li><li><details><summary><a href="#func-file-create-dir"><span class="secno">3.2 </span><span class="content">file:create-dir</span></a></summary></details></li><li><details><summary><a href="#func-file-create-temp-dir"><span class="secno">3.3 </span><span class="content toc-chg">file:create-temp-dir</span></a></summary></details></li><li><details><summary><a href="#func-file-create-temp-file"><span class="secno">3.4 </span><span class="content toc-chg">file:create-temp-file</span></a></summary></details></li><li><details><summary><a href="#func-file-delete"><span class="secno">3.5 </span><span class="content">file:delete</span></a></summary></details></li><li><details><summary><a href="#func-file-move"><span class="secno">3.6 </span><span class="content">file:move</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#in-out"><span class="secno">4 </span><span class="content">Input/Output</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#func-file-append"><span class="secno">4.1 </span><span class="content toc-chg">file:append</span></a></summary></details></li><li><details><summary><a href="#func-file-append-binary"><span class="secno">4.2 </span><span class="content">file:append-binary</span></a></summary></details></li><li><details><summary><a href="#func-file-append-text"><span class="secno">4.3 </span><span class="content">file:append-text</span></a></summary></details></li><li><details><summary><a href="#func-file-append-text-lines"><span class="secno">4.4 </span><span class="content">file:append-text-lines</span></a></summary></details></li><li><details><summary><a href="#func-file-read-binary"><span class="secno">4.5 </span><span class="content toc-chg">file:read-binary</span></a></summary></details></li><li><details><summary><a href="#func-file-read-text"><span class="secno">4.6 </span><span class="content toc-chg">file:read-text</span></a></summary></details></li><li><details><summary><a href="#func-file-read-text-lines"><span class="secno">4.7 </span><span class="content toc-chg">file:read-text-lines</span></a></summary></details></li><li><details><summary><a href="#func-file-write"><span class="secno">4.8 </span><span class="content toc-chg">file:write</span></a></summary></details></li><li><details><summary><a href="#func-file-write-binary"><span class="secno">4.9 </span><span class="content">file:write-binary</span></a></summary></details></li><li><details><summary><a href="#func-file-write-text"><span class="secno">4.10 </span><span class="content">file:write-text</span></a></summary></details></li><li><details><summary><a href="#func-file-write-text-lines"><span class="secno">4.11 </span><span class="content">file:write-text-lines</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#paths"><span class="secno">5 </span><span class="content">Paths</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#func-file-parent"><span class="secno">5.1 </span><span class="content">file:parent</span></a></summary></details></li><li><details><summary><a href="#func-file-children"><span class="secno">5.2 </span><span class="content">file:children</span></a></summary></details></li><li><details><summary><a href="#func-file-descendants"><span class="secno">5.3 </span><span class="content toc-chg">file:descendants</span></a></summary></details></li><li><details><summary><a href="#func-file-list"><span class="secno">5.4 </span><span class="content toc-chg">file:list</span></a></summary></details></li><li><details><summary><a href="#func-file-list-roots"><span class="secno">5.5 </span><span class="content toc-chg">file:list-roots</span></a></summary></details></li><li><details><summary><a href="#func-file-resolve-path"><span class="secno">5.6 </span><span class="content toc-chg">file:resolve-path</span></a></summary></details></li><li><details><summary><a href="#func-file-path-to-native"><span class="secno">5.7 </span><span class="content">file:path-to-native</span></a></summary></details></li><li><details><summary><a href="#func-file-path-to-uri"><span class="secno">5.8 </span><span class="content">file:path-to-uri</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#sys-props"><span class="secno">6 </span><span class="content">System Properties</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#func-file-dir-separator"><span class="secno">6.1 </span><span class="content">file:dir-separator</span></a></summary></details></li><li><details><summary><a href="#func-file-line-separator"><span class="secno">6.2 </span><span class="content">file:line-separator</span></a></summary></details></li><li><details><summary><a href="#func-file-path-separator"><span class="secno">6.3 </span><span class="content">file:path-separator</span></a></summary></details></li><li><details><summary><a href="#func-file-temp-dir"><span class="secno">6.4 </span><span class="content">file:temp-dir</span></a></summary></details></li><li><details><summary><a href="#func-file-base-dir"><span class="secno">6.5 </span><span class="content">file:base-dir</span></a></summary></details></li><li><details><summary><a href="#func-file-current-dir"><span class="secno">6.6 </span><span class="content">file:current-dir</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#biblio"><span class="secno">A </span><span class="content">References</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#normative-biblio"><span class="secno">A.1 </span><span class="content">Normative references</span></a></summary></details></li><li><details><summary><a href="#non-normative-biblio"><span class="secno">A.2 </span><span class="content">Non-normative references</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#error-summary"><span class="secno">B </span><span class="content">Error summary</span></a></summary></details></li><li><details><summary><a href="#glossary"><span class="secno">C </span><span class="content">Glossary</span></a></summary></details></li><li><details><summary><a href="#other-functions"><span class="secno">D </span><span class="content">Other Functions</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#functions-in-other-w3c-specs"><span class="secno">D.1 </span><span class="content">XPath Functions and Operators Defined in Other W3C Recommendations</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#functions-defined-in-XPathFO"><span class="secno">D.1.1 </span><span class="content">Functions and Operators Defined in XPath and XQuery Functions and Operators</span></a></summary></details></li></ol></details></li></ol></details></li><li><details><summary><a href="#impl-def"><span class="secno">E </span><span class="content">Checklist of implementation-defined features</span></a></summary></details></li><li><details><summary><a href="#changelog"><span class="secno">F </span><span class="content">Changes since version 1.0</span></a><span class="exptoc collapsed"/></summary><ol class="toc"><li><details><summary><a href="#changes-summary"><span class="secno">F.1 </span><span class="content">Summary of Changes</span></a></summary></details></li><li><details><summary><a href="#changes-to-function-signatures"><span class="secno">F.2 </span><span class="content">Changes to Function Signatures</span></a></summary></details></li><li><details><summary><a href="#editorial-changes"><span class="secno">F.3 </span><span class="content">Editorial Changes</span></a></summary></details></li></ol></details></li><li><details><summary><a href="#back-compatibility"><span class="secno">G </span><span class="content">Compatibility with Previous Versions</span></a></summary></details></li></ol></nav><hr/><div class="body"><div class="div1">
<h2><a id="intro"/>1 <a href="#intro" style="text-decoration: none">Introduction</a></h2><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-size">next</a>)</p><ol><li><p>If a section of this specification has been updated since version 1.0,
            an overview of the changes is provided, along with links to
            navigate to the next or previous change.</p></li><li><p>Sections with significant changes are marked with a ✭ symbol in the
            table of contents. New functions are indicated by ✚.</p></li></ol></div><p>The purpose of this document is to define functions to manipulate files within a
        local filesystem and their representations,
        for inclusion in XPath 4.0, XQuery 4.0, and XSLT 4.0.</p><p>The exact syntax used to call these functions and operators is specified in <a href="#xpath-40">[XML Path Language (XPath) 4.0]</a>, <a href="#xquery-40">[XQuery 4.1: An XML Query Language]</a> and <a href="#xslt-40">[XSL Transformations (XSLT) Version 4.0]</a>. </p><p>This document defines several classes of functions:</p><ul><li><p>Functions to examine the properties of files, such as size and modification
            dates.</p></li><li><p>Functions to perform basic operations on files as entities, such as copying,
            deletion, creating directories and establishment of temporary files.</p></li><li><p>Functions to read and write to and from files in various formats.</p></li><li><p>Functions to access and manipulate file paths.</p></li><li><p>Functions to examine properties of the underlying file system and current
            context, such as establishing the current working directory or the
            characters used for various separators within paths or files.</p></li></ul><p>References to specific sections of other specifications are indicated by
        cross-document links in this document. Each such link consists of a pointer to a
        specific section followed a superscript specifying the linked document. The
        superscripts have the following meanings: FO <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a>,
        SER30 <a href="#ser30">[XSLT and XQuery Serialization 3.0]</a> and XS2 <a href="#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
.</p><div class="div2">
<h3><a id="error.management"/>1.1 <a href="#error.management" style="text-decoration: none">Error management</a></h3><p>Error conditions are identified by a code (a <code>QName</code>.) When such an
          error condition is reached in the evaluation of an expression, a dynamic error
          is thrown, with the corresponding error code (as if the standard XPath function
          <code>error()</code> had been called.)</p><p>In this specification these codes use the <code>http://expath.org/ns/file</code>
          namespace and a “descriptive string” local part, e.g.
          [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>], rather than the
          <code>http://www.w3.org/2005/xqt-errors</code> namespace and alpha-numeric local
          part, e.g. <code>err:FOCH0004</code>, used in <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a>. These error codes were chosen originally in the 1.0 version of 2013.</p></div><div class="div2">
<h3><a id="file-paths"/>1.2 <a href="#file-paths" style="text-decoration: none">File Paths</a></h3><p>File paths are specified as strings.</p><p><span class="termdef"><a id="current-working-dir"/>[Definition]  
          The <b>current working directory</b> is an absolute
          <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-defined">implementation-defined</a><sup><small>FO</small></sup>
          directory against which all relative file paths are resolved.</span>
          For example, it can be the directory from which a query processor was started.</p><p><span class="termdef"><a id="base-dir"/>[Definition]  If a
          <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-static-base-uri">Static Base URI</a><sup><small>XP</small></sup> exists,
          and if it points to a local file, the <b>base directory</b> points to the directory
          of this file. Otherwise, it is undefined.</span>
          <code>file:base-dir</code> can be used to retrieve the directory.
          A file path can be resolved against this directory by simply appending it (if it is relative),
          or by calling <code>file:resolve-path</code>:</p><div class="exampleInner"><pre>
file:base-dir() || $path,
file:resolve-path($path, file:base-dir())</pre></div><p>An implementation <span class="verb">must</span> accept absolute and relative UNIX/Linux
          and Windows paths as well as absolute file URIs. Some examples: </p><ul><li><p><code>C:\Test Dir\my file.xml</code>: an absolute path on Windows platforms.</p></li><li><p><code>/Test Dir/my file.xml</code>: an absolute path on UNIX-based platforms.</p></li><li><p><code>C:\\\Test Dir//\\my file.xml</code>: an absolute path on Windows
              platforms that tolerates an arbitrary number of slashes and
              backslashes.</p></li><li><p><code>my file.xml</code>: a relative path, pointing to a file in the
              current working directory.</p></li><li><p><code>file:///C:/Test%20Dir/my%20file.xml</code>: an absolute file URI on
              Windows platforms.</p></li><li><p><code>file:///Test%20Dir/my%20file.xml</code>: an absolute path on
              UNIX-based platforms.</p></li></ul><p>Before further processing, all paths are normalized to an
          <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-dependent">implementation-dependent</a><sup><small>FO</small></sup>
          representation (which usually is the representation of the underlying operating system),
          which operating-system-specific directory separators.</p><p>It is
          <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-dependent">implementation-dependent</a><sup><small>FO</small></sup>
          whether the error [<a href="#ERRFILE40invalid-path" title="file:invalid-path">file:invalid-path</a>] is raised if a
          path is invalid, i.e., if it contains characters that are not allowed in a specific
          file system.</p><p>Whenever a <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>
          function generates a path that is known to refer to a directory, it will be suffixed with
          the operating-system-specific directory separator.</p></div><div class="div2">
<h3><a id="exec"/>1.3 <a href="#exec" style="text-decoration: none">Function Execution</a></h3><p>Many functions are marked as
          <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>,
          which means they are not guaranteed to perform the same operations and produce
          identical results when being called repeatedly. A processor <span class="verb">must</span>
          ensure that these functions are not relocated or pre-evaluated and that its results
          are not cached when compiling and evaluating the query and serializing its results.</p></div><div class="div2">
<h3><a id="testing"/>1.4 <a href="#testing" style="text-decoration: none">Test suite</a></h3><p>A suite of test-cases for all the functions defined in this module, in
          <a href="#qt3">[QT3]</a> format, is defined at <a href="#tests.file">[Test-suite]</a>.</p></div><div class="div2">
<h3><a id="conformance"/>1.5 <a href="#conformance" style="text-decoration: none">Conformance</a></h3><p>This specification follows the general remarks on and terminology for conformance
          given in <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> section <a href="../xpath-functions-40/#conformance">1.2 Conformance</a></p><p>In this document, text labeled as an example or as a note is provided for
          explanatory purposes and is not normative.</p></div><div class="div2">
<h3><a id="namespace-prefixes"/>1.6 <a href="#namespace-prefixes" style="text-decoration: none">Namespaces and prefixes</a></h3><p>The functions defined in this document are contained exclusively in the namespace
          <code>http://expath.org/ns/file</code> and referenced using a
          <code>xs:QName</code> binding to that namespace.</p><p>This document uses the prefix <code>file</code> to refer to this namespace.
          User-written applications can choose a different prefix to refer to the
          namespace, so long as it is bound to the correct URI. In accordance with current
          practice, it is recommended that the prefix <code>file</code> be reserved for
          use with this namespace.</p></div><div class="div2">
<h3><a id="func-signatures"/>1.7 <a href="#func-signatures" style="text-decoration: none">Function signatures and descriptions</a></h3><p>Each function (or group of functions having the same name) is defined in this
          specification using a standard proforma, full details of which can be found in
          <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> section <a href="../xpath-functions-40/#func-signatures">1.5 Function signatures and descriptions</a>. In particular in this update
          (trailing) optional arguments for functions (introduced in XPath 4.0) are used
          where appropriate in the signatures, rather than multiple-arity signatures as
          previously. </p></div></div><div class="div1">
<h2><a id="props"/>2 <a href="#props" style="text-decoration: none">File Properties</a></h2><div class="div2">
<h3><a id="func-file-name"/>2.1 <a href="#func-file-name" style="text-decoration: none">file:name</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the name of a file or directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:name</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the name of a file or directory.
        An empty string is returned if the path points to the root directory.</p><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>:
        the path is neither checked for correctness nor looked up in the file system.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:name('')</code></pre></div></td><td style="vertical-align:top"><p><code>''</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:name('/')</code></pre></div></td><td style="vertical-align:top"><p><code>''</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:name('hello.txt')</code></pre></div></td><td style="vertical-align:top"><p><code>'hello.txt'</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:name('dir/')</code></pre></div></td><td style="vertical-align:top"><p><code>'dir'</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:name('dir/file.txt')</code></pre></div></td><td style="vertical-align:top"><p><code>'file.txt'</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:name('dir/..')</code></pre></div></td><td style="vertical-align:top"><p><code>'..'</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:name('file:///tmp/001.bin')</code></pre></div></td><td style="vertical-align:top"><p><code>'001.bin'</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-last-modified"/>2.2 <a href="#func-file-last-modified" style="text-decoration: none">file:last-modified</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the last modification time of a file or directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:last-modified</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:dateTime</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns an <code>xs:dateTime</code> item representing the last modification of
        a file or directory.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:last-modified('.')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns the last modification time of the
          <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:last-modified(file:base-dir())</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns the last modification time of the
            <a title="base directory" class="termref" href="#base-dir">base directory</a>.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-size"/>2.3 <a href="#func-file-size" style="text-decoration: none">file:size</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-is-absolute">next</a> | <a href="#intro">previous</a>)</p><ol><li><p><code>$recursive</code> parameter added.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 7 July 2025]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Returns the size of a file or directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:size</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$recursive</code></td><td><code class="as">as </code><code class="type"><code>xs:boolean?</code></code></td><td><code class="assign">:= </code><code>false()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:integer</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>
        If <code>$path</code> points to a file, returns the byte size of this file.
        Otherwise, if it points to a directory, returns either <code>0</code> or,
        if <code>$recursive</code> is <code>true</code>, the aggregated size of all files and
        subdirectories.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:size('.')</code></pre></div></td><td style="vertical-align:top"><p><code>0</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:size('/')</code></pre></div></td><td style="vertical-align:top"><p><code>0</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-exists"/>2.4 <a href="#func-file-exists" style="text-decoration: none">file:exists</a></h3><dl><dt class="label">Summary</dt><dd><p>Tests if a file or directory exists.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:exists</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:boolean</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns <code>true</code> if <code>$path</code> points to an existing file or directory,
        <code>false</code> otherwise.</p><p>On a UNIX-based system, the root and the volume roots are considered directories.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:exists('.')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:exists('/')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-is-dir"/>2.5 <a href="#func-file-is-dir" style="text-decoration: none">file:is-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Tests if <code>$path</code> points to a directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:is-dir</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:boolean</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns <code>true</code> if <code>$path</code> points to an existing directory
        as defined in <a href="#ieee1003.1-2024">[IEEE 1003.1-2024]</a> (no regular file, no symbolic link,
        no other operating-system specific file type).
        Otherwise, it returns <code>false</code>.</p><p>On a UNIX-based system, the root and the volume roots are considered directories.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:is-dir('.')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:is-dir('/')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-is-file"/>2.6 <a href="#func-file-is-file" style="text-decoration: none">file:is-file</a></h3><dl><dt class="label">Summary</dt><dd><p>Tests if <code>$path</code> points to a regular file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:is-file</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:boolean</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns <code>true</code> if <code>$path</code> points to an existing regular file
        as defined in <a href="#ieee1003.1-2024">[IEEE 1003.1-2024]</a> (no directory, no symbolic link,
        no other operating-system specific file type).
        Otherwise, it returns <code>false</code>.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:is-file('.')</code></pre></div></td><td style="vertical-align:top"><p><code>false()</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:is-file('/')</code></pre></div></td><td style="vertical-align:top"><p><code>false()</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-is-absolute"/>2.7 <a href="#func-file-is-absolute" style="text-decoration: none">file:is-absolute</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-create-temp-dir">next</a> | <a href="#func-file-size">previous</a>)</p><ol><li><p>New in 4.0.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 2 July 2024]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Tests if <code>$path</code> is absolute.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:is-absolute</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:boolean</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns <code>true</code> if <code>$path</code> is absolute,
        <code>false</code> otherwise.</p><p>A path is absolute if it contains all the components necessary to identify a file location,
         without reference to a current drive or a current working directory.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>All UNC file names are absolute.</p><p>The function may return a different result for the same path on a Windows and a
           UNIX-based system.</p></div></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:is-absolute('abc')</code></pre></div></td><td style="vertical-align:top"><p><code>false()</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:is-absolute('/')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns <code>true</code> on a UNIX-based system and
             <code>false</code> on a Windows system.)</em></p></td></tr></tbody></table></div></dd></dl></div></div><div class="div1">
<h2><a id="entities"/>3 <a href="#entities" style="text-decoration: none">Manipulation of Files as Entities</a></h2><div class="div2">
<h3><a id="func-file-copy"/>3.1 <a href="#func-file-copy" style="text-decoration: none">file:copy</a></h3><dl><dt class="label">Summary</dt><dd><p>Copies a file or a directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:copy</code>(</td></tr><tr class="arg"><td><code>$source</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$target</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Copies a file or a directory given a source and a target path/URI.
        The following rules apply if <code>$source</code> points to a file:</p><ol class="enumar"><li><p>if <code>$target</code> does not exist, it will be created.</p></li><li><p>if <code>$target</code> is a file, it will be overwritten.</p></li><li><p>if <code>$target</code> is a directory, the file will be created in that
            directory with the name of the source file. If a file already exists, it
            will be overwritten.</p></li></ol><p>Otherwise, if <code>$source</code> points to a directory:</p><ol class="enumar"><li><p>if <code>$target</code> does not exist, it will be created as directory, and
            all files of the source directory are copied to this directory with their
            existing local names.</p></li><li><p>if <code>$target</code> is a directory, the source directory with all its
            files will be copied into the target directory. At each level, if a file
            already exists in the target with the same name as in the source, it is
            overwritten. If a directory already exists in the target with the same name
            as in the source, it is not removed, it is recursed in place.
            If it does not exist, it is created before recursing.</p></li></ol><p>Other cases will result in one of the errors listed below.</p><p>The function returns the empty sequence if the operation is successful.
        No rollback to the original state will be possible if an error occurs during the operation.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if the specified source path points to a
        directory and target path points to an existing file.</p><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified source path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified source path points to a
        file and the target path points to a directory in which a subdirectory exists
        with the name of the source file.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:copy('a.txt', 'b.txt')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Creates a copy of the file <code>a.txt</code> in the
            same directory, named <code>b.txt</code>.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:copy('a.txt', '../')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Creates a copy of the file <code>a.txt</code> with the same name
            in the parent directory.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:copy('dir/', 'dir2/')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Creates a recursive copy of the directory <code>dir</code>
            in the <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>, named <code>dir2</code>. If
            <code>dir2</code> already exists, the contents of <code>dir</code> will be copied
            into that directory.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-create-dir"/>3.2 <a href="#func-file-create-dir" style="text-decoration: none">file:create-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Creates a directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:create-dir</code>(</td></tr><tr class="arg"><td><code>$dir</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Creates a directory unless it already exists. The operation will also create
        non-existing parent directories.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if the specified path, or any of
        its parent directories, points to an existing file.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:create-dir('examples')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Creates a directory named <code>examples</code> in the
            <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:create-dir('/')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Will do nothing, as the root directory already exists.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-create-temp-dir"/>3.3 <a href="#func-file-create-temp-dir" style="text-decoration: none">file:create-temp-dir</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-create-temp-file">next</a> | <a href="#func-file-is-absolute">previous</a>)</p><ol><li><p>All parameters are optional now.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 7 July 2025]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Creates a temporary directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:create-temp-dir</code>(</td></tr><tr class="arg"><td><code>$prefix</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>()</code>,</td></tr><tr class="arg"><td><code>$suffix</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>()</code>,</td></tr><tr class="arg"><td><code>$dir</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Creates a temporary directory with an optional <code>$prefix</code> and
        <code>$suffix</code> in the filename, and returns the full path to the created directory.
        The path will point to a directory that did not exist before the function was called.</p><p>If <code>$dir</code> is omitted or an empty sequence, the directory will be created
        inside the operating-system specific default temporary-file directory.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>The created directory will not be deleted automatically after query execution.</p></div></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the specified directory does not
        exist or points to a file.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><p><code>file:parent(file:create-temp-dir()) = file:temp-dir()</code></p></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><p><code>true()</code></p></td></tr><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre>file:create-temp-dir(dir := file:base-dir())</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>FIXME:</pre></div><p><em>(Creates a temporary directory in the <a title="base directory" class="termref" href="#base-dir">base directory</a> or,
            if it is undefined, in the default temporary-file directory.)</em></p></td></tr><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre class="small">
let $dir := file:create-temp-dir()
return try {
  file:write($dir || 'tmp.data', 1 to 10)
} finally {
  file:delete($dir, true())
}</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>FIXME:</pre></div><p><em>(Creates a temporary directory, writes a file into that directory, and
            deletes it again.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-create-temp-file"/>3.4 <a href="#func-file-create-temp-file" style="text-decoration: none">file:create-temp-file</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-append">next</a> | <a href="#func-file-create-temp-dir">previous</a>)</p><ol><li><p>All parameters are optional now.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 7 July 2025]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Creates a temporary file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:create-temp-file</code>(</td></tr><tr class="arg"><td><code>$prefix</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>()</code>,</td></tr><tr class="arg"><td><code>$suffix</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>()</code>,</td></tr><tr class="arg"><td><code>$dir</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Creates an empty temporary file with an optional <code>$prefix</code> and
        <code>$suffix</code> in the filename, and returns the full path to the created file.
        The path will point to a file that did not exist before the function was called.</p><p>If <code>$dir</code> is omitted or an empty sequence, the file will be created inside
        the operating-system specific default temporary-file directory.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>The created file will not be deleted automatically after query execution.</p></div></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the specified does not exist or
        points to a file.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:create-temp-file(suffix := '.txt')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Creates a file with the suffix <code>.txt</code> in the
            temporary-file directory.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-delete"/>3.5 <a href="#func-file-delete" style="text-decoration: none">file:delete</a></h3><dl><dt class="label">Summary</dt><dd><p>Deletes a file or a directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:delete</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$recursive</code></td><td><code class="as">as </code><code class="type"><code>xs:boolean?</code></code></td><td><code class="assign">:= </code><code>false()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Deletes a file or a directory from the file system.
        If <code>$recursive</code> is <code>true</code>, subdirectories will be deleted as well.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        non-empty directory.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:delete('list.txt')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Deletes the file <code>list.txt</code> from the
            <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:delete('examples', true())</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Deletes the file or directory <code>example</code> and (if available)
            all subdirectories.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-move"/>3.6 <a href="#func-file-move" style="text-decoration: none">file:move</a></h3><dl><dt class="label">Summary</dt><dd><p>Moves a file or a directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:move</code>(</td></tr><tr class="arg"><td><code>$source</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$target</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Moves a file or a directory given a source and a target path/URI.
        The following rules apply if <code>$source</code> points to a file:</p><ol class="enumar"><li><p>if <code>$target</code> does not exist, it will be created.</p></li><li><p>if <code>$target</code> is a file, it will be overwritten.</p></li><li><p>if <code>$target</code> is a directory, the file will be created in that
            directory with the name of the source file. If a file already exists, it
            will be overwritten.</p></li></ol><p>Otherwise, if <code>$source</code> points to a directory:</p><ol class="enumar"><li><p>if <code>$target</code> does not exist, it will be created as directory, and
            all files of the source directory are moved to this directory with their
            existing local names.</p></li><li><p>if <code>$target</code> is a directory, the source directory with all its
            files will be moved into the target directory. If the target directory
            contains a directory with the same name as the source,
            the error [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised.</p></li></ol><p>Other cases will result in one of the errors listed below.</p><p>The function returns the empty sequence if the operation is successful.
        No rollback to the original state will be possible if an error occurs during the operation.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified source
          path does not exist.</p><p>
        [<a href="#ERRFILE40exists" title="file:exists">file:exists</a>] is raised if the specified source path points to a
        directory and target path points to an existing file.</p><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified source path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified target path points to a
        directory in which a subdirectory exists with the name of the source.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:move('a.txt', 'b.txt')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Renames <code>a.txt</code> to <code>b.txt</code>.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:move('a.txt', '../')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Moves the file <code>a.txt</code> to the parent directory.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:move('dir/', 'dir2/')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Renames <code>dir</code> to <code>dir2</code>. If <code>dir2</code>
          already exists, moves the source directory into that directory.)</em></p></td></tr></tbody></table></div></dd></dl></div></div><div class="div1">
<h2><a id="in-out"/>4 <a href="#in-out" style="text-decoration: none">Input/Output</a></h2><div class="div2">
<h3><a id="func-file-append"/>4.1 <a href="#func-file-append" style="text-decoration: none">file:append</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-read-binary">next</a> | <a href="#func-file-create-temp-file">previous</a>)</p><ol><li><p><code>$options</code> can now be a map, in alignment with <code>fn:serialize</code>.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 7 July 2025]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Appends a serialized value to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:append</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as </code><code class="type"><code>item()*</code></code>,</td><td/></tr><tr class="arg"><td><code>$options</code></td><td><code class="as">as </code><code class="type"><code>(element(output:serialization-parameters) | map(*))?</code></code></td><td><code class="assign">:= </code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Serializes a value and appends the resulting string to a file.
        If the file pointed to by <code>$file</code> does not exist,
        a new file will be created.</p><p>
        The <code>$options</code> argument controls the way how <code>$value</code> is serialized.
        The semantics are the same as for <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> section <a href="../xpath-functions-40/#func-serialize">17.2.3 fn:serialize</a>.
        In contrast to <code>fn:serialize</code>, the encoding stage will not be skipped by
        this function.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified file does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:append('fragments.xml', &lt;fragment/&gt;)</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Appends a serialized element node to the file
            <code>fragments.xml</code>. The file is created if it does not already exist.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:append('snippets.json', { 'one': 1 }, { 'method': 'json' })</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Serializes a map as JSON and appends the resulting string to the file
            <code>snippets.json</code>.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-append-binary"/>4.2 <a href="#func-file-append-binary" style="text-decoration: none">file:append-binary</a></h3><dl><dt class="label">Summary</dt><dd><p>Appends binary data to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:append-binary</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as </code><code class="type"><code>xs:base64Binary</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Appends the binary data of an <code>xs:base64Binary</code> item to a file.
        If the file pointed to by <code>$file</code> does not exist, a new file will be
        created.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:append-binary('data.bin', xs:hexBinary('414243'))</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Appends the bytes <code>0x44</code>, <code>0x43</code> and <code>0x41</code>
            to the file <code>data.bin</code>.
            The file is created if it does not already exist.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-append-text"/>4.3 <a href="#func-file-append-text" style="text-decoration: none">file:append-text</a></h3><dl><dt class="label">Summary</dt><dd><p>Appends a string to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:append-text</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>'UTF-8'</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Appends a string to a file.
        If the file pointed to by <code>$file</code> does not exist, a new file will be
        created.</p><p>If no encoding is supplied, <code>UTF-8</code> is used as output encoding.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding
        is invalid or not supported by the implementation.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:append-text('todos.txt', 'clean up')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Appends a string to the file <code>todos.txt</code>.
            The file is created if it does not already exist.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-append-text-lines"/>4.4 <a href="#func-file-append-text-lines" style="text-decoration: none">file:append-text-lines</a></h3><dl><dt class="label">Summary</dt><dd><p>Appends a sequence of strings to a file, each followed by the operating-system specific
        newline character.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:append-text-lines</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$lines</code></td><td><code class="as">as </code><code class="type"><code>xs:string*</code></code>,</td><td/></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>'UTF-8'</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Appends a sequence of strings to a file, each followed by the operating-system specific
        newline character.
        If the file pointed to by <code>$file</code> does not exist, a new file will be created.</p><p>If no encoding is supplied, <code>UTF-8</code> is used as output encoding.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding
        is invalid or not supported by the implementation.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:append-text-lines('numbers.txt', (1 to 5) ! string())</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Appends the string representation of the integers 1 to 5 to the file
            <code>numbers.txt</code>. The file is created if it does not already exist.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-read-binary"/>4.5 <a href="#func-file-read-binary" style="text-decoration: none">file:read-binary</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-read-text">next</a> | <a href="#func-file-append">previous</a>)</p><ol><li><p><code>$length</code> can now be supplied without supplying <code>$offset</code>.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 7 July 2025]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Returns the binary content of a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:read-binary</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$offset</code></td><td><code class="as">as </code><code class="type"><code>xs:integer?</code></code></td><td><code class="assign">:= </code><code>0</code>,</td></tr><tr class="arg"><td><code>$length</code></td><td><code class="as">as </code><code class="type"><code>xs:integer?</code></code></td><td><code class="assign">:= </code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:base64Binary</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the content of a file as an <code>xs:base64Binary</code> item.</p><p>Chunks of a file can be read by supplying <code>$offset</code> and <code>$length</code>.
        If no value is supplied for <code>$length</code>, all remaining bytes will be read.
        If only <code>$length</code> is specified, the offset is <code>0</code>.
      </p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40out-of-range" title="file:out-of-range">file:out-of-range</a>] is raised if the specified offset or length
        value is negative, or if the value would exceed the file bounds.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:read-binary('data.bin') eq xs:hexBinary('41')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns <code>true</code> if the file <code>data.bin</code>
            contains the single byte <code>0x41</code>.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:read-binary('data.bin', file:size($path) - 1, 1)</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns the last byte of the file <code>data.bin</code>.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-read-text"/>4.6 <a href="#func-file-read-text" style="text-decoration: none">file:read-text</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-read-text-lines">next</a> | <a href="#func-file-read-binary">previous</a>)</p><ol><li><p><code>$fallback</code> parameter added.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 2 July 2024]</i></p></li><li><p>The normalization of newlines has been made explicit.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 2 July 2024]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Returns the content of a file as a string.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:read-text</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>'UTF-8'</code>,</td></tr><tr class="arg"><td><code>$fallback</code></td><td><code class="as">as </code><code class="type"><code>xs:boolean?</code></code></td><td><code class="assign">:= </code><code>false()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the content of a file in its string representation.
        Newlines are normalized: Any <span class="unicode-codepoint">U+000D</span> (<span class="unicode-name">CARRIAGE RETURN</span>)  character, optionally followed by
        a <span class="unicode-codepoint">U+000A</span> (<span class="unicode-name">NEWLINE</span>)  character, is converted to a single <span class="unicode-codepoint">U+000A</span> (<span class="unicode-name">NEWLINE</span>)  character.</p><p>If no encoding is supplied, <code>UTF-8</code> is used as input encoding.
        By default, invalid XML characters will be rejected. If <code>$fallback</code> is
        <code>true</code>, the characters will be replaced with the Unicode replacement character
        <span class="unicode-codepoint">U+FFFD</span> (<span class="unicode-name">REPLACEMENT CHARACTER</span>, <code>�</code>) .</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding
        is invalid or not supported by the implementation.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><p><code>contains(file:read-text('todos.txt'), 'push forward')</code></p></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns <code>true</code> if the file <code>todos.txt</code>
            contains the specified string.)</em></p></td></tr><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre class="small">
'test.bin'
=&gt; file:write-binary(xs:hexBinary('00'))
=&gt; file:read-text(fallback := true())
=&gt; string-to-codepoints()</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>65533</pre></div><p><em>(Returns the codepoint value of the Unicode replacement character.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-read-text-lines"/>4.7 <a href="#func-file-read-text-lines" style="text-decoration: none">file:read-text-lines</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-write">next</a> | <a href="#func-file-read-text">previous</a>)</p><ol><li><p><code>$fallback</code> parameter added.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 2 July 2024]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Returns the contents of a file as a sequence of strings, separated at newline
        boundaries.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:read-text-lines</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>'UTF-8'</code>,</td></tr><tr class="arg"><td><code>$fallback</code></td><td><code class="as">as </code><code class="type"><code>xs:boolean?</code></code></td><td><code class="assign">:= </code><code>false()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string*</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the contents of a file as a sequence of strings, separated at newline
        boundaries.</p><p>Any of the character sequences <span class="unicode-codepoint">U+000A</span> (<span class="unicode-name">NEWLINE</span>) , <span class="unicode-codepoint">U+000D</span> (<span class="unicode-name">CARRIAGE RETURN</span>) , or
         <span class="unicode-codepoint">U+000D</span> (<span class="unicode-name">CARRIAGE RETURN</span>)  followed by <span class="unicode-codepoint">U+000A</span> (<span class="unicode-name">NEWLINE</span>)  is interpreted as newline.</p><p>If no encoding is supplied, <code>UTF-8</code> is used as input encoding.
        By default, invalid XML characters will be rejected. If <code>$fallback</code> is enabled,
        the characters will be replaced with the Unicode replacement character
        <span class="unicode-codepoint">U+FFFD</span> (<span class="unicode-name">REPLACEMENT CHARACTER</span>, <code>�</code>) .</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding
        is invalid or not supported by the implementation.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre class="small">
let $file := 'numbers.txt'
let $data := (1 to 5) ! string()
return (
  file:write-text-lines($file, $data),
  file:read-text-lines($file) =&gt; deep-equal($data)
)</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>true()</pre></div><p><em>(Can be used to prove that the written and read strings are equal.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-write"/>4.8 <a href="#func-file-write" style="text-decoration: none">file:write</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-descendants">next</a> | <a href="#func-file-read-text-lines">previous</a>)</p><ol><li><p><code>$options</code> can now be a map, in alignment with <code>fn:serialize</code>.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 7 July 2025]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Writes a serialized value to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:write</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as </code><code class="type"><code>item()*</code></code>,</td><td/></tr><tr class="arg"><td><code>$options</code></td><td><code class="as">as </code><code class="type"><code>(element(output:serialization-parameters) | map(*))?</code></code></td><td><code class="assign">:= </code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Serializes a value and appends the resulting string to a file.
        If the file pointed to by <code>$file</code> already exists, it will be overwritten;
        otherwise, it will be created.</p><p>
        The <code>$options</code> argument controls the way how <code>$value</code> is serialized.
        The semantics are the same as for <a href="#xpath-functions-40">[XQuery and XPath Functions and Operators 4.0]</a> section <a href="../xpath-functions-40/#func-serialize">17.2.3 fn:serialize</a>.
        In contrast to <code>fn:serialize</code>, the encoding stage will not be skipped by
        this function.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><p><code>file:write('numbers.txt', 1 to 10)</code></p></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Writes 10 numbers to the file <code>numbers.txt</code>.)</em></p></td></tr><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre class="small">
file:write(
  'result.xml',
  &lt;result&gt;&lt;done/&gt;&lt;/result&gt;,
  { 'encoding': 'us-ascii', 'indent': true() }
)</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>FIXME:</pre></div><p><em>(Serializes an indented element node as <code>US-ASCII</code> and
            writes it to the file <code>result.xml</code>.)</em></p></td></tr><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre>
file:write(
  'numbers.json',
  map:build(1 to 10, string#1),
  { 'method': 'json' }
)</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>FIXME:</pre></div><p><em>(Writes a map, serialized as JSON, to a specified file.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-write-binary"/>4.9 <a href="#func-file-write-binary" style="text-decoration: none">file:write-binary</a></h3><dl><dt class="label">Summary</dt><dd><p>Writes binary data to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:write-binary</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as </code><code class="type"><code>xs:base64Binary</code></code>,</td><td/></tr><tr class="arg"><td><code>$offset</code></td><td><code class="as">as </code><code class="type"><code>xs:integer?</code></code></td><td><code class="assign">:= </code><code>0</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Writes the binary data of an <code>xs:base64Binary</code> item to a file.
        If the file pointed to by <code>$file</code> already exists, it will be overwritten;
        otherwise, it will be created.</p><p>If <code>$offset</code> is specified and not an empty sequence, data will be written 
        starting at this file position, and existing bytes will be overwritten.
        The operation may resize the existing file.</p><p>The function returns the empty sequence if the operation is successful.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>Supplying an offset makes sense only if the file already exists.</p></div></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40out-of-range" title="file:out-of-range">file:out-of-range</a>] is raised if the specified offset is negative,
        or if it exceeds the current file size.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:write-binary('data.bin', xs:hexBinary('414243'))</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Writes the bytes <code>0x44</code>, <code>0x43</code> and <code>0x41</code>
            to the file <code>data.bin</code>.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:write-binary('data.bin', xs:hexBinary('44', 2))</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(If this expression is called after the previous one, overwrites the last
            byte with <code>0x44</code>.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-write-text"/>4.10 <a href="#func-file-write-text" style="text-decoration: none">file:write-text</a></h3><dl><dt class="label">Summary</dt><dd><p>Writes a string to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:write-text</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$value</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>'UTF-8'</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Writes a string to a file.
        If the file pointed to by <code>$file</code> already exists, it will be overwritten.</p><p>If no encoding is supplied, <code>UTF-8</code> is used as output encoding.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding
        is invalid or not supported by the implementation.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:write-text('todos.txt', 'get organized')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Writes a string to the file <code>todos.txt</code>.
            The file is created if it does not already exist.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-write-text-lines"/>4.11 <a href="#func-file-write-text-lines" style="text-decoration: none">file:write-text-lines</a></h3><dl><dt class="label">Summary</dt><dd><p>Writes strings to a file.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:write-text-lines</code>(</td></tr><tr class="arg"><td><code>$file</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$values</code></td><td><code class="as">as </code><code class="type"><code>xs:string*</code></code>,</td><td/></tr><tr class="arg"><td><code>$encoding</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>'UTF-8'</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>empty-sequence()</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Writes strings to a file, each followed by the operating-system specific newline character.
        If the file pointed to by <code>$file</code> already exists, it will be overwritten;
        otherwise, it will be created.</p><p>If no encoding is supplied, <code>UTF-8</code> is used as output encoding.</p><p>The function returns the empty sequence if the operation is successful.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the parent directory of
        the specified path does not exist.</p><p>
        [<a href="#ERRFILE40is-dir" title="file:is-dir">file:is-dir</a>] is raised if the specified path points to a
        directory.</p><p>
        [<a href="#ERRFILE40unknown-encoding" title="file:unknown-encoding">file:unknown-encoding</a>] is raised if the specified encoding
        is invalid or not supported by the implementation.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:write-text-lines('numbers.txt', (1 to 5) ! string())</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Writes the string representation of the integers 1 to 5 to the file
            <code>numbers.txt</code>.)</em></p></td></tr></tbody></table></div></dd></dl></div></div><div class="div1">
<h2><a id="paths"/>5 <a href="#paths" style="text-decoration: none">Paths</a></h2><div class="div2">
<h3><a id="func-file-parent"/>5.1 <a href="#func-file-parent" style="text-decoration: none">file:parent</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the path to the parent directory of a given path.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:parent</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string?</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Transforms the given path into an absolute path, as specified by
        <a href="#fn.resolve-path">file:resolve-path</a>, and returns the parent
        directory.</p><p>An empty sequence is returned if the path points to a root directory.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>The inverse function is <a href="#func-file-children">file:children</a>.</p></div></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:parent('/')</code></pre></div></td><td style="vertical-align:top"><p><code>()</code></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:current-dir() = file:parent('abc')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-children"/>5.2 <a href="#func-file-children" style="text-decoration: none">file:children</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the paths of all files and directories that are located in the given
        directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:children</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string*</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the paths of all files and directories that are located in the given
        directory. The order of the items in the resulting sequence is not defined.
        The references to the specified directory and its parent directory
        (<code>.</code> and <code>..</code>) are not returned.</p><div class="note"><p class="prefix"><b>Note:</b></p><p>The inverse function is <a href="#func-file-parent">file:parent</a>; a related function
        is <a href="#func-file-list">file:list</a>.</p></div></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the specified path
        does not point to an existing directory.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>count(file:children('.'))</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(
            Counts the files and directories in the <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.
          ).</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>
            file:children('path/to/media/')[matches(., '\.(avi|mpg|mp4)$', 'i')]
          </code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(
            Returns the paths to large videos found in a specific directory.
          ).</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-descendants"/>5.3 <a href="#func-file-descendants" style="text-decoration: none">file:descendants</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-list">next</a> | <a href="#func-file-write">previous</a>)</p><ol><li><p>New in 4.0.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 2 July 2024]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Returns the paths of all files and directories that are located in the given
        directory and its subdirectories.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:descendants</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string*</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the paths of all files and directories that are located in the given
        directory and its subdirectories. The order of the items in the resulting sequence
        is not defined.
        The references to the specified directory and its parent directory
        (<code>.</code> and <code>..</code>) are not returned.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the specified path
        does not point to an existing directory.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><p><code>count(file:descendants('.')[file:is-directory(.)])</code></p></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(
            Counts the subdirectories in the <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.
          ).</em></p></td></tr><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre class="small">
for $file in file:descendants('.')
where file:last-modified($file) &gt; current-dateTime() - xs:dayTimeDuration('PT1H')
return $file</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>FIXME:</pre></div><p><em>(
            Returns the paths to all files that have been modified in the last hour.
          ).</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-list"/>5.4 <a href="#func-file-list" style="text-decoration: none">file:list</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-list-roots">next</a> | <a href="#func-file-descendants">previous</a>)</p><ol><li><p><code>$pattern</code> can now be supplied without supplying <code>$recursive</code>.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 7 July 2025]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Lists all files and directories in a given directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:list</code>(</td></tr><tr class="arg"><td><code>$dir</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$recursive</code></td><td><code class="as">as </code><code class="type"><code>xs:boolean?</code></code></td><td><code class="assign">:= </code><code>false()</code>,</td></tr><tr class="arg"><td><code>$pattern</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string*</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Lists all files and directories in a given directory.
        In contrast to is <a href="#func-file-children">file:children</a>,
        the returned paths are relative to the supplied directory <code>$dir</code>.
        The order of the items in the resulting sequence is not defined.
        The references to the specified directory and its parent directory
        (<code>.</code> and <code>..</code>) are not returned.</p><p>If <code>$recursive</code> is <code>true</code>, all directories and files will be returned
        that are found while recursively traversing the given directory.
        Otherwise, only the contents of the specified directory will be returned.</p><p>The <code>$pattern</code> argument is used to define a name pattern in the glob syntax.
        If supplied, only the paths of the files and directories whose names are matching the pattern
        will be returned.</p><p>An implementation must support at least the following glob syntax characters:</p><ul><li><p><code>*</code> for matching any number of unknown characters and</p></li><li><p><code>?</code> for matching one unknown character.</p></li></ul><div class="note"><p class="prefix"><b>Note:</b></p><p>A related function is <a href="#func-file-children">file:children</a>.</p></div></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40no-dir" title="file:no-dir">file:no-dir</a>] is raised if the specified path does not point
        to an existing directory.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if any other error occurs.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><p><code>file:list('.')</code></p></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns the names of all files in the
            <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.)</em></p></td></tr><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><p><code>file:list('.', pattern := '*.zip')</code></p></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns the names of archive files in the
            <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.)</em></p></td></tr><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre class="small">
let $root := '/path/to/files/'
for $file in file:list($root, true(), '*.txt')
let $path := file:resolve-path($file, $root)
where file:size($path) &gt; 1000000
return file:read-text($path)</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>FIXME:</pre></div><p><em>(Returns the contents of large text files found in a specific
            directory and its subdirectories.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-list-roots"/>5.5 <a href="#func-file-list-roots" style="text-decoration: none">file:list-roots</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-resolve-path">next</a> | <a href="#func-file-list">previous</a>)</p><ol><li><p>New in 4.0.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 2 July 2024]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Lists all root directories of the file system.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name return-type"><td colspan="3"><code class="function">file:list-roots</code>()<code class="as"> as </code><code class="return-type">xs:string*</code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Lists all root directories of the file system:</p><ul><li><p>On a Windows system, root directories are usually the letters of the
            currently available drives, followed by a colon and a backslash
            (for example, <code>C:\</code> and <code>D:\</code>).</p></li><li><p>On a UNIX-based system, it is usually a single slash, denoting the root directory.</p></li></ul><div class="note"><p class="prefix"><b>Note:</b></p><p>Dynamically available UNC file names are not returned by this function.</p></div></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:list-roots('/')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(A single slash as result indicates a UNIX-based system.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-resolve-path"/>5.6 <a href="#func-file-resolve-path" style="text-decoration: none">file:resolve-path</a></h3><div class="changes"><p class="changesHeading">
        Changes in 4.0
        (<a href="#func-file-list-roots">previous</a>)</p><ol><li><p><code>$base</code> parameter added.<i>  [Issue <a href="https://github.com/qt4cg/qtspecs/issues/2016">2016</a> PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077</a> 2 July 2024]</i></p></li></ol></div><dl><dt class="label">Summary</dt><dd><p>Transforms a relative path into an absolute operating system path.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:resolve-path</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code>,</td><td/></tr><tr class="arg"><td><code>$base</code></td><td><code class="as">as </code><code class="type"><code>xs:string?</code></code></td><td><code class="assign">:= </code><code>()</code></td></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Transforms a relative path into an absolute operating system path.
        The following rules apply in order:</p><ol class="enumar"><li><p>If <code>$path</code> is an absolute path, it is not changed.</p></li><li><p>Otherwise, if <code>$base</code> is the empty sequence, <code>$path</code> is
            resolved against the <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.</p></li><li><p>Otherwise, it is resolved against the supplied base path or, if the base path does
            not point to a directory, to its parent directory.
            An error is raised if the base is a relative path.</p></li></ol><p>If the resulting path points to a directory, it will be suffixed with the
        operating-system specific directory separator.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40is-relative" title="file:is-relative">file:is-relative</a>] is raised if the specified base directory
          is relative.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:resolve-path('INF', 'C:/Windows/')</code></pre></div></td><td style="vertical-align:top"><p><code>'C:/Windows/INF/'</code></p><p><em>(The result refers to a Windows system.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:resolve-path('data.bin', 'C:/Temp')</code></pre></div></td><td style="vertical-align:top"><p><code>'C:/data.bin'</code></p><p><em>(The result refers to a Windows system.)</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:resolve-path('hilda/notes.txt', '/home/')</code></pre></div></td><td style="vertical-align:top"><p><code>'/home/hilda/notes.txt'</code></p><p><em>(The result refers to a UNIX-based system.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-path-to-native"/>5.7 <a href="#func-file-path-to-native" style="text-decoration: none">file:path-to-native</a></h3><dl><dt class="label">Summary</dt><dd><p>Transforms a path to a canonical representation.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:path-to-native</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:string</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Transforms a URI, an absolute path, or relative path to a canonical, operating-system specific
        path representation. A canonical path is both absolute and unique and thus contains
        no redirections such as references to parent directories or symbolic links.</p><p>If the resulting path points to a directory, it will be suffixed with the
       operating-system specific directory separator.</p></dd><dt class="label">Error Conditions</dt><dd><p>
        [<a href="#ERRFILE40not-found" title="file:not-found">file:not-found</a>] is raised if the specified path does not exist.</p><p>
        [<a href="#ERRFILE40io-error" title="file:io-error">file:io-error</a>] is raised if an error occurs while trying
        to generate the native path.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:path-to-native('/')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns <code>/</code> on a UNIX-based system.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-path-to-uri"/>5.8 <a href="#func-file-path-to-uri" style="text-decoration: none">file:path-to-uri</a></h3><dl><dt class="label">Summary</dt><dd><p>Transforms a file system path into a URI.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name"><td colspan="3"><code class="function">file:path-to-uri</code>(</td></tr><tr class="arg"><td><code>$path</code></td><td><code class="as">as </code><code class="type"><code>xs:string</code></code></td><td/></tr><tr class="return-type"><td colspan="3">)<code class="as"> as </code><code><code>xs:anyURI</code></code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-independent">context-independent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Transforms a file system path into a URI with the <code>file</code> scheme. If the
        path is relative, it is first resolved against the <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.</p><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-deterministic">deterministic</a><sup><small>FO</small></sup>:
        the path is neither checked for correctness nor looked up in the file system.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:path-to-uri('/temp')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Returns <code>file:///temp</code> on a UNIX-based system).</em></p></td></tr><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>contains(file:path-to-uri('a b'), '%20')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p><p><em>(Space characters will be encoded to <code>%20</code>.)</em></p></td></tr></tbody></table></div></dd></dl></div></div><div class="div1">
<h2><a id="sys-props"/>6 <a href="#sys-props" style="text-decoration: none">System Properties</a></h2><div class="div2">
<h3><a id="func-file-dir-separator"/>6.1 <a href="#func-file-dir-separator" style="text-decoration: none">file:dir-separator</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the directory separator.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name return-type"><td colspan="3"><code class="function">file:dir-separator</code>()<code class="as"> as </code><code class="return-type">xs:string</code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the value of the operating-system specific directory separator, which usually
        is <code>/</code> on UNIX-based systems and <code>\</code> on Windows systems.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:dir-separator() = ('/', '\')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-line-separator"/>6.2 <a href="#func-file-line-separator" style="text-decoration: none">file:line-separator</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the line separator.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name return-type"><td colspan="3"><code class="function">file:line-separator</code>()<code class="as"> as </code><code class="return-type">xs:string</code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the value of the operating-system specific line separator, which usually is
        <code>&amp;#10;</code> on UNIX-based systems, <code>&amp;#13;&amp;#10;</code> on
        Windows systems and <code>&amp;#13;</code> on old Mac systems.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>matches(file:line-separator(), '^(\n|\r\n|\r)$')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-path-separator"/>6.3 <a href="#func-file-path-separator" style="text-decoration: none">file:path-separator</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the path separator.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name return-type"><td colspan="3"><code class="function">file:path-separator</code>()<code class="as"> as </code><code class="return-type">xs:string</code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the value of the operating-system specific path separator, which usually is
        <code>:</code> on UNIX-based systems and <code>;</code> on Windows systems.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:dir-separator() = (':', ';')</code></pre></div></td><td style="vertical-align:top"><p><code>true()</code></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-temp-dir"/>6.4 <a href="#func-file-temp-dir" style="text-decoration: none">file:temp-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the path to the temporary-file directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name return-type"><td colspan="3"><code class="function">file:temp-dir</code>()<code class="as"> as </code><code class="return-type">xs:string</code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the path to the default temporary-file directory of an operating system.</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td style="vertical-align:top"><div class="exampleInner"><pre><code>file:write-text(file:temp-dir() || 'todos.txt', 'get on going')</code></pre></div></td><td style="vertical-align:top"><p><code>FIXME:</code></p><p><em>(Write a text string to a file in the temporary-file directory.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-base-dir"/>6.5 <a href="#func-file-base-dir" style="text-decoration: none">file:base-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the base directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name return-type"><td colspan="3"><code class="function">file:base-dir</code>()<code class="as"> as </code><code class="return-type">xs:string?</code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the <a title="base directory" class="termref" href="#base-dir">base directory</a>.
        If defined, the function returns the same result as the expression
        <code>file:parent(static-base-uri())</code>. Otherwise, it returns an empty sequence</p></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre class="small">
let $dir := file:base-dir() otherwise file:create-temp-dir()
return file:write-text($dir || 'todos.txt', 'get up')</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>FIXME:</pre></div><p><em>(Writes <code>todos.txt</code> to the <a title="base directory" class="termref" href="#base-dir">base directory</a> or,
if it is not defined, to a temporary directory.)</em></p></td></tr></tbody></table></div></dd></dl></div><div class="div2">
<h3><a id="func-file-current-dir"/>6.6 <a href="#func-file-current-dir" style="text-decoration: none">file:current-dir</a></h3><dl><dt class="label">Summary</dt><dd><p>Returns the current working directory.</p></dd><dt class="label">Signature</dt><dd><div class="proto"><table class="proto" border="0"><tr class="name return-type"><td colspan="3"><code class="function">file:current-dir</code>()<code class="as"> as </code><code class="return-type">xs:string</code></td></tr></table></div></dd><dt class="label">Properties</dt><dd><p>This function is <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-nondeterministic">nondeterministic</a><sup><small>FO</small></sup>, <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-context-dependent">context-dependent</a><sup><small>FO</small></sup>,  and <a href="https://qt4cg.org/specifications/xpath-functions-40/#dt-focus-independent">focus-independent</a><sup><small>FO</small></sup>. </p></dd><dt class="label">Rules</dt><dd><p>Returns the <a title="current working directory" class="termref" href="#current-working-dir">current working directory</a>.
      All relative file paths are resolved against this directory.       
      </p></dd><dt class="label">Formal Equivalent</dt><dd><p>The effect of the function is equivalent to the result of the following XPath expression.</p><div class="exampleInner"><pre>file:resolve-path('.')</pre></div></dd><dt class="label">Examples</dt><dd><div class="example"><table class="medium"><tbody><tr class="testdiv"><th style="vertical-align:top">Expression:</th><td style="vertical-align:top"><div class="exampleInner"><pre class="small">
file:path-to-native('todos.txt') =
file:path-to-native(file:current-dir() || 'todos.txt')</pre></div></td></tr><tr><th style="vertical-align:top">Result:</th><td style="vertical-align:top"><div class="exampleInner"><pre>true()</pre></div><p><em>(Both paths refer to the same file.)</em></p></td></tr></tbody></table></div></dd></dl></div></div></div><div class="back"><div class="div1">
<h2><a id="biblio"/>A <a href="#biblio" style="text-decoration: none">References</a></h2><div class="div2">
<h3><a id="normative-biblio"/>A.1 <a href="#normative-biblio" style="text-decoration: none">Normative references</a></h3><dl><dt class="label"><span><a id="expath-file"/>EXPath File 1.0</span></dt><dd><div>
            <a href="http://expath.org/spec/file">File Module 1.0</a>. Christian
            Grün, Matthias Brantner and Gabriel Petrovay, editors. EXPath Module 20
            February 2015.</div></dd><dt class="label"><span><a id="ieee754"/>IEEE 754-1985</span></dt><dd><div>IEEE Standard for Binary Floating-Point Arithmetic.
            See <a href="http://standards.ieee.org/reading/ieee/std_public/description/busarch/754-1985_desc.html">http://standards.ieee.org/reading/ieee/std_public/description/busarch/754-1985_desc.html</a>.
          </div></dd><dt class="label"><span><a id="ieee754-2019"/>IEEE 754-2019</span></dt><dd><div>IEEE.
            <em>IEEE Standard for Floating-Point Arithmetic.</em>
          </div></dd><dt class="label"><span><a id="xpath20"/>XML Path Language (XPath) 2.0</span></dt><dd><div>
<a href="https://www.w3.org/TR/xpath20/"><cite>XML Path Language (XPath) 2.0 (Second Edition)</cite></a>,
Don Chamberlin, Anders Berglund, Scott Boag, <em>et. al.</em>, Editors.
World Wide Web Consortium,
14 December 2010.
This version is https://www.w3.org/TR/2010/REC-xpath20-20101214/.
The <a href="https://www.w3.org/TR/xpath20/">latest version</a>
is available at https://www.w3.org/TR/xpath20/.</div></dd><dt class="label"><span><a id="xpath-functions-40"/>XQuery and XPath Functions and Operators 4.0</span></dt><dd><div>
<a href="../xpath-functions-40/Overview.html"><cite>XQuery and XPath Functions and Operators 4.0</cite></a>,
XSLT Extensions Community Group,
World Wide Web Consortium.</div></dd><dt class="label"><span><a id="xpath-40"/>XML Path Language (XPath) 4.0</span></dt><dd><div>
            
          </div></dd><dt class="label"><span><a id="xslt-40"/>XSL Transformations (XSLT) Version 4.0</span></dt><dd><div>
            <em>CITATION: T.B.D.</em>
          </div></dd><dt class="label"><span><a id="xpath-datamodel-40"/>XQuery and XPath Data Model (XDM) 4.0</span></dt><dd><div>
<a href="../xpath-datamodel-40/Overview.html"><cite>XQuery and XPath Data Model (XDM) 4.0</cite></a>,
XSLT Extensions Community Group,
World Wide Web Consortium.</div></dd><dt class="label"><span><a id="ser30"/>XSLT and XQuery Serialization 3.0</span></dt><dd><div>
            <a href="http://www.w3.org/TR/xslt-xquery-serialization-30/">XSLT and XQuery
            Serialization 3.0</a>. Henry Zongaro, et al. W3C Recommendation 08 April 2014.</div></dd><dt class="label"><span><a id="fo30"/>XQuery and XPath Functions and Operators 3.0</span></dt><dd><div>
            <a href="http://www.w3.org/TR/xpath-functions-30/">XPath and XQuery
            Functions and Operators 3.0</a>. Michael Kay. W3C Recommendation 08 April 2014.</div></dd><dt class="label"><span><a id="xquery-40"/>XQuery 4.1: An XML Query Language</span></dt><dd><div>
            <em>CITATION: T.B.D.</em>
          </div></dd><dt class="label"><span><a id="xmlschema-2"/>XML Schema Part 2: Datatypes Second Edition</span></dt><dd><div> XML
            Schema Part 2: Datatypes Second Edition, Oct. 28 2004. Available at:
            <a href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a>
          </div></dd></dl></div><div class="div2">
<h3><a id="non-normative-biblio"/>A.2 <a href="#non-normative-biblio" style="text-decoration: none">Non-normative references</a></h3><dl><dt class="label"><span><a id="tests.file"/>Test-suite</span></dt><dd><div>The test suite for this module, using QT3
            format, is in the EXPath repository
            <a href="http://github.com/expath/expath-cg/tree/master/tests/qt3/file">http://github.com/expath/expath-cg</a> in the directory tests/qt3/file/</div></dd><dt class="label"><span><a id="qt3"/>QT3</span></dt><dd><div>
            <a href="http://dev.w3.org/2011/QT3-test-suite/">XML Query Test Suite</a>.
            W3C 21 June 2013. </div></dd><dt class="label"><span><a id="expath"/>EXPath</span></dt><dd><div>EXPath: Collaboratively Defining Open Standards
            for Portable XPath Extensions.
            <a href="http://expath.org/">http://expath.org/</a>.</div></dd><dt class="label"><span><a id="ieee1003.1-2024"/>IEEE 1003.1-2024</span></dt><dd><div>
            <a href="https://pubs.opengroup.org/onlinepubs/9799919799/basedefs/V1_chap03.html"><cite>Open Group Base Specifications Issue 8</cite></a>. IEEE, 2024.
          </div></dd></dl></div></div><div class="div1">
<h2><a id="error-summary"/>B <a href="#error-summary" style="text-decoration: none">Error summary</a></h2><p>The error text provided with these errors is non-normative.</p><dl><dt><a name="ERRFILE40exists"/>file:exists</dt><dd><p>The specified path already exists.</p></dd><dt><a name="ERRFILE40invalid-path"/>file:invalid-path</dt><dd><p>The specified path is invalid.</p></dd><dt><a name="ERRFILE40io-error"/>file:io-error</dt><dd><p>A generic file system error occurred.</p></dd><dt><a name="ERRFILE40is-dir"/>file:is-dir</dt><dd><p>The specified path points to a directory.</p></dd><dt><a name="ERRFILE40is-relative"/>file:is-relative</dt><dd><p>The specified path is relative.</p></dd><dt><a name="ERRFILE40no-dir"/>file:no-dir</dt><dd><p>The specified path does not point to a directory.</p></dd><dt><a name="ERRFILE40not-found"/>file:not-found</dt><dd><p>The specified path does not exist.</p></dd><dt><a name="ERRFILE40out-of-range"/>file:out-of-range</dt><dd><p>The specified offset or length is negative, or the chosen values would exceed
          the file bounds.</p></dd><dt><a name="ERRFILE40unknown-encoding"/>file:unknown-encoding</dt><dd><p>The specified encoding is not supported.</p></dd></dl></div><div class="div1">
<h2><a id="glossary"/>C <a href="#glossary" style="text-decoration: none">Glossary</a> (Non-Normative)</h2><dl><dt><a href="#base-dir">base directory</a></dt><dd><p>If a
          <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.html#dt-static-base-uri">Static Base URI</a><sup><small>XP</small></sup> exists,
          and if it points to a local file, the <b>base directory</b> points to the directory
          of this file. Otherwise, it is undefined.</p></dd><dt><a href="#current-working-dir">current working directory</a></dt><dd><p>
          The <b>current working directory</b> is an absolute
          <a href="https://qt4cg.org/specifications/xpath-functions-40/#implementation-defined">implementation-defined</a><sup><small>FO</small></sup>
          directory against which all relative file paths are resolved.</p></dd></dl></div><div class="div1">
<h2><a id="other-functions"/>D <a href="#other-functions" style="text-decoration: none">Other Functions</a> (Non-Normative)</h2><p>This Appendix describes some sources of functions or operators that fall outside the
      scope of the function library defined in this specification. It includes both
      function specifications and function implementations. Inclusion of a function in
      this appendix does not constitute any kind of recommendation or endorsement; neither
      is omission from this appendix to be construed negatively. This Appendix does not
      attempt to give any information about licensing arrangements for these function
      specifications or implementations.</p><div class="div2">
<h3><a id="functions-in-other-w3c-specs"/>D.1 <a href="#functions-in-other-w3c-specs" style="text-decoration: none">XPath Functions and Operators Defined in Other W3C Recommendations</a></h3><p>A number of W3C Recommendations make use of XPath, and in some cases such
        Recommmendations define additional functions to be made available when XPath is
        used in a specific host language.</p><div class="div3">
<h4><a id="functions-defined-in-XPathFO"/>D.1.1 <a href="#functions-defined-in-XPathFO" style="text-decoration: none">Functions and Operators Defined in XPath and XQuery Functions and Operators</a></h4></div></div></div><div class="div1">
<h2><a id="impl-def"/>E <a href="#impl-def" style="text-decoration: none">Checklist of implementation-defined features</a> (Non-Normative)</h2><ol/></div><div class="div1">
<h2><a id="changelog"/>F <a href="#changelog" style="text-decoration: none">Changes since version 1.0</a> (Non-Normative)</h2><div class="div2">
<h3><a id="changes-summary"/>F.1 <a href="#changes-summary" style="text-decoration: none">Summary of Changes</a></h3><ol><li><p>If a section of this specification has been updated since version 1.0,
            an overview of the changes is provided, along with links to
            navigate to the next or previous change.</p><p>See <a href="#intro"><b>1 Introduction</b></a></p></li><li><p>Sections with significant changes are marked with a ✭ symbol in the
            table of contents. New functions are indicated by ✚.</p><p>See <a href="#intro"><b>1 Introduction</b></a></p></li><li><p>PR <a href="https://github.com/qt4cg/qtspecs/pull/2077">2077 </a></p><p><code>$recursive</code> parameter added.</p><p>See <a href="#func-file-size"><b>2.3 file:size</b></a></p><p>New in 4.0.</p><p>See <a href="#func-file-is-absolute"><b>2.7 file:is-absolute</b></a></p><p>All parameters are optional now.</p><p>See <a href="#func-file-create-temp-dir"><b>3.3 file:create-temp-dir</b></a></p><p>See <a href="#func-file-create-temp-file"><b>3.4 file:create-temp-file</b></a></p><p><code>$options</code> can now be a map, in alignment with <code>fn:serialize</code>.</p><p>See <a href="#func-file-append"><b>4.1 file:append</b></a></p><p><code>$length</code> can now be supplied without supplying <code>$offset</code>.</p><p>See <a href="#func-file-read-binary"><b>4.5 file:read-binary</b></a></p><p><code>$fallback</code> parameter added.</p><p>See <a href="#func-file-read-text"><b>4.6 file:read-text</b></a></p><p>The normalization of newlines has been made explicit.</p><p>See <a href="#func-file-read-text"><b>4.6 file:read-text</b></a></p><p><code>$fallback</code> parameter added.</p><p>See <a href="#func-file-read-text-lines"><b>4.7 file:read-text-lines</b></a></p><p><code>$options</code> can now be a map, in alignment with <code>fn:serialize</code>.</p><p>See <a href="#func-file-write"><b>4.8 file:write</b></a></p><p>New in 4.0.</p><p>See <a href="#func-file-descendants"><b>5.3 file:descendants</b></a></p><p><code>$pattern</code> can now be supplied without supplying <code>$recursive</code>.</p><p>See <a href="#func-file-list"><b>5.4 file:list</b></a></p><p>New in 4.0.</p><p>See <a href="#func-file-list-roots"><b>5.5 file:list-roots</b></a></p><p><code>$base</code> parameter added.</p><p>See <a href="#func-file-resolve-path"><b>5.6 file:resolve-path</b></a></p></li></ol></div><div class="div2">
<h3><a id="changes-to-function-signatures"/>F.2 <a href="#changes-to-function-signatures" style="text-decoration: none">Changes to Function Signatures</a></h3><ol class="enumar"><li><p>The function signatures of all the specified signatures now use the
            “optional argument” syntax of XPath 4.0 where appropriate, rather than
            giving several signatures of differing arity. Other than that, no
            intended change to the semantics of the functions are assumed.</p></li></ol></div><div class="div2">
<h3><a id="editorial-changes"/>F.3 <a href="#editorial-changes" style="text-decoration: none">Editorial Changes</a></h3><p>These changes are not highlighted in the change-marked version of the specification.</p></div></div><div class="div1">
<h2><a id="back-compatibility"/>G <a href="#back-compatibility" style="text-decoration: none">Compatibility with Previous Versions</a> (Non-Normative)</h2><p>This section summarizes the extent to which this specification is compatible with
      previous versions.</p><p>Version 4.0 of this function library is fully backwards compatible with version 1.0,
      except as noted below:</p><ol class="enumar"><li><p>The use of optional arguments in the function signatures means that minor
          alterations to possible function calls, which would be invalid in 1.0, are
          now supported. For example:</p><div class="exampleInner"><pre>file:list($dir, false(), ())</pre></div><p>would be invalid in 1.0, as the third argument <code>$pattern</code> is
          defined to be of type <code>xs:string</code>. It is valid for 4.0, as the
          empty sequence denotes default behavior of listing all files. </p><p>The functions <a href="#func-file-append"><code>file:append</code></a>, <a href="#func-file-append-text"><code>file:append-text</code></a>,
          <a href="#func-file-append-text-lines"><code>file:append-text-lines</code></a>,
          <a href="#func-file-create-temp-dir"><code>file:create-temp-dir</code></a>, <a href="#func-file-create-temp-file"><code>file:create-temp-file</code></a>,
          <a href="#func-file-delete"><code>file:delete</code></a>, <a href="#func-file-read-binary"><code>file:read-binary</code></a>,
          <a href="#func-file-read-text"><code>file:read-text</code></a>, <a href="#func-file-read-text-lines"><code>file:read-text-lines</code></a>,
          <a href="#func-file-write"><code>file:write</code></a>, <a href="#func-file-write-binary"><code>file:write-binary</code></a>,
          <a href="#func-file-write-text"><code>file:write-text</code></a> and <a href="#func-file-write-text-lines"><code>file:write-text-lines</code></a> all have
          similar incompatibilities.</p></li></ol></div></div><script src="https://www.w3.org/scripts/TR/2016/fixup.js"/><script src="js/toc.js"/></body></html><!--XSLT Processor: Saxonica SAXON EE 12.9-->