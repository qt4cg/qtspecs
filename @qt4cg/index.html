<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="minutes—05-20"><h2>QT4 CG meeting 122 draft minutes<span class="toot-id"> #minutes—05-20</span></h2><div class="pubdate">20 May at 16:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2025/05-20">https://qt4cg.org/meeting/minutes/2025/05-20</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-2006"><h2>Issue #2006 closed<span class="toot-id"> #closed-2006</span></h2><div class="pubdate">20 May at 16:10:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2006">https://github.com/qt4cg/qtspecs/pull/2006</a></div><p>2005 Add fn:apply-templates function</p></div>
<div class="toot" id="closed-2005"><h2>Issue #2005 closed<span class="toot-id"> #closed-2005</span></h2><div class="pubdate">20 May at 16:10:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2005">https://github.com/qt4cg/qtspecs/issues/2005</a></div><p>apply-templates() as a function</p></div>
<div class="toot" id="closed-1991"><h2>Issue #1991 closed<span class="toot-id"> #closed-1991</span></h2><div class="pubdate">20 May at 16:08:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1991">https://github.com/qt4cg/qtspecs/pull/1991</a></div><p>835 Add built-in named record types to static context</p></div>
<div class="toot" id="closed-1085"><h2>Issue #1085 closed<span class="toot-id"> #closed-1085</span></h2><div class="pubdate">20 May at 16:06:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1085">https://github.com/qt4cg/qtspecs/issues/1085</a></div><p>Parameters to fn:sort</p></div>
<div class="toot" id="closed-2001"><h2>Issue #2001 closed<span class="toot-id"> #closed-2001</span></h2><div class="pubdate">20 May at 16:06:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2001">https://github.com/qt4cg/qtspecs/pull/2001</a></div><p>1085 Revert fn:sort to the 3.1 spec; introduce fn:sort-by</p></div>
<div class="toot" id="closed-1992"><h2>Issue #1992 closed<span class="toot-id"> #closed-1992</span></h2><div class="pubdate">20 May at 16:04:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1992">https://github.com/qt4cg/qtspecs/issues/1992</a></div><p>Type of fn:schema-type-record ? constructor</p></div>
<div class="toot" id="closed-1999"><h2>Issue #1999 closed<span class="toot-id"> #closed-1999</span></h2><div class="pubdate">20 May at 16:04:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1999">https://github.com/qt4cg/qtspecs/pull/1999</a></div><p>1992 Correct type of constructor function in schema-type-record</p></div>
<div class="toot" id="closed-1997"><h2>Issue #1997 closed<span class="toot-id"> #closed-1997</span></h2><div class="pubdate">20 May at 16:02:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1997">https://github.com/qt4cg/qtspecs/issues/1997</a></div><p>Coercion Rules: §3.4.1 rule 3(c)</p></div>
<div class="toot" id="closed-1998"><h2>Issue #1998 closed<span class="toot-id"> #closed-1998</span></h2><div class="pubdate">20 May at 16:02:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1998">https://github.com/qt4cg/qtspecs/pull/1998</a></div><p>1997 Correct nesting of item coercion rules</p></div>
<div class="toot" id="created-2013"><h2>Pull request #2013 created<span class="toot-id"> #created-2013</span></h2><div class="pubdate">20 May at 09:15:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2013">https://github.com/qt4cg/qtspecs/pull/2013</a></div><details><summary>748 Parse functions: consistency</summary><div class="markup"><p>Closes #748</p>
</div></details></div>
<div class="toot" id="created-2012"><h2>Issue #2012 created<span class="toot-id"> #created-2012</span></h2><div class="pubdate">19 May at 08:14:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2012">https://github.com/qt4cg/qtspecs/issues/2012</a></div><details><summary>Add array:sort-with</summary><div class="markup"><p>Issue #655 PR #795 introduced fn:sort-with.</p>
<p>We should define array:sort-with for consistency.</p>
</div></details></div>
<div class="toot" id="created-2011"><h2>Pull request #2011 created<span class="toot-id"> #created-2011</span></h2><div class="pubdate">18 May at 10:33:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2011">https://github.com/qt4cg/qtspecs/pull/2011</a></div><details><summary>675(part): Add XSLT static typing rules for new kinds of XPath expression</summary><div class="markup"><p>Updates the static typing rules in XSLT for new kinds of expression introduced in XPath 4.0. These rules are used in streamability analysis, but more work needs to be done to complete the streamability analysis.</p>
<p>Production rules are now referenced by name, as production numbers are no longer available.</p>
</div></details></div>
<div class="toot" id="created-2010"><h2>Issue #2010 created<span class="toot-id"> #created-2010</span></h2><div class="pubdate">17 May at 15:33:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2010">https://github.com/qt4cg/qtspecs/issues/2010</a></div><details><summary>XSLT patterns: generalize union, intersect, and except</summary><div class="markup"><p>This is related to issue #402.</p>
<p>We have generalised the meaning of union, intersect, and except, when used in XSLT patterns, so that they now mean:</p>
<ul>
<li>A union B - matches either A or B</li>
<li>A intersect B - matches both A and B</li>
<li>A except B - matches A and does not match B</li>
</ul>
<p>With these semantics, there is no longer any sensible reason to restrict these pattern operators to apply only to node patterns. The semantics work equally well for patterns that match (for example) maps or arrays. For example</p>
<p><code>&lt;xsl:template match="record(a, b) except record(a, b, c)"&gt;</code></p>
</div></details></div>
<div class="toot" id="created-2009"><h2>Issue #2009 created<span class="toot-id"> #created-2009</span></h2><div class="pubdate">17 May at 08:16:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2009">https://github.com/qt4cg/qtspecs/issues/2009</a></div><details><summary>xsl:variable implicit document nodes</summary><div class="markup"><p>In XSLT 3.0, an <code>xsl:variable</code> instruction with no <code>select</code> or <code>as</code> attribute implicitly wraps the value created by the sequence constructor in a document node. This inevitably fails if the content is a map, making it necessary to write</p>
<pre><code>&lt;xsl:variable name="m" as="map(*)"&gt;
   &lt;xsl:map&gt;...&lt;/xsl:map&gt;
&lt;/xsl:variable&gt;
</code></pre>
<p>I propose that this wrapping should not happen if the first item in the result of the sequence constructor is a function item (including a map or array). The practical effect on users is that they can leave out the <code>as="map(*)"</code> attribute in this situation.</p>
<p>For function items other than arrays, this is currently an error condition so there is no incompatibility.</p>
<p>For arrays it does represent an incompatible change -- the current rules ("Constructing complex content") say that an array is flattened. But XSLT 3.0 has no instruction to construct an array, it would have to be done using <code>xsl:sequence</code>; and no-one would deliberately construct an array merely in order to flatten it, so the situation is unlikely to arise in practice.</p>
<p>The proposal is that the decision whether or not to construct a wrapping document node should be based on the first item in the sequence. This is to allow lazy evaluation. A function item appearing later in the sequence would be handled the same way as now -- most likely an error. An empty sequence continues to result in a childless document node.</p>
</div></details></div>
<div class="toot" id="created-2008"><h2>Pull request #2008 created<span class="toot-id"> #created-2008</span></h2><div class="pubdate">16 May at 21:38:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2008">https://github.com/qt4cg/qtspecs/pull/2008</a></div><details><summary>2004 Add xsl:xpath instruction</summary><div class="markup"><p>Fix #2004</p>
</div></details></div>
<div class="toot" id="closed-322"><h2>Issue #322 closed<span class="toot-id"> #closed-322</span></h2><div class="pubdate">16 May at 19:56:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/322">https://github.com/qt4cg/qtspecs/issues/322</a></div><p>Map construction in XSLT: xsl:record instruction</p></div>
<div class="toot" id="created-2007"><h2>Issue #2007 created<span class="toot-id"> #created-2007</span></h2><div class="pubdate">16 May at 17:06:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2007">https://github.com/qt4cg/qtspecs/issues/2007</a></div><details><summary>Creating arrays in XSLT</summary><div class="markup"><p>This kind of code comes up a lot, and is hard to simplify except by dropping into XPath:</p>
<pre><code>                &lt;xsl:array&gt;
                  &lt;xsl:for-each select="?members?*[?_nodeType='MethodDeclaration']"&gt;
                     &lt;xsl:array-member&gt;
                        &lt;xsl:apply-templates select="."/&gt;
                     &lt;/xsl:array-member&gt;
                  &lt;/xsl:for-each&gt;
               &lt;/xsl:array&gt;
</code></pre>
<p>Issue #2005 (PR #2006) make it feasible to do it all in XPath (by calling the apply-templates() function) but I don't feel that's the whole answer.</p>
<p>Perhaps we could define something like</p>
<pre><code>&lt;xsl:array-build for-each="?members?*[?_nodeType='MethodDeclaration']"&gt;
   &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:array-build&gt;
</code></pre>
</div></details></div>
<div class="toot" id="created-2006"><h2>Pull request #2006 created<span class="toot-id"> #created-2006</span></h2><div class="pubdate">15 May at 23:26:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2006">https://github.com/qt4cg/qtspecs/pull/2006</a></div><details><summary>2005 Add fn:apply-templates function</summary><div class="markup"><p>Fix #2005</p>
</div></details></div>
<div class="toot" id="created-2005"><h2>Issue #2005 created<span class="toot-id"> #created-2005</span></h2><div class="pubdate">15 May at 16:53:01 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2005">https://github.com/qt4cg/qtspecs/issues/2005</a></div><details><summary>apply-templates() as a function</summary><div class="markup"><p>I propose introducing <code>apply-templates()</code> as an xslt-only function, with semantics broadly equivalent to the <code>xsl:apply-templates</code> instruction.</p>
<p>The main use case identified so far is when constructing maps and arrays, it enables the XPath syntax to be used rather than the much more verbose XSLT syntax.</p>
<p>Parameters:</p>
<ul>
<li>select: the items to be processed using matching template rules</li>
<li>with-params: the parameters to be passed. Like with-params on xsl:evaluate, this means variable names exist at run-time, which is a bit of an innovation, but I think it's manageable</li>
<li>mode: again, this means mode names exist at run-time, which may have consequences. There are open questions about what the default should be, or how the various options (default mode, unnamed mode, current mode) should be expressed.</li>
</ul>
</div></details></div>
<div class="toot" id="created-2004"><h2>Issue #2004 created<span class="toot-id"> #created-2004</span></h2><div class="pubdate">15 May at 16:41:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2004">https://github.com/qt4cg/qtspecs/issues/2004</a></div><details><summary>xsl:xpath instruction</summary><div class="markup"><p>In the case study https://github.com/qt4cg/qtspecs/issues/1786#issuecomment-2884424739 I encountered a use case where an instruction <code>xsl:xpath</code> would be useful.</p>
<pre><code>&lt;xsl:xpath&gt;
   { "class":
       { "name": f:degenerify(name/@identifier),
          "abstract": ? abstract,
           "extends": array{? extendedTypes =!&gt; map:merge(apply-templates()) },
           "implements": array{? implementedTypes =!&gt; map:merge(apply-templates()) }
             ...
       }
  }
 &lt;/xsl:xpath&gt;
</code></pre>
<p>The instruction is very simple: <code>&lt;xsl:xpath&gt;EXPR&lt;/xsl:xpath&gt;</code> is equivalent to <code>&lt;xsl:sequence select="EXPR"/&gt;</code>. It's particularly useful because XPath constructors for maps and arrays are so much more concise than the XSLT equivalents. Compared with using xsl:sequence, it means that:</p>
<ul>
<li>XML attribute value normalization doesn't kick in, so your formatting is better protected (meaning also that the system has some chance of computing line numbers correctly for diagnostics)</li>
<li>You haven't tied up either single or double-quotes as an attribute delimiter; both can be freely used within the expression.</li>
<li>You aren't creating the false impression that you're returning a (multi-item) sequence</li>
</ul>
<p>Note that the content is NOT a sequence constructor; no child elements are allowed; and the content is not interpreted as a text value template. Unlike xsl:evaluate, the XPath expression is statically fixed.</p>
<p>(This example also introduces apply-templates as a function, but that will be a separate proposal).</p>
</div></details></div>
<div class="toot" id="created-2003"><h2>Issue #2003 created<span class="toot-id"> #created-2003</span></h2><div class="pubdate">15 May at 16:08:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2003">https://github.com/qt4cg/qtspecs/issues/2003</a></div><details><summary>Conditional entries in map constructors</summary><div class="markup"><p>If you're constructing a map using a map constructor, adding an entry conditionally can be a real pain, and typically involves a wholesale rewrite of the way the map is constructed. It would be nice to be able to mark an entry as optional so users don't have to resort to such wholesale rewrites.</p>
<p>The difficulty of course is finding a nice syntax: one that is both intuitively readable and grammatically unambiguous.</p>
<p>One possibility might be:</p>
<p><code>MapConstructorEntry  ::=  MapKeyExpr&nbsp;":"&nbsp;&nbsp;MapValueExpr "optional"?</code></p>
<p>with the semantics that if the "optional" keyword is present, and the result of evaluating MapValueExpr is an empty sequence, then the entry is omitted from the constructed map.</p>
<p>A more ambitious construct might be</p>
<p><code>MapConstructorEntry  ::=  MapKeyExpr&nbsp;":"&nbsp;&nbsp;MapValueExpr  ("when" MapEntryCondition)?</code></p>
<p>which adds the entry to the map only if the condition is true.</p>
<p>For example:</p>
<pre><code>let $map := {"height": string(@height), 
            "width": string(@width), 
            "weight": string(@weight) when exists(@weight)}
</code></pre>
</div></details></div>
<div class="toot" id="created-2002"><h2>Issue #2002 created<span class="toot-id"> #created-2002</span></h2><div class="pubdate">15 May at 12:25:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2002">https://github.com/qt4cg/qtspecs/issues/2002</a></div><details><summary>Adaptive serialization: QNames</summary><div class="markup"><p>We could use the new QName literal syntax when serializing QNames with the <code>adaptive</code> method:</p>
<pre><code class="language-xquery">serialize(xs:QName('x'), { 'method': 'adaptive' })

(: current output: Q{}x :)
(: proposed output: #x or #Q{}x :)
</code></pre>
</div></details></div>
<div class="toot" id="created-2001"><h2>Pull request #2001 created<span class="toot-id"> #created-2001</span></h2><div class="pubdate">14 May at 17:50:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2001">https://github.com/qt4cg/qtspecs/pull/2001</a></div><details><summary>1085 Revert fn:sort to the 3.1 spec; introduce fn:sort-by</summary><div class="markup"><p>Fix #1085</p>
<p>The new functionality introduced into the 4.0 version of fn:sort is repackaged into a new function fn:sort-by with a much cleaner interface; the fn:sort function reverts to its 3.1 specification.</p>
<p>If this PR attracts support then the corresponding change will be applied to the array:sort function.</p>
</div></details></div>
<div class="toot" id="created-2000"><h2>Issue #2000 created<span class="toot-id"> #created-2000</span></h2><div class="pubdate">14 May at 14:11:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2000">https://github.com/qt4cg/qtspecs/issues/2000</a></div><details><summary>element-to-map() - type signature of plan</summary><div class="markup"><p>The specifications of element-to-map() and element-to-map-plan() use different record types for the data structure representing the plan. In both cases the definition is less precise than it might be (though not wrong). The two functions should use a common named record type, which should be as precise as possible.</p>
</div></details></div>
<div class="toot" id="closed-1982"><h2>Issue #1982 closed<span class="toot-id"> #closed-1982</span></h2><div class="pubdate">13 May at 17:24:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1982">https://github.com/qt4cg/qtspecs/pull/1982</a></div><p>1981 Ambiguity with qname literals and pragmas</p></div>
<div class="toot" id="closed-1889"><h2>Issue #1889 closed<span class="toot-id"> #closed-1889</span></h2><div class="pubdate">13 May at 17:19:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1889">https://github.com/qt4cg/qtspecs/issues/1889</a></div><p>HTML serialization: `html-version` and `version` parameters; allowed values</p></div>
<div class="toot" id="closed-1977"><h2>Issue #1977 closed<span class="toot-id"> #closed-1977</span></h2><div class="pubdate">13 May at 17:19:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1977">https://github.com/qt4cg/qtspecs/pull/1977</a></div><p>1889 Tidy up handling of HTML serialization version, default to HTML5</p></div>
<div class="toot" id="closed-1985"><h2>Issue #1985 closed<span class="toot-id"> #closed-1985</span></h2><div class="pubdate">13 May at 17:13:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1985">https://github.com/qt4cg/qtspecs/issues/1985</a></div><p>Default namespace terminology</p></div>
<div class="toot" id="closed-1987"><h2>Issue #1987 closed<span class="toot-id"> #closed-1987</span></h2><div class="pubdate">13 May at 17:13:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1987">https://github.com/qt4cg/qtspecs/pull/1987</a></div><p>1985 Tidy up namespace terminology</p></div></div><p>See 4069
            more statuses in yearly archives.</p></article></main></body></html>