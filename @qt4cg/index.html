<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1962"><h2>Issue #1962 created<span class="toot-id"> #created-1962</span></h2><div class="pubdate">26 Apr at 11:05:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1962">https://github.com/qt4cg/qtspecs/issues/1962</a></div><details><summary>fn:map-to-element</summary><div class="markup"><p>As this feature request has been reported back to us more than once, I want to raise the question here if we want to introduce a function that inverts the result of <code>fn:map-to-element</code> back to an XML representation – provided that a conversion plan exists.</p>
<p>Many results would certainly be lossy, but as the plan is now available separately, it would be possible to roundtrip a lot of data with regular structures, without having to write custom conversion code.</p>
</div></details></div>
<div class="toot" id="created-1961"><h2>Pull request #1961 created<span class="toot-id"> #created-1961</span></h2><div class="pubdate">25 Apr at 11:26:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1961">https://github.com/qt4cg/qtspecs/pull/1961</a></div><details><summary>Attempt to show that xsl:record allows extra attributes</summary><div class="markup"><p>By the simple expedient of adding</p>
<pre><code class="language-xml">&lt;e:attribute name="*" required="yes"&gt;
   &lt;e:data-type name="expression"/&gt;
&lt;/e:attribute&gt;
</code></pre>
<p>to the syntax summary we get</p>
<p><img src="https://github.com/user-attachments/assets/0eaab6d7-9b0e-4b67-92e2-fd3cd6d6ce9e" alt="Screenshot 2025-04-25 at 12-25-57 XSL Transformations (XSLT) Version 4 0"></p>
<p>With some additional prose, would that be sufficient?</p>
</div></details></div>
<div class="toot" id="closed-1960"><h2>Issue #1960 closed<span class="toot-id"> #closed-1960</span></h2><div class="pubdate">25 Apr at 08:59:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1960">https://github.com/qt4cg/qtspecs/pull/1960</a></div><p>Attempt to improve rendering of the dynamic ToC</p></div>
<div class="toot" id="created-1960"><h2>Pull request #1960 created<span class="toot-id"> #created-1960</span></h2><div class="pubdate">25 Apr at 08:58:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1960">https://github.com/qt4cg/qtspecs/pull/1960</a></div><details><summary>Attempt to improve rendering of the dynamic ToC</summary><div class="markup"><p>This is an attempt to complete action QT4CG-116-03.</p>
<p>Part of the confusion in the rendering is that it’s partly done by CSS and partly done by JavaScript and those had gotten out of sync. Given that the JavaScript code has to do some of the work, I changed things so it does all of the work.</p>
<p>I also discovered that the weird Firefox bug where the font size changed was, wait for it, caused by the particular codepoint being used for “changed”. So I, uh, changed it.</p>
<p>We now get ✚ for new sections, ✭ for changed sections, and both when there are both new and changed sections. I spent a bit of time trying to find a third symbol, but gave up.</p>
<p>The markup in the XSLT specification isn’t quite the same as in other specifications, so the results are a tiny bit odd in places. There are some sections that get marked “both” in the ToC but when you expand the ToC, there’s only one mark. I haven’t tried to work out what’s going on there yet.</p>
</div></details></div>
<div class="toot" id="created-1959"><h2>Pull request #1959 created<span class="toot-id"> #created-1959</span></h2><div class="pubdate">24 Apr at 15:49:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1959">https://github.com/qt4cg/qtspecs/pull/1959</a></div><details><summary>1953 (part) XSLT Worked example using methods to implement atomic sets</summary><div class="markup"><p>Provides an XSLT package that uses named record types and methods to implement an atomic set data type, as an example of how abstract data types can now be implemented.</p>
</div></details></div>
<div class="toot" id="created-1958"><h2>Issue #1958 created<span class="toot-id"> #created-1958</span></h2><div class="pubdate">24 Apr at 14:41:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1958">https://github.com/qt4cg/qtspecs/issues/1958</a></div><details><summary>Typo in map:build</summary><div class="markup"><blockquote>
<p>If the key is already present, the processor combines the new value
for the key with the existing value as determined by <strong>the and duplicates</strong> option.</p>
</blockquote>
</div></details></div>
<div class="toot" id="created-1957"><h2>Issue #1957 created<span class="toot-id"> #created-1957</span></h2><div class="pubdate">24 Apr at 11:58:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1957">https://github.com/qt4cg/qtspecs/issues/1957</a></div><details><summary>Schema for XSLT incorrectly allows mixed content for xsl:output</summary><div class="markup"><p>The declaration (line 1412) says mixed="true".</p>
</div></details></div>
<div class="toot" id="created-1956"><h2>Pull request #1956 created<span class="toot-id"> #created-1956</span></h2><div class="pubdate">24 Apr at 11:34:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1956">https://github.com/qt4cg/qtspecs/pull/1956</a></div><details><summary>1954 (part) Private variables and functions don't need to be in the module namespace</summary><div class="markup"><p>See issue #1954</p>
<p>The PR removes the requirement for private variables and functions declared in library modules to be in the module namespace. There has never been any sensible reason for this restriction.</p>
<p>The restriction is retained for public variables and functions; one could argue that it is unnecessary in that case also, but it does no harm and enforces good coding discipline.</p>
</div></details></div>
<div class="toot" id="created-1955"><h2>Issue #1955 created<span class="toot-id"> #created-1955</span></h2><div class="pubdate">24 Apr at 09:58:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1955">https://github.com/qt4cg/qtspecs/issues/1955</a></div><details><summary>fn:doc, fn:parse-xml: entity expansion</summary><div class="markup"><p>The current rule for the <code>entity-expansion-limit</code> option is:</p>
<blockquote>
<p>The processor should impose a limit on the number of entity references that are expanded, or on the size of the expanded entities, depending on the options available in the underlying XML parser; the limit should be commensurate with the value requested, but the precise effect may be . <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#implementation-dependent">implementation-dependent</a>. If the XML parser does not offer the ability to impose a limit, or if the value is zero, then entity expansion should if possible be disabled entirely, leading to a dynamic error if the input contains any entity references. A negative value should be interpreted as placing no limits on entity expansion.</p>
</blockquote>
<p>By default, Java uses 64000 as limit. An explicit value less than or equal to 0 indicates no limit (https://docs.oracle.com/javase/tutorial/jaxp/limits/limits.html, https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/module-summary.html). I don’t know about other languages.</p>
<p>I would like to…</p>
<ol>
<li>change the option to an <code>expand-entities</code> Boolean, or</li>
<li>change the rules and make <code>0</code> disable the limit.</li>
</ol>
<p>Any favorites?</p>
</div></details></div>
<div class="toot" id="created-1954"><h2>Issue #1954 created<span class="toot-id"> #created-1954</span></h2><div class="pubdate">24 Apr at 09:39:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1954">https://github.com/qt4cg/qtspecs/issues/1954</a></div><details><summary>Private fields in records</summary><div class="markup"><p>It would be nice to have some way of indicating that some of the fields in a record are (in some sense) private, intended for internal use.</p>
<p>I'm not proposing full encapsulation - the instances of a record type are maps, and can be manipulated by functions such as map:keys(), map:get(), and map:put() which expose all the keys.</p>
<p>Rather I'm proposing a convention that makes it difficult to access the fields "accidentally" using lookup expressions: a bit like naming the fields using a leading underscore, but something a bit stronger. Analogous to reflection in Java, which allows you to break encapsulation with a bit of effort.</p>
<p>I'd suggest making the keys for these "private" fields QNames rather than strings:</p>
<ul>
<li>In the record declaration, we allow a field name to be a QName rather than a string: record(private:data as item()*, long, lat).</li>
<li>QNames can't be used directly in a lookup; to access the field, you need to know what namespace "private" is bound to, which doesn't need to be published information (though it is of course discoverable)</li>
<li>Internally the implementor of this interface can bind a QName to a private variable and use this:</li>
</ul>
<p><code>declare %private variable $private:data as xs:QName('http://my.private.namespace/', 'data')</code></p>
<p>and then access it using <code>$record?$private:data</code></p>
</div></details></div>
<div class="toot" id="created-1953"><h2>Issue #1953 created<span class="toot-id"> #created-1953</span></h2><div class="pubdate">24 Apr at 09:19:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1953">https://github.com/qt4cg/qtspecs/issues/1953</a></div><details><summary>Make generation of constructor function for named record types optional</summary><div class="markup"><p>I propose that when a named record type is declared in XQuery or XSLT, the generation of a constructor function should be optional.</p>
<p>Perhaps in XQuery it should only happen if there is an annotation <code>%constructor</code>, and in XSLT if there is an attribute <code>constructor="yes"</code>. I think it's better for the default to be "no constructor" because it's better to make the existence of a constructor explicitly visible.</p>
<p>There are cases where you don't want a system-generated constructor primarily because you want to provide your own constructor which perhaps accepts the data in a slightly different form, or perhaps imposes constraints like cross-validation of supplied arguments.</p>
</div></details></div>
<div class="toot" id="created-1952"><h2>Issue #1952 created<span class="toot-id"> #created-1952</span></h2><div class="pubdate">23 Apr at 21:47:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1952">https://github.com/qt4cg/qtspecs/issues/1952</a></div><details><summary>Change option name from xsi-schema-location to use-xsi-schema-location</summary><div class="markup"><p>Functions (such as fn:doc and fn:parse-xml) that have a boolean option <code>xsi-schema-location</code> should change this to <code>use-xsi-schema-location</code> to make it clearer that the expected value is a boolean and not a schema location.</p>
<p>(Comment made in passing at the last meeting).</p>
</div></details></div>
<div class="toot" id="created-1951"><h2>Issue #1951 created<span class="toot-id"> #created-1951</span></h2><div class="pubdate">23 Apr at 15:54:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1951">https://github.com/qt4cg/qtspecs/issues/1951</a></div><details><summary>Some nits regarding the method attribute</summary><div class="markup"><p>A few minor comments on the method attribute (that also apply to XSLT 3.0):</p>
<ol>
<li>
<p>A note in section 25.1 says "In the case of the attributes <strong>method</strong>, cdata-section-elements, suppress-indentation, and use-character-maps, the effective value of the attribute contains a space-separated <strong>list</strong> of EQNames."  The effective value of the method attribute should not be a list of values, just one value, right?</p>
</li>
<li>
<p>The XSD schema requires that the method attribute contain a colon if it is not one of the 6 "built-in" values.  (The type xsl:method restricts xsl:EQName with the pattern "\c*:\c*").  Now that it can be an expanded QName,  it should also allow for Q{...}.</p>
</li>
<li>
<p>A note in section 3.2 says:  "Extension attributes may also be used to influence the behavior of the serialization methods <strong>xml, xhtml, html, or text</strong>, to the extent that... If a serialization method other than one of these <strong>four</strong> is requested (<strong>using a prefixed QName</strong> in the method parameter) then...".<br>
a. This lists only 4 methods, Should "json" and "adaptive" be added to the list and "four" changed to "six"?
b. Should "using a prefixed QName" be changed to something like "using an EQName with a non-absent namespace"?</p>
</li>
<li>
<p>In the note about error XTSE1570 in Section 26.2.  "The value must (if present) be a valid EQName. If it is a lexical QName with no a prefix, then it identifies a method specified in [XSLT and XQuery Serialization] and must be one of <strong>xml, html, xhtml, or text</strong>.
a. It only lists the 4 methods, leaving out "json" and "adaptive"
b. Typo - "no a prefix" should be "no prefix"</p>
</li>
</ol>
<p>Thanks!</p>
</div></details></div>
<div class="toot" id="created-1950"><h2>Pull request #1950 created<span class="toot-id"> #created-1950</span></h2><div class="pubdate">23 Apr at 15:52:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1950">https://github.com/qt4cg/qtspecs/pull/1950</a></div><details><summary>1704 Add rules/notes for BOM and related topics</summary><div class="markup"><p>Fix #1704</p>
<p>The main substantive change is that unparsed-text() now explicitly discards any leading BOM.</p>
<p>Other functions that involve decoding of octets to strings are updated to reflect the changes that we made to reference the concept of "permitted characters".</p>
</div></details></div>
<div class="toot" id="closed-1644"><h2>Issue #1644 closed<span class="toot-id"> #closed-1644</span></h2><div class="pubdate">23 Apr at 15:29:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1644">https://github.com/qt4cg/qtspecs/issues/1644</a></div><p>fn:elements-to-maps: Mixed Content</p></div>
<div class="toot" id="closed-1658"><h2>Issue #1658 closed<span class="toot-id"> #closed-1658</span></h2><div class="pubdate">23 Apr at 15:28:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1658">https://github.com/qt4cg/qtspecs/issues/1658</a></div><p>fn:elements-to-maps: `empty`, normalize space ?</p></div>
<div class="toot" id="closed-1647"><h2>Issue #1647 closed<span class="toot-id"> #closed-1647</span></h2><div class="pubdate">23 Apr at 15:28:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1647">https://github.com/qt4cg/qtspecs/issues/1647</a></div><p>fn:elements-to-maps: Explicit Layouts</p></div>
<div class="toot" id="created-1949"><h2>Issue #1949 created<span class="toot-id"> #created-1949</span></h2><div class="pubdate">23 Apr at 15:26:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1949">https://github.com/qt4cg/qtspecs/issues/1949</a></div><details><summary>fn:element-to-map: Updated Feedback</summary><div class="markup"><p>My feedback is based on the latest version PR (#1906):</p>
<p><strong>1. Boolean types</strong></p>
<p>I think we should be careful about changing data to a representation that differs from the input data. If the input contains <code>0</code> and <code>1</code>, it seems too invasive to me to return a boolean. Many users will not be aware that those numbers are valid candidates for Boolean conversions in XPath. That’s why I would still pledge for adapting the type rule detections, and placing <code>numeric</code> before <code>boolean</code> (related: 5).</p>
<p>Things are even more awkward (if I got the rules right) when working without a conversion plan:</p>
<pre><code class="language-xquery">(: Query :)
element-to-map(&lt;x&gt;&lt;a&gt;1&lt;/a&gt;&lt;a&gt;2&lt;/a&gt;&lt;/x&gt;)

(: Result :)
{ "x": [ true(), 2 ] }
</code></pre>
<p><strong>2. Explicit types</strong></p>
<p>I still feel uneasy that we ignore the specified type if it does not match – even more because XML is known for its rigor that documents must be well-formed to be accepted. I agree we should allow users to be lax about their generated output – by deliberately omitting types – but if type hints are supplied, I think we should take them serious.</p>
<p>An example:</p>
<pre><code class="language-xquery">element-to-map(
  &lt;a&gt;2&lt;/a&gt;,
  { 'plan': { 'a': { 'layout': 'simple', 'type': 'boolean' } } }
)
</code></pre>
<p><strong>3. Numeric casts</strong></p>
<blockquote>
<p>If the prescribed type is <code>numeric</code> and the value is castable as <code>xs:numeric</code>, then it is output as an instance of <code>xs:integer</code>, <code>xs:decimal</code>, or <code>xs:double</code> depending on the lexical form of the value, following the same rules as for XPath numeric literals.</p>
</blockquote>
<p>Unless we use the same rule somewhere else in the spec, I would definitely vote for making things easier and choose consistency. <code>xs:numeric(&lt;a&gt;1&lt;/a&gt;)</code> returns a double value, so I think we should do exactly the same here. If the result will be serialized as JSON, everything will be a number anyway.</p>
<p><strong>4. Normalized space</strong></p>
<blockquote>
<ol start="2">
<li>If <code>empty($EE/(* | text())</code> …the layout is <code>empty</code></li>
</ol>
</blockquote>
<p>I still believe <code>empty($EE/(* | text()[normalize-space()])</code> would be a better choice. The error sections for both <code>empty</code> and <code>list</code> state that “whitespace-only text nodes are discarded.”, so it is not clear to me why the rules for whitespace text nodes differ for these layouts.</p>
<p><strong>5. 18.5.2 Creating a conversion plan</strong></p>
<p>The current rules do not mention yet that <code>child</code> keys need to be added for <code>list</code> and <code>list-plus</code>.</p>
<p>In general, I would appreciate if redundancy could be removed. I’m still struggling finding all relevant information without resorting to the tests. For example, I think that due to the new XQuery code, a lot of informal and possibly lossy rules can be dropped.</p>
<p><strong>6. Function signatures: <code>document-node()</code>, <code>element()</code></strong></p>
<p>Both functions should accept only elements, or accept both document nodes and elements. Maybe it’s better to only accept elements; it would resemble the name of the function.</p>
<p><strong>7. <code>deep-skip</code> option</strong></p>
<p>I wouldn’t be able to tell how a <code>shallow-skip</code> option could work, so maybe <code>skip</code> is sufficient?</p>
<p><strong>8. Streamability</strong></p>
<blockquote>
<ul>
<li>The conversion is not streamable.</li>
</ul>
</blockquote>
<p>It is not clear (to me) what this means. Is this XSLT-related? Maybe a reference would be helpful, or we should drop the phrase if it’s not relevant anymore?</p>
<p>My observation was that <code>fn:element-to-map</code> can be implemented without keeping the full document in main-memory, so maybe we should let the processors decide what to do?</p>
<p><strong>9. JSON</strong></p>
<blockquote>
<p>Example output: …shown as serialized JSON. The result is always shown as a singleton map…</p>
</blockquote>
<p>This sounds contradictory, as there are no maps in the JSON terminology (but objects). Maybe there is no need to mention the JSON serialization, as the presented results are maps &amp; arrays that can be run as XPath expressions out of the box.</p>
<p><strong>10. Layout rules: errors</strong></p>
<p>The error rules for <code>empty</code> and <code>empty-plus</code> say: “If any other child nodes are present, this layout fails.”. For the <code>simple</code> and <code>simple-plus</code> layouts, it is “If any child elements are present, this layout fails.”.</p>
<p>Am I right to assume that in both cases it’s only child element that result in a failure?</p>
</div></details></div>
<div class="toot" id="created-1948"><h2>Issue #1948 created<span class="toot-id"> #created-1948</span></h2><div class="pubdate">23 Apr at 14:43:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1948">https://github.com/qt4cg/qtspecs/issues/1948</a></div><details><summary>fn:element-to-map: Tests</summary><div class="markup"><p>My feedback is based on the latest version PR (#1906) and the latest test cases (https://github.com/qt4cg/qt4tests/pull/223). I decided to list my observations in this repository, as I am not sure whether it’s the tests or the spec that may possibly need to be revised:</p>
<ol>
<li><code>element-to-map-017</code>:</li>
</ol>
<p>As discussed in the last meeting (see also https://github.com/qt4cg/qtspecs/pull/1906#issuecomment-2821502378), the <code>xsi:type</code> attribute should already be ignored in the choice of the conversion plan, in order to choose a plan that does not include attributes:</p>
<pre><code>element-to-map(parse-xml('&lt;a xmlns="http://a.com/" xsi:type="xs:integer"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;2&lt;/a&gt;')/*)
Result: { "Q{http://a.com/}a": 2 }
Expect: { "Q{http://a.com/}a": { "#content": "2" } }
</code></pre>
<ol start="2">
<li><code>element-to-map-401</code>:</li>
</ol>
<p>I would expect the <code>record</code> layout to be also applied for the <code>b</code> child node:</p>
<pre><code>element-to-map(parse-xml('&lt;a id="3"&gt;&lt;b/&gt;&lt;/a&gt;')/a, {'plan': {'a': {'layout': 'empty'},
  '*': {'layout': 'record'}, '@id': {'type': 'numeric'} }})
Result: { "a": { "@id": 3, "b": { } } }
Expect: { "a": { "@id": 3, "b": "" } }
</code></pre>
<ol start="3">
<li><code>element-to-map-420</code> and others:</li>
</ol>
<p>As discussed in the meeting, <code>list</code> layouts require a <code>child</code> key:</p>
<pre><code>element-to-map(parse-xml('&lt;a id="zz"&gt;&lt;b/&gt;&lt;b/&gt;&lt;c/&gt;&lt;/a&gt;')/a, {'plan':{'a':{'layout':'list'}}})
Error : XPTY0004: Missing key 'child' (node: a).
Expect: FOJS0008
</code></pre>
<ol start="4">
<li><code>element-to-map-511</code>:</li>
</ol>
<p>I would expect the <code>mixed</code> layout to be also applied for the <code>a</code> child node:</p>
<pre><code>element-to-map(parse-xml('&lt;a&gt;The &lt;i&gt;short&lt;/i&gt; introduction&lt;/a&gt;')/a, {'plan': {'a': {'layout':'simple'}, '*': {'layout':'mixed'} }})
Result: { "a": [ "The ", { "i": [ "short" ] }, " introduction" ] }
Expect: { "a": array { ("The ", { "i": "short" }, " introduction") } }
</code></pre>
</div></details></div>
<div class="toot" id="closed-1936"><h2>Issue #1936 closed<span class="toot-id"> #closed-1936</span></h2><div class="pubdate">22 Apr at 20:19:39 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1936">https://github.com/qt4cg/qtspecs/issues/1936</a></div><p>XSD for XSLT 4.0 is missing form="qualified" on several attributes within the attribute group "literal-result-element-attributes"</p></div>
<div class="toot" id="closed-1943"><h2>Issue #1943 closed<span class="toot-id"> #closed-1943</span></h2><div class="pubdate">22 Apr at 20:16:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1943">https://github.com/qt4cg/qtspecs/pull/1943</a></div><p>Mark attribute declarations as form=qualified</p></div>
<div class="toot" id="closed-1947"><h2>Issue #1947 closed<span class="toot-id"> #closed-1947</span></h2><div class="pubdate">22 Apr at 20:16:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1947">https://github.com/qt4cg/qtspecs/pull/1947</a></div><p>1936 Mark attributes with form=qualified</p></div>
<div class="toot" id="created-1947"><h2>Pull request #1947 created<span class="toot-id"> #created-1947</span></h2><div class="pubdate">22 Apr at 20:16:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1947">https://github.com/qt4cg/qtspecs/pull/1947</a></div><details><summary>1936 Mark attributes with form=qualified</summary><div class="markup"><p>Fix #1936</p>
</div></details></div>
<div class="toot" id="created-1946"><h2>Issue #1946 created<span class="toot-id"> #created-1946</span></h2><div class="pubdate">22 Apr at 16:27:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1946">https://github.com/qt4cg/qtspecs/issues/1946</a></div><details><summary>We need examples of a record with an entry that is a %method and invoking this method with the result it must produce</summary><div class="markup"><p>We have two new great features in XPath 4.0 - the <strong>record</strong> and <strong>%method</strong> entries of a map.</p>
<p>It is natural to combine the two and have a record, one of whose entries is a method.</p>
<p>Unfortunately, at present there is no such example in the relevant Specs, and this leaves the reader trying to guess even the syntax of the specific record definition.</p>
<p>Therefore, we need at least one such example, to help readers and implementors in this.</p>
<p>BaseX did a great job in implementing both records and  %method map-entries, and I constructed the following example, which is syntactically correct, but results in error (due to function coercion - explained in a separate issue here: https://github.com/qt4cg/qtspecs/issues/1938).</p>
<p>This code:</p>
<pre><code class="language-xq">declare namespace t = "my:t";
declare record t:location 
   ( longitude as xs:integer,
     latitude as xs:integer,
     myFun2 as %method fn() as xs:integer,
     *
   );
   
   let $r := t:location(longitude := 25, latitude := 10, myFun2 := %method fn() {?longitude + ?latitude}
                        )
     return ($r, $r?myFun2())
</code></pre>
<p>When executed with BaseX, raises an error: <strong><em>[XPDY0002] .: Context value is undefined.</em></strong></p>
<p>We need the specification to provide a similar example, and what the result should be.</p>
<p>In particular:</p>
<ol>
<li>Must the return type of the method myFun2 (above) be specified or can it be omitted? BaseX raises a syntax error if this is specified as: <code>myFun2 as %method fn()</code> : "<strong><em>Expecting 'as', found ','</em></strong> ?</li>
<li>If the method entry is specified as having a particular type (such as: <code>as xs:integer</code>) then can the corresponding function, provided in the construction of this record omit the function type (such as <code>myFun2 := %method fn() {?longitude + ?latitude}</code>) , even though it is clear that the type of the result is <code>xs:integer</code> ?</li>
</ol>
</div></details></div>
<div class="toot" id="closed-1941"><h2>Issue #1941 closed<span class="toot-id"> #closed-1941</span></h2><div class="pubdate">22 Apr at 16:13:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1941">https://github.com/qt4cg/qtspecs/pull/1941</a></div><p>Add PR numbers and dates to change metadata</p></div>
<div class="toot" id="closed-1921"><h2>Issue #1921 closed<span class="toot-id"> #closed-1921</span></h2><div class="pubdate">22 Apr at 16:10:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1921">https://github.com/qt4cg/qtspecs/issues/1921</a></div><p>XSLT: semantics of PatternVersionRange</p></div>
<div class="toot" id="closed-1922"><h2>Issue #1922 closed<span class="toot-id"> #closed-1922</span></h2><div class="pubdate">22 Apr at 16:10:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1922">https://github.com/qt4cg/qtspecs/pull/1922</a></div><p>1921 Expand definition of version ranges in XSLT</p></div>
<div class="toot" id="closed-1907"><h2>Issue #1907 closed<span class="toot-id"> #closed-1907</span></h2><div class="pubdate">22 Apr at 16:07:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1907">https://github.com/qt4cg/qtspecs/issues/1907</a></div><p>Method lookup: wildcards</p></div>
<div class="toot" id="closed-1926"><h2>Issue #1926 closed<span class="toot-id"> #closed-1926</span></h2><div class="pubdate">22 Apr at 16:07:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1926">https://github.com/qt4cg/qtspecs/pull/1926</a></div><p>1907 method lookup (disallow wildcard selection)</p></div>
<div class="toot" id="closed-1928"><h2>Issue #1928 closed<span class="toot-id"> #closed-1928</span></h2><div class="pubdate">22 Apr at 16:04:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1928">https://github.com/qt4cg/qtspecs/pull/1928</a></div><p>1844b Arrow Expressions</p></div></div><p>See 3960
            more statuses in yearly archives.</p></article></main></body></html>