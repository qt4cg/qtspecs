<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="minutes—07-15"><h2>QT4 CG meeting 129 draft minutes<span class="toot-id"> #minutes—07-15</span></h2><div class="pubdate">15 Jul at 16:45:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2025/07-15">https://qt4cg.org/meeting/minutes/2025/07-15</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-2011"><h2>Issue #2011 closed<span class="toot-id"> #closed-2011</span></h2><div class="pubdate">15 Jul at 16:27:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2011">https://github.com/qt4cg/qtspecs/pull/2011</a></div><p>675(part): Add XSLT static typing rules for new kinds of XPath expression</p></div>
<div class="toot" id="closed-2038"><h2>Issue #2038 closed<span class="toot-id"> #closed-2038</span></h2><div class="pubdate">15 Jul at 16:24:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2038">https://github.com/qt4cg/qtspecs/issues/2038</a></div><p>Drop dependency of fn:apply-templates on the default mode</p></div>
<div class="toot" id="closed-2043"><h2>Issue #2043 closed<span class="toot-id"> #closed-2043</span></h2><div class="pubdate">15 Jul at 16:24:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2043">https://github.com/qt4cg/qtspecs/pull/2043</a></div><p>2038 Tweak the rules for fn:apply-templates references to modes</p></div>
<div class="toot" id="created-2101"><h2>Issue #2101 created<span class="toot-id"> #created-2101</span></h2><div class="pubdate">15 Jul at 16:21:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2101">https://github.com/qt4cg/qtspecs/issues/2101</a></div><details><summary>Named record types: drop constructors, complete list</summary><div class="markup"><p>The spec defines various built-in named record types (https://qt4cg.org/specifications/xpath-functions-40/Overview.html#id-built-in-named-record-types):</p>
<pre><code class="language-xquery">key-value-pair
load-xquery-module-record
parsed-csv-structure-record
random-number-generator-record
schema-type-record
uri-structure-record
</code></pre>
<p>Suggestions:</p>
<ol>
<li>The spec says in https://qt4cg.org/specifications/xquery-40/xquery-40.html#id-named-record-types:</li>
</ol>
<blockquote>
<p>Named record types implicitly create a constructor function that can be used to create instances of the record type.</p>
</blockquote>
<p>I would propose excluding the constructors for built-in types. It will save us a lot of bulky code in the implementations, for functions that will hardly be used, as they all refer to return types of existing functions. Ironically, the only exception might be <code>key-value-pair</code>, but it is redundant anyway (we already have <code>map:pair</code>… unless it is dropped, together with the record type, by #2092).</p>
<ol start="2">
<li>A type is missing for the result of <code>fn:divide-decimals</code>, and we should suffix <code>key-value-pair</code> with <code>-record</code> (provided we will keep it in the spec).</li>
</ol>
</div></details></div>
<div class="toot" id="closed-2014"><h2>Issue #2014 closed<span class="toot-id"> #closed-2014</span></h2><div class="pubdate">15 Jul at 16:19:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2014">https://github.com/qt4cg/qtspecs/pull/2014</a></div><p>QT4CG-122-01 Add notes, examples, and rationale for xsl:select</p></div>
<div class="toot" id="closed-2003"><h2>Issue #2003 closed<span class="toot-id"> #closed-2003</span></h2><div class="pubdate">15 Jul at 16:17:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2003">https://github.com/qt4cg/qtspecs/issues/2003</a></div><p>Conditional entries in map constructors</p></div>
<div class="toot" id="closed-2094"><h2>Issue #2094 closed<span class="toot-id"> #closed-2094</span></h2><div class="pubdate">15 Jul at 16:17:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2094">https://github.com/qt4cg/qtspecs/pull/2094</a></div><p>2003 Generalize Map Constructors</p></div>
<div class="toot" id="closed-2083"><h2>Issue #2083 closed<span class="toot-id"> #closed-2083</span></h2><div class="pubdate">15 Jul at 16:13:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2083">https://github.com/qt4cg/qtspecs/pull/2083</a></div><p>2054 Generalized Path Expressions</p></div>
<div class="toot" id="closed-2031"><h2>Issue #2031 closed<span class="toot-id"> #closed-2031</span></h2><div class="pubdate">15 Jul at 16:03:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2031">https://github.com/qt4cg/qtspecs/pull/2031</a></div><p>2025 JNodes</p></div>
<div class="toot" id="closed-1307"><h2>Issue #1307 closed<span class="toot-id"> #closed-1307</span></h2><div class="pubdate">15 Jul at 16:02:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1307">https://github.com/qt4cg/qtspecs/issues/1307</a></div><p>For symmetry, add functions array:scan-left and array:scan-right</p></div>
<div class="toot" id="closed-2057"><h2>Issue #2057 closed<span class="toot-id"> #closed-2057</span></h2><div class="pubdate">15 Jul at 16:02:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2057">https://github.com/qt4cg/qtspecs/issues/2057</a></div><p>Steps: variable element names</p></div>
<div class="toot" id="closed-2035"><h2>Issue #2035 closed<span class="toot-id"> #closed-2035</span></h2><div class="pubdate">15 Jul at 16:02:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2035">https://github.com/qt4cg/qtspecs/issues/2035</a></div><p>Recursive record types: unrealistic example in XPath spec</p></div>
<div class="toot" id="closed-2096"><h2>Issue #2096 closed<span class="toot-id"> #closed-2096</span></h2><div class="pubdate">15 Jul at 16:02:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2096">https://github.com/qt4cg/qtspecs/pull/2096</a></div><p>2035 Drop unworkable example of recursive record types</p></div>
<div class="toot" id="created-2100"><h2>Issue #2100 created<span class="toot-id"> #created-2100</span></h2><div class="pubdate">15 Jul at 15:55:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2100">https://github.com/qt4cg/qtspecs/issues/2100</a></div><details><summary>JNodes: functions</summary><div class="markup"><p>With #2083, some XQFO functions was generalized for JNodes:</p>
<pre><code>fn:distinct-ordered-nodes
fn:generate-id
fn:root
fn:siblings
fn:transitive-closure
</code></pre>
<p>Others are still pending (to be completed):</p>
<pre><code>fn:has-children
fn:innermost
fn:outermost
fn:path
</code></pre>
<p>We should…</p>
<ol>
<li>analyze the rules of the existing functions (for example, what happens if both XNodes and JNodes are used in <code>fn:transitive-closure</code>?)</li>
<li>add more functions.</li>
</ol>
</div></details></div>
<div class="toot" id="created-2099"><h2>Issue #2099 created<span class="toot-id"> #created-2099</span></h2><div class="pubdate">15 Jul at 12:31:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2099">https://github.com/qt4cg/qtspecs/issues/2099</a></div><details><summary>Choosing names for the jnode function and the jnode type</summary><div class="markup"><p>As a late-breaking change to PR #2083, the item type syntax for matching JNodes has been changed to <code>jnode-type()</code>, to avoid a clash with the name of the function <code>fn:jnode</code>.</p>
<p>We might prefer to resolve this clash in a different way.</p>
</div></details></div>
<div class="toot" id="created-2098"><h2>Issue #2098 created<span class="toot-id"> #created-2098</span></h2><div class="pubdate">15 Jul at 11:24:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2098">https://github.com/qt4cg/qtspecs/issues/2098</a></div><details><summary>JNodes: combining node sequences</summary><div class="markup"><p>Internal questions and feedback on the <code>union</code> operator, triggered by the JNodes proposal:</p>
<ol>
<li>Will <code>{ 1: 2 } union { 3: 4 }</code> be allowed, or will it be <code>{ 1: 2 }/. union { 3: 4 }/.</code> ?</li>
<li>Combining maps and arrays: one might expect <code>{ 1: 2 } union { 3: 4 }</code> to result in <code>{ 1: 2, 3: 4 }</code>.</li>
<li>If <code>union</code> et al. are enhanced anyway, couldn’t they be generalized for sequences? <code>(1, 2) union 3</code> → <code>(1, 2, 3)</code>.</li>
</ol>
<p>…which I answered as follows:</p>
<ol>
<li>I guess no; the conversion to JNodes is needed.</li>
<li>…a good reason why we should not implicitly coerce maps/arrays to JNodes.</li>
<li>For atomic-only sequences, it could be equivalent to <code>fn:distinct-values((A, B))</code>. For heterogenous sequences, it gets tricky: How should <code>&lt;a&gt;1&lt;/a&gt; union 1e0</code> be combined? Similar to how functions like <code>fn:min</code> are defined, it could be the first item that determines how the remaining input is combined (but the operation would not be commutative anymore; <code>A union B</code> might yield different results than <code>B union A</code>).</li>
</ol>
</div></details></div>
<div class="toot" id="agenda-07-15"><h2>QT4 CG meeting 129 draft agenda<span class="toot-id"> #agenda-07-15</span></h2><div class="pubdate">14 Jul at 12:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2025/07-15">https://qt4cg.org/meeting/agenda/2025/07-15</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="closed-366"><h2>Issue #366 closed<span class="toot-id"> #closed-366</span></h2><div class="pubdate">14 Jul at 06:41:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/366">https://github.com/qt4cg/qtspecs/issues/366</a></div><p>Support xsl:use-package with xsl:package-location</p></div>
<div class="toot" id="created-2097"><h2>Issue #2097 created<span class="toot-id"> #created-2097</span></h2><div class="pubdate">13 Jul at 10:31:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2097">https://github.com/qt4cg/qtspecs/issues/2097</a></div><details><summary>`jnode` as a subtype of `node`</summary><div class="markup"><p>It seems that introduce <code>jnode</code> by extending <code>node</code> is more consistent than introducing <code>jnode</code> as a data type that is a sibling to <code>node</code>.</p>
<p>I would like to hear comments about pros and cons of this approach.</p>
<p>@ruv <a href="https://github.com/qt4cg/qtspecs/pull/2083#issuecomment-3056148707">wrote</a>:</p>
<blockquote>
<blockquote>
<p>I wonder what if <code>jnode</code> was a subtype of <code>node</code></p>
</blockquote>
</blockquote>
<p>@michaelhkay <a href="https://github.com/qt4cg/qtspecs/pull/2083#issuecomment-3062732836">wrote</a>:</p>
<blockquote>
<p>Then all operations on node would become available for jnode, including many that obviously don't make sense, for example getting the in-scope namespaces, applying schema validation, etc etc.</p>
</blockquote>
<p>This does not seem to be a problem. There are many features that make sense for one node kind (or type) and don't make sense for other.</p>
<p>For example,</p>
<ul>
<li><code>fn:name()</code> does not make sense for <code>document-node()</code>, <code>comment()</code>, <code>text()</code> (but applies to them and return the empty string);</li>
<li><code>fn:in-scope-prefixes()</code> applies to only a node that is an <code>element()</code>.</li>
<li>the constructor <code>document { }</code> does not accept an attribute node.</li>
</ul>
<p>Thus, nodes that are a subtype of jnode can have their own restrictions.</p>
<h3><code>jnode</code> as subtype of <code>node</code></h3>
<p>There can be four direct subtypes of <code>jnode</code>:</p>
<ul>
<li><code>map-node</code></li>
<li><code>array-node</code></li>
<li><code>map-entry</code></li>
<li><code>array-member</code> (or maybe let's call it <code>array-entry</code>)</li>
</ul>
<p>So, <code>jnode</code> is a union of them: <code>jnode = map-node | array-node | map-entry | array-entry</code>.</p>
<p>Nodes of the type <code>map-node</code> and <code>array-node</code> are similar to <code>document-node</code>. Their parent is <strong>always</strong> <code>()</code>.</p>
<p>The child axis of a <code>jnode</code> can contains <strong>only</strong> nodes of the type <code>map-entry | array-entry</code>.</p>
<p>An advantage of this approach is that there is no need to introduce XNode and GNode, and corresponding confusion, like say that <code>node()</code> matches XNode, but not GNode (in the general case).</p>
<p>This probably also allows us to specify XSLT for jnodes more seamlessly.</p>
</div></details></div>
<div class="toot" id="created-2096"><h2>Pull request #2096 created<span class="toot-id"> #created-2096</span></h2><div class="pubdate">13 Jul at 10:07:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2096">https://github.com/qt4cg/qtspecs/pull/2096</a></div><details><summary>2035 Drop unworkable example of recursive record types</summary><div class="markup"><p>Fix #2035</p>
</div></details></div>
<div class="toot" id="created-2095"><h2>Issue #2095 created<span class="toot-id"> #created-2095</span></h2><div class="pubdate">13 Jul at 09:37:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2095">https://github.com/qt4cg/qtspecs/issues/2095</a></div><details><summary>JNodes: result processing</summary><div class="markup"><p>By playing around with the new JNodes syntax, I noticed that the somewhat bulky function <code>fn:jnode-content</code> needs to be used a lot to process the result of a path traversal, basically every time when coercion is not possible or does not make sense (iterations, any operation based on <code>item()*</code>).</p>
<p>An example:</p>
<pre><code class="language-xquery">{ 'Catania': { 'nomi': ('Alfredo', 'Andrea') } }
</code></pre>
<ol>
<li>Count the number of persons in Catania:</li>
</ol>
<pre><code class="language-xquery">./Catania/nomi =&gt; jnode-content() =&gt; count()
</code></pre>
<ol start="2">
<li>List all persons in upper case:</li>
</ol>
<pre><code class="language-xquery">for $nome in .//nomi =&gt; jnode-content()
return upper-case($nome)
</code></pre>
<p>To prevent users from selectively resorting to the shorter lookup syntax…</p>
<pre><code class="language-xquery">.?Catania?nomi =&gt; count()

for $nome in .?Catania?*?nomi
return upper-case($nome)
</code></pre>
<p>…we could include another pseudo-function that returns the content/value instead of a JNode:</p>
<pre><code class="language-xquery">./Catania/content(nomi) =&gt; count()

for $nome in .//content(nomi) 
return upper-case($nome)
</code></pre>
<p>One drawback would be that this would violate the current principle that the righthand side is only a filter.</p>
</div></details></div>
<div class="toot" id="created-2094"><h2>Pull request #2094 created<span class="toot-id"> #created-2094</span></h2><div class="pubdate">13 Jul at 08:40:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2094">https://github.com/qt4cg/qtspecs/pull/2094</a></div><details><summary>2003 Generalize Map Constructors</summary><div class="markup"><p>Allows conditional and repeated entries in a map constructor.</p>
<p>Fix #2003</p>
</div></details></div>
<div class="toot" id="created-2093"><h2>Issue #2093 created<span class="toot-id"> #created-2093</span></h2><div class="pubdate">12 Jul at 09:07:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2093">https://github.com/qt4cg/qtspecs/issues/2093</a></div><details><summary>XQFO: structuring</summary><div class="markup"><p>The way the XQFO functions are structured is becoming increasingly arbitrary. Examples:</p>
<ul>
<li>Processing sequences: <code>fn:doc</code></li>
<li>Processing nodes: <code>fn:string</code></li>
<li>Processing QNames: <code>fn:in-scope-prefixes</code></li>
<li>Parsing and serializing: <code>fn:xsd-validator</code></li>
</ul>
<p>For at least 10% of the functions, it will be difficult to find a good categorization (categorization is a challenging topic in itself), but maybe we can improve the status quo.</p>
<p>We can certainly tackle this at a later stage; this issue is only about reminding us of the task.</p>
</div></details></div>
<div class="toot" id="closed-1715"><h2>Issue #1715 closed<span class="toot-id"> #closed-1715</span></h2><div class="pubdate">11 Jul at 21:45:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1715">https://github.com/qt4cg/qtspecs/issues/1715</a></div><p>Array Lookups: partial removal of out-of-bounds checks</p></div>
<div class="toot" id="closed-1995"><h2>Issue #1995 closed<span class="toot-id"> #closed-1995</span></h2><div class="pubdate">11 Jul at 21:42:54 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1995">https://github.com/qt4cg/qtspecs/issues/1995</a></div><p>Consistency: array lookups</p></div>
<div class="toot" id="closed-1872"><h2>Issue #1872 closed<span class="toot-id"> #closed-1872</span></h2><div class="pubdate">11 Jul at 21:42:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1872">https://github.com/qt4cg/qtspecs/issues/1872</a></div><p>Arrays: members → values / entries?</p></div>
<div class="toot" id="closed-1871"><h2>Issue #1871 closed<span class="toot-id"> #closed-1871</span></h2><div class="pubdate">11 Jul at 21:38:13 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1871">https://github.com/qt4cg/qtspecs/issues/1871</a></div><p>Arrays and maps: consistency</p></div>
<div class="toot" id="created-2092"><h2>Issue #2092 created<span class="toot-id"> #created-2092</span></h2><div class="pubdate">11 Jul at 20:34:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2092">https://github.com/qt4cg/qtspecs/issues/2092</a></div><details><summary>Drop map:pair, map:of-pairs, map:pairs, array:members, array:of-members</summary><div class="markup"><p>I propose dropping the three functions <code>map:pair</code>, <code>map:of-pairs</code>, <code>map:pairs</code>, together with the built-in record type <code>fn:key-value-pair</code>.</p>
<p>With the introduction of JNodes, I think these are redundant.</p>
<ul>
<li>In place of <code>map:pairs($map)</code>, use <code>$map/*</code>.</li>
<li>In place of <code>map:pair($key, $value)</code>, use <code>{$key : $value}/*</code></li>
<li>In place of <code>map:of-pairs</code>, use <code>map:build($jnodes, jnode-selector#1, jnode-content#1)</code></li>
</ul>
<p>I'm proposing to keep the map:entry, map:entries, and map:merge trio which also do much the same thing.</p>
<p>Similarly, I propose dropping <code>array:members</code> and <code>array:of-members</code>, and "value records":</p>
<ul>
<li>In place of <code>array:members($array)</code>, use <code>$array/*</code></li>
<li>In place of <code>array:of-members</code>, use <code>array:build($jnodes, jnode-content#1)</code></li>
</ul>
<p>(Alternatively: keep the functions but define them to return and consume JNodes, rather than key-value and value records.)</p>
</div></details></div>
<div class="toot" id="closed-2046"><h2>Issue #2046 closed<span class="toot-id"> #closed-2046</span></h2><div class="pubdate">11 Jul at 15:29:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2046">https://github.com/qt4cg/qtspecs/issues/2046</a></div><p>Promote ".." to a primary expression</p></div></div><p>See 4255
            more statuses in yearly archives.</p></article></main></body></html>