<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="closed-1909"><h2>Issue #1909 closed<span class="toot-id"> #closed-1909</span></h2><div class="pubdate">06 Apr at 23:22:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1909">https://github.com/qt4cg/qtspecs/pull/1909</a></div><p>1902 bin unpack out of range</p></div>
<div class="toot" id="created-1915"><h2>Pull request #1915 created<span class="toot-id"> #created-1915</span></h2><div class="pubdate">06 Apr at 23:21:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1915">https://github.com/qt4cg/qtspecs/pull/1915</a></div><details><summary>1902b bin:unpack out of range error</summary><div class="markup"><p>Replaces PR #1909</p>
<p>Adds error conditions for unpacking an integer that is too large for the implementation</p>
</div></details></div>
<div class="toot" id="created-1914"><h2>Pull request #1914 created<span class="toot-id"> #created-1914</span></h2><div class="pubdate">04 Apr at 16:08:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1914">https://github.com/qt4cg/qtspecs/pull/1914</a></div><details><summary>501 Error handling: try/finally</summary><div class="markup"><p>Closes #501</p>
</div></details></div>
<div class="toot" id="created-1913"><h2>Pull request #1913 created<span class="toot-id"> #created-1913</span></h2><div class="pubdate">04 Apr at 15:08:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1913">https://github.com/qt4cg/qtspecs/pull/1913</a></div><details><summary>1911 Clarifications for regular expressions</summary><div class="markup"><ol>
<li>Reinstates the non-capturing group syntax <code>(?: xxx )</code></li>
<li>Clarifies that a zero-length matching segment does not overlap an immediately preceding adjacent (but non-zero-length) segment.</li>
</ol>
</div></details></div>
<div class="toot" id="created-1912"><h2>Issue #1912 created<span class="toot-id"> #created-1912</span></h2><div class="pubdate">04 Apr at 14:05:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1912">https://github.com/qt4cg/qtspecs/issues/1912</a></div><details><summary>Error handling: `fn:throw`</summary><div class="markup"><p>Adopted from #501:</p>
<p>In https://github.com/qt4cg/qtspecs/pull/493, a function/expression was suggested to re-throw errors:</p>
<pre><code class="language-xquery">try {
  (: wild stuff :)
} catch * {
  module:log($err:description),
  fn:throw($err:map)
}
</code></pre>
<p>Existing errors map can be modified before rethrowing them:</p>
<pre><code class="language-xquery">try {
  1 div 0
} catch * {
  module:log($err:description),
  fn:throw($err:map =&gt; map:put('description', 'Arithmetic error'))
}
</code></pre>
</div></details></div>
<div class="toot" id="created-1911"><h2>Issue #1911 created<span class="toot-id"> #created-1911</span></h2><div class="pubdate">02 Apr at 13:45:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1911">https://github.com/qt4cg/qtspecs/issues/1911</a></div><details><summary>Remarks on recent changes to regular expression handling</summary><div class="markup"><p>I would like to share these observations that I made while working on recent changes of regular expression handling per #1856.</p>
<p>The section that mentions potential rewrites of <code>\b</code> and <code>\B</code> misses to consider the start and end of the string, as well as the empty string. It should rather read:</p>
<blockquote>
<p><code>\b</code> can be rewritten to an equivalent form in terms of lookbehind and lookahead assertions:</p>
<p><code>(?:(*positive_lookbehind:\w)(?:$|(*positive_lookahead:\W))|(?:^|(*positive_lookbehind:\W))(*positive_lookahead:\w))</code></p>
<p>A similar rewrite is possible for <code>\B</code>, but it must additionally take care of the empty string.</p>
</blockquote>
<p>For <code>fn:analyze-string</code>, it might be useful to add a clarifying remark about empty matches at the end of the result (see qt4cg/qt4tests#224).</p>
<p>The specification of <code>fn:analyze-string</code> contains a duplicated word, <code>the the</code>. The same also occurs in several other places in the documents.</p>
</div></details></div>
<div class="toot" id="created-1910"><h2>Pull request #1910 created<span class="toot-id"> #created-1910</span></h2><div class="pubdate">31 Mar at 16:50:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1910">https://github.com/qt4cg/qtspecs/pull/1910</a></div><details><summary>1021 (part 1) Add $options arg to doc() and doc-available()</summary><div class="markup"><p>To follow: options for collection() and uri-collection().</p>
</div></details></div>
<div class="toot" id="created-1909"><h2>Pull request #1909 created<span class="toot-id"> #created-1909</span></h2><div class="pubdate">31 Mar at 15:40:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1909">https://github.com/qt4cg/qtspecs/pull/1909</a></div><details><summary>1902 bin unpack out of range</summary><div class="markup"><p>Add error condition.</p>
<p>Fix #1902</p>
<p>I also did some work on removing errors and warnings from the EXPath binary build.  There are a couple of outstanding issues I'm not sure how to fix:</p>
<p>(a) The function bin:bin had the incorrect id value func-bin-binary instead of func-bin-bin. I've corrected it, but the database of section ids needs updating.</p>
<p>(b) In database.xml, the EXPath binary spec is identified as document-summary/@uri = "https://qt4cg.org/specifications/EXPath/binary-40/". But the actual location of the specification is "https://qt4cg.org/specifications/expath-binary-40/"</p>
<p>(c) There are tags such as <code>&lt;code&gt;bin:index-of-range&lt;/code&gt;</code> which the stylesheet is trying to interpret as function names rather than error codes. They actually refer to obsolete error codes so we can't use <code>&lt;errorref&gt;</code></p>
</div></details></div>
<div class="toot" id="created-1908"><h2>Pull request #1908 created<span class="toot-id"> #created-1908</span></h2><div class="pubdate">31 Mar at 11:32:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1908">https://github.com/qt4cg/qtspecs/pull/1908</a></div><details><summary>1520 Allow forwards references to named item types</summary><div class="markup"><p>Fix #1520</p>
</div></details></div>
<div class="toot" id="created-1907"><h2>Issue #1907 created<span class="toot-id"> #created-1907</span></h2><div class="pubdate">29 Mar at 17:42:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1907">https://github.com/qt4cg/qtspecs/issues/1907</a></div><details><summary>Method lookup: wildcards</summary><div class="markup"><p>We should ignore the <code>%method</code> annotation for wildcard lookups:</p>
<pre><code class="language-xquery">let $data := { 'fn': %method fn() { . } }
return $data?*
</code></pre>
<p>I cannot see when this makes sense as it only seems to work if the wildcard lookup returns a single item (→ “selects a key/value pair whose value part is a singleton method”). In addition, it makes streaming of wildcard results troublesome.</p>
<p>If we believe we should support context value bindings for wildcards, I think it would be better to apply it to each item of the returned value, instead of the value as a whole.</p>
</div></details></div>
<div class="toot" id="created-1906"><h2>Pull request #1906 created<span class="toot-id"> #created-1906</span></h2><div class="pubdate">28 Mar at 15:16:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1906">https://github.com/qt4cg/qtspecs/pull/1906</a></div><details><summary>1797 elements-to-maps-conversion-plan function</summary><div class="markup"><p>The PR drops the "uniform" option of <code>elements-to-maps</code> into a separate function <code>elements-to-maps-conversion-plan</code>, which can be used to analyze a corpus of data and generate a conversion plan for use by <code>elements-to-maps</code>. This is useful when the conversion is to be applied to documents that are not part of the corpus, for example when new documents arrive for conversion every day and need to be converted in a consistent way. It also provides a more general mechanism for users to override the system decisions on what layouts to use for what elements.</p>
<p>The PR is not entirely complete at this stage: the technical detail is all there, but examples need to be reviewed. Comments are welcome at this stage.</p>
<p>There are a few other minor changes. The most notable are:</p>
<ul>
<li>More consistent fallback when an inappropriate layout is chosen. If the layout does not allow attributes, then attributes are discarded; if there is any other mismatch, the converter falls back to serialized XML layout.</li>
<li>Better handling of boolean and numeric element and attribute content.</li>
</ul>
</div></details></div>
<div class="toot" id="created-1905"><h2>Issue #1905 created<span class="toot-id"> #created-1905</span></h2><div class="pubdate">27 Mar at 15:40:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1905">https://github.com/qt4cg/qtspecs/issues/1905</a></div><details><summary>Editorial edits</summary><div class="markup"><p>XQFO:</p>
<ul>
<li>Buggy examples/results: <code>map:put</code>, <code>map:of-pairs</code>, <code>fn:scan-left</code></li>
<li>duplicates: <code>the the</code>, …</li>
</ul>
<p>…to be continued</p>
</div></details></div>
<div class="toot" id="created-1904"><h2>Pull request #1904 created<span class="toot-id"> #created-1904</span></h2><div class="pubdate">27 Mar at 11:42:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1904">https://github.com/qt4cg/qtspecs/pull/1904</a></div><details><summary>1832 Operator Associativity</summary><div class="markup"><p>Update the table and explanatory notes.</p>
<p>Fix #1832</p>
</div></details></div>
<div class="toot" id="created-1903"><h2>Issue #1903 created<span class="toot-id"> #created-1903</span></h2><div class="pubdate">27 Mar at 11:27:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1903">https://github.com/qt4cg/qtspecs/issues/1903</a></div><details><summary>`fn:scan-left`, `fn:scan-right`: missing steps</summary><div class="markup"><p>I have labeled #982 (which included position arguments) to be closed to focus on the remaining todos:</p>
<ol>
<li>The types of the <code>$action</code> parameters of <code>fn:fold-right</code> and <code>fn:scan-right</code> should be aligned. In particular, <code>item()*</code> and <code>item()</code> of the scan function should be swapped:</li>
</ol>
<pre><code class="language-xquery">fn:fold-right(
  $input   as item()*,	
  $init    as item()*,	
  $action  as fn(item(), item()*) as item()*	
) as item()*

fn:scan-right(
  $input   as item()*,	
  $init    as item()*,	
  $action  as fn(item()*, item()) as item()*	
) as array(*)*
</code></pre>
<ol start="2">
<li>The result of the last example of <code>fn:scan-left</code> is syntactically wrong.</li>
<li>The equivalent array functions are still missing (if we still believe we want to include them).</li>
<li>We need tests.</li>
</ol>
</div></details></div>
<div class="toot" id="created-1902"><h2>Issue #1902 created<span class="toot-id"> #created-1902</span></h2><div class="pubdate">27 Mar at 10:20:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1902">https://github.com/qt4cg/qtspecs/issues/1902</a></div><details><summary>`binary:unpack-integer`, overflow/underflow</summary><div class="markup"><p>If <code>binary:unpack-integer</code> or <code>binary:unpack-unsigned-integer</code> generates a value that exceeds the range supported by the implementation, <code>err:FOAR0002</code> should be raised.</p>
<p>Related: https://github.com/expath/expath-cg/issues/116</p>
</div></details></div>
<div class="toot" id="created-1901"><h2>Pull request #1901 created<span class="toot-id"> #created-1901</span></h2><div class="pubdate">27 Mar at 00:44:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1901">https://github.com/qt4cg/qtspecs/pull/1901</a></div><details><summary>1363 fallback becomes a value not a function</summary><div class="markup"><p>Issue #1363 generated a large amount of discussion on how to handle absent keys in map:get() and out-of-range indexes in array:get().</p>
<p>I felt that one of the simplest proposals was to change the $fallback argument to be a simple default value, rather than a function. This eliminates some of the more "clever" use cases, but these can always be achieved in other ways, as the discussion thread demonstrates. Meanwhile reducing <code>$fallback</code> to a simple default value makes life easier for the 90% of cases where this is all that is needed (especially for arrays, when the desire is to return a default value rather than throwing an error).</p>
<p>This PR therefore implements that simple proposal.</p>
<p>Fix #1363</p>
</div></details></div>
<div class="toot" id="closed-1766"><h2>Issue #1766 closed<span class="toot-id"> #closed-1766</span></h2><div class="pubdate">26 Mar at 15:26:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1766">https://github.com/qt4cg/qtspecs/pull/1766</a></div><p>1715 Drop array bound checking</p></div>
<div class="toot" id="created-1900"><h2>Issue #1900 created<span class="toot-id"> #created-1900</span></h2><div class="pubdate">26 Mar at 14:13:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1900">https://github.com/qt4cg/qtspecs/issues/1900</a></div><details><summary>Records: instance checks</summary><div class="markup"><p>Continues #1862:</p>
<p>In the last meeting, we discussed whether the order of record entries should be considered in instance checks. After further reflection and attempts to implement it, I believe this will make things much easier in the long term:</p>
<p>In <a href="https://qt4cg.org/specifications/xquery-40/xquery-40.html#id-item-coercion-rules">3.4.1 Item Coercion Rules</a>, the coercion of records was added as a second exceptional case: The coercion may change the item in question even if the upstream instance check is succesful. This leads to additional action that I believe could simply be avoided if the successful instance means that no further action is required. I think it will also reduce possible cost that was indicated in https://github.com/qt4cg/qtspecs/issues/1862#issuecomment-2709104860.</p>
<p>Note: This issue clearly focuses on implications for the implementation. From a user perspective, I assume it will hardly ever make a difference whether we consider order or not. My assumption is that nearly all records will have the expected order anyway, or they will match the order once the first coercion has taken place.</p>
<p>All this takes time to specify. I will be glad to make an attempt and write the PR.</p>
</div></details></div>
<div class="toot" id="closed-1899"><h2>Issue #1899 closed<span class="toot-id"> #closed-1899</span></h2><div class="pubdate">26 Mar at 08:42:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1899">https://github.com/qt4cg/qtspecs/pull/1899</a></div><p>Superflous whitespace change to nudge CI; apologies for the noise.</p></div>
<div class="toot" id="created-1899"><h2>Pull request #1899 created<span class="toot-id"> #created-1899</span></h2><div class="pubdate">26 Mar at 08:26:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1899">https://github.com/qt4cg/qtspecs/pull/1899</a></div><p>Superflous whitespace change to nudge CI; apologies for the noise.</p></div>
<div class="toot" id="closed-1660"><h2>Issue #1660 closed<span class="toot-id"> #closed-1660</span></h2><div class="pubdate">25 Mar at 20:23:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1660">https://github.com/qt4cg/qtspecs/issues/1660</a></div><p>Further suggestions for fn:path</p></div>
<div class="toot" id="closed-1747"><h2>Issue #1747 closed<span class="toot-id"> #closed-1747</span></h2><div class="pubdate">25 Mar at 20:05:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1747">https://github.com/qt4cg/qtspecs/issues/1747</a></div><p>Function finder is broken</p></div>
<div class="toot" id="closed-1858"><h2>Issue #1858 closed<span class="toot-id"> #closed-1858</span></h2><div class="pubdate">25 Mar at 19:07:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1858">https://github.com/qt4cg/qtspecs/pull/1858</a></div><p>Initial xsl:record</p></div>
<div class="toot" id="closed-1870"><h2>Issue #1870 closed<span class="toot-id"> #closed-1870</span></h2><div class="pubdate">25 Mar at 19:00:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1870">https://github.com/qt4cg/qtspecs/issues/1870</a></div><p>Rename $zero keyword of fold-left and fold-right</p></div>
<div class="toot" id="closed-1887"><h2>Issue #1887 closed<span class="toot-id"> #closed-1887</span></h2><div class="pubdate">25 Mar at 18:59:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1887">https://github.com/qt4cg/qtspecs/pull/1887</a></div><p>1870 rename $zero keyword of fold functions</p></div>
<div class="toot" id="closed-1886"><h2>Issue #1886 closed<span class="toot-id"> #closed-1886</span></h2><div class="pubdate">25 Mar at 18:48:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1886">https://github.com/qt4cg/qtspecs/pull/1886</a></div><p>1660 Additional options for fn:path</p></div>
<div class="toot" id="closed-1862"><h2>Issue #1862 closed<span class="toot-id"> #closed-1862</span></h2><div class="pubdate">25 Mar at 18:47:11 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1862">https://github.com/qt4cg/qtspecs/issues/1862</a></div><p>Records: consider order</p></div>
<div class="toot" id="closed-1874"><h2>Issue #1874 closed<span class="toot-id"> #closed-1874</span></h2><div class="pubdate">25 Mar at 18:47:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1874">https://github.com/qt4cg/qtspecs/pull/1874</a></div><p>1862 Coercing to a record type changes map order</p></div>
<div class="toot" id="closed-1861"><h2>Issue #1861 closed<span class="toot-id"> #closed-1861</span></h2><div class="pubdate">25 Mar at 18:46:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1861">https://github.com/qt4cg/qtspecs/issues/1861</a></div><p>xsl:next-match with-all-params</p></div>
<div class="toot" id="closed-1875"><h2>Issue #1875 closed<span class="toot-id"> #closed-1875</span></h2><div class="pubdate">25 Mar at 18:46:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1875">https://github.com/qt4cg/qtspecs/pull/1875</a></div><p>1861 Params passed automatically through next-match</p></div></div><p>See 3842
            more statuses in yearly archives.</p></article></main></body></html>