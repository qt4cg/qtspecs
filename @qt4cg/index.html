<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-2298"><h2>Issue #2298 created<span class="toot-id"> #created-2298</span></h2><div class="pubdate">17 Nov at 12:33:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2298">https://github.com/qt4cg/qtspecs/issues/2298</a></div><details><summary>Editorial: XQFO rules, default values</summary><div class="markup"><p>The existing XQFO rules are pretty heterogeneous when it comes to presenting the handling of default values.</p>
<p>Sometimes, they repeat what the signature says…</p>
<h4>https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-name</h4>
<blockquote>
<pre><code>fn:name(
  $node  as node()?  := .
) as xs:string
</code></pre>
<p>If the argument is omitted, it defaults to the context value (<code>.</code>).</p>
</blockquote>
<p>Sometimes, it is further elaborated…</p>
<h4>https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-string</h4>
<blockquote>
<pre><code>fn:string(
  $value  as item()?  := .
) as xs:string
</code></pre>
<p>In the zero-argument version of the function, <code>$value</code> defaults to the context value. That is, calling <code>fn:string()</code> is equivalent to calling <code>fn:string(.)</code>.</p>
</blockquote>
<p>…sometimes, it is ignored:</p>
<h4>https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-upper-case</h4>
<blockquote>
<pre><code>fn:upper-case(
  $value  as xs:string?	
) as xs:string
</code></pre>
<p>If <code>$value</code> is the empty sequence, the zero-length string is returned. […]</p>
</blockquote>
<p>I would propose to revise the rules, and to consistently remove phrases on choosing default values. I believe this will make the rules better readable (once you have understood what default values are, there should be no need explaining it again and again). If we want to keep the information, though, we should add it everywhere.</p>
<p>I can make an attempt if no one objects.</p>
</div></details></div>
<div class="toot" id="created-2297"><h2>Issue #2297 created<span class="toot-id"> #created-2297</span></h2><div class="pubdate">15 Nov at 15:24:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2297">https://github.com/qt4cg/qtspecs/issues/2297</a></div><details><summary>XSLT pattern ambiguities with typed matches</summary><div class="markup"><p>(<em>Note</em>: Edited to show that the parses though <code>XNodePattern</code> are subtly different in the two cases - I originally hadn't spotted the difference.)</p>
<p>I think there is a (minor?) ambiguity in the current XSLT pattern grammar, involving the the 'shortened' type match patterns such as <code>map(*)</code>, <code>item()</code>, <code>record(...)</code> and <code>enum("red")</code>.</p>
<p>If the type is enclosed in the <code>type(...)</code> qualifier, e.g. <code>type(map(*))</code> then the grammar appears to be unambiguous, yielding a parse down through pattern productions to <code>SimpleNodeTest</code> to a <code>TypeTest</code>/<code>SequenceType</code>:</p>
<pre><code>&lt;Pattern&gt;
 &lt;UnionPattern&gt;
  &lt;IntersectExceptPattern&gt;
   &lt;PrimaryPattern&gt;
    &lt;XNodePattern&gt;
     &lt;PathExprP&gt;
      &lt;RelativePathExprP&gt;
       &lt;StepExprP&gt;
        &lt;AxisStepP&gt;
         &lt;ForwardStepP&gt;
          &lt;AbbrevForwardStepP&gt;
           &lt;SimpleNodeTest&gt;
            &lt;TypeTest&gt;
             &lt;SequenceType&gt;
              &lt;ItemType&gt;
               &lt;RegularItemType&gt;
                &lt;MapType&gt;
                 &lt;AnyMapType/&gt;
</code></pre>
<p>but if the 'short form' of the pattern is used, <em>viz</em> <code>map(*)</code>, then there are two parse routes.
The first is close to that given above, but not exactly the same:</p>
<pre><code>&lt;Pattern&gt;
 &lt;UnionPattern&gt;
  &lt;IntersectExceptPattern&gt;
   &lt;PrimaryPattern&gt;
    &lt;XNodePattern&gt;
     &lt;PathExprP&gt;
      &lt;RelativePathExprP&gt;
       &lt;StepExprP&gt;
        &lt;AxisStepP&gt;
         &lt;ForwardStepP&gt;
          &lt;AbbrevForwardStepP&gt;
           &lt;SimpleNodeTest&gt;
            &lt;TypeTest&gt;
             &lt;RegularItemType&gt;
              &lt;MapType&gt;
               &lt;AnyMapType/&gt;
</code></pre>
<p>where an alternative of <code>TypeTest</code>/<code>RegularItemType</code> (without the <code>type(..)</code> surround) has been chosen.</p>
<p>The second is:</p>
<pre><code>&lt;Pattern&gt;
 &lt;UnionPattern&gt;
  &lt;IntersectExceptPattern&gt;
   &lt;PrimaryPattern&gt;
    &lt;TypePattern&gt;
     &lt;MapType&gt;
      &lt;AnyMapType/&gt;
</code></pre>
<p>where <code>PrimaryPattern</code> parses through <code>TypePattern</code>, and perhaps might be the intended outcome. The same logic applies to any of the 'shortened' type match instances.</p>
<p>Whether this is significant or not, I'm not sure. A cursory inspection of the spec. doesn't show any suggestion of preference for the latter form.</p>
<p>As <code>TypeTest</code> is defined in XPath and can of course be used in predicates and selectors, it may be difficult to avoid this ambiguity from the XSLT pattern productions. Will need to think about alternatives.</p>
</div></details></div>
<div class="toot" id="created-2296"><h2>Pull request #2296 created<span class="toot-id"> #created-2296</span></h2><div class="pubdate">14 Nov at 21:17:51 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2296">https://github.com/qt4cg/qtspecs/pull/2296</a></div><details><summary>2288 XSLT implicit document nodes</summary><div class="markup"><ol>
<li>Adds xsl:record, xsl:map-entry, xsl:array-member to the list of instructions that inhibit creating of an implicit document node. (It makes no sense to wrap an array or map in a document node)</li>
<li>Mentions the revised rules in places where one would expect it to be mentioned.</li>
</ol>
</div></details></div>
<div class="toot" id="created-2295"><h2>Pull request #2295 created<span class="toot-id"> #created-2295</span></h2><div class="pubdate">14 Nov at 16:30:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2295">https://github.com/qt4cg/qtspecs/pull/2295</a></div><details><summary>2294 Clarify semantics of `element(N, xs:anyType)`</summary><div class="markup"><ol>
<li>Corrects the statement that <code>element(N, T)</code> will only match a schema-validated element, which is not true if T is <code>xs:anyType</code> or <code>xs:untyped</code></li>
<li>Adds notes and example, in both XPath and XSLT, to make clear the relationship between <code>element(N)</code>, <code>element(N, xs:anyType)</code>, and <code>element(N, xs:anyType?)</code></li>
</ol>
</div></details></div>
<div class="toot" id="created-2294"><h2>Issue #2294 created<span class="toot-id"> #created-2294</span></h2><div class="pubdate">14 Nov at 15:57:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2294">https://github.com/qt4cg/qtspecs/issues/2294</a></div><details><summary>Type element(E, T)</summary><div class="markup"><p>In XPath §3.2.7.2 we say</p>
<blockquote>
<p>Where a [TypeName] is included in an [ElementTest] T, an element node will only match the test if it has been validated against a schema that defines type T; furthermore, T must be present in the [in-scope schema definitions] of the static context of the [ElementTest].</p>
</blockquote>
<p>This obviously doesn't apply where T is <code>xs:untyped</code>.</p>
<p>And I don't think it applies where T is <code>xs:anyType</code>. An untyped element matches <code>element(E, xs:anyType)</code> by virtue of the fact that <code>xs:untyped</code> is a subtype of <code>xs:anyType</code>.</p>
<p>I think the rules in XPath §3.3.2.5.3 say that <code>element(E)</code> and <code>element(E, xs:anyType?)</code> are essentially the same type (each is a subtype of the other). However, <code>element(E)</code> and <code>element(E, xs:anyType)</code> are NOT the same type, because the former allows the element to be nilled.</p>
<p>In the XSLT rules for patterns (which is how I got here), <code>element(E)</code>, <code>element(E, xs:anyType)</code>, and <code>element(E, xs:anyType?)</code> are all valid patterns, and their meaning is defined by reference to XPath item types. However,</p>
<ul>
<li><code>element(E)</code> and <code>element(E, xs:anyType?)</code> have different default priorities even though they match exactly the same nodes</li>
<li><code>element(E, xs:anyType)</code> and <code>element(E, xs:anyType?)</code> have the same default priority even though the first is a supertype of the second</li>
</ul>
<p>This is all unchanged from XSLT 3.0</p>
</div></details></div>
<div class="toot" id="created-2293"><h2>Pull request #2293 created<span class="toot-id"> #created-2293</span></h2><div class="pubdate">14 Nov at 13:57:12 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2293">https://github.com/qt4cg/qtspecs/pull/2293</a></div><details><summary>Updated RELAX NG grammar for XSLT 4.0 stylesheets</summary><div class="markup"><p>This is mostly a copy of #2290, translated into the RELAX NG grammar.</p>
<p>I think the grammar still needs review, but I’m trying to keep it up-to-date with the XSD in the meantime.</p>
</div></details></div>
<div class="toot" id="created-2292"><h2>Issue #2292 created<span class="toot-id"> #created-2292</span></h2><div class="pubdate">14 Nov at 12:26:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2292">https://github.com/qt4cg/qtspecs/issues/2292</a></div><details><summary>The XSLT document() function</summary><div class="markup"><p>We could add an options parameter to the XSLT document function, providing the same options as fn:doc. It's complicated  by the fact that fn:document already has an optional second argument (a node whose base URI is to be used for resolving relative URIs) -- but we could solve that as we have done with deep-equal, by incorporating the base-uri-node into a new options parameter and making the second argument have a type of <code>(node()|map(*))</code>.</p>
<p>Or we could leave the functionality of fn:document alone, treating it as legacy, but add to the rules to define its effect in terms of the doc() function. We could mandate the values of fn:doc() options such as DTD-validation, schema-validation, space stripping, etc, or we could leave these implementation-defined.</p>
<p>Currently XSLT §4.3 says that documents loaded using doc(), document(), or collection() are subject to preprocessing: stripping of whitespace and type annotations as controlled by declarations in the stylesheet. It's a bit weird that XSLT should interfere with the semantics of doc() and collection() in this way, and now that doc() (and in future collection()?) have options parameters to control some of these behaviours, it's not clear how they are supposed to interact. One approach would be to say that if doc() or collection() has an options parameter, this overrides any default processing defined in §4.3.</p>
</div></details></div>
<div class="toot" id="created-2291"><h2>Issue #2291 created<span class="toot-id"> #created-2291</span></h2><div class="pubdate">14 Nov at 11:22:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2291">https://github.com/qt4cg/qtspecs/issues/2291</a></div><details><summary>load-xquery-module: formalizing (loading-)parameters</summary><div class="markup"><p>Once a module is loaded its parameters, at least its loading-parameters like its location, should be fixed an not be able to be changed.
The use of a 'load-xquery-module"-function, however, creates the possibility of specifiing contradicting loading-parameters.</p>
<p>My suggestion:
Don't let the use of the 'location-hints'-parameter of the 'load-xquery-module' be 'implementation-defined'.
Let these parameters formally be 'ignored', and therefor optional, if a module with namespace: '$module-uri', is already in memmory.</p>
<p>Background:
My xquery compiler always requiers an 'location-hints'-parameter ( of course, if the 'content'-parameter is omitted) even if the module is already loaded.
At the moment this is formally a legit choice.
However it makes it unnecesary tedious to, for instance, link XML-elements to modules by means of its tagname: I unnecesary need the module-location where it is not available.</p>
<p>Importance:
This is important because the possibilyty of contradiction should always, for quality sake, be avoided.
And, dynamicly linking XML-elements to modules would open the possibility of polymorfism on XML-elements which, I think, would be an awesom feature.</p>
</div></details></div>
<div class="toot" id="created-2290"><h2>Pull request #2290 created<span class="toot-id"> #created-2290</span></h2><div class="pubdate">14 Nov at 10:07:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2290">https://github.com/qt4cg/qtspecs/pull/2290</a></div><details><summary>Updated schema for XSLT 4.0 stylesheets</summary><div class="markup"><p>Updated schema for XSLT 4.0 stylesheets (verified against the current test cases using test catalog-005).</p>
<p>Changes include: xsl:record, xsl:array, xsl:select, @schema-role, mode/@copy-namespaces, EQName syntax, xsl:function/@name</p>
</div></details></div>
<div class="toot" id="created-2289"><h2>Pull request #2289 created<span class="toot-id"> #created-2289</span></h2><div class="pubdate">13 Nov at 16:56:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2289">https://github.com/qt4cg/qtspecs/pull/2289</a></div><details><summary>2195 (partial) Editorial notes (incremental)</summary><div class="markup"><p>This PR contains some more editorial changes. Notes:</p>
<ul>
<li>I have revised the »Summary of Changes« to (hopefully) make it more clear which »arrows« the description refers to, and I have updated the icons.</li>
<li>I have corrected some code equivalencies in the Binary Module. The <code>bin:shift</code> equivalency (possibly others) still needs to be fixed).</li>
</ul>
</div></details></div>
<div class="toot" id="created-2288"><h2>Issue #2288 created<span class="toot-id"> #created-2288</span></h2><div class="pubdate">13 Nov at 16:54:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2288">https://github.com/qt4cg/qtspecs/issues/2288</a></div><details><summary>XSLT implicit document nodes</summary><div class="markup"><p>XSLT §9.3 states that xsl:variable does not create an implicit document node if the sequence constructor includes an xsl:map, xsl:array, or xsl:select instruction.</p>
<ol>
<li>The list should also include xsl:record, xsl:map-entry, xsl:array-member (anything that will never construct an XNode and therefore where wrapping in a document node is doomed to failure).</li>
<li>The rule needs to be restated in §9.4 (creating implicit document nodes)</li>
</ol>
</div></details></div>
<div class="toot" id="created-2287"><h2>Issue #2287 created<span class="toot-id"> #created-2287</span></h2><div class="pubdate">13 Nov at 16:33:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2287">https://github.com/qt4cg/qtspecs/issues/2287</a></div><details><summary>Ordered maps break JSON interoperability</summary><div class="markup"><p>Something about the proposed change from unordered to ordered maps in QT4 has been bothering me for a long time. I hadn't been able to put my finger on it until whilst listening to John and Juri talk about QT4 at Declarative Amsterdam 2025, I think I now understand what at least one of the alarms going off in my head was trying to tell me.</p>
<p>I'd just like to say that if the below is not a problem and I have misunderstood the explanation of QT4, many apologies! I would love to hear how this isn't a problem, but otherwise...</p>
<p>I fear that the switch now from Unordered Maps in XDM 3.1 to Ordered Maps in XDM 4.0 breaks JSON interoperability.</p>
<p>I recall that when we were working on XQuery 3.1 the major use-case was interoperability with JSON. It says as much in the XQuery 3.1 spec <a href="https://www.w3.org/TR/xquery-31/">here</a>:</p>
<blockquote>
<p>XQuery 3.1 extends XQuery to support JSON as well as XML, adding maps and arrays to the data model</p>
</blockquote>
<p>In XQuery 3.1, maps are unordered. In JSON, these things are not called "maps", they are called "objects". If we look at the various JSON specifications, we can see that Objects (or Maps as they are known in XDM) are unordered:</p>
<ol>
<li>From <a href="https://www.json.org/json-en.html">json.org</a>:</li>
</ol>
<blockquote>
<p>An object is an unordered set of name/value pairs.</p>
</blockquote>
<ol start="2">
<li>
<p>From <a href="https://datatracker.ietf.org/doc/html/rfc7159">IETF - RFC 7159 - The JavaScript Object Notation (JSON) Data Interchange Format</a></p>
<ol>
<li>Section 1:</li>
</ol>
<blockquote>
<p>An object is an unordered collection of zero or more name/value pairs</p>
</blockquote>
<ol start="2">
<li>Section 4:</li>
</ol>
<blockquote>
<p>JSON parsing libraries have been observed to differ as to whether or not they make the ordering of object members visible to calling software. Implementations whose behavior does not depend on member ordering will be interoperable in the sense that they will not be affected by these differences.</p>
</blockquote>
</li>
</ol>
<p>So, I think we can all agree that:</p>
<ol>
<li>Object members are unordered in JSON.</li>
<li>Their equivalent in XDM, Maps, were unordered in version 3.1, but they are scheduled to become ordered in version 4.0.</li>
</ol>
<p>So, what's the problem that I foresee with making Maps ordered?</p>
<p>The problem is not Maps in isolation, if you took XQuery 3.1 and simply changed Maps from Unordered to Ordered, I can't foresee any breakage or interoperability problems with JSON.</p>
<p>The problem that I foresee right now in QT4, that I think I can show breaks JSON interoperability, is the use of Ordered Maps to provide sibling access to members of a map. There may be other areas of the spec that have similar problems too, but I haven't given them any consideration yet.</p>
<hr>
<h2>Example 1</h2>
<p>Given the following JSON document (<code>doc1.json</code>):</p>
<pre><code class="language-json">[
	{
		"name": "Adam",
		"age": 44,
		"location": "Bardonecchia"
	},
	{
		"name": "Bob",
		"years": 33,
		"location": "London"
	}
]
</code></pre>
<p>The following QT4 XQuery:</p>
<pre><code class="language-xquery">fn:json-doc("doc1.json")//name/following-sibling::*[1]
</code></pre>
<p>I can't find a working implementation to test this against, but if I have understood the QT4 spec, then running the above QT4 XQuery would yield something like:</p>
<pre><code>(44, 33)
</code></pre>
<h2>Example 2</h2>
<p>The same QT4 XQuery from above, but instead executed against this JSON document (<code>doc2.json</code>):</p>
<pre><code class="language-json">[
	{
		"name": "Adam",
		"age": 44,
		"location": "Bardonecchia"
	},
	{
		"name": "Bob",
		"location": "London",
		"years": 33
	}
]
</code></pre>
<p>I think would yield something like:</p>
<pre><code>(44, "London")
</code></pre>
<hr>
<p>The problem as I see it is that both of those two JSON documents (<code>doc1.json</code>) and (<code>doc2.json</code>) are from a JSON perspective canonically identical, yet our XQuery which hasn't changed, produces different results against each JSON document.</p>
<p>As systems (e.g. Web APIs) that produce JSON are not required to enforce an ordering of object members. Calling the same application or API that produces a JSON document more than once (standard when talking to Web APIs), may validly produce canonically identical JSON documents even if their object members are in a different order.</p>
<p>IMHO we simply cannot rely on an ordering of Map members within XDM for sibling lookups. If we allow users to program against JSON documents in QT4 using the Sibling Axis (over Ordered Maps), they will get bitten and bitten hard when their XQuery starts returning different or no results because the ordering in their JSON changed (but canonically is the same).</p>
<p>I understand that there is a general desire to enable XPath Axis to operate over JSON documents, and I think that's a wonderful thing in general. However, if I have understood what it means for Maps and Sibling Axis, I think some changes have to be made before we create a big sibling shaped hole for users to fall into.</p>
</div></details></div>
<div class="toot" id="created-2286"><h2>Pull request #2286 created<span class="toot-id"> #created-2286</span></h2><div class="pubdate">13 Nov at 15:06:10 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2286">https://github.com/qt4cg/qtspecs/pull/2286</a></div><details><summary>2279 fn:string-length#1, fn:normalize-space#1: accept xs:anyAtomicType</summary><div class="markup"><p>Closes #2279</p>
</div></details></div>
<div class="toot" id="created-2285"><h2>Pull request #2285 created<span class="toot-id"> #created-2285</span></h2><div class="pubdate">12 Nov at 23:46:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2285">https://github.com/qt4cg/qtspecs/pull/2285</a></div><details><summary>2198 Add pi-for-cdata parameter</summary><div class="markup"><p>Fix #2198</p>
<p>Adds a new pi-for-cdata parameter allowing arbitrary addition of CDATA sections to serialized XML output, by outputting the relevant text as a processing instruction node with a chosen name.</p>
<p>This PR contains the necessary changes to the serialization spec; I would like a go-ahead from the CG before doing the (somewhat mechanical) work to add the necessary changes to the other specs.</p>
<p>I chose this approach in preference to the mooted <code>conditional-data-elements</code> approach because it is a lot more flexible. (Some badly written XML interfaces require precise control over CDATA generation: we might disapprove, but the requirement exists.)</p>
</div></details></div>
<div class="toot" id="created-2284"><h2>Issue #2284 created<span class="toot-id"> #created-2284</span></h2><div class="pubdate">12 Nov at 20:15:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2284">https://github.com/qt4cg/qtspecs/issues/2284</a></div><details><summary>fn:csv-doc, fn:json-doc: Equivalent code, unifications</summary><div class="markup"><p>Now that we have dropped binary types from <code>fn:parse-csv</code>, we need to fix the rules of <code>fn:csv-doc</code>, specifically:</p>
<blockquote>
<p>The effect of the two-argument function call <code>fn:csv-doc($H, $M)</code> is equivalent to the function composition <code>fn:unparsed-binary($H) =&gt; fn:parse-csv($M)</code>.</p>
</blockquote>
<p>Next, we should re-align the rules of <code>fn:csv-doc</code> and <code>fn:json-doc</code>. The detection of the encoding should be clarified, possibly by referring to the rules proposed in #2282, or the current version of <code>bin:decode-string</code>.</p>
</div></details></div>
<div class="toot" id="created-2283"><h2>Pull request #2283 created<span class="toot-id"> #created-2283</span></h2><div class="pubdate">12 Nov at 18:32:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2283">https://github.com/qt4cg/qtspecs/pull/2283</a></div><details><summary>2276 Relax XSLT rules on Extension Attributes</summary><div class="markup"><p>Changes the rule for extension attributes, instead of saying they MUST NOT cause non-conformant behaviour, we now say SHOULD NOT, and give examples where it might be appropriate to break this rule, e.g. for security. Also, extension attributes can now modify the behaviour of the serializer in any way they like.</p>
<p>The PR also moves the section on Extension Attributes to a more logical place in the spec.</p>
</div></details></div>
<div class="toot" id="created-2282"><h2>Pull request #2282 created<span class="toot-id"> #created-2282</span></h2><div class="pubdate">12 Nov at 17:49:05 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2282">https://github.com/qt4cg/qtspecs/pull/2282</a></div><details><summary>2278 Add function bin:infer-encoding; simplify bin:decode-string</summary><div class="markup"><p>This PR separates the operation of examining a string to determine its encoding and the presence of a BOM, from the operation of decoding octets. The purpose is to simplify the decode-string function and to reduce complex interactions between its arguments, especially in cases where the BOM might be at the start of a message and the strings to be decoded at some later position. It also has a better chance of retaining compatibility with 1.0 implementations (though it's hard to guarantee that since 1.0 was underspecified).</p>
</div></details></div>
<div class="toot" id="created-2281"><h2>Pull request #2281 created<span class="toot-id"> #created-2281</span></h2><div class="pubdate">12 Nov at 12:56:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2281">https://github.com/qt4cg/qtspecs/pull/2281</a></div><details><summary>2280 Usability of xsl:array-member</summary><div class="markup"><p>Fix #2280</p>
<p>This PR revises the spec of xsl:array and xsl:array-member in the light of experience writing test cases.</p>
<p>The zero-arity function item constructed by <code>xsl:array-member</code> now carries a function annotation which means that it can be unambiguously recognized as having been so constructed. This allows better error checking and diagnostics, and it also allows <code>xsl:array</code> to be more tolerant of using <code>xsl:array-member</code> to create singleton array members in circumstances where it is not strictly required.</p>
</div></details></div>
<div class="toot" id="created-2280"><h2>Issue #2280 created<span class="toot-id"> #created-2280</span></h2><div class="pubdate">12 Nov at 10:22:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2280">https://github.com/qt4cg/qtspecs/issues/2280</a></div><details><summary>Usability problems with xsl:array-member</summary><div class="markup"><p>Writing tests for the new specification of xsl:array, it's tricky to remember when to use xsl:array-member and when not; and the diagnostics for getting it wrong are obscure (typically, if you use xsl:array-member when it's not needed, you end up with an array of functions, and this leads to subsequent errors saying a function was supplied when something else was expected).</p>
<p>I think the answer to this may be:</p>
<p>(a) the zero-arity function delivered by <code>xsl:array-member</code> should carry the function annotation <code>%xsl:array-member</code></p>
<p>(b) when xsl:array sees a zero-arity function with this annotation in the member sequence, it should invoke the function; any other item (including any other function) is passed through unchanged.</p>
<p>The effect is that any singleton item delivered by the content expression for xsl:array is treated as a single-item member of the constructed array, with the exception of a singleton item constructed using the xsl:array-member instruction, which is treated as a sequence-valued member.</p>
</div></details></div>
<div class="toot" id="closed-2007"><h2>Issue #2007 closed<span class="toot-id"> #closed-2007</span></h2><div class="pubdate">11 Nov at 17:16:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2007">https://github.com/qt4cg/qtspecs/issues/2007</a></div><p>Creating arrays in XSLT</p></div>
<div class="toot" id="closed-2120"><h2>Issue #2120 closed<span class="toot-id"> #closed-2120</span></h2><div class="pubdate">11 Nov at 17:16:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2120">https://github.com/qt4cg/qtspecs/pull/2120</a></div><p>2007 Revised design for xsl:array</p></div>
<div class="toot" id="closed-2273"><h2>Issue #2273 closed<span class="toot-id"> #closed-2273</span></h2><div class="pubdate">11 Nov at 17:14:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2273">https://github.com/qt4cg/qtspecs/pull/2273</a></div><p>2219 A method can be applied to multiple maps</p></div>
<div class="toot" id="minutes-11-11"><h2>QT4 CG meeting 141 draft minutes<span class="toot-id"> #minutes-11-11</span></h2><div class="pubdate">11 Nov at 17:13:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2025/11-11">https://qt4cg.org/meeting/minutes/2025/11-11</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-2277"><h2>Issue #2277 closed<span class="toot-id"> #closed-2277</span></h2><div class="pubdate">11 Nov at 17:12:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2277">https://github.com/qt4cg/qtspecs/pull/2277</a></div><p>2195 Editorial Omnibus</p></div>
<div class="toot" id="closed-2268"><h2>Issue #2268 closed<span class="toot-id"> #closed-2268</span></h2><div class="pubdate">11 Nov at 17:10:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2268">https://github.com/qt4cg/qtspecs/issues/2268</a></div><p>Incorrect equivalent expression for fn:for-each-pair()</p></div>
<div class="toot" id="closed-2269"><h2>Issue #2269 closed<span class="toot-id"> #closed-2269</span></h2><div class="pubdate">11 Nov at 17:10:33 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2269">https://github.com/qt4cg/qtspecs/pull/2269</a></div><p>2268 Correct equivalent expression for for-each-pair</p></div>
<div class="toot" id="closed-2267"><h2>Issue #2267 closed<span class="toot-id"> #closed-2267</span></h2><div class="pubdate">11 Nov at 17:08:38 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2267">https://github.com/qt4cg/qtspecs/issues/2267</a></div><p>Further changes for functions in no namespace</p></div>
<div class="toot" id="closed-2270"><h2>Issue #2270 closed<span class="toot-id"> #closed-2270</span></h2><div class="pubdate">11 Nov at 17:08:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2270">https://github.com/qt4cg/qtspecs/pull/2270</a></div><p>2267 Fix inconsistency in XQuery unprefixed function declarations</p></div>
<div class="toot" id="closed-1953"><h2>Issue #1953 closed<span class="toot-id"> #closed-1953</span></h2><div class="pubdate">11 Nov at 17:08:19 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1953">https://github.com/qt4cg/qtspecs/issues/1953</a></div><p>Make generation of constructor function for named record types optional</p></div>
<div class="toot" id="closed-2203"><h2>Issue #2203 closed<span class="toot-id"> #closed-2203</span></h2><div class="pubdate">11 Nov at 17:08:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2203">https://github.com/qt4cg/qtspecs/issues/2203</a></div><p>Drop XSLT Streaming?</p></div></div><p>See 4692
            more statuses in yearly archives.</p></article></main></body></html>