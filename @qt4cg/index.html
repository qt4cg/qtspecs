<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-1940"><h2>Pull request #1940 created<span class="toot-id"> #created-1940</span></h2><div class="pubdate">21 Apr at 10:33:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1940">https://github.com/qt4cg/qtspecs/pull/1940</a></div><details><summary>1939 XQDY0153 (from try/finally) should be a type error</summary><div class="markup"><p>Closes #1939</p>
</div></details></div>
<div class="toot" id="created-1939"><h2>Issue #1939 created<span class="toot-id"> #created-1939</span></h2><div class="pubdate">20 Apr at 11:58:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1939">https://github.com/qt4cg/qtspecs/issues/1939</a></div><details><summary>XQDY0153 (from try/finally) should be a type error</summary><div class="markup"><p>The <code>finally</code> clause is required to return an empty sequence. If not, it raises XQDY0153. This should be a type error rather than a dynamic error, so that it can be raised statically when appropriate.</p>
<p>Also noted in passing: "the the" in item 4 of the "changes" section of §4.20).</p>
</div></details></div>
<div class="toot" id="created-1938"><h2>Issue #1938 created<span class="toot-id"> #created-1938</span></h2><div class="pubdate">18 Apr at 20:36:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1938">https://github.com/qt4cg/qtspecs/issues/1938</a></div><details><summary>Invoking coerced methods</summary><div class="markup"><p>@ChristianGruen, in BaseXdb/basex#2420, brought up a test case similar to this:</p>
<pre><code class="language-xquery">declare record local:r(
    f as fn() as item()
);

local:r(%method fn() {.})
? f()
=&gt; map:keys()
</code></pre>
<p>With a method passed to the constructor, and retrieved by the lookup operator, one would expect the function call to return the map, and the result to be <code>f</code>, the set of keys of the map. With BaseX's current implementation however, it fails with <code>[XPDY0002] .: Context value is undefined.</code></p>
<p>The reason for this failure is function coercion. The record constructor asks for a more specific type than that of the supplied function, so it is subject to function coercion. This creates a new function item, which preserves the method annotation, and which effects a call to the original one. The lookup operator then is applied to the newly created function item, which as a method is equipped with the map as its context item. But when the original function gets called, that context item is not propagated to it. So there is a (rightful?) complaint about an undefined context.</p>
<p>I may be missing something here, but I do not see anything in the spec that makes the context item available to the coerced function, so I think that the described behavior is in fact conformant to the spec.</p>
<p>But as it contradicts the original expectation, I would be grateful for a clarification.</p>
</div></details></div>
<div class="toot" id="created-1937"><h2>Pull request #1937 created<span class="toot-id"> #created-1937</span></h2><div class="pubdate">17 Apr at 16:32:41 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1937">https://github.com/qt4cg/qtspecs/pull/1937</a></div><details><summary>1936 Mark attribute declarations as form=qualified</summary><div class="markup"><p>Fix #1936</p>
</div></details></div>
<div class="toot" id="created-1936"><h2>Issue #1936 created<span class="toot-id"> #created-1936</span></h2><div class="pubdate">16 Apr at 17:37:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1936">https://github.com/qt4cg/qtspecs/issues/1936</a></div><details><summary>XSD for XSLT 4.0 is missing form="qualified" on several attributes within the attribute group "literal-result-element-attributes"</summary><div class="markup"><p>The attributes in attribute group "literal-result-element-attributes" should be in the XSL namespace, and most of them are, except for xsl:default-mode, xsl:default-validation and xsl:expand-text.  Those 3 are missing their form="qualified" attribute, so they would default to being in no namespace.</p>
<p>I know it's non-normative but it would be good to make the correction. (This is also an issue for the XSD for XSLT 3.0).</p>
</div></details></div>
<div class="toot" id="closed-1799"><h2>Issue #1799 closed<span class="toot-id"> #closed-1799</span></h2><div class="pubdate">15 Apr at 23:06:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1799">https://github.com/qt4cg/qtspecs/issues/1799</a></div><p>"well-formed HTML document"?</p></div>
<div class="toot" id="closed-1891"><h2>Issue #1891 closed<span class="toot-id"> #closed-1891</span></h2><div class="pubdate">15 Apr at 23:06:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1891">https://github.com/qt4cg/qtspecs/issues/1891</a></div><p>`fn:parse-html`: `html-version`</p></div>
<div class="toot" id="closed-1918"><h2>Issue #1918 closed<span class="toot-id"> #closed-1918</span></h2><div class="pubdate">15 Apr at 23:06:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1918">https://github.com/qt4cg/qtspecs/pull/1918</a></div><p>1891 clarifications on HTML versions and errors</p></div>
<div class="toot" id="closed-1363"><h2>Issue #1363 closed<span class="toot-id"> #closed-1363</span></h2><div class="pubdate">15 Apr at 22:50:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1363">https://github.com/qt4cg/qtspecs/issues/1363</a></div><p>map:get and array:get</p></div>
<div class="toot" id="closed-1901"><h2>Issue #1901 closed<span class="toot-id"> #closed-1901</span></h2><div class="pubdate">15 Apr at 22:50:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1901">https://github.com/qt4cg/qtspecs/pull/1901</a></div><p>1363 fallback becomes a value not a function</p></div>
<div class="toot" id="closed-1896"><h2>Issue #1896 closed<span class="toot-id"> #closed-1896</span></h2><div class="pubdate">15 Apr at 16:10:29 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1896">https://github.com/qt4cg/qtspecs/issues/1896</a></div><p>Drop "parameter names" as a property of a function item</p></div>
<div class="toot" id="closed-1916"><h2>Issue #1916 closed<span class="toot-id"> #closed-1916</span></h2><div class="pubdate">15 Apr at 16:10:28 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1916">https://github.com/qt4cg/qtspecs/pull/1916</a></div><p>1896 Drop parameter names as a property of function items</p></div>
<div class="toot" id="closed-1932"><h2>Issue #1932 closed<span class="toot-id"> #closed-1932</span></h2><div class="pubdate">15 Apr at 16:07:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1932">https://github.com/qt4cg/qtspecs/pull/1932</a></div><p>QT4-CG-115-01 xsl:next-match examples</p></div>
<div class="toot" id="closed-1930"><h2>Issue #1930 closed<span class="toot-id"> #closed-1930</span></h2><div class="pubdate">15 Apr at 16:04:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1930">https://github.com/qt4cg/qtspecs/pull/1930</a></div><p>QT4-CG-116-04 correction to fn:function-identity</p></div>
<div class="toot" id="closed-1923"><h2>Issue #1923 closed<span class="toot-id"> #closed-1923</span></h2><div class="pubdate">15 Apr at 16:02:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1923">https://github.com/qt4cg/qtspecs/issues/1923</a></div><p>Arithmetic Expressions needlessly mentions UnionExpr</p></div>
<div class="toot" id="closed-1924"><h2>Issue #1924 closed<span class="toot-id"> #closed-1924</span></h2><div class="pubdate">15 Apr at 16:02:03 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1924">https://github.com/qt4cg/qtspecs/pull/1924</a></div><p>1923 Editorial adjustments for arithmetic expressions</p></div>
<div class="toot" id="closed-269"><h2>Issue #269 closed<span class="toot-id"> #closed-269</span></h2><div class="pubdate">15 Apr at 16:01:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/269">https://github.com/qt4cg/qtspecs/issues/269</a></div><p>Function for URI relativization</p></div>
<div class="toot" id="closed-826"><h2>Issue #826 closed<span class="toot-id"> #closed-826</span></h2><div class="pubdate">15 Apr at 16:01:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/826">https://github.com/qt4cg/qtspecs/issues/826</a></div><p>Arrays: Representation of single members of an array</p></div>
<div class="toot" id="closed-1566"><h2>Issue #1566 closed<span class="toot-id"> #closed-1566</span></h2><div class="pubdate">15 Apr at 16:01:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1566">https://github.com/qt4cg/qtspecs/issues/1566</a></div><p>EXPath Modules: Future</p></div>
<div class="toot" id="closed-1754"><h2>Issue #1754 closed<span class="toot-id"> #closed-1754</span></h2><div class="pubdate">15 Apr at 16:01:17 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1754">https://github.com/qt4cg/qtspecs/issues/1754</a></div><p>Inverse functions to bin:hex, bin:bin, and bin:octal</p></div>
<div class="toot" id="closed-1780"><h2>Issue #1780 closed<span class="toot-id"> #closed-1780</span></h2><div class="pubdate">15 Apr at 16:01:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1780">https://github.com/qt4cg/qtspecs/issues/1780</a></div><p>xsl:for-each optional variable introduction</p></div>
<div class="toot" id="closed-1905"><h2>Issue #1905 closed<span class="toot-id"> #closed-1905</span></h2><div class="pubdate">15 Apr at 15:58:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1905">https://github.com/qt4cg/qtspecs/issues/1905</a></div><p>Editorial edits</p></div>
<div class="toot" id="closed-1919"><h2>Issue #1919 closed<span class="toot-id"> #closed-1919</span></h2><div class="pubdate">15 Apr at 15:58:42 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1919">https://github.com/qt4cg/qtspecs/pull/1919</a></div><p>1905 Editorial edits</p></div>
<div class="toot" id="created-1935"><h2>Issue #1935 created<span class="toot-id"> #created-1935</span></h2><div class="pubdate">15 Apr at 14:11:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1935">https://github.com/qt4cg/qtspecs/issues/1935</a></div><details><summary>doc-available() with invalid options</summary><div class="markup"><p>The doc-available function needs to make it clear what happens when invalid options are supplied.</p>
<p>Clearly invalid options such as <code>xinclude="yes-or-no"</code> should be an error (rather than resulting in a return value of false, as the current spec might suggest).</p>
<p>It's less clear what should happen if say you request schema validation with a non-schema-aware processor. I think this probably calls for returning false rather than an error.</p>
</div></details></div>
<div class="toot" id="created-1934"><h2>Issue #1934 created<span class="toot-id"> #created-1934</span></h2><div class="pubdate">14 Apr at 14:26:24 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1934">https://github.com/qt4cg/qtspecs/issues/1934</a></div><details><summary>Supporting RELAX NG validation</summary><div class="markup"><p>At <a href="https://qt4cg.org/meeting/minutes/2025/04-08.html">meeting 116</a>, the question was raised: why don't we support RELAX NG validation?</p>
<p>I think that's a good question. Further, I think we should, if we can work out the technical details and arrive at consensus.</p>
<p>The good news is that it's <em>a lot</em> simpler than XSD validation. For those not familiar with RELAX NG, the 50,000 foot summary is that it's (more-or-less) regular expressions over trees. The grammar defines a number of patterns, including at least one designated as a start pattern. If the document matches (any one of the) start pattern(s), then it's valid. A trivial example looks like this:</p>
<pre><code>start = doc

doc =
    element doc {
        attribute date { xsd:date },
        p+
    }

p =
    element p {
        text
    }
</code></pre>
<p>(RELAX NG also has an XML syntax, but the "compact syntax" is isomorphic and many people find it easier to read.)</p>
<p>A couple of things to note: the "p" in "p+" in the doc pattern is a reference to the "p" pattern, not to the element named "p". And although the date attribute has to conform to an <code>xsd:date</code>, that <em>does not</em> do any type assignment. RELAX NG allows user-defined data types; I suggest we make that an implementation-defined feature. Since no type assignment is performed, it doesn't really matter.</p>
<p>How might we add support for RELAX NG validation? A sketch...</p>
<ol>
<li>
<p>Add to the static context a set of RELAX NG patterns. Initally empty, these are patterns that can match the document element during RELAX NG validation. (The union of all of the "start" patterns from all of the imported RELAX NG grammars.) There's no user-access to these patterns, so we don't technically need to add them to the data model, though I suppose we could.</p>
</li>
<li>
<p>In XQuery, allow schema import to import RELAX NG grammars. This has no effect except that the start patterns defined in that grammar are added to the start patterns in the static context. It is an error to specify “fixed” or “default element namespace” if the imported schema is a RELAX NG grammar.</p>
</li>
<li>
<p>Add “relax-ng” as a <code>ValidationMode</code> in <code>ValidateExpr</code>. It is an error to also specify a “type”.</p>
<p>If RELAX NG validation is requested, the patterns in the static context are used to attempt to validate the document. If one succeeds, the validated document is returned. If none succeed, that’s an error.</p>
</li>
<li>
<p>In XSLT, allow schema import to import RELAX NG grammars.</p>
</li>
</ol>
<ul>
<li>Details about role, TBD</li>
<li>Details about literal schema elements, TBD</li>
</ul>
<ol start="5">
<li>
<p>In XSLT, on elements that have a validation attribute, allow the value “relax-ng” with semantics analagous to the validate expression in XQuery.</p>
</li>
<li>
<p>In the F&amp;O functions that have “dtd-validation” and “xsd-validation” options, add a boolean “relax-ng” validation option. If true, validation is done with the patterns in the static context.</p>
</li>
</ol>
<p>There's one small wrinkle, the <a href="https://relaxng.org/compatibility-20011203.html">RELAX NG DTD Compatibility</a> specification defines some annotations that allow a RELAX NG grammar to return default attributes. That means RELAX NG validation <em>can</em> return a different document than was validated, but I'm not sure how important that support is in 2025 if there were strong objections.</p>
</div></details></div>
<div class="toot" id="created-1933"><h2>Pull request #1933 created<span class="toot-id"> #created-1933</span></h2><div class="pubdate">14 Apr at 11:26:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1933">https://github.com/qt4cg/qtspecs/pull/1933</a></div><details><summary>1271 fn:validate() function</summary><div class="markup"><p>This proposal makes schema validation (as performed by the XQuery validate expression) available as a function. This allows additional options to be defined without extending the grammar, it makes it easier to incorporate validation within a pipeline of function calls, and it makes validation available from XPath.</p>
<p>If the proposal is accepted I would propose doing some editorial reorganisation so that the current XQuery and XSLT text describing the semantics of validation are directed to the definition of this function, reducing duplication in the specs.</p>
<p>Fix #1271</p>
</div></details></div>
<div class="toot" id="created-1932"><h2>Pull request #1932 created<span class="toot-id"> #created-1932</span></h2><div class="pubdate">14 Apr at 09:25:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1932">https://github.com/qt4cg/qtspecs/pull/1932</a></div><details><summary>QT4-CG-115-01 xsl:next-match examples</summary><div class="markup"><p>Adds an example demonstrating passing of parameter through a chain of xsl:next-match instructions</p>
</div></details></div>
<div class="toot" id="created-1931"><h2>Pull request #1931 created<span class="toot-id"> #created-1931</span></h2><div class="pubdate">14 Apr at 08:57:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1931">https://github.com/qt4cg/qtspecs/pull/1931</a></div><details><summary>QT4-CG-116-02 improve description of validation</summary><div class="markup"><p>Improves the description of the semantics of the <code>xsd-validation</code> option on <code>parse-xml()</code> and <code>doc()</code>. Also brings the two functions into line by adding the <code>xsi-schema-location</code> option from <code>doc()</code> to <code>parse-xml()</code>.</p>
</div></details></div>
<div class="toot" id="created-1930"><h2>Pull request #1930 created<span class="toot-id"> #created-1930</span></h2><div class="pubdate">14 Apr at 08:42:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1930">https://github.com/qt4cg/qtspecs/pull/1930</a></div><details><summary>QT4-CG-116-04 correction to fn:function-identity</summary><div class="markup"><p>Fix a simple typo.</p>
</div></details></div>
<div class="toot" id="created-1929"><h2>Pull request #1929 created<span class="toot-id"> #created-1929</span></h2><div class="pubdate">13 Apr at 08:55:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1929">https://github.com/qt4cg/qtspecs/pull/1929</a></div><details><summary>1725 xsl:mode/@copy-namespaces</summary><div class="markup"><p>Fix #1724</p>
</div></details></div></div><p>See 3918
            more statuses in yearly archives.</p></article></main></body></html>