<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="agenda-05-27"><h2>QT4 CG meeting 123 draft agenda<span class="toot-id"> #agenda-05-27</span></h2><div class="pubdate">25 May at 09:16:15 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2025/05-27">https://qt4cg.org/meeting/agenda/2025/05-27</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-2025"><h2>Issue #2025 created<span class="toot-id"> #created-2025</span></h2><div class="pubdate">25 May at 07:36:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2025">https://github.com/qt4cg/qtspecs/issues/2025</a></div><details><summary>Combine the concepts of pins/labels and modified lookups</summary><div class="markup"><p>We have two rather separate mechanisms, both designed to solve aspects of what is essentially the same problem: lookup expressions lose too much information.</p>
<p>Pinning tries to solve the problem by saying that if the origin of the lookup is pinned, then the results of the lookup carry a label containing information about the key and the parent.</p>
<p>Modifiers like pair::* try to solve the problem by returning a map containing the key and the value as separate fields.</p>
<p>But pinning only solves part of the problem, in particular it doesn't prevent X?* flattening the result, and the <code>pairs</code> modifier only solves part of the problem, in particular it doesn't retain parentage.</p>
<p>I would like to try combining them and trying to create a mechanism that is better than either. I don't yet know exactly how this might work, but I'm thinking along the lines:</p>
<ul>
<li>Replace the concept of labelled items with labelled values (that is, a label can be attached to any value, not just an item)</li>
<li>Scrap pin() as an explicit function</li>
<li>A lookup expression like $X ? child::Y returns a sequence of labelled values (no flattening)</li>
<li>The properties of a labelled value include:
** target - the actual value
** key - the associated key (or array index)
** parent - the containing map or array</li>
<li>These properties might be made available through syntax such as <code>$LV ? target::*</code> , <code>$LV ? key::*</code>, <code>$LV ? parent::*</code> (or otherwise)</li>
<li>ancestor and ancestor-or-self can be made available as derived properties</li>
<li>Many operations when given a labelled value should automatically operate on its target, and ignore the label (rather like atomisation). Exactly which operations do this is an interesting question to which I don't yet know the answer. It's tricky because child::* returns a sequence of labelled values, and we want to be able to manipulate this in unflattened form. Perhaps child::* should instead return an array of labelled values? But then you end up with another lookup operation to extract the members of this array.</li>
</ul>
</div></details></div>
<div class="toot" id="created-2024"><h2>Pull request #2024 created<span class="toot-id"> #created-2024</span></h2><div class="pubdate">23 May at 22:50:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2024">https://github.com/qt4cg/qtspecs/pull/2024</a></div><details><summary>Add rules for $V?$X</summary><div class="markup"><p>Fix #2023</p>
</div></details></div>
<div class="toot" id="created-2023"><h2>Issue #2023 created<span class="toot-id"> #created-2023</span></h2><div class="pubdate">23 May at 08:56:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2023">https://github.com/qt4cg/qtspecs/issues/2023</a></div><details><summary>Semantics of X?$a</summary><div class="markup"><p>In ยง4.14.3.1 we describe the semantics of lookup expressions. Rules 3a to 3e and 4a to 4e all start "if the KeySpecifier KS is..." and should enumerate all the possibilities for a KeySpecifier. But the case where the KeySpecifier is a VarRef is not mentioned.</p>
<p>Of course, <code>X?$a</code> is supposed to be a shorthand for <code>X?($a)</code>, we just fail to state the fact.</p>
</div></details></div>
<div class="toot" id="created-2022"><h2>Issue #2022 created<span class="toot-id"> #created-2022</span></h2><div class="pubdate">22 May at 23:21:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2022">https://github.com/qt4cg/qtspecs/issues/2022</a></div><details><summary>Simplify optional XQuery conformance features</summary><div class="markup"><p>In XQuery I propose:</p>
<ul>
<li>Dropping the "module feature" - every conformant XQ40 implementation must support library modules</li>
<li>Merging the "schema-aware" and "typed-data" features into a single optional feature, aligned with schema-awareness in XSLT</li>
</ul>
</div></details></div>
<div class="toot" id="created-2021"><h2>Issue #2021 created<span class="toot-id"> #created-2021</span></h2><div class="pubdate">22 May at 15:04:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2021">https://github.com/qt4cg/qtspecs/issues/2021</a></div><details><summary>XSLT: Move "Patterns" section into "Template Rules"</summary><div class="markup"><p>I propose to move XSLT section ยง5.4 Patterns so it becomes ยง6.1, under Template Rules, where it will hopefully be easier to find.</p>
<p>Because this will produce a large number of diffs, I propose to make it a separate PR rather than combining it with the work I am currently doing on patterns and template rules for maps and arrays.</p>
</div></details></div>
<div class="toot" id="closed-2020"><h2>Issue #2020 closed<span class="toot-id"> #closed-2020</span></h2><div class="pubdate">22 May at 12:05:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2020">https://github.com/qt4cg/qtspecs/issues/2020</a></div><p>Reconsider the rationale for the xsl:select instruction</p></div>
<div class="toot" id="created-2020"><h2>Issue #2020 created<span class="toot-id"> #created-2020</span></h2><div class="pubdate">22 May at 06:29:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2020">https://github.com/qt4cg/qtspecs/issues/2020</a></div><details><summary>Reconsider the rationale for the xsl:select instruction</summary><div class="markup"><p>The <a href="https://qt4cg.org/specifications/xslt-40/Overview.html#element-select">section for xsl:select</a> in the XSLT specification includes the following rationale:</p>
<blockquote>
<p>An XPath expression written within an XML attribute is subjected by the XML parser to attribute value normalization, which changes the arrangement of whitespace within the value. While this will rarely affect the actual meaning of the expression, it can mean that formatting is lost. <strong>Multi-line attribute values are therefore best avoided.</strong> The loss of formatting also makes it difficult for an XSLT processor to provide precise error locations.</p>
</blockquote>
<p>There are good reasons why <code>xsl:select</code> would be a useful instruction, but I don't think providing precise error locations is one of them. This is just circumventing a problem that is solvable today for <code>select</code> attributes. If an implementer wanted to supply a more precise error location in attribute values (and this would certainly help developers) they could adopt a solution similar to the <a href="https://tc39.es/ecma426/#sec-intro">Ecma SourceMap</a> used by EcmaScript transpilers and minifiers.</p>
<p>In XSLT 3.0, we frequently work with multi-line <code>select</code> attribute values on XSLT instructions without major issues. Examples include: when calling using  <code>fold-left()</code> functions with one or more inner functions or using multi-case if/else expressions. Using <code>xsl:select</code> just to get good error messages does not seem like a good trade-off for the added verbosity.</p>
<p>For these cases, one can either use a simple XPath linter in the XSLT editor to highlight the specific error tokens caused by basic typos and unresolved references, and then fall back on using the compiler error messages with approximate line-numbers for (the many) cases that the linter cannot pick up.</p>
<h2>Precise XSLT Error Locations and AI Agents</h2>
<p>Modern XSLT editors are today fully integrated with AI Agents (e.g. GitHub Copilot or AI Positron). These agents use reported error-locations to explain and suggest a fix for the XSLT problem for the user. Precise error locations are critical to the quality of the explanation and the fix. This help should be available equally for XSLT <code>select</code> attributes or <code>xsl:select</code> instructions.</p>
</div></details></div>
<div class="toot" id="created-2019"><h2>Pull request #2019 created<span class="toot-id"> #created-2019</span></h2><div class="pubdate">21 May at 22:59:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2019">https://github.com/qt4cg/qtspecs/pull/2019</a></div><details><summary>1776: XSLT template rules for maps and array</summary><div class="markup"><p>Currently work In progress, committed so that the draft can be reviewed.</p>
<p>Changes in three main areas:</p>
<ul>
<li>Pattern syntax: patterns such as <code>?item</code> and <code>?parent?item</code> are defined to match items in a map by their key</li>
<li>Built-in template rules for on-no-match="shallow-copy-all". Revisits the built in template rules for this scenario.</li>
<li>General revision of the processing model for xsl:apply-templates applied to a tree of maps and arrays.</li>
</ul>
</div></details></div>
<div class="toot" id="created-2018"><h2>Issue #2018 created<span class="toot-id"> #created-2018</span></h2><div class="pubdate">21 May at 19:44:07 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2018">https://github.com/qt4cg/qtspecs/issues/2018</a></div><details><summary>Type-checking the result of xsl:apply-templates</summary><div class="markup"><p>Code that calls <code>xsl:apply-templates</code> inevitably has expectations about the type of the result. For example someone doing</p>
<p><code>&lt;xsl:apply-templates select="@*"/&gt;</code></p>
<p>may have an expectation that the result will be a sequence of attribute nodes, and the code might fail untidily if it is anything else. There is currently no way of stating this expectation, or of triggering coercion on the result. We have added an attribute <code>xsl:mode/@as</code> but different calls on apply-templates in the same mode may have different expectations. (I'm seeing this particularly with modes that process maps and arrays)</p>
<p>We could add an <code>as</code> attribute to xsl:apply-templates to make the expectation explicit.</p>
</div></details></div>
<div class="toot" id="created-2017"><h2>Issue #2017 created<span class="toot-id"> #created-2017</span></h2><div class="pubdate">21 May at 13:31:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2017">https://github.com/qt4cg/qtspecs/issues/2017</a></div><details><summary>`fn:sort-by`: Observations</summary><div class="markup"><p>We should make the second parameter obligatory (<code>fn:sort-by(1 to 3)</code> seems confusing).</p>
<p><code>sort(keys := fn { ?key })</code> occurs twice in the remaining text; should be <code>sort(key := fn { ?key })</code>.</p>
</div></details></div>
<div class="toot" id="closed-1795"><h2>Issue #1795 closed<span class="toot-id"> #closed-1795</span></h2><div class="pubdate">21 May at 09:19:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1795">https://github.com/qt4cg/qtspecs/issues/1795</a></div><p>XSLT templates: Matching values in a map by key</p></div>
<div class="toot" id="closed-1981"><h2>Issue #1981 closed<span class="toot-id"> #closed-1981</span></h2><div class="pubdate">21 May at 08:44:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1981">https://github.com/qt4cg/qtspecs/issues/1981</a></div><p>Syntax for QName literals clashes with XQuery pragmas</p></div>
<div class="toot" id="created-2016"><h2>Issue #2016 created<span class="toot-id"> #created-2016</span></h2><div class="pubdate">21 May at 06:42:30 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2016">https://github.com/qt4cg/qtspecs/issues/2016</a></div><details><summary>File Module: Incorporate changes</summary><div class="markup"><p>The EXPath File Module must be revised in several steps. First of all, several functions need to be incorporated that were added to the initial version (details: https://docs.basex.org/12/File_Functions).</p>
</div></details></div>
<div class="toot" id="created-2015"><h2>Pull request #2015 created<span class="toot-id"> #created-2015</span></h2><div class="pubdate">21 May at 00:09:08 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2015">https://github.com/qt4cg/qtspecs/pull/2015</a></div><details><summary>2009 Avoid constructing document node when it makes no sense</summary><div class="markup"><p>Fix #2009</p>
<p>The rules for xsl:variable are changed so there is no attempt to construct an implicit temporary tree when the sequence constructor contains an <code>xsl:map</code>. <code>xsl:array</code>, or <code>xsl:select</code> instruction (perhaps mixed with other instructions).</p>
<p>Compatibility: note that <code>xsl:array</code> and <code>xsl:select</code> are new in 4.0, while xsl:map inside <code>xsl:variable</code> always throws an error in XSLT 3.0.</p>
<p>Justification:</p>
<ul>
<li>a child <code>xsl:select</code> element behaves like a <code>select</code> attribute</li>
<li>if the content of xsl:variable is <code>xsl:map</code> or <code>xsl:array</code> it makes no sense to require the user to add <code>as=map(*)</code> or <code>as=array(*)</code> because the type is obvious anyway.</li>
</ul>
</div></details></div>
<div class="toot" id="created-2014"><h2>Pull request #2014 created<span class="toot-id"> #created-2014</span></h2><div class="pubdate">20 May at 21:50:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2014">https://github.com/qt4cg/qtspecs/pull/2014</a></div><details><summary>QT4CG-122-01 Add notes, examples, and rationale for xsl:select</summary><div class="markup"><p>Completes action QT4CG-122-01</p>
</div></details></div>
<div class="toot" id="closed-2008"><h2>Issue #2008 closed<span class="toot-id"> #closed-2008</span></h2><div class="pubdate">20 May at 18:07:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2008">https://github.com/qt4cg/qtspecs/pull/2008</a></div><p>2004 Add xsl:select instruction</p></div>
<div class="toot" id="closed-2004"><h2>Issue #2004 closed<span class="toot-id"> #closed-2004</span></h2><div class="pubdate">20 May at 18:07:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2004">https://github.com/qt4cg/qtspecs/issues/2004</a></div><p>xsl:xpath instruction</p></div>
<div class="toot" id="minutesโ05-20"><h2>QT4 CG meeting 122 draft minutes<span class="toot-id"> #minutesโ05-20</span></h2><div class="pubdate">20 May at 16:20:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2025/05-20">https://qt4cg.org/meeting/minutes/2025/05-20</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-2006"><h2>Issue #2006 closed<span class="toot-id"> #closed-2006</span></h2><div class="pubdate">20 May at 16:10:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2006">https://github.com/qt4cg/qtspecs/pull/2006</a></div><p>2005 Add fn:apply-templates function</p></div>
<div class="toot" id="closed-2005"><h2>Issue #2005 closed<span class="toot-id"> #closed-2005</span></h2><div class="pubdate">20 May at 16:10:56 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2005">https://github.com/qt4cg/qtspecs/issues/2005</a></div><p>apply-templates() as a function</p></div>
<div class="toot" id="closed-1991"><h2>Issue #1991 closed<span class="toot-id"> #closed-1991</span></h2><div class="pubdate">20 May at 16:08:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1991">https://github.com/qt4cg/qtspecs/pull/1991</a></div><p>835 Add built-in named record types to static context</p></div>
<div class="toot" id="closed-1085"><h2>Issue #1085 closed<span class="toot-id"> #closed-1085</span></h2><div class="pubdate">20 May at 16:06:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1085">https://github.com/qt4cg/qtspecs/issues/1085</a></div><p>Parameters to fn:sort</p></div>
<div class="toot" id="closed-2001"><h2>Issue #2001 closed<span class="toot-id"> #closed-2001</span></h2><div class="pubdate">20 May at 16:06:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2001">https://github.com/qt4cg/qtspecs/pull/2001</a></div><p>1085 Revert fn:sort to the 3.1 spec; introduce fn:sort-by</p></div>
<div class="toot" id="closed-1992"><h2>Issue #1992 closed<span class="toot-id"> #closed-1992</span></h2><div class="pubdate">20 May at 16:04:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1992">https://github.com/qt4cg/qtspecs/issues/1992</a></div><p>Type of fn:schema-type-record ? constructor</p></div>
<div class="toot" id="closed-1999"><h2>Issue #1999 closed<span class="toot-id"> #closed-1999</span></h2><div class="pubdate">20 May at 16:04:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1999">https://github.com/qt4cg/qtspecs/pull/1999</a></div><p>1992 Correct type of constructor function in schema-type-record</p></div>
<div class="toot" id="closed-1997"><h2>Issue #1997 closed<span class="toot-id"> #closed-1997</span></h2><div class="pubdate">20 May at 16:02:44 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1997">https://github.com/qt4cg/qtspecs/issues/1997</a></div><p>Coercion Rules: ยง3.4.1 rule 3(c)</p></div>
<div class="toot" id="closed-1998"><h2>Issue #1998 closed<span class="toot-id"> #closed-1998</span></h2><div class="pubdate">20 May at 16:02:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1998">https://github.com/qt4cg/qtspecs/pull/1998</a></div><p>1997 Correct nesting of item coercion rules</p></div>
<div class="toot" id="created-2013"><h2>Pull request #2013 created<span class="toot-id"> #created-2013</span></h2><div class="pubdate">20 May at 09:15:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2013">https://github.com/qt4cg/qtspecs/pull/2013</a></div><details><summary>748 Parse functions: consistency</summary><div class="markup"><p>Closes #748</p>
</div></details></div>
<div class="toot" id="created-2012"><h2>Issue #2012 created<span class="toot-id"> #created-2012</span></h2><div class="pubdate">19 May at 08:14:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2012">https://github.com/qt4cg/qtspecs/issues/2012</a></div><details><summary>Add array:sort-with</summary><div class="markup"><p>Issue #655 PR #795 introduced fn:sort-with.</p>
<p>We should define array:sort-with for consistency.</p>
</div></details></div></div><p>See 4087
            more statuses in yearly archives.</p></article></main></body></html>