<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="created-695"><h2>Issue #695 created<span class="toot-id"> #created-695</span></h2><div class="pubdate">12 Sep at 22:08:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/695">https://github.com/qt4cg/qtspecs/issues/695</a></div><details><summary>Step in RangeExpression</summary><div class="markup"><p>In the XPath specs, it seems that a simple modification from...</p>
<p>[34] | RangeExpr | ::= | AdditiveExpr&nbsp;( "to"&nbsp;AdditiveExpr&nbsp;)?
-- | -- | -- | --</p>
<p>...to...</p>
<p>[34] | RangeExpr | ::= | AdditiveExpr&nbsp;( "to"&nbsp;AdditiveExpr ("step" AdditiveExpr)?&nbsp;)?
-- | -- | -- | --</p>
<p>...would be nonintrusive, and bring some nice benefits customary in other PLs, allowing expressions such as <code>1 to 9 step 2</code> and <code>100 to -100 step -4</code>.</p>
<p>Thoughts?</p>
</div></details></div>
<div class="toot" id="created-694"><h2>Pull request #694 created<span class="toot-id"> #created-694</span></h2><div class="pubdate">12 Sep at 21:57:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/694">https://github.com/qt4cg/qtspecs/pull/694</a></div><details><summary>XQFO minor edits, with new examples and notes, 2 through 4.6</summary><div class="markup"><p>Minor edits here are motivated by clarity or localized consistency. In one case, the change of <code>0</code> to <code>0</code> to <code>0</code> to <code>9</code> appears to address an important typo.</p>
<p>I have introduced select examples, to illustrate points in the corresponding rules.</p>
<p>The notes I have introduced need some context. Option 9 for the primary format token is somewhat vague, and the attached note of clarification stokes the imagination. I have trimmed that note for clarity (without substantive changes) but introduced a set of notes later, to help caution developers on unexpected behaviors with option 9, and secondarily to caution processor implementers on the challenges inherent in supporting this option. If  I had my druthers, I would advocate deprecating option 9. It is--to use a technical term--squishy.</p>
<p>Spec editors: I am happy to pull back on any of this.</p>
</div></details></div>
<div class="toot" id="minutes-09-12"><h2>QT4 CG meeting 045 draft minutes<span class="toot-id"> #minutes-09-12</span></h2><div class="pubdate">12 Sep at 17:15:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/minutes/2023/09-12">https://qt4cg.org/meeting/minutes/2023/09-12</a></div><p>Draft minutes published.</p></div>
<div class="toot" id="closed-160"><h2>Issue #160 closed<span class="toot-id"> #closed-160</span></h2><div class="pubdate">12 Sep at 16:13:36 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/160">https://github.com/qt4cg/qtspecs/issues/160</a></div><p>Support named arguments on dynamic function calls</p></div>
<div class="toot" id="closed-672"><h2>Issue #672 closed<span class="toot-id"> #closed-672</span></h2><div class="pubdate">12 Sep at 16:12:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/672">https://github.com/qt4cg/qtspecs/pull/672</a></div><p>XFO minor edits, chap. 1</p></div>
<div class="toot" id="closed-671"><h2>Issue #671 closed<span class="toot-id"> #closed-671</span></h2><div class="pubdate">12 Sep at 16:12:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/671">https://github.com/qt4cg/qtspecs/issues/671</a></div><p>Switch expression without operand (analogous to XSLT choose)</p></div>
<div class="toot" id="closed-678"><h2>Issue #678 closed<span class="toot-id"> #closed-678</span></h2><div class="pubdate">12 Sep at 16:12:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/678">https://github.com/qt4cg/qtspecs/pull/678</a></div><p>671 switch sans operand</p></div>
<div class="toot" id="closed-669"><h2>Issue #669 closed<span class="toot-id"> #closed-669</span></h2><div class="pubdate">12 Sep at 16:12:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/669">https://github.com/qt4cg/qtspecs/issues/669</a></div><p>Typo in XSLT §26.4 - "appearing appearing"</p></div>
<div class="toot" id="closed-679"><h2>Issue #679 closed<span class="toot-id"> #closed-679</span></h2><div class="pubdate">12 Sep at 16:12:00 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/679">https://github.com/qt4cg/qtspecs/pull/679</a></div><p>669 - fix typo "appearing appearing"</p></div>
<div class="toot" id="closed-665"><h2>Issue #665 closed<span class="toot-id"> #closed-665</span></h2><div class="pubdate">12 Sep at 16:11:48 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/665">https://github.com/qt4cg/qtspecs/issues/665</a></div><p>Typo in fn:items-before and fn:items-ending-where</p></div>
<div class="toot" id="closed-681"><h2>Issue #681 closed<span class="toot-id"> #closed-681</span></h2><div class="pubdate">12 Sep at 16:11:46 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/681">https://github.com/qt4cg/qtspecs/pull/681</a></div><p>665: Fix typos in fn:items-XX functions</p></div>
<div class="toot" id="closed-637"><h2>Issue #637 closed<span class="toot-id"> #closed-637</span></h2><div class="pubdate">12 Sep at 16:11:32 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/637">https://github.com/qt4cg/qtspecs/issues/637</a></div><p>Annotation Values: Booleans</p></div>
<div class="toot" id="closed-682"><h2>Issue #682 closed<span class="toot-id"> #closed-682</span></h2><div class="pubdate">12 Sep at 16:11:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/682">https://github.com/qt4cg/qtspecs/pull/682</a></div><p>637: allow true() and false() as function annotation values</p></div>
<div class="toot" id="closed-90"><h2>Issue #90 closed<span class="toot-id"> #closed-90</span></h2><div class="pubdate">12 Sep at 16:11:16 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/90">https://github.com/qt4cg/qtspecs/issues/90</a></div><p>Simplified simplified stylesheets</p></div>
<div class="toot" id="closed-599"><h2>Issue #599 closed<span class="toot-id"> #closed-599</span></h2><div class="pubdate">12 Sep at 16:11:15 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/599">https://github.com/qt4cg/qtspecs/pull/599</a></div><p>90: Simplified stylesheets with no xsl:version</p></div>
<div class="toot" id="closed-93"><h2>Issue #93 closed<span class="toot-id"> #closed-93</span></h2><div class="pubdate">12 Sep at 16:10:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/93">https://github.com/qt4cg/qtspecs/issues/93</a></div><p>Support order by ascending/descending from a string value.</p></div>
<div class="toot" id="closed-623"><h2>Issue #623 closed<span class="toot-id"> #closed-623</span></h2><div class="pubdate">12 Sep at 16:10:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/623">https://github.com/qt4cg/qtspecs/pull/623</a></div><p>93: sort descending</p></div>
<div class="toot" id="closed-600"><h2>Issue #600 closed<span class="toot-id"> #closed-600</span></h2><div class="pubdate">12 Sep at 16:10:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/600">https://github.com/qt4cg/qtspecs/issues/600</a></div><p>fn:decode-from-uri: counterpart of fn-encode-to-uri</p></div>
<div class="toot" id="closed-631"><h2>Issue #631 closed<span class="toot-id"> #closed-631</span></h2><div class="pubdate">12 Sep at 16:10:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/631">https://github.com/qt4cg/qtspecs/pull/631</a></div><p>600: fn:decode-from-uri</p></div>
<div class="toot" id="created-693"><h2>Issue #693 created<span class="toot-id"> #created-693</span></h2><div class="pubdate">12 Sep at 14:30:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/693">https://github.com/qt4cg/qtspecs/issues/693</a></div><details><summary>QT4 Tests without counterpart in the specs</summary><div class="markup"><p>The following functions are not defined in the current spec:</p>
<ul>
<li><code>fn:parts</code></li>
<li><code>fn:unparcel</code>, <code>fn:parcel</code></li>
<li><code>fn:xdm-to-json</code></li>
<li><code>fn:concat()</code>, etc. (sequence-values arguments)</li>
</ul>
</div></details></div>
<div class="toot" id="created-692"><h2>Pull request #692 created<span class="toot-id"> #created-692</span></h2><div class="pubdate">12 Sep at 14:21:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/692">https://github.com/qt4cg/qtspecs/pull/692</a></div><details><summary>Use sequences instead of arrays in fn:parse-uri output</summary><div class="markup"><p>Completes action QT4CG-042-01 on NW.</p>
<p>There is a corresponding PR against the test suite.</p>
</div></details></div>
<div class="toot" id="agenda-09-12"><h2>QT4 CG meeting 045 draft agenda<span class="toot-id"> #agenda-09-12</span></h2><div class="pubdate">11 Sep at 11:15:05 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2023/09-12">https://qt4cg.org/meeting/agenda/2023/09-12</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-691"><h2>Pull request #691 created<span class="toot-id"> #created-691</span></h2><div class="pubdate">08 Sep at 19:40:26 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/691">https://github.com/qt4cg/qtspecs/pull/691</a></div><details><summary>688 Semantics of local union types, enumeration types, etc</summary><div class="markup"><p>Fix #688.</p>
<p>This PR fleshes out the detailed semantics of local union types, enumeration types, and type aliases. It fills a number of gaps in the current specification but doesn't aim to change the overall intent.</p>
</div></details></div>
<div class="toot" id="created-690"><h2>Pull request #690 created<span class="toot-id"> #created-690</span></h2><div class="pubdate">08 Sep at 11:29:06 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/690">https://github.com/qt4cg/qtspecs/pull/690</a></div><details><summary>687 Clarify constructor functions for user-defined types</summary><div class="markup"><p>Clarifies the rules for constructor functions, especially for list and union types, and for types defined by means of type aliases rather than in an imported schema. Fix #687.</p>
</div></details></div>
<div class="toot" id="created-689"><h2>Issue #689 created<span class="toot-id"> #created-689</span></h2><div class="pubdate">08 Sep at 08:36:45 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/689">https://github.com/qt4cg/qtspecs/issues/689</a></div><details><summary>fn:stack-trace: keep or drop?</summary><div class="markup"><p>The current specification contains a diagnostic function called <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#func-stack-trace"><code>fn:stack-trace</code></a>. Many other languages provide a similar function: The returned output can possibly help to understand which function calls led to an error during the evaluation of a code.</p>
<p>Still, I have strong doubts that it is a good decision to include this function in the standard:</p>
<p>The specification gives you a vast amount of freedom how to implement and optimize things. As a result, it’s completely feasible and reasonable to rewrite the following code…</p>
<pre><code class="language-xquery">declare function local:double($f) {
  $f * 2
};
(1 to 6) ! local:double(.)
</code></pre>
<p>…to <code>(1 to 6) ! (. * 2)</code> at compile time. If a user adds a <code>fn:stack-overflow</code> call in the function body, s·he would expect to find the function invocation of the original code representation in the output. As always, there are technical solutions to achieve this (store additional information in the evaluation tree on the original query; suppress optimizations when <code>fn:stack-trace</code> is found), but all of them can affect the runtime behavior and lead to different evaluation trees, hiding possible bugs in the implementation (which can be a reason to call <code>fn:stack-trace</code> at all).</p>
<p>A standard should provide a minimum amount of assurance that a function behaves similarly across different implementations. At this time, I don’t believe we can’t give that guarantee.</p>
<p>Related: #55, #686</p>
<p>– As an alternative, a stack trace could optionally be created by an implementation when an error is triggered.</p>
</div></details></div>
<div class="toot" id="created-688"><h2>Issue #688 created<span class="toot-id"> #created-688</span></h2><div class="pubdate">07 Sep at 17:33:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/688">https://github.com/qt4cg/qtspecs/issues/688</a></div><details><summary>Coercion rules for union types and enumeration types</summary><div class="markup"><p>The coercion rules for enumeration types have not been defined (there is a TODO in the spec).</p>
<p>For union types (including both schema-defined and locally-defined union types), the rules appear to need some further work. Given types <code>R1</code> and <code>R2</code> that are defined by restriction from <code>B1</code> and <code>B2</code>, if an atomic value <code>V</code> is an instance of <code>B1</code> that conforms to the rules of <code>R1</code>, then the relabelling coercion means it V will now be acceptable where the required type is <code>R1</code>. But if the required type is <code>union(R1, R2)</code>, the relabelling coercion is not invoked. This feels inconsistent, since <code>union(R1, R2)</code> might be expected to accept anything that <code>R1</code> accepts.</p>
<p>Test case FunctionCall-056 (currently failing) illlustrates the problem.</p>
</div></details></div>
<div class="toot" id="created-687"><h2>Issue #687 created<span class="toot-id"> #created-687</span></h2><div class="pubdate">07 Sep at 15:21:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/687">https://github.com/qt4cg/qtspecs/issues/687</a></div><details><summary>Constructor functions for user-defined types</summary><div class="markup"><p>This is a deficiency in the 3.1 F+O specification.</p>
<p>Constructor functions for user-defined types are very poorly described:</p>
<ol>
<li>
<p>It's unclear how anonymous types are handled. The spec says there is a constructor function for every simple type in the static context. That would include anonymous types. But constructor functions for anonymous types, if they exist, are essentially useless, because their names are not known.</p>
</li>
<li>
<p>The semantics of constructor functions for user-defined list and union types are described very vaguely, by analogy with built-in types; and the analogy points to the section on built-in atomic types which doesn't cover union and list types.</p>
</li>
<li>
<p>For a union type <code>U</code>, it says that the return type of the constructor U(x) is defined as <code>xs:anyAtomicType</code>. Why not define it as <code>U</code>? Perhaps this predates the ability to use union types as return types.</p>
</li>
</ol>
</div></details></div>
<div class="toot" id="created-686"><h2>Issue #686 created<span class="toot-id"> #created-686</span></h2><div class="pubdate">06 Sep at 21:28:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/686">https://github.com/qt4cg/qtspecs/issues/686</a></div><details><summary>XQFO presentation of diagnostic functions</summary><div class="markup"><p>From an informal discussion on Slack, I feel that clarity is needed in the <a href="https://qt4cg.org/specifications/xpath-functions-40/Overview.html#diagnostics">Diagnostic tracing</a> section. The problem is that <code>fn:trace()</code> and <code>fn:log()</code> introduce the terms "trace output" with no definition or explanation, and this is easily confused with the primary output defined by the function signatures, and affects how readers think about the determinism of the functions. "The serialization of the trace output..." implies that the processor will necessarily serialize something, but I doubt that can or should be presumed. More needs to be said about the responsibilities of the processor in the contract for these functions.</p>
<p>In my opinion, this section would benefit from a brief preamble, providing context to set the stage for the rules. Some draft text for us to discuss:</p>
<blockquote>
<p>Diagnostic tracing functions provide a transfer of information, either from the processor to the dynamic context, or vice versa.</p>
<p>The function that transfers information from the processor to the dynamic context, <code>fn:stack-trace()</code>, returns a string that can be further processed and used in the XPath expression and elsewhere in a host language.</p>
<p>The functions that transfer information from the dynamic context to the processor, <code>fn:trace()</code> and <code>fn:log()</code>, each have two effects. The first effect, the output, pertains to the returned values, defined by the function signature and essential to the XPath expression. Such output is always deterministic. The second effect, processor behavior, concerns the way the processor handles the values bound to the parameters, supplied for diagnostic tracing. Processor behavior is always directed toward the user or environment that invoked the processor. Actions may include sending messages, serializing the values and writing them to a log file or database, or something else. Unlike the output (the first effect), the results of processor behavior are implementation-defined and nondeterministic with respect to order of the parameter values.</p>
</blockquote>
<p>The draft above attempts to avoid "output" to describe the processor-side diagnostics, so as to avoid potential confusion when dealing with the return-type defined in the signature. Where "trace output" appears in each of the rules, "processor behavior" can be used instead.</p>
<p>Questions:</p>
<ul>
<li>Any objections, corrections, or suggestions?</li>
<li>Any other examples of how a processor might use trace diagnostics?</li>
<li>Should a paragraph be added to explain briefly how <code>trace()</code> and <code>log()</code> differ from <code>xsl:message</code>? (E.g., a serialized tree should not be presumed.)</li>
<li>In the informal Balisage birds-of-a-feather discussion this summer, reservations were expressed by participants about the name <code>log()</code>. Is it possible to drop the function and simply extend the arity of <code>trace()</code> with a parameter <code>$return-input as xs:boolean? := true()</code>?</li>
</ul>
</div></details></div>
<div class="toot" id="closed-685"><h2>Issue #685 closed<span class="toot-id"> #closed-685</span></h2><div class="pubdate">06 Sep at 09:59:52 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/685">https://github.com/qt4cg/qtspecs/pull/685</a></div><p>Style fixes</p></div>
<div class="toot" id="created-685"><h2>Pull request #685 created<span class="toot-id"> #created-685</span></h2><div class="pubdate">06 Sep at 09:49:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/685">https://github.com/qt4cg/qtspecs/pull/685</a></div><details><summary>Style fixes</summary><div class="markup"><ol>
<li>Put the XSLT processor version comment at the end of the file instead of the beginning. Putting it before the <code>&lt;!DOCTYPE html&gt;</code> forces browsers into quirks mode.</li>
<li>Improve the XPath Functions stylesheets so that they don't put <code>div</code> elements inside <code>p</code> elements when outputting examples.</li>
</ol>
</div></details></div></div><p>See 1267
            more statuses in yearly archives.</p></article></main></body></html>