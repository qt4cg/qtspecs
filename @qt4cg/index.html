<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta charset="UTF-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1"><link rel="stylesheet" href="/css/status.css"><title>@qt4cg statuses</title></head><body><main><article><h1>@qt4cg statuses</h1><p>This page displays recent status
            updates
            about the QT4CG project.</p><p>The are also captured in <a href="status.rss">an RSS feed</a>.</p><p>By year: <a href="2025/">2025</a>, <a href="2024/">2024</a>, <a href="2023/">2023</a>, <a href="2022/">2022</a>, <a href="2021/">2021</a>, <a href="2020/">2020</a></p><div class="toots">
<div class="toot" id="agenda-06-10"><h2>QT4 CG meeting 124 draft agenda<span class="toot-id"> #agenda-06-10</span></h2><div class="pubdate">09 Jun at 07:30:00 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2025/06-10">https://qt4cg.org/meeting/agenda/2025/06-10</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-2040"><h2>Issue #2040 created<span class="toot-id"> #created-2040</span></h2><div class="pubdate">08 Jun at 19:56:22 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2040">https://github.com/qt4cg/qtspecs/issues/2040</a></div><details><summary>XQuery context value declaration</summary><div class="markup"><p>Section 5.17:</p>
<ul>
<li>
<p>there is no changes entry flagging the fact that the coercion rules are now applied (and corresponding test cases such as contextDecl-037a do not identity a PR). The relevant PR is PR #254 .</p>
</li>
<li>
<p>The statement "<em>The context value declaration has the effect of setting the context value static type T in the static context.</em>" is incorrect. The static context no longer includes a context value static type.</p>
</li>
<li>
<p>The statement "<em>In all cases where the context value has a value, that value must match the type T according to the rules for SequenceType matching</em>" is incorrect (or at least, misleading): as stated two paragraphs later, coercion is applied. But because there can be multiple context value declarations in different modules, specifying different types, perhaps the intent is that coercion is applied only to a value supplied in the query, and not to a value supplied externally? If so, this needs clarifying. There are apparently no tests for coercing an externally-supplied value to the required type.</p>
</li>
</ul>
</div></details></div>
<div class="toot" id="created-2039"><h2>Issue #2039 created<span class="toot-id"> #created-2039</span></h2><div class="pubdate">07 Jun at 21:37:09 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2039">https://github.com/qt4cg/qtspecs/issues/2039</a></div><details><summary>Generalize context item to context value in XSLT</summary><div class="markup"><p>Various places, for example the xsl:context-item declaration and the xsl:evaluate/@context-item attribute, should be updated to allow the there being a context value rather than a context item.</p>
<p>At present the context value at instruction level is always either a singleton or absent. We should consider generalizing this to align with XPath, where the <code>-&gt;</code> and <code>?[....]</code> operators allow the context value to be an arbitrary sequence.</p>
<p>An xsl:for-each-member instruction that iterates over an array and binds each member to the context value would make sense.</p>
</div></details></div>
<div class="toot" id="created-2038"><h2>Issue #2038 created<span class="toot-id"> #created-2038</span></h2><div class="pubdate">05 Jun at 14:04:27 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2038">https://github.com/qt4cg/qtspecs/issues/2038</a></div><details><summary>Drop dependency of fn:apply-templates on the default mode</summary><div class="markup"><p>The new <code>fn:apply-templates</code> function in XSLT can invoke the "default mode", either by specifying <code>mode="#default"</code> or by not specifying a mode. The default mode is defined by the nearest containing instruction that has a <code>[xsl:]default-mode</code> attribute.</p>
<p>I would like to drop this dependency.</p>
<p>Most of the cases where a function call depends on the static context (especially an XSLT function) are cases where the relevant property is fixed for a package (e.g. the set of named keys, decimal formats, or character maps). There are places where there is a dependency on something tha can vary in a more fine-grained way - notably (a) the default collation, and (b) the set of namespace bindings, but on the whole such dependencies are undesirable (a) because they introduce opportunities for user error (e.g. when copying and pasting code) and (b) because they increase the amount of information the processor has to keep around at runtime just in case it is needed (for example, in a dynamic function call). I would therefore like to avoid introducing this dependency.</p>
<p>The proposed change is (a) to drop "#default" as a value of the <code>mode</code> option for this function, and (b) to say that if no mode is specified by <code>fn:apply-templates</code> the unnamed mode is used.</p>
</div></details></div>
<div class="toot" id="created-2037"><h2>Pull request #2037 created<span class="toot-id"> #created-2037</span></h2><div class="pubdate">03 Jun at 14:45:18 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2037">https://github.com/qt4cg/qtspecs/pull/2037</a></div><details><summary>2036 Add rule for streamability of xsl:map</summary><div class="markup"><p>Fix #2036</p>
</div></details></div>
<div class="toot" id="created-2036"><h2>Issue #2036 created<span class="toot-id"> #created-2036</span></h2><div class="pubdate">03 Jun at 14:34:31 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2036">https://github.com/qt4cg/qtspecs/issues/2036</a></div><details><summary>Streamability of xsl:map instruction</summary><div class="markup"><p>The special condition that allows more than one operand of xsl:map to be consuming should apply only if the <code>duplicates</code> attribute is absent (defaulting to "error"). If duplicates are allowed then in general the result cannot be streamed.</p>
</div></details></div>
<div class="toot" id="closed-1955"><h2>Issue #1955 closed<span class="toot-id"> #closed-1955</span></h2><div class="pubdate">02 Jun at 21:23:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1955">https://github.com/qt4cg/qtspecs/issues/1955</a></div><p>fn:doc, fn:parse-xml: entity expansion</p></div>
<div class="toot" id="created-2035"><h2>Issue #2035 created<span class="toot-id"> #created-2035</span></h2><div class="pubdate">02 Jun at 17:00:40 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2035">https://github.com/qt4cg/qtspecs/issues/2035</a></div><details><summary>Recursive record types: unrealistic example in XSLT spec</summary><div class="markup"><p>The example of mutually-recursive record types in XSLT ยง3.2.8.3.1 (using the schema component model as an example) is unrealistic, because an instance of this structure would be cyclic at the instance level, and therefore would be non-instantiable. In practice, the only way to represent cyclic structures using maps and arrays is by use of functions to represent some of the relationships, as we do in the schema record type returned by functions such as fn:schema-type(). We should change the example to use this technique and explain why it is being used: it would still illustrate the point; although it would be in danger of becoming excessively complicated.</p>
</div></details></div>
<div class="toot" id="created-2034"><h2>Issue #2034 created<span class="toot-id"> #created-2034</span></h2><div class="pubdate">01 Jun at 18:33:53 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2034">https://github.com/qt4cg/qtspecs/issues/2034</a></div><details><summary>fn:parse-xml, fn:doc: `safe` option</summary><div class="markup"><p>This issue replaces #1955.</p>
<p>The first feedback that we got for the <code>entity-expansion-limit</code> option indicates that our current solution is neither fish nor fowl (weder Fisch noch Fleisch?):</p>
<ol>
<li>
<p>With the initial suggestion in #1860, I hoped we could define sane defaults to prevent attacks caused by <code>fn:parse-xml</code> and <code>fn:doc</code>. This turned out to be difficult. Instead, we now have two specific options (allow-external-entities, entity-expansion-limit) that need to be explicitly assigned to make parsing safer.</p>
</li>
<li>
<p>In order to parse certain XML documents, like <a href="https://dblp.org/xml/dblp.xml.gz"><code>dblp..xml.gz</code></a>, more than one JDK 11 limit needs to be increased:</p>
</li>
</ol>
<pre><code>http://www.oracle.com/xml/jaxp/properties/entityExpansionLimit
http://www.oracle.com/xml/jaxp/properties/maxGeneralEntitySizeLimit
http://www.oracle.com/xml/jaxp/properties/totalEntitySizeLimit
</code></pre>
<p>As we have observed, XML parsing depends on the specific XML parsers. I believe it would be more user-friendly to replace the specific settings with a single option <code>safe</code>, and to let the processor decide which properties are assigned:</p>
<ol>
<li><code>true</code> (default): Avoid XXE and billion laughs attacks</li>
<li><code>false</code>: disable safe parsing (increase limits, allow parsing of external resources)</li>
</ol>
</div></details></div>
<div class="toot" id="created-2033"><h2>Pull request #2033 created<span class="toot-id"> #created-2033</span></h2><div class="pubdate">29 May at 13:41:43 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2033">https://github.com/qt4cg/qtspecs/pull/2033</a></div><details><summary>2032 Fix typo in example</summary><div class="markup"><p>Fix #2032</p>
</div></details></div>
<div class="toot" id="created-2032"><h2>Issue #2032 created<span class="toot-id"> #created-2032</span></h2><div class="pubdate">29 May at 05:43:47 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2032">https://github.com/qt4cg/qtspecs/issues/2032</a></div><details><summary>Simple typo in XPath 4.0 example - inherited from XPath 3.0 spec</summary><div class="markup"><p>Location of typo: <a href="https://qt4cg.org/specifications/xquery-40/xpath-40.xml#id-array-test">Array Types</a> section.</p>
<p>Current text:</p>
<p><code>[ 1, 2 ] instance array(*) returns true()</code></p>
<p>Expected text:</p>
<p><code>[ 1, 2 ] instance of array(*) returns true()</code></p>
</div></details></div>
<div class="toot" id="created-2031"><h2>Pull request #2031 created<span class="toot-id"> #created-2031</span></h2><div class="pubdate">28 May at 17:55:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2031">https://github.com/qt4cg/qtspecs/pull/2031</a></div><details><summary>2025 JNodes</summary><div class="markup"><p>Fix #2025</p>
<p>This is a first draft for review.</p>
<p>It includes changes to the data model, functions and operators, and XQuery/XPath. It does not yet include changes to XSLT.</p>
<p>It's a big proposal, but I think it removes more complexity from the spec than it adds. It's basically a unification of two concepts, both of which were addressing aspects of the same problem, namely that lookup expressions lose too much information. It gets rid of the pin/label mechanism, and modifiers on lookup expressions, and introduces JNodes and JAxes in their place. (Any suggestions for improved terminology are more than welcome.)</p>
<p>I think we get a lot more "bangs for the buck" with this solution, and it makes navigation of JSON trees work in a much closer way to familiar navigation of XML trees. It needs a lot more work on examples and explanation, of course.</p>
</div></details></div>
<div class="toot" id="closed-1859"><h2>Issue #1859 closed<span class="toot-id"> #closed-1859</span></h2><div class="pubdate">28 May at 10:04:37 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/1859">https://github.com/qt4cg/qtspecs/issues/1859</a></div><p>Question on `fn:chain` and `err:FOAP0001`</p></div>
<div class="toot" id="closed-1894"><h2>Issue #1894 closed<span class="toot-id"> #closed-1894</span></h2><div class="pubdate">28 May at 09:46:57 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1894">https://github.com/qt4cg/qtspecs/pull/1894</a></div><p>Additional examples to fn:chain - in a new branch</p></div>
<div class="toot" id="closed-1883"><h2>Issue #1883 closed<span class="toot-id"> #closed-1883</span></h2><div class="pubdate">28 May at 09:45:14 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1883">https://github.com/qt4cg/qtspecs/pull/1883</a></div><p>882 Replace fn:chain by fn:compose</p></div>
<div class="toot" id="created-2030"><h2>Pull request #2030 created<span class="toot-id"> #created-2030</span></h2><div class="pubdate">28 May at 09:14:04 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2030">https://github.com/qt4cg/qtspecs/pull/2030</a></div><details><summary>2029 xsd validator notes and examples</summary><div class="markup"><p>Adds more explanation to xsd:validator</p>
<p>Extracts material from the XQuery and XSLT specs describing the validation process, moving this to a new section in F&amp;O, to reduce duplication.</p>
<p>Fix #2029</p>
</div></details></div>
<div class="toot" id="closed-1959"><h2>Issue #1959 closed<span class="toot-id"> #closed-1959</span></h2><div class="pubdate">27 May at 16:14:55 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1959">https://github.com/qt4cg/qtspecs/pull/1959</a></div><p>1953 (part) XSLT Worked example using methods to implement atomic sets</p></div>
<div class="toot" id="closed-882"><h2>Issue #882 closed<span class="toot-id"> #closed-882</span></h2><div class="pubdate">27 May at 16:11:35 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/882">https://github.com/qt4cg/qtspecs/issues/882</a></div><p>fn:chain or fn:compose</p></div>
<div class="toot" id="closed-1984"><h2>Issue #1984 closed<span class="toot-id"> #closed-1984</span></h2><div class="pubdate">27 May at 16:11:34 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/1984">https://github.com/qt4cg/qtspecs/pull/1984</a></div><p>882 Drop fn:chain</p></div>
<div class="toot" id="closed-2023"><h2>Issue #2023 closed<span class="toot-id"> #closed-2023</span></h2><div class="pubdate">27 May at 16:06:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2023">https://github.com/qt4cg/qtspecs/issues/2023</a></div><p>Semantics of X?$a</p></div>
<div class="toot" id="closed-2024"><h2>Issue #2024 closed<span class="toot-id"> #closed-2024</span></h2><div class="pubdate">27 May at 16:06:20 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2024">https://github.com/qt4cg/qtspecs/pull/2024</a></div><p>Add rules for $V?$X</p></div>
<div class="toot" id="created-2029"><h2>Issue #2029 created<span class="toot-id"> #created-2029</span></h2><div class="pubdate">27 May at 09:26:25 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2029">https://github.com/qt4cg/qtspecs/issues/2029</a></div><details><summary>fn:xsd-validator - more explanation needed</summary><div class="markup"><p>See action QT4CG-119-02</p>
<p>In the review when the function was accepted, I was asked to supply more notes and examples indicating how the various options for assembling a schema interacted with each other.</p>
</div></details></div>
<div class="toot" id="created-2028"><h2>Pull request #2028 created<span class="toot-id"> #created-2028</span></h2><div class="pubdate">27 May at 09:19:02 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2028">https://github.com/qt4cg/qtspecs/pull/2028</a></div><details><summary>2027 '#' syntax for computed PIs and namespaces</summary><div class="markup"><p>Fix #2027</p>
</div></details></div>
<div class="toot" id="created-2027"><h2>Issue #2027 created<span class="toot-id"> #created-2027</span></h2><div class="pubdate">27 May at 08:05:58 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2027">https://github.com/qt4cg/qtspecs/issues/2027</a></div><details><summary>QNameLiteral syntax for namespace and Processing Instruction constructors</summary><div class="markup"><p>Action QT4CG-021-01 (should be QT4CG-121-01)</p>
<p>We now allow QNameLiterals to be used in element and attribute constructors, for example <code>attribute #xml:space {"default"}</code>.</p>
<p>For symmetry we need a similar syntax for namespace and processing-instruction constructors. These have the same ambiguity problem if the node name clashes with a reserved word such as "div", but they are constrained to be NCNames (or no-namespace QNames, depending on your perspective).</p>
<p>One possible solution is to use a new construct such as NCNameLiteral (but the name is wrong, unless we also allow it to be used in contexts where a Literal is allowed). Another possibility is for the grammar to allow a QNameLiteral, but for the semantics to restrict it to be in no namespace.</p>
</div></details></div>
<div class="toot" id="created-2026"><h2>Pull request #2026 created<span class="toot-id"> #created-2026</span></h2><div class="pubdate">26 May at 23:32:23 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2026">https://github.com/qt4cg/qtspecs/pull/2026</a></div><details><summary>2022 Drop module feature</summary><div class="markup"><p>Fix #2022</p>
<p>The effect is that support for library modules is no longer optional.</p>
<p>I decided not to pursue merging the "schema import" and "typed data" features into one.</p>
</div></details></div>
<div class="toot" id="agenda-05-27"><h2>QT4 CG meeting 123 draft agenda<span class="toot-id"> #agenda-05-27</span></h2><div class="pubdate">25 May at 09:16:15 GMT</div><div class="link">Link: <a href="https://qt4cg.org/meeting/agenda/2025/05-27">https://qt4cg.org/meeting/agenda/2025/05-27</a></div><p>Draft agenda published.</p></div>
<div class="toot" id="created-2025"><h2>Issue #2025 created<span class="toot-id"> #created-2025</span></h2><div class="pubdate">25 May at 07:36:49 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2025">https://github.com/qt4cg/qtspecs/issues/2025</a></div><details><summary>Combine the concepts of pins/labels and modified lookups</summary><div class="markup"><p>We have two rather separate mechanisms, both designed to solve aspects of what is essentially the same problem: lookup expressions lose too much information.</p>
<p>Pinning tries to solve the problem by saying that if the origin of the lookup is pinned, then the results of the lookup carry a label containing information about the key and the parent.</p>
<p>Modifiers like pair::* try to solve the problem by returning a map containing the key and the value as separate fields.</p>
<p>But pinning only solves part of the problem, in particular it doesn't prevent X?* flattening the result, and the <code>pairs</code> modifier only solves part of the problem, in particular it doesn't retain parentage.</p>
<p>I would like to try combining them and trying to create a mechanism that is better than either. I don't yet know exactly how this might work, but I'm thinking along the lines:</p>
<ul>
<li>Replace the concept of labelled items with labelled values (that is, a label can be attached to any value, not just an item)</li>
<li>Scrap pin() as an explicit function</li>
<li>A lookup expression like $X ? child::Y returns a sequence of labelled values (no flattening)</li>
<li>The properties of a labelled value include:
** target - the actual value
** key - the associated key (or array index)
** parent - the containing map or array</li>
<li>These properties might be made available through syntax such as <code>$LV ? target::*</code> , <code>$LV ? key::*</code>, <code>$LV ? parent::*</code> (or otherwise)</li>
<li>ancestor and ancestor-or-self can be made available as derived properties</li>
<li>Many operations when given a labelled value should automatically operate on its target, and ignore the label (rather like atomisation). Exactly which operations do this is an interesting question to which I don't yet know the answer. It's tricky because child::* returns a sequence of labelled values, and we want to be able to manipulate this in unflattened form. Perhaps child::* should instead return an array of labelled values? But then you end up with another lookup operation to extract the members of this array.</li>
</ul>
</div></details></div>
<div class="toot" id="created-2024"><h2>Pull request #2024 created<span class="toot-id"> #created-2024</span></h2><div class="pubdate">23 May at 22:50:59 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/pull/2024">https://github.com/qt4cg/qtspecs/pull/2024</a></div><details><summary>Add rules for $V?$X</summary><div class="markup"><p>Fix #2023</p>
</div></details></div>
<div class="toot" id="created-2023"><h2>Issue #2023 created<span class="toot-id"> #created-2023</span></h2><div class="pubdate">23 May at 08:56:21 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2023">https://github.com/qt4cg/qtspecs/issues/2023</a></div><details><summary>Semantics of X?$a</summary><div class="markup"><p>In ยง4.14.3.1 we describe the semantics of lookup expressions. Rules 3a to 3e and 4a to 4e all start "if the KeySpecifier KS is..." and should enumerate all the possibilities for a KeySpecifier. But the case where the KeySpecifier is a VarRef is not mentioned.</p>
<p>Of course, <code>X?$a</code> is supposed to be a shorthand for <code>X?($a)</code>, we just fail to state the fact.</p>
</div></details></div>
<div class="toot" id="created-2022"><h2>Issue #2022 created<span class="toot-id"> #created-2022</span></h2><div class="pubdate">22 May at 23:21:50 GMT</div><div class="link">Link: <a href="https://github.com/qt4cg/qtspecs/issues/2022">https://github.com/qt4cg/qtspecs/issues/2022</a></div><details><summary>Simplify optional XQuery conformance features</summary><div class="markup"><p>In XQuery I propose:</p>
<ul>
<li>Dropping the "module feature" - every conformant XQ40 implementation must support library modules</li>
<li>Merging the "schema-aware" and "typed-data" features into a single optional feature, aligned with schema-awareness in XSLT</li>
</ul>
</div></details></div></div><p>See 4112
            more statuses in yearly archives.</p></article></main></body></html>